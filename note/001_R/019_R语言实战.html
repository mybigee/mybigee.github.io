<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<script src="https://note.ilulj.top/script/script.js"></script>
<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
  --mermaid-theme: night;
}

[lang='mermaid'] .label {
  color: #333;
}

/* CSS Document */

/** code highlight */

.cm-s-inner .cm-variable,
.cm-s-inner .cm-operator,
.cm-s-inner .cm-property {
    color: #b8bfc6;
}

.cm-s-inner .cm-keyword {
    color: #C88FD0;
}

.cm-s-inner .cm-tag {
    color: #7DF46A;
}

.cm-s-inner .cm-attribute {
    color: #7575E4;
}

.CodeMirror div.CodeMirror-cursor {
    border-left: 1px solid #b8bfc6;
    z-index: 3;
}

.cm-s-inner .cm-string {
    color: #D26B6B;
}

.cm-s-inner .cm-comment,
.cm-s-inner.cm-comment {
    color: #DA924A;
}

.cm-s-inner .cm-header,
.cm-s-inner .cm-def,
.cm-s-inner.cm-header,
.cm-s-inner.cm-def {
    color: #8d8df0;
}

.cm-s-inner .cm-quote,
.cm-s-inner.cm-quote {
    color: #57ac57;
}

.cm-s-inner .cm-hr {
    color: #d8d5d5;
}

.cm-s-inner .cm-link {
    color: #d3d3ef;
}

.cm-s-inner .cm-negative {
    color: #d95050;
}

.cm-s-inner .cm-positive {
    color: #50e650;
}

.cm-s-inner .cm-string-2 {
    color: #f50;
}

.cm-s-inner .cm-meta,
.cm-s-inner .cm-qualifier {
    color: #b7b3b3;
}

.cm-s-inner .cm-builtin {
    color: #f3b3f8;
}

.cm-s-inner .cm-bracket {
    color: #997;
}

.cm-s-inner .cm-atom,
.cm-s-inner.cm-atom {
    color: #84B6CB;
}

.cm-s-inner .cm-number {
    color: #64AB8F;
}

.cm-s-inner .cm-variable {
    color: #b8bfc6;
}

.cm-s-inner .cm-variable-2 {
    color: #9FBAD5;
}

.cm-s-inner .cm-variable-3 {
    color: #1cc685;
}

.CodeMirror-selectedtext,
.CodeMirror-selected {
    background: #4a89dc;
    color: #fff !important;
    text-shadow: none;
}

.CodeMirror-gutters {
    border-right: none;
}

/* CSS Document */

/** markdown source **/
.cm-s-typora-default .cm-header, 
.cm-s-typora-default .cm-property
{
    color: #cebcca;
}

.CodeMirror.cm-s-typora-default div.CodeMirror-cursor{
    border-left: 3px solid #b8bfc6;
}

.cm-s-typora-default .cm-comment {
    color: #9FB1FF;
}

.cm-s-typora-default .cm-string {
    color: #A7A7D9
}

.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number {
    color: #848695;
    font-style: italic;
}

.cm-s-typora-default .cm-link {
    color: #95B94B;
}

.cm-s-typora-default .CodeMirror-activeline-background {
    background: rgba(51, 51, 51, 0.72);
}

.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code {
	color: #8aa1e1;
}@import "";
@import "";
@import "";

:root {
    --bg-color:  #363B40;
    --side-bar-bg-color: #2E3033;
    --text-color: #b8bfc6;

    --select-text-bg-color:#4a89dc;

    --item-hover-bg-color: #0a0d16;
    --control-text-color: #b7b7b7;
    --control-text-hover-color: #eee;
    --window-border: 1px solid #555;

    --active-file-bg-color: rgb(34, 34, 34);
    --active-file-border-color: #8d8df0;

    --primary-color: #a3d5fe;

    --active-file-text-color: white;
    --item-hover-bg-color: #70717d;
    --item-hover-text-color: white;
    --primary-color: #6dc1e7;

    --rawblock-edit-panel-bd: #333;

    --search-select-bg-color: #428bca;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

html,
body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    background: #363B40;
    background: var(--bg-color);
    fill: currentColor;
    line-height: 1.625rem;
}

#write {
    max-width: 914px;
}


@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

html,
body,
button,
input,
select,
textarea,
div.code-tooltip-content {
    color: #b8bfc6;
    border-color: transparent;
}

div.code-tooltip,
.md-hover-tip .md-arrow:after {
    background: #333;
}

.native-window #md-notification {
    border: 1px solid #70717d;
}

.popover.bottom > .arrow:after {
    border-bottom-color: #333;
}

html,
body,
button,
input,
select,
textarea {
    font-family: "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
}

hr {
    height: 2px;
    border: 0;
    margin: 24px 0 !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: "Lucida Grande", "Corbel", sans-serif;
    font-weight: normal;
    clear: both;
    -ms-word-wrap: break-word;
    word-wrap: break-word;
    margin: 0;
    padding: 0;
    color: #DEDEDE
}

h1 {
    font-size: 2.5rem;
    /* 36px */
    line-height: 2.75rem;
    /* 40px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1.5px;
}

h2 {
    font-size: 1.63rem;
    /* 24px */
    line-height: 1.875rem;
    /* 30px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1px;
    font-weight: bold;
}

h3 {
    font-size: 1.17rem;
    /* 18px */
    line-height: 1.5rem;
    /* 24px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1px;
    font-weight: bold;
}

h4 {
    font-size: 1.12rem;
    /* 16px */
    line-height: 1.375rem;
    /* 22px */
    margin-bottom: 1.5rem;
    /* 24px */
    color: white;
}

h5 {
    font-size: 0.97rem;
    /* 16px */
    line-height: 1.25rem;
    /* 22px */
    margin-bottom: 1.5rem;
    /* 24px */
    font-weight: bold;
}

h6 {
    font-size: 0.93rem;
    /* 16px */
    line-height: 1rem;
    /* 16px */
    margin-bottom: 0.75rem;
    color: white;
}

@media (min-width: 980px) {
    h3.md-focus:before,
    h4.md-focus:before,
    h5.md-focus:before,
    h6.md-focus:before {
        color: #ddd;
        border: 1px solid #ddd;
        border-radius: 3px;
        position: absolute;
        left: -1.642857143rem;
        top: .357142857rem;
        float: left;
        font-size: 9px;
        padding-left: 2px;
        padding-right: 2px;
        vertical-align: bottom;
        font-weight: normal;
        line-height: normal;
    }

    h3.md-focus:before {
        content: 'h3';
    }

    h4.md-focus:before {
        content: 'h4';
    }

    h5.md-focus:before {
        content: 'h5';
        top: 0px;
    }

    h6.md-focus:before {
        content: 'h6';
        top: 0px;
    }
}

a {
    text-decoration: none;
    outline: 0;
}

a:hover {
    outline: 0;
}

a:focus {
    outline: thin dotted;
}

sup.md-footnote {
    background-color: #555;
    color: #ddd;
}

p {
    -ms-word-wrap: break-word;
    word-wrap: break-word;
}

p,
ul,
dd,
ol,
hr,
address,
pre,
table,
iframe,
.wp-caption,
.wp-audio-shortcode,
.wp-video-shortcode {
    margin-top: 0;
    margin-bottom: 1.5rem;
    /* 24px */
}

audio:not([controls]) {
    display: none;
}

[hidden] {
    display: none;
}

::-moz-selection {
    background: #4a89dc;
    color: #fff;
    text-shadow: none;
}

*.in-text-selection,
::selection {
    background: #4a89dc;
    color: #fff;
    text-shadow: none;
}

ul,
ol {
    padding: 0 0 0 1.875rem;
    /* 30px */
}

ul {
    list-style: square;
}

ol {
    list-style: decimal;
}

ul ul,
ol ol,
ul ol,
ol ul {
    margin: 0;
}

b,
th,
dt,
strong {
    font-weight: bold;
}

i,
em,
dfn,
cite {
    font-style: italic;
}

blockquote {
    padding-left: 1.875rem;
    margin: 0 0 1.875rem 1.875rem;
    border-left: solid 2px #474d54;
    padding-left: 30px;
    margin-top: 35px;
}

pre,
code,
kbd,
tt,
var {
    font-size: 0.875em;
    font-family: Monaco, Consolas, "Andale Mono", "DejaVu Sans Mono", monospace;
}

code,
tt,
var {
    background: rgba(0, 0, 0, 0.05);
}

kbd {
    padding: 2px 4px;
    font-size: 90%;
    color: #fff;
    background-color: #333;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);
}

pre.md-fences {
    padding: 10px 10px 10px 30px;
    margin-bottom: 20px;
    background: #333;
}

.CodeMirror-gutters {
    background: #333;
    border-right: 1px solid transparent;
}

.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="flow"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip {
    bottom: -2.2em;
    right: 4px;
}

code,
kbd,
tt,
var {
    padding: 2px 5px;
}

table {
    max-width: 100%;
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
}

th,
td {
    padding: 5px 10px;
    vertical-align: top;
}

a {
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}

hr {
    background: #474d54;
    /* variable */
}

h1 {
    margin-top: 2em;
}

a {
    color: #e0e0e0;
    text-decoration: underline;
}

a:hover {
    color: #fff;
}

.md-inline-math script {
    color: #81b1db;
}

b,
th,
dt,
strong {
    color: #DEDEDE;
    /* variable */
}

mark {
    background: #D3D40E;
}

blockquote {
    color: #9DA2A6;
}

table a {
    color: #DEDEDE;
    /* variable */
}

th,
td {
    border: solid 1px #474d54;
    /* variable */
}

.task-list {
    padding-left: 0;
}

.md-task-list-item {
    padding-left: 1.25rem;
}

.md-task-list-item > input {
    top: auto;
}

.md-task-list-item > input:before {
    content: "";
    display: inline-block;
    width: 0.875rem;
    height: 0.875rem;
    vertical-align: middle;
    text-align: center;
    border: 1px solid #b8bfc6;
    background-color: #363B40;
    margin-top: -0.4rem;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before {
    content: '\221A';
    /*◘*/
    font-size: 0.625rem;
    line-height: 0.625rem;
    color: #DEDEDE;
}

/** quick open **/
.auto-suggest-container {
    border: 0px;
    background-color: #525C65;
}

#typora-quick-open {
    background-color: #525C65;
}

#typora-quick-open input{
    background-color: #525C65;
    border: 0;
    border-bottom: 1px solid grey;
}

.typora-quick-open-item {
    background-color: inherit;
    color: inherit;
}

.typora-quick-open-item.active,
.typora-quick-open-item:hover {
    background-color: #4D8BDB;
    color: white;
}

.typora-quick-open-item:hover {
    background-color: rgba(77, 139, 219, 0.8);
}

.typora-search-spinner > div {
  background-color: #fff;
}

#write pre.md-meta-block {
    border-bottom: 1px dashed #ccc;
    background: transparent;
    padding-bottom: 0.6em;
    line-height: 1.6em;
}

.btn,
.btn .btn-default {
    background: transparent;
    color: #b8bfc6;
}

.ty-table-edit {
    border-top: 1px solid gray;
    background-color: #363B40;
}

.popover-title {
    background: transparent;
}

.md-image>.md-meta {
    color: #BBBBBB;
    background: transparent;
}

.md-expand.md-image>.md-meta {
    color: #DDD;
}

#write>h3:before,
#write>h4:before,
#write>h5:before,
#write>h6:before {
    border: none;
    border-radius: 0px;
    color: #888;
    text-decoration: underline;
    left: -1.4rem;
    top: 0.2rem;
}

#write>h3.md-focus:before {
    top: 2px;
}

#write>h4.md-focus:before {
    top: 2px;
}

.md-toc-item {
    color: #A8C2DC;
}

#write div.md-toc-tooltip {
    background-color: #363B40;
}

.dropdown-menu .btn:hover,
.dropdown-menu .btn:focus,
.md-toc .btn:hover,
.md-toc .btn:focus {
    color: white;
    background: black;
}

#toc-dropmenu {
    background: rgba(50, 54, 59, 0.93);
    border: 1px solid rgba(253, 253, 253, 0.15);
}

#toc-dropmenu .divider {
    background-color: #9b9b9b;
}

.outline-expander:before {
    top: 2px;
}

#typora-sidebar {
    box-shadow: none;
    border-right: 1px dashed;
    border-right: none;
}

.sidebar-tabs {
    border-bottom:0;
}

#typora-sidebar:hover .outline-title-wrapper {
    border-left: 1px dashed;
}

.outline-title-wrapper .btn {
    color: inherit;
}

.outline-item:hover {
    border-color: #363B40;
    background-color: #363B40;
    color: white;
}

h1.md-focus .md-attr,
h2.md-focus .md-attr,
h3.md-focus .md-attr,
h4.md-focus .md-attr,
h5.md-focus .md-attr,
h6.md-focus .md-attr,
.md-header-span .md-attr {
    color: #8C8E92;
    display: inline;
}

.md-comment {
    color: #5a95e3;
    opacity: 0.8;
}

.md-inline-math svg {
    color: #b8bfc6;
}

#math-inline-preview .md-arrow:after {
    background: black;
}

.modal-content {
    background: var(--bg-color);
    border: 0;
}

.modal-title {
    font-size: 1.5em;
}

.modal-content input {
    background-color: rgba(26, 21, 21, 0.51);
    color: white;
}

.modal-content .input-group-addon {
    color: white;
}

.modal-backdrop {
    background-color: rgba(174, 174, 174, 0.7);
}

.modal-content .btn-primary {
    border-color: var(--primary-color);
}

.md-table-resize-popover {
    background-color: #333;
}

.form-inline .input-group .input-group-addon {
    color: white;
}

#md-searchpanel {
    border-bottom: 1px dashed grey;
}

/** UI for electron */

.context-menu,
#spell-check-panel,
#footer-word-count-info {
    background-color: #42464A;
}

.context-menu.dropdown-menu .divider,
.dropdown-menu .divider {
    background-color: #777777;
    opacity: 1;
}

footer {
    color: inherit;
}

@media (max-width: 1000px) {
    footer {
        border-top: none;
    }
    footer:hover {
        color: inherit;
    }
}

#file-info-file-path .file-info-field-value:hover {
    background-color: #555;
    color: #dedede;
}

.megamenu-content,
.megamenu-opened header {
    background: var(--bg-color);
}

.megamenu-menu-panel h2,
.megamenu-menu-panel h1,
.long-btn {
    color: inherit;
}

.megamenu-menu-panel input[type='text'] {
    background: inherit;
    border: 0;
    border-bottom: 1px solid;
}

#recent-file-panel-action-btn {
    background: inherit;
    border: 1px grey solid;
}

.megamenu-menu-panel .dropdown-menu > li > a {
    color: inherit;
    background-color: #2F353A;
    text-decoration: none;
}

.megamenu-menu-panel table td:nth-child(1) {
    color: inherit;
    font-weight: bold;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(1) {
    color: white;
}

.modal-footer .btn-default, 
.modal-footer .btn-primary,
.modal-footer .btn-default:not(:hover) {
    border: 1px solid;
    border-color: transparent;
}

.btn-primary {
    color: white;
}

.btn-default:hover, .btn-default:focus, .btn-default.focus, .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default {
    color: white;
    border: 1px solid #ddd;
    background-color: inherit;
}

.modal-header {
    border-bottom: 0;
}

.modal-footer {
    border-top: 0;
}

#recent-file-panel tbody tr:nth-child(2n-1) {
    background-color: transparent !important;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(2) {
    color: inherit;
}

.megamenu-menu-panel .btn {
    border: 1px solid #eee;
    background: transparent;
}

.mouse-hover .toolbar-icon.btn:hover,
#w-full.mouse-hover,
#w-pin.mouse-hover {
    background-color: inherit;
}

.typora-node::-webkit-scrollbar {
    width: 5px;
}

.typora-node::-webkit-scrollbar-thumb:vertical {
    background: rgba(250, 250, 250, 0.3);
}

.typora-node::-webkit-scrollbar-thumb:vertical:active {
    background: rgba(250, 250, 250, 0.5);
}

#w-unpin {
    background-color: #4182c4;
}

#top-titlebar, #top-titlebar * {
    color: var(--item-hover-text-color);
}

.typora-sourceview-on #toggle-sourceview-btn,
#footer-word-count:hover,
.ty-show-word-count #footer-word-count {
    background: #333333;
}

#toggle-sourceview-btn:hover {
    color: #eee;
    background: #333333;
}

/** focus mode */
.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) * {
    color: #686868 !important;
}

.on-focus-mode .md-end-block:not(.md-focus) img,
.on-focus-mode .md-task-list-item:not(.md-focus-container)>input {
    opacity: #686868 !important;
}

.on-focus-mode li[cid]:not(.md-focus-container){
    color: #686868;
}

.on-focus-mode .md-fences.md-focus .CodeMirror-code>*:not(.CodeMirror-activeline) *,
.on-focus-mode .CodeMirror.cm-s-inner:not(.CodeMirror-focused) * {
    color: #686868 !important;
}

.on-focus-mode .md-focus,
.on-focus-mode .md-focus-container {
    color: #fff;
}

.on-focus-mode #typora-source .CodeMirror-code>*:not(.CodeMirror-activeline) * {
    color: #686868 !important;
}


/*diagrams*/
#write .md-focus .md-diagram-panel {
    border: 1px solid #ddd;
    margin-left: -1px;
    width: calc(100% + 2px);
}

/*diagrams*/
#write .md-focus.md-fences-with-lineno .md-diagram-panel {
    margin-left: auto;
}

.md-diagram-panel-error {
    color: #f1908e;
}

.active-tab-files #info-panel-tab-file,
.active-tab-files #info-panel-tab-file:hover,
.active-tab-outline #info-panel-tab-outline,
.active-tab-outline #info-panel-tab-outline:hover {
    color: #eee;
}

.sidebar-footer-item:hover,
.footer-item:hover {
    background: inherit;
    color: white;
}

.ty-side-sort-btn.active,
.ty-side-sort-btn:hover,
.selected-folder-menu-item a:after {
    color: white;
}

#sidebar-files-menu {
    border:solid 1px;
    box-shadow: 4px 4px 20px rgba(0, 0, 0, 0.79);
    background-color: var(--bg-color);
}

.file-list-item {
    border-bottom:none;
}

.file-list-item-summary {
    opacity: 1;
}

.file-list-item.active:first-child {
    border-top: none;
}

.file-node-background {
    height: 32px;
}

.file-library-node.active>.file-node-content,
.file-list-item.active {
    color: white;
    color: var(--active-file-text-color);
}

.file-library-node.active>.file-node-background{
    background-color: rgb(34, 34, 34);
    background-color: var(--active-file-bg-color);
}
.file-list-item.active {
    background-color: rgb(34, 34, 34);
    background-color: var(--active-file-bg-color);
}

#ty-tooltip {
    background-color: black;
    color: #eee;
}

.md-task-list-item>input {
    margin-left: -1.3em;
    margin-top: 0.3rem;
    -webkit-appearance: none;
}

.md-mathjax-midline {
    background-color: #57616b;
    border-bottom: none;
}

footer.ty-footer {
    border-color: #656565;
}

.ty-preferences .btn-default {
    background: transparent;
}
.ty-preferences .btn-default:hover {
    background: #57616b;
}

.ty-preferences select {
    border: 1px solid #989698;
    height: 21px;
}

.ty-preferences .nav-group-item.active,
.export-item.active,
.export-items-list-control,
.export-detail {
    background: var(--item-hover-bg-color);
}

.ty-preferences input[type="search"] {
    border-color: #333;
    background: #333;
    line-height: 22px;
    border-radius: 6px;
    color: white;
}

.ty-preferences input[type="search"]:focus {
    box-shadow: none;
}

[data-is-directory="true"] .file-node-content {
    margin-bottom: 0;
}

.file-node-title {
    line-height: 22px;
}

.html-for-mac .file-node-open-state, .html-for-mac .file-node-icon {
    line-height: 26px;
}

::-webkit-scrollbar-thumb {
    background: rgba(230, 230, 230, 0.30);
}

::-webkit-scrollbar-thumb:active {
    background: rgba(230, 230, 230, 0.50);
}

#typora-sidebar:hover div.sidebar-content-content::-webkit-scrollbar-thumb:horizontal {
    background: rgba(230, 230, 230, 0.30);
}

.nav-group-item:active {
    background-color: #474d54 !important;
}

.md-search-hit {
    background: rgba(199, 140, 60, 0.81);
    color: #eee;
}

.md-search-hit * {
    color: #eee;
}

#md-searchpanel input {
    color: white;
}

.modal-backdrop.in {
    opacity: 1;
    backdrop-filter: blur(1px);
}

.clear-btn-icon {
    top: 8px;
}


mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>019_R语言实战</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='r语言实战'><span>R语言实战</span></h1><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#r语言实战">R语言实战</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2"><a class="md-toc-inner" href="#前言">前言</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n8"><a class="md-toc-inner" href="#第一部分-入门">第一部分 入门</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n9"><a class="md-toc-inner" href="#第1章-r语言介绍">第1章 R语言介绍</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n24"><a class="md-toc-inner" href="#获取帮助">获取帮助</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n27"><a class="md-toc-inner" href="#工作空间">工作空间</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n44"><a class="md-toc-inner" href="#输入和输出">输入和输出</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n56"><a class="md-toc-inner" href="#包">包</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n76"><a class="md-toc-inner" href="#批处理">批处理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n88"><a class="md-toc-inner" href="#示例实践">示例实践</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n108"><a class="md-toc-inner" href="#第2章-创建数据集">第2章 创建数据集</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n114"><a class="md-toc-inner" href="#数据结构">数据结构</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n125"><a class="md-toc-inner" href="#矩阵">矩阵</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n135"><a class="md-toc-inner" href="#数组">数组</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n143"><a class="md-toc-inner" href="#数据框">数据框</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n164"><a class="md-toc-inner" href="#因子">因子</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n200"><a class="md-toc-inner" href="#列表">列表</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n207"><a class="md-toc-inner" href="#注意事项">注意事项</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n222"><a class="md-toc-inner" href="#数据的输入">数据的输入</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n223"><a class="md-toc-inner" href="#从键盘输入数据">从键盘输入数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n237"><a class="md-toc-inner" href="#从带分隔符的文本文件导入数据">从带分隔符的文本文件导入数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n256"><a class="md-toc-inner" href="#用连接来导入数据">用连接来导入数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n265"><a class="md-toc-inner" href="#导入excel数据">导入Excel数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n279"><a class="md-toc-inner" href="#导入xml数据">导入XML数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n283"><a class="md-toc-inner" href="#从网页抓取数据">从网页抓取数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n291"><a class="md-toc-inner" href="#导入spss数据">导入SPSS数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n299"><a class="md-toc-inner" href="#导入sas数据">导入SAS数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n315"><a class="md-toc-inner" href="#导入stata数据">导入Stata数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n317"><a class="md-toc-inner" href="#导入netcdf数据">导入NetCDF数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n322"><a class="md-toc-inner" href="#导入hdf5数据">导入HDF5数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n328"><a class="md-toc-inner" href="#访问数据库">访问数据库</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n354"><a class="md-toc-inner" href="#处理数据对象的实用函数">处理数据对象的实用函数</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n357"><a class="md-toc-inner" href="#第3章-图形初阶">第3章 图形初阶</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n367"><a class="md-toc-inner" href="#图形参数">图形参数</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n376"><a class="md-toc-inner" href="#符号和线条">符号和线条</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n386"><a class="md-toc-inner" href="#颜色">颜色</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n419"><a class="md-toc-inner" href="#文本属性">文本属性</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n432"><a class="md-toc-inner" href="#图形与边界尺度">图形与边界尺度</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n447"><a class="md-toc-inner" href="#文本坐标轴和图例">文本、坐标轴和图例</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n466"><a class="md-toc-inner" href="#标题">标题</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n472"><a class="md-toc-inner" href="#坐标轴-1">坐标轴</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n495"><a class="md-toc-inner" href="#参考线">参考线</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n501"><a class="md-toc-inner" href="#图例-1">图例</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n511"><a class="md-toc-inner" href="#文本">文本</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n527"><a class="md-toc-inner" href="#数学标注">数学标注</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n533"><a class="md-toc-inner" href="#各参数的综合使用">各参数的综合使用</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n536"><a class="md-toc-inner" href="#图形组合">图形组合</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n554"><a class="md-toc-inner" href="#图形布局的精细控制">图形布局的精细控制</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n566"><a class="md-toc-inner" href="#第4章-基本数据管理">第4章 基本数据管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n572"><a class="md-toc-inner" href="#算数运算符">算数运算符</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n578"><a class="md-toc-inner" href="#逻辑运算符">逻辑运算符</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n584"><a class="md-toc-inner" href="#变量重命名">变量重命名</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n589"><a class="md-toc-inner" href="#缺失值">缺失值</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n616"><a class="md-toc-inner" href="#日期">日期</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n648"><a class="md-toc-inner" href="#类型转换">类型转换</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n650"><a class="md-toc-inner" href="#数据排序">数据排序</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n660"><a class="md-toc-inner" href="#合并数据集">合并数据集</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n677"><a class="md-toc-inner" href="#取子集-1">取子集</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n678"><a class="md-toc-inner" href="#选取变量列）">选取变量（列）</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n682"><a class="md-toc-inner" href="#删除变量">删除变量</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n687"><a class="md-toc-inner" href="#选取观测行）">选取观测（行）</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n694"><a class="md-toc-inner" href="#取子集-2">取子集</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n700"><a class="md-toc-inner" href="#随机抽样">随机抽样</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n706"><a class="md-toc-inner" href="#使用sql语句操作数据框">使用SQL语句操作数据框</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n720"><a class="md-toc-inner" href="#第5章-高级数据管理">第5章 高级数据管理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n721"><a class="md-toc-inner" href="#数值和字符处理函数">数值和字符处理函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n722"><a class="md-toc-inner" href="#数学函数">数学函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n727"><a class="md-toc-inner" href="#统计函数">统计函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n745"><a class="md-toc-inner" href="#概率函数">概率函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n762"><a class="md-toc-inner" href="#字符处理函数">字符处理函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n764"><a class="md-toc-inner" href="#其他实用函数">其他实用函数</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n771"><a class="md-toc-inner" href="#实例">实例</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n777"><a class="md-toc-inner" href="#控制流">控制流</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n778"><a class="md-toc-inner" href="#重复和循环">重复和循环</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n786"><a class="md-toc-inner" href="#条件执行">条件执行</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n799"><a class="md-toc-inner" href="#自定义函数">自定义函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n813"><a class="md-toc-inner" href="#转置">转置</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n819"><a class="md-toc-inner" href="#整合数据">整合数据</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n828"><a class="md-toc-inner" href="#reshape2包">reshape2包</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n854"><a class="md-toc-inner" href="#第二部分-基本方法">第二部分 基本方法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n860"><a class="md-toc-inner" href="#第6章-基本图形">第6章 基本图形</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n861"><a class="md-toc-inner" href="#数据集">数据集</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n868"><a class="md-toc-inner" href="#条形图">条形图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n876"><a class="md-toc-inner" href="#简单条形图">简单条形图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n889"><a class="md-toc-inner" href="#堆砌条形图和分组条形图">堆砌条形图和分组条形图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n902"><a class="md-toc-inner" href="#均值条形图">均值条形图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n908"><a class="md-toc-inner" href="#条形图的微调">条形图的微调</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n916"><a class="md-toc-inner" href="#棘妆图">棘妆图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n926"><a class="md-toc-inner" href="#饼图">饼图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n935"><a class="md-toc-inner" href="#扇形图">扇形图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n941"><a class="md-toc-inner" href="#直方图">直方图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n956"><a class="md-toc-inner" href="#概率密度图">概率密度图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n974"><a class="md-toc-inner" href="#箱线图">箱线图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n980"><a class="md-toc-inner" href="#并列箱线图比较">并列箱线图比较</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1011"><a class="md-toc-inner" href="#小提琴图">小提琴图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1022"><a class="md-toc-inner" href="#点图">点图</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1038"><a class="md-toc-inner" href="#第7章-基本统计分析">第7章 基本统计分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1039"><a class="md-toc-inner" href="#描述性统计分析">描述性统计分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1062"><a class="md-toc-inner" href="#更多方法">更多方法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1087"><a class="md-toc-inner" href="#分组计算描述性统计量">分组计算描述性统计量</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1105"><a class="md-toc-inner" href="#分组计算的扩展">分组计算的扩展</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1122"><a class="md-toc-inner" href="#频数表和列联表">频数表和列联表</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1128"><a class="md-toc-inner" href="#生成频数表">生成频数表</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1171"><a class="md-toc-inner" href="#独立性检验">独立性检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1187"><a class="md-toc-inner" href="#相关性度量">相关性度量</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1200"><a class="md-toc-inner" href="#相关">相关</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1201"><a class="md-toc-inner" href="#相关类型">相关类型</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1209"><a class="md-toc-inner" href="#pearsonspearman和kendall相关">Pearson、Spearman和Kendall相关</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1235"><a class="md-toc-inner" href="#偏相关">偏相关</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1247"><a class="md-toc-inner" href="#其他类型相关">其他类型相关</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1253"><a class="md-toc-inner" href="#相关的显著性检验">相关的显著性检验</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1254"><a class="md-toc-inner" href="#单个">单个</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1267"><a class="md-toc-inner" href="#多个">多个</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1277"><a class="md-toc-inner" href="#其他">其他</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1283"><a class="md-toc-inner" href="#t检验-1">t检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1289"><a class="md-toc-inner" href="#独立样本的t检验">独立样本的t检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1303"><a class="md-toc-inner" href="#非独立样本的t检验">非独立样本的t检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1311"><a class="md-toc-inner" href="#多于两组-1">多于两组</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1317"><a class="md-toc-inner" href="#组间差异的非参数检验">组间差异的非参数检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1321"><a class="md-toc-inner" href="#两组比较">两组比较</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1337"><a class="md-toc-inner" href="#多于两组-2">多于两组</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1356"><a class="md-toc-inner" href="#第三部分-中级方法">第三部分 中级方法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1357"><a class="md-toc-inner" href="#第8章-回归">第8章 回归</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1367"><a class="md-toc-inner" href="#ols回归">OLS回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1388"><a class="md-toc-inner" href="#lm拟合回归模型">lm()拟合回归模型</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1408"><a class="md-toc-inner" href="#简单线性回归">简单线性回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1429"><a class="md-toc-inner" href="#多项式回归">多项式回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1453"><a class="md-toc-inner" href="#多元线性回归">多元线性回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1475"><a class="md-toc-inner" href="#有交互项的多元线性回归">有交互项的多元线性回归</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1495"><a class="md-toc-inner" href="#回归诊断">回归诊断</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1505"><a class="md-toc-inner" href="#标准方法">标准方法</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1531"><a class="md-toc-inner" href="#qq图自己补充">QQ图(自己补充)</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1560"><a class="md-toc-inner" href="#改进方法">改进方法</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1568"><a class="md-toc-inner" href="#正态性">正态性</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1585"><a class="md-toc-inner" href="#误差的独立性">误差的独立性</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1597"><a class="md-toc-inner" href="#线性">线性</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n1610"><a class="md-toc-inner" href="#同方差性">同方差性</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1623"><a class="md-toc-inner" href="#线性模型假设的综合验证">线性模型假设的综合验证</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1631"><a class="md-toc-inner" href="#多重共线性">多重共线性</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1645"><a class="md-toc-inner" href="#异常观测值">异常观测值</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1649"><a class="md-toc-inner" href="#离群点">离群点</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1663"><a class="md-toc-inner" href="#高杠杆值点">高杠杆值点</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1678"><a class="md-toc-inner" href="#强影响点">强影响点</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1706"><a class="md-toc-inner" href="#改进措施">改进措施</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1710"><a class="md-toc-inner" href="#删除观测点">删除观测点</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1714"><a class="md-toc-inner" href="#变量变换">变量变换</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1738"><a class="md-toc-inner" href="#增删变量">增删变量</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1744"><a class="md-toc-inner" href="#其他方法">其他方法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1756"><a class="md-toc-inner" href="#选择最佳的回归模型">选择最佳的回归模型</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1757"><a class="md-toc-inner" href="#模型比较">模型比较</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1777"><a class="md-toc-inner" href="#变量选择">变量选择</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1781"><a class="md-toc-inner" href="#逐步回归">逐步回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1798"><a class="md-toc-inner" href="#全子集回归">全子集回归</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1820"><a class="md-toc-inner" href="#深层次分析">深层次分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1824"><a class="md-toc-inner" href="#交叉验证">交叉验证</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1842"><a class="md-toc-inner" href="#相对重要性">相对重要性</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1861"><a class="md-toc-inner" href="#第9章-方差分析">第9章 方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1877"><a class="md-toc-inner" href="#anova模型拟合">ANOVA模型拟合</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1878"><a class="md-toc-inner" href="#aov函数">aov()函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1885"><a class="md-toc-inner" href="#表达式的顺序">表达式的顺序</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1901"><a class="md-toc-inner" href="#单因素方差分析">单因素方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1916"><a class="md-toc-inner" href="#多重比较">多重比较</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1937"><a class="md-toc-inner" href="#评估检验的假设条件-1">评估检验的假设条件</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1961"><a class="md-toc-inner" href="#单因素协方差分析">单因素协方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1981"><a class="md-toc-inner" href="#评估检验的假设条件-2">评估检验的假设条件</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1991"><a class="md-toc-inner" href="#结果可视化">结果可视化</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2000"><a class="md-toc-inner" href="#双因素方差分析-1">双因素方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2027"><a class="md-toc-inner" href="#重复测量方差分析">重复测量方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2051"><a class="md-toc-inner" href="#多元方差分析">多元方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2063"><a class="md-toc-inner" href="#评估假设检验">评估假设检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2078"><a class="md-toc-inner" href="#稳健多元方差分析">稳健多元方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2085"><a class="md-toc-inner" href="#使用回归来做方差分析">使用回归来做方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2111"><a class="md-toc-inner" href="#第10章-功效分析">第10章 功效分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2140"><a class="md-toc-inner" href="#使用pwr包做功效分析">使用pwr包做功效分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2145"><a class="md-toc-inner" href="#t检验-2">t检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2173"><a class="md-toc-inner" href="#方差分析">方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2188"><a class="md-toc-inner" href="#相关性">相关性</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2201"><a class="md-toc-inner" href="#线性模型">线性模型</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2219"><a class="md-toc-inner" href="#比例检验">比例检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2237"><a class="md-toc-inner" href="#卡方检验">卡方检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2257"><a class="md-toc-inner" href="#在新情况中选择合适的效应值">在新情况中选择合适的效应值</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2267"><a class="md-toc-inner" href="#绘制功效分析图">绘制功效分析图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2273"><a class="md-toc-inner" href="#其他软甲包">其他软甲包</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2275"><a class="md-toc-inner" href="#第11章-中级绘图">第11章 中级绘图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2276"><a class="md-toc-inner" href="#散点图">散点图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2294"><a class="md-toc-inner" href="#散点图矩阵">散点图矩阵</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2312"><a class="md-toc-inner" href="#高密度散点图">高密度散点图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2330"><a class="md-toc-inner" href="#三维散点图">三维散点图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2350"><a class="md-toc-inner" href="#旋转三维散点图">旋转三维散点图</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2362"><a class="md-toc-inner" href="#气泡图">气泡图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2376"><a class="md-toc-inner" href="#折线图">折线图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2401"><a class="md-toc-inner" href="#关系图">关系图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2428"><a class="md-toc-inner" href="#马赛克图">马赛克图</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2448"><a class="md-toc-inner" href="#第12章-重抽样与自助法">第12章 重抽样与自助法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2452"><a class="md-toc-inner" href="#置换检验">置换检验</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2464"><a class="md-toc-inner" href="#用coin包做置换检验">用coin包做置换检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2495"><a class="md-toc-inner" href="#独立两样本和k样本检验">独立两样本和K样本检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2511"><a class="md-toc-inner" href="#列联表中的独立性">列联表中的独立性</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2521"><a class="md-toc-inner" href="#数值变量间的独立性">数值变量间的独立性</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2528"><a class="md-toc-inner" href="#两样本和k样本相关性检验">两样本和K样本相关性检验</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2535"><a class="md-toc-inner" href="#lmperm包的置换检验">lmPerm包的置换检验</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2541"><a class="md-toc-inner" href="#简单回归和多项式回归">简单回归和多项式回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2555"><a class="md-toc-inner" href="#多元回归">多元回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2563"><a class="md-toc-inner" href="#单因素方差分析与协方差分析">单因素方差分析与协方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2575"><a class="md-toc-inner" href="#双因素方差分析-2">双因素方差分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2580"><a class="md-toc-inner" href="#置换检验点评">置换检验点评</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2584"><a class="md-toc-inner" href="#自助法">自助法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2589"><a class="md-toc-inner" href="#boot包的自助法">boot包的自助法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2611"><a class="md-toc-inner" href="#对单个统计量使用自助法">对单个统计量使用自助法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2626"><a class="md-toc-inner" href="#多个统计量的自助法">多个统计量的自助法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2639"><a class="md-toc-inner" href="#第四部分-高级方法">第四部分 高级方法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2640"><a class="md-toc-inner" href="#第13章-广义线性模型">第13章 广义线性模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2655"><a class="md-toc-inner" href="#广义线性模型和glm函数">广义线性模型和glm()函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2661"><a class="md-toc-inner" href="#glm函数">glm()函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2690"><a class="md-toc-inner" href="#连用的函数">连用的函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2692"><a class="md-toc-inner" href="#模型拟合和回归诊断">模型拟合和回归诊断</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2701"><a class="md-toc-inner" href="#logistic回归">Logistic回归</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2727"><a class="md-toc-inner" href="#解释模型参数-1">解释模型参数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2742"><a class="md-toc-inner" href="#预测变量对结果概率的影响">预测变量对结果概率的影响</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2751"><a class="md-toc-inner" href="#过度离势-1">过度离势</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2767"><a class="md-toc-inner" href="#扩展-1">扩展</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2775"><a class="md-toc-inner" href="#泊松分布">泊松分布</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2788"><a class="md-toc-inner" href="#解释模型参数-2">解释模型参数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2800"><a class="md-toc-inner" href="#过度离势-2">过度离势</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2816"><a class="md-toc-inner" href="#扩展-2">扩展</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2830"><a class="md-toc-inner" href="#第14章-主成分分析和因子分析">第14章 主成分分析和因子分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2842"><a class="md-toc-inner" href="#主成分和因子分析">主成分和因子分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2867"><a class="md-toc-inner" href="#主成分分析">主成分分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2878"><a class="md-toc-inner" href="#判断主成分的个数">判断主成分的个数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2906"><a class="md-toc-inner" href="#提取主成分">提取主成分</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2938"><a class="md-toc-inner" href="#主成分旋转">主成分旋转</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2952"><a class="md-toc-inner" href="#获取主成分得分">获取主成分得分</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2972"><a class="md-toc-inner" href="#探索性因子分析">探索性因子分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2987"><a class="md-toc-inner" href="#判断需要提取的公共因子数">判断需要提取的公共因子数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n2998"><a class="md-toc-inner" href="#提取公共因子">提取公共因子</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3014"><a class="md-toc-inner" href="#因子旋转">因子旋转</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3053"><a class="md-toc-inner" href="#因子得分">因子得分</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3061"><a class="md-toc-inner" href="#其他与efa相关的包">其他与EFA相关的包</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3071"><a class="md-toc-inner" href="#其他潜变量模型">其他潜变量模型</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3084"><a class="md-toc-inner" href="#第15章-时间序列">第15章 时间序列</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3090"><a class="md-toc-inner" href="#时间序列对象">时间序列对象</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3100"><a class="md-toc-inner" href="#时间序列的平滑和季节性分解">时间序列的平滑和季节性分解</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3139"><a class="md-toc-inner" href="#指数预测模型">指数预测模型</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3157"><a class="md-toc-inner" href="#单指数平滑">单指数平滑</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3164"><a class="md-toc-inner" href="#holt指数平滑和holt-winters指数平滑">Holt指数平滑和Holt-Winters指数平滑</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3181"><a class="md-toc-inner" href="#arima预测模型">ARIMA预测模型</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3185"><a class="md-toc-inner" href="#概念">概念</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3209"><a class="md-toc-inner" href="#arma和arima模型">ARMA和ARIMA模型</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3272"><a class="md-toc-inner" href="#第16章-聚类分析">第16章 聚类分析</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3282"><a class="md-toc-inner" href="#聚类分析的一般步骤">聚类分析的一般步骤</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3305"><a class="md-toc-inner" href="#计算距离">计算距离</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3319"><a class="md-toc-inner" href="#层次聚类">层次聚类</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3351"><a class="md-toc-inner" href="#划分聚类分析">划分聚类分析</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3355"><a class="md-toc-inner" href="#k均值">K均值</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3392"><a class="md-toc-inner" href="#围绕中心的的划分">围绕中心的的划分</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3424"><a class="md-toc-inner" href="#避免不存在的类">避免不存在的类</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3440"><a class="md-toc-inner" href="#第17章-分类">第17章 分类</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3441"><a class="md-toc-inner" href="#数据准备">数据准备</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3449"><a class="md-toc-inner" href="#逻辑回归">逻辑回归</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3462"><a class="md-toc-inner" href="#决策树">决策树</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3466"><a class="md-toc-inner" href="#经典决策树">经典决策树</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3496"><a class="md-toc-inner" href="#调价推断决策树">调价推断决策树</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3516"><a class="md-toc-inner" href="#随机森林">随机森林</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3540"><a class="md-toc-inner" href="#支持向量机">支持向量机</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3566"><a class="md-toc-inner" href="#选择预测效果最好的解">选择预测效果最好的解</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3593"><a class="md-toc-inner" href="#第18章-处理缺失数据的高级方法">第18章 处理缺失数据的高级方法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3607"><a class="md-toc-inner" href="#处理缺失值的步骤">处理缺失值的步骤</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3626"><a class="md-toc-inner" href="#识别缺失值">识别缺失值</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3640"><a class="md-toc-inner" href="#缺失值模式">缺失值模式</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3641"><a class="md-toc-inner" href="#列表显示缺失值">列表显示缺失值</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3650"><a class="md-toc-inner" href="#图像探索缺失值">图像探索缺失值</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3674"><a class="md-toc-inner" href="#用相关性探索缺失值">用相关性探索缺失值</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3679"><a class="md-toc-inner" href="#缺失数据的由来和影响">缺失数据的由来和影响</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3685"><a class="md-toc-inner" href="#处理不完整数据">处理不完整数据</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3686"><a class="md-toc-inner" href="#完整实例分析行删除）">完整实例分析（行删除）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3695"><a class="md-toc-inner" href="#多重插补">多重插补</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3719"><a class="md-toc-inner" href="#处理缺失值的其他方法">处理缺失值的其他方法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3724"><a class="md-toc-inner" href="#成对删除">成对删除</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3731"><a class="md-toc-inner" href="#简单非随机）差值">简单（非随机）差值</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3737"><a class="md-toc-inner" href="#第五部分-技能拓展">第五部分 技能拓展</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3738"><a class="md-toc-inner" href="#第19章-使用ggplot2进行高级绘图">第19章 使用ggplot2进行高级绘图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3743"><a class="md-toc-inner" href="#ggplot2包介绍">ggplot2包介绍</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3751"><a class="md-toc-inner" href="#用集合图形指定图的类型">用集合图形指定图的类型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3758"><a class="md-toc-inner" href="#分组">分组</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3781"><a class="md-toc-inner" href="#刻面">刻面</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3796"><a class="md-toc-inner" href="#添加光滑曲线">添加光滑曲线</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3805"><a class="md-toc-inner" href="#修改ggplot2图形的外观">修改ggplot2图形的外观</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3809"><a class="md-toc-inner" href="#坐标轴-2">坐标轴</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3813"><a class="md-toc-inner" href="#图例-2">图例</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3826"><a class="md-toc-inner" href="#标尺">标尺</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3846"><a class="md-toc-inner" href="#主题">主题</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3852"><a class="md-toc-inner" href="#多重图">多重图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3860"><a class="md-toc-inner" href="#保存图片">保存图片</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3870"><a class="md-toc-inner" href="#第20章-高级编程">第20章 高级编程</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3871"><a class="md-toc-inner" href="#r语言回顾">R语言回顾</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3875"><a class="md-toc-inner" href="#数据类型">数据类型</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n3885"><a class="md-toc-inner" href="#原子向量">原子向量</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n3903"><a class="md-toc-inner" href="#泛型变量或列表">泛型变量或列表</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n3916"><a class="md-toc-inner" href="#索引">索引</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3920"><a class="md-toc-inner" href="#控制结构">控制结构</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3937"><a class="md-toc-inner" href="#创建函数">创建函数</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3958"><a class="md-toc-inner" href="#环境">环境</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3984"><a class="md-toc-inner" href="#面向对象的编程">面向对象的编程</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n3990"><a class="md-toc-inner" href="#泛型函数">泛型函数</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4012"><a class="md-toc-inner" href="#s3模型的限制">S3模型的限制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4020"><a class="md-toc-inner" href="#编写有效的代码">编写有效的代码</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4033"><a class="md-toc-inner" href="#有效的数据输入">有效的数据输入</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4038"><a class="md-toc-inner" href="#矢量化">矢量化</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4053"><a class="md-toc-inner" href="#大小正确的对象">大小正确的对象</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4058"><a class="md-toc-inner" href="#并行化">并行化</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4066"><a class="md-toc-inner" href="#调试">调试</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4079"><a class="md-toc-inner" href="#调试工具">调试工具</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4096"><a class="md-toc-inner" href="#支持调试的会话选项">支持调试的会话选项</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4108"><a class="md-toc-inner" href="#第21章-创建包">第21章 创建包</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4113"><a class="md-toc-inner" href="#非参数分析和npar包">非参数分析和npar包</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n4131"><a class="md-toc-inner" href="#使用npar包比较分组">使用npar包比较分组</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4148"><a class="md-toc-inner" href="#开发包">开发包</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4154"><a class="md-toc-inner" href="#创建包的文档">创建包的文档</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4164"><a class="md-toc-inner" href="#建立包">建立包</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4210"><a class="md-toc-inner" href="#第22章-创建动态报告">第22章 创建动态报告</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4211"><a class="md-toc-inner" href="#用模板生成报告">用模板生成报告</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4215"><a class="md-toc-inner" href="#markdown创建动态报告">markdown创建动态报告</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4247"><a class="md-toc-inner" href="#latex创建动态报告">LaTeX创建动态报告</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4261"><a class="md-toc-inner" href="#使用open-document创建动态报告">使用Open Document创建动态报告</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4279"><a class="md-toc-inner" href="#word创建动态报告">Word创建动态报告</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4291"><a class="md-toc-inner" href="#第23章-使用lattice进行高级绘图">第23章 使用lattice进行高级绘图</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4292"><a class="md-toc-inner" href="#lattice包">lattice包</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4346"><a class="md-toc-inner" href="#调节变量">调节变量</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4360"><a class="md-toc-inner" href="#面板函数">面板函数</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4378"><a class="md-toc-inner" href="#分组变量">分组变量</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4397"><a class="md-toc-inner" href="#图像参数">图像参数</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4411"><a class="md-toc-inner" href="#自定义图形条带">自定义图形条带</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4427"><a class="md-toc-inner" href="#页面布局">页面布局</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n4448"><a class="md-toc-inner" href="#附录">附录</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4449"><a class="md-toc-inner" href="#附录a图形用户界面">附录A：图形用户界面</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4458"><a class="md-toc-inner" href="#附录b自定义启动环境">附录B：自定义启动环境</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4478"><a class="md-toc-inner" href="#附录c从r中导出数据">附录C：从R中导出数据</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4491"><a class="md-toc-inner" href="#附录dr中的矩阵运算">附录D：R中的矩阵运算</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4496"><a class="md-toc-inner" href="#附录e本书使用的扩展包">附录E：本书使用的扩展包</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4497"><a class="md-toc-inner" href="#附录f处理大数据集">附录F：处理大数据集</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4498"><a class="md-toc-inner" href="#高效程序设计">高效程序设计</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4516"><a class="md-toc-inner" href="#在内存之外存储数据">在内存之外存储数据</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4521"><a class="md-toc-inner" href="#用于大数据的分析包">用于大数据的分析包</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4531"><a class="md-toc-inner" href="#超大数据集的全面解决方案">超大数据集的全面解决方案</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4545"><a class="md-toc-inner" href="#附录g-更新r">附录G 更新R</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4546"><a class="md-toc-inner" href="#自动安装win">自动安装(Win)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4551"><a class="md-toc-inner" href="#手动安装win和mac">手动安装(Win和MAC)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n4576"><a class="md-toc-inner" href="#更新rlinux">更新R(Linux)</a></span></p></div><h2 id='前言'><span>前言</span></h2><ul><li><span>Quick-R网站：</span><code>https://www.statmethods.net/</code></li><li><span>课本源码：</span><code>https://www.manning.com/books/r-in-action</code></li></ul><h2 id='第一部分-入门'><span>第一部分 入门</span></h2><h3 id='第1章-r语言介绍'><span>第1章 R语言介绍</span></h3><ul><li><p><span>R语言官网：R可以在CRAN ( Comprehensive R Archive Network，</span><a href='http://cran.r-project.org' target='_blank' class='url'>http://cran.r-project.org</a><span>) 上下载。</span></p></li><li><p><span>R是一种区分大小写的解释型语言。</span></p></li><li><p><code>x &lt;- rnorm(5)</code><span>和</span><code>rnorm(5) -&gt; x</code><span>等效。</span></p></li><li><p><strong><span>mean()</span></strong><span>、</span><strong><span>sd()</span></strong><span>、</span><strong><span>cor()</span></strong><span>分别为获取均值、标准差、相关度。</span></p></li><li><p><strong><span>q()</span></strong><span>：退出R。</span></p></li><li><p><span>若想大致了解R能够作出何种图形，在命令行中运行</span><strong><span>demo()</span></strong><span> 即可。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">demo</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">demo</span>(<span class="cm-variable">Hershey</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">demo</span>(<span class="cm-variable">persp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">demo</span>(<span class="cm-variable">image</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><h4 id='获取帮助'><span>获取帮助</span></h4><p><img src="img\019_R语言实战\第1章\第1章 001.png" referrerpolicy="no-referrer" alt="第1章 001"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vignette</span>(<span class="cm-string">"affy"</span>) <span class="cm-comment"># 会打开affy包的帮助文档（PDF）</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><h4 id='工作空间'><span>工作空间</span></h4><ul><li><strong><span>工作空间</span></strong><span>( workspace)就是当前R的工作环境，它存储着所有用户定义的对象(向量、矩阵函数、数据框、列表)。在一个R会话结束时，你可以将当前工作空间保存到一个镜像中，并在下次启动R时自动载入它。</span></li><li><span>当前的</span><strong><span>工作目录</span></strong><span>( working directory)是R用来读取文件和保存结果的默认目录。用函数</span><strong><span>getwd()</span></strong><span>来查看当前的工作目录，或使用函数</span><strong><span>setwd()</span></strong><span>设定当前的工作目录。</span></li></ul><p><img src="img\019_R语言实战\第1章\第1章 002.png" referrerpolicy="no-referrer" alt="第1章 002"></p><ul><li><strong><span>options(digits=3)</span></strong><span>：数字将被格式化，显示为具有小数点后三位有效数字的格式。</span></li><li><span>函数</span><strong><span>setwd()</span></strong><span>不会自动创建一个不存在的目录。如果必要的话，可以使用函数</span><strong><span>dir.create()</span></strong><span>来创建新目录，然后使用</span><strong><span>setwd()</span></strong><span>将工作目录指向这个新目录。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dir.create</span>(<span class="cm-string">"D:/test1"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 保存一个对象到文件之后又读到内存中</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">LETTERS</span>,<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">26</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">LETTERS</span>,<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">26</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">save</span>(<span class="cm-variable">df1</span>,<span class="cm-variable">df2</span>,<span class="cm-variable">file</span><span class="cm-operator">=</span><span class="cm-string">"d://2.txt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 从内存中移除</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rm</span>(<span class="cm-variable">df1</span>,<span class="cm-variable">df2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 重新加载变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">load</span>(<span class="cm-string">"d://2.txt"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><code>load(&quot;.RData&quot;)</code><span>命令可以返回到上次退出时的状态（重新将上次退出时所加载的变量、函数等加载进来）。</span></li></ul><h4 id='输入和输出'><span>输入和输出</span></h4><ul><li><p><strong><span>输入</span></strong><span>：函数</span><strong><span>source(&quot;filename&quot;)</span></strong><span>可在当前会话中执行一个脚本。如果文件名中不包含路径，R将假设此脚本在当前工作目录中。运行文件的扩展名不一定要是</span><code>.R</code><span>，可以是其他的，如：</span><code>.txt</code></p></li><li><p><strong><span>文本的输出</span></strong><span>：函数</span><strong><span>sink(&quot;filename&quot;)</span></strong><span>将输出重定向到文件</span><strong><span>filename</span></strong><span>中。默认情况下，会覆盖原文件的内容。使用参数</span><strong><span>append=TRUE</span></strong><span>可以将文本追加到文件后，而不是覆盖。参数</span><strong><span>split=TRUE</span></strong><span>可将输出同时发送到屏幕和输出文件中。命令</span><strong><span>sink()</span></strong><span>将仅向屏幕返回输出结果。该函数只能改变文本的输出，对于图片的输出没有影响。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sink</span>(<span class="cm-string">"d:/1.txt"</span>,<span class="cm-variable">append</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">print</span>(<span class="cm-string">"232323"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LETTERS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sink</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第1章\第1章 003.png" alt="第1章 003" style="zoom:67%;" /></p></li><li><p><strong><span>图形的输出</span></strong><span>：虽然</span><strong><span>sink()</span></strong><span> 可以重定向文本输出，但它对图形输出没有影响。要重定向图形输出，使用表1-4中列出的函数即可。最后使用</span><strong><span>dev.off()</span></strong><span>将输出返回到终端。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">svg</span>(<span class="cm-string">"d:/1.svg"</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">8</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">mpg</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">displ</span>,<span class="cm-variable">hwy</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_point</span>(<span class="cm-variable">aes</span>(<span class="cm-variable">group</span> <span class="cm-operator">=</span> <span class="cm-variable">drv</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">factor</span>(<span class="cm-variable">drv</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第1章\第1章 004.png" referrerpolicy="no-referrer" alt="第1章 004"></p><h4 id='包'><span>包</span></h4><ul><li><p><code>https://cran.r-project.org/web/packages/</code></p></li><li><p><span>包是R函数、数据、预编译代码以一种定义完善的格式组成的集合。计算机上存储包的目录称为库( library )。函数</span><strong><span>.libPaths()</span></strong><span>能够显示库所在的位置，函数</span><strong><span>library()</span></strong><span>则可以显示库中有哪些包。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">.libPaths</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"D:/Program Files/R/R-4.2.2/library"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>R自带了一系列默认包(包括base、datasets、utils、grDevices、graphics、stats以及methods)，它们提供了种类繁多的默认函数和数据集。其他包可通过下载来进行安装安装好以后，它们必须被载入到会话中才能使用。命令</span><strong><span>search()</span></strong><span> 可以告诉你哪些包</span><strong><span>已加载并可使用</span></strong><span>。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">search</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-string">".GlobalEnv"</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"package:babynames"</span> <span class="cm-string">"package:dplyr"</span> &nbsp; &nbsp; <span class="cm-string">"package:ggplot2"</span> &nbsp; <span class="cm-string">"tools:rstudio"</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">6</span>] <span class="cm-string">"package:stats"</span> &nbsp; &nbsp; <span class="cm-string">"package:graphics"</span> &nbsp;<span class="cm-string">"package:grDevices"</span> <span class="cm-string">"package:utils"</span> &nbsp; &nbsp; <span class="cm-string">"package:datasets"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">11</span>] <span class="cm-string">"package:methods"</span> &nbsp; <span class="cm-string">"Autoloads"</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"package:base"</span> &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre></li><li><p><span>使用命令</span><strong><span>install.packages()</span></strong><span>安装包。</span></p></li><li><p><span>一个包仅需安装一次。但和其他软件类似，包经常被其作者更新。使用命令</span><strong><span>update.packages()</span></strong><span>可以更新已经安装的包。要查看已安装包的描述，可以使用</span><strong><span>installed.packages()</span></strong><span>命令，这将列出安装的包，以及它们的版本号、依赖关系等信息。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">update.packages</span>(<span class="cm-string">"ggplot2"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">installed.packages</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>要在R会话中使用它还需要使用</span><strong><span>library()</span></strong><span>命令载入这个包。</span></p></li><li><p><span>命令</span><strong><span>help(package=&quot;package_name&quot;)</span></strong><span>可以输出某个包的简短描述以及包中的函数名称和数据集名称的列表。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">help</span>(<span class="cm-variable">package</span> <span class="cm-operator">=</span> <span class="cm-string">"ggplot2"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><h4 id='批处理'><span>批处理</span></h4><ul><li><p><span>偶尔，我们可能想要以一种重复的、标准化的、无人值守的方式执行某个R程序。</span></p></li><li><p><span>Linux下输入：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sh"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sh"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">R CMD BATCH options infile outfile</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>Windows下输入：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sh"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sh"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.7496px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"C:\Program Files\R\R-3.1.0\bin\R.exe"</span> CMD BATCH <span class="cm-attribute">--</span> vanilla <span class="cm-attribute">--slave</span> <span class="cm-string">"c:\my projects\myscript.R"</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>要了解某个函数的返回值，查阅这个函数在线帮助文档中的</span><strong><span>Value</span></strong><span>部分即可。</span></p></li></ul><h4 id='示例实践'><span>示例实践</span></h4><ul><li><p><span>打开帮助文档首页，并查阅其中的“Introduction to R&#39;：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">help.start</span>()</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>安装</span><strong><span>vcd</span></strong><span>包(一个用于可视化类别数据的包，你将在第11章中使用 )。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"vcd"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>列出此包中可用的函数和数据集：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">help</span>(<span class="cm-variable">package</span> <span class="cm-operator">=</span> <span class="cm-string">"vcd"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>载人这个包并阅读数据集Arthritis的描述：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">vcd</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">help</span>(<span class="cm-string">"Arthritis"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>运行数据集Arthritis自带的示例：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">example</span>(<span class="cm-string">"Arthritis"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>退出：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q</span>()</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><h3 id='第2章-创建数据集'><span>第2章 创建数据集</span></h3><ul><li><span>R中有许多用于存储数据的结构，包括</span><strong><span>标量</span></strong><span>、</span><strong><span>向量</span></strong><span>、</span><strong><span>数组</span></strong><span>、</span><strong><span>数据框</span></strong><span>和</span><strong><span>列表</span></strong><span>。</span></li><li><span>R可以处理的数据类型(模式)括</span><strong><span>数值型</span></strong><span>、</span><strong><span>字符型</span></strong><span>、</span><strong><span>逻辑型</span></strong><span>(TRUE/FALSE )、</span><strong><span>复数型</span></strong><span>(虚数)和</span><strong><span>原生型</span></strong><span>(字节)。</span></li></ul><h4 id='数据结构'><span>数据结构</span></h4><p><img src="img\019_R语言实战\第2章\第2章 001.png" alt="第2章 001" style="zoom:67%;" /></p><ul><li><span>在R中，</span><strong><span>对象 (obiect)</span></strong><span>是指可以赋值给变量的任何事物，包括常量、数据结构、函数，甚至图形。</span></li><li><strong><span>因子(factor)</span></strong><span>是名义型变量或有序型变量，它们在R中被特殊地存储和处理。</span></li><li><strong><span>向量</span></strong><span>是用于存储</span><strong><span>数值型</span></strong><span>、</span><strong><span>字符型</span></strong><span>或</span><strong><span>逻辑型</span></strong><span>数据的一维数组。执行</span><strong><span>组合</span></strong><span>功能的函数</span><strong><span>c()</span></strong><span>可用来创建向量。</span></li><li><strong><span>标量</span></strong><span>是只含一个元素的向量，例如</span><code>f &lt;- 3</code><span>、</span><code>g &lt;- &quot;US&quot;</code><span>和</span><code>h &lt;- TRUE</code><span>。它们用于保存常量。</span></li></ul><h5 id='矩阵'><span>矩阵</span></h5><ul><li><p><strong><span>矩阵</span></strong><span>是一个二维数组，只是每个元素都拥有相同的模式(</span><strong><span>数值型</span></strong><span>、</span><strong><span>字符型</span></strong><span>或</span><strong><span>逻辑型</span></strong><span> )。可通过函数</span><strong><span>matrix()</span></strong><span>创建矩阵。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myymatrix</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">vector</span>, <span class="cm-variable">nrow</span><span class="cm-operator">=</span><span class="cm-variable">number_of_rows</span>, <span class="cm-variable">ncol</span><span class="cm-operator">=</span><span class="cm-variable">number_of_columns</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">byrow</span><span class="cm-operator">=</span><span class="cm-variable">logical_value</span>, <span class="cm-variable">dimnames</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">char_vector_rownames</span>, <span class="cm-variable">char_vector_colnames</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>其中</span><strong><span>vector</span></strong><span>包含了矩阵的</span><strong><span>元素</span></strong><span>，</span><strong><span>nrow</span></strong><span>和</span><strong><span>ncol</span></strong><span>用以指定</span><strong><span>行和列</span></strong><span>的维数，</span><strong><span>dimnames</span></strong><span>包含了可选的、以字符型向量表示的</span><strong><span>行名和列名</span></strong><span>。选项byrow则表明矩阵应当</span><strong><span>按行</span></strong><span>填充 ( </span><strong><span>byrow=TRUE</span></strong><span> )还是按</span><strong><span>列填</span></strong><span>充(</span><strong><span>byrow=FALSE</span></strong><span> )，默认情况下按列填充。</span></p></li><li><p><span>我们可以使用下标和方括号来选择矩阵中的行、列或元素。</span><code>x[i,]</code><span>指矩阵x中的第</span><code>i</code><span>行，</span><code>x[,j]</code><span>指</span><code>j</code><span>列，</span><code>x[i,j]</code><span>指第</span><code>i</code><span>行第</span><code>j</code><span>个元素。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">nc</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>,<span class="cm-variable">byrow</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">dimnames</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">c</span>(<span class="cm-string">'R1'</span>,<span class="cm-string">'R2'</span>),<span class="cm-variable">LETTERS</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>]))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">A</span> <span class="cm-variable">B</span> <span class="cm-variable">C</span> <span class="cm-variable">D</span> &nbsp;<span class="cm-variable">E</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">R1</span> <span class="cm-number">1</span> <span class="cm-number">2</span> <span class="cm-number">3</span> <span class="cm-number">4</span> &nbsp;<span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">R2</span> <span class="cm-number">6</span> <span class="cm-number">7</span> <span class="cm-number">8</span> <span class="cm-number">9</span> <span class="cm-number">10</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><h5 id='数组'><span>数组</span></h5><ul><li><p><strong><span>数组</span></strong><span>(array)与矩阵类似，但是维度可以大于2。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myarray</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">array</span>(<span class="cm-variable">vector</span>, <span class="cm-variable">dimensions</span>, <span class="cm-variable">dimnames</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>其中</span><strong><span>vector</span></strong><span>包含了数组中的</span><strong><span>数据</span></strong><span>，</span><strong><span>dimensions</span></strong><span>是一个数值型向量，给出了各个</span><strong><span>维度下标的最大值</span></strong><span>，而</span><strong><span>dimnames</span></strong><span>是可选的、</span><strong><span>各维度名称</span></strong><span>标签的列表。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arr</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">array</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">6</span>,<span class="cm-variable">dim</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">3</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span>(<span class="cm-variable">arr</span>)<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment"># "matrix" "array"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtr</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">6</span>,<span class="cm-variable">nc</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>,<span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span>(<span class="cm-variable">mtr</span>)<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment"># "matrix" "array"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 105px;"></div><div class="CodeMirror-gutters" style="display: none; height: 105px;"></div></div></div></pre></li></ul><h5 id='数据框'><span>数据框</span></h5><ul><li><p><span>由于</span><strong><span>不同的列</span></strong><span>可以包含</span><strong><span>不同模式</span></strong><span>(数值型、字符型等)的数据，数据框的概念较矩阵来说更为一般。它与你通常在SAS、SPSS和Stata中看到的数据集类似。</span><strong><span>数据框</span></strong><span>将是你在R中最常处理的数据结构。数据框可通过函数</span><strong><span>data.frame()</span></strong><span>创建。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">col1</span>, <span class="cm-variable">col2</span>, <span class="cm-variable">col3</span>,<span class="cm-keyword">...</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>其中的列向量col1、col2、col3等可为</span><strong><span>任何类型</span></strong><span>(如字符型、数值型或逻辑型 。每一列的名称可由函数</span><strong><span>names()</span></strong><span>指定。</span></p></li><li><p><span>函数</span><strong><span>attach()</span></strong><span>可将数据框添加到R的搜索路径中，函数</span><strong><span>detach()</span></strong><span>将数据框从搜索路径中移除。添加时，如果与原始存在于内存中的变量有相同的变量名，会保存原来的变量。</span></p></li><li><p><strong><span>with()</span></strong><span>函数的使用：在</span><code>{}</code><span>内的变量不需要写数据框的名字。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>],<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">LETTERS</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>],<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">df</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">paste0</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">n</span>,<span class="cm-variable">collapse</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"aA1bB2cC3dD4eE5"</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>with()</span></strong><span>中，</span><code>{}</code><span>内的赋值只在</span><code>{}</code><span>内有效，要使赋值全局有效，需要使用</span><code>&lt;&lt;-</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># {}内的赋值只在{}内有效</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">df</span>,{ <span class="cm-variable">df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">new</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">15</span><span class="cm-semi">;</span><span class="cm-variable">names</span>(<span class="cm-variable">df</span>) })</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">df</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">df</span>,{ <span class="cm-variable">df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">new</span> <span class="cm-operator cm-arrow">&lt;&lt;-</span> <span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">15</span> })</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">df</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"x"</span> &nbsp; <span class="cm-string">"y"</span> &nbsp; <span class="cm-string">"n"</span> &nbsp; <span class="cm-string">"new"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"x"</span> <span class="cm-string">"y"</span> <span class="cm-string">"n"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"x"</span> &nbsp; <span class="cm-string">"y"</span> &nbsp; <span class="cm-string">"n"</span> &nbsp; <span class="cm-string">"new"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><strong><span>示例标识符</span></strong><span>：在病例数据中，病人编号(patientID) 用于区分数据集中不同的个体。在R中，实例标识符(case identifier)可通过数据框操作函数中的</span><strong><span>row.names</span></strong><span>选项指定。将patientID指定为R中标记各类打印输出和图形中实例名称所用的变量。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">id</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-number">21</span><span class="cm-operator">:</span><span class="cm-number">30</span>,<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">id</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-number">21</span><span class="cm-operator">:</span><span class="cm-number">30</span>,<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">row.names</span> <span class="cm-operator">=</span> <span class="cm-string">"name"</span> <span class="cm-comment"># 如果使用数据框的某一个列，需要使用字符串)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span><span class="cm-semi">;</span><span class="cm-variable">df2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">df1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">id</span> <span class="cm-variable">age</span> <span class="cm-variable">name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">21</span> &nbsp; &nbsp;<span class="cm-variable">a</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; <span class="cm-number">2</span> &nbsp;<span class="cm-number">22</span> &nbsp; &nbsp;<span class="cm-variable">b</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-keyword">......</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">df2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">id</span> <span class="cm-variable">age</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">a</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">21</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">b</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">22</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">......</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 209px;"></div><div class="CodeMirror-gutters" style="display: none; height: 209px;"></div></div></div></pre></li></ul><h5 id='因子'><span>因子</span></h5><ul><li><p><strong><span>类别(名义型)</span></strong><span> 变量和</span><strong><span>有序类别(有序型)</span></strong><span> 变量在R中称为</span><strong><span>因子</span></strong><span> ( factor )。</span></p></li><li><p><span>变量可归结为</span><strong><span>名义型</span></strong><span>、</span><strong><span>有序型</span></strong><span>或</span><strong><span>连续型变量</span></strong><span>。</span><strong><span>名义型变量</span></strong><span>是没有顺序之分的类别变量。</span></p></li><li><p><strong><span>名义型变量</span></strong><span>如性别，编码为1\2，这也并不意味着二者是有序的。</span></p></li><li><p><strong><span>有序型变量</span></strong><span>表示一种顺序关系，而非数量关系。如病情status ( poor、improved、excellent ) 、学历。</span></p></li><li><p><strong><span>连续型变量</span></strong><span>可以呈现为某个范围内的任意值，并同时表示了顺序和数量。年龄Age就是一个连续型变量。</span></p></li><li><p><span>函数</span><strong><span>factor()</span></strong><span>以一个</span><strong><span>整数向量的形式存储</span></strong><span>类别值，整数的取值范围是</span><strong><span>[1...k]</span></strong><span> (其中k是名义型变量中唯一值的个数)，同时一个由</span><strong><span>字符串(原始值)</span></strong><span>组成的内部向量将</span><strong><span>映射</span></strong><span>到这些整数上。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">diabetes</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"Type1"</span>, <span class="cm-string">"Type2"</span>, <span class="cm-string">"Type1"</span>, <span class="cm-string">"Type1"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">diabetes</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">diabetes</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><span>将此向量存储为</span><code>(1,2,1,1)</code><span>，并在内部将其关联为</span><strong><span>1=Type1</span></strong><span>和</span><strong><span>2=Type2</span></strong><span>（具体赋值根据字母顺序而定） 。将其作为</span><strong><span>名义型变量</span></strong><span>对待。</span></p></li><li><p><span>要表示</span><strong><span>有序型变量</span></strong><span>，需要为函数</span><code>factor()</code><span> 指定参数</span><strong><span>ordered=TRUE</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">status</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"Poor"</span>, <span class="cm-string">"Improved"</span>, <span class="cm-string">"Excellent"</span>, <span class="cm-string">"Poor"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">status</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">status</span>, <span class="cm-variable">ordered</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><span>将向量编码为</span><code>(3,2,1,3)</code><span>，并在内部将这些值关联为</span><strong><span>1=Excellent</span></strong><span>、</span><strong><span>2=Improved</span></strong><span>以及</span><strong><span>3=Poor</span></strong><span>。</span></p></li><li><p><span>对于字符型向量，因子的水平默认</span><strong><span>依字母顺序创建</span></strong><span>。可以通过指定</span><strong><span>levels</span></strong><span>选项来覆盖默认排序。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"A"</span>,<span class="cm-string">"B"</span>,<span class="cm-string">"A"</span>,<span class="cm-string">"C"</span>,<span class="cm-string">"B"</span>,<span class="cm-string">"C"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xf1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">x</span>) &nbsp;<span class="cm-comment"># 默认名义型变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str</span>(<span class="cm-variable">xf1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xf2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">x</span>,<span class="cm-variable">ordered</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>) &nbsp;<span class="cm-comment"># 有序型变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str</span>(<span class="cm-variable">xf2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xf3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">x</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"C"</span>,<span class="cm-string">"A"</span>,<span class="cm-string">"B"</span>)) <span class="cm-comment"># 指定变量的顺序</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">str</span>(<span class="cm-variable">xf3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Factor</span> <span class="cm-variable">w</span><span class="cm-operator">/</span> <span class="cm-number">3</span> <span class="cm-variable">levels</span> <span class="cm-string">"A"</span>,<span class="cm-string">"B"</span>,<span class="cm-string">"C"</span><span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-number">2</span> <span class="cm-number">1</span> <span class="cm-number">3</span> <span class="cm-number">2</span> <span class="cm-number">3</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Ord.factor</span> <span class="cm-variable">w</span><span class="cm-operator">/</span> <span class="cm-number">3</span> <span class="cm-variable">levels</span> <span class="cm-string">"A"</span><span class="cm-operator">&lt;</span><span class="cm-string">"B"</span><span class="cm-operator">&lt;</span><span class="cm-string">"C"</span><span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-number">2</span> <span class="cm-number">1</span> <span class="cm-number">3</span> <span class="cm-number">2</span> <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Factor</span> <span class="cm-variable">w</span><span class="cm-operator">/</span> <span class="cm-number">3</span> <span class="cm-variable">levels</span> <span class="cm-string">"C"</span>,<span class="cm-string">"A"</span>,<span class="cm-string">"B"</span><span class="cm-operator">:</span> <span class="cm-number">2</span> <span class="cm-number">3</span> <span class="cm-number">2</span> <span class="cm-number">1</span> <span class="cm-number">3</span> <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>任何在数据中出现而未在参数中列举的数据都将被设为缺失值。</span></p></li><li><p><span>数值型变量可以用</span><strong><span>levels</span></strong><span>和</span><strong><span>labels</span></strong><span>参数来编码成因子。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.integer</span>(<span class="cm-variable">runif</span>(<span class="cm-number">10</span>,<span class="cm-number">0</span>,<span class="cm-number">2</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sex</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">x</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"M"</span>,<span class="cm-string">"F"</span>))<span class="cm-semi">;</span><span class="cm-variable">sex</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-variable">F</span> <span class="cm-variable">F</span> <span class="cm-variable">F</span> <span class="cm-variable">M</span> <span class="cm-variable">M</span> <span class="cm-variable">M</span> <span class="cm-variable">M</span> <span class="cm-variable">F</span> <span class="cm-variable">M</span> <span class="cm-variable">F</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Levels</span><span class="cm-operator">:</span> <span class="cm-variable">M</span> <span class="cm-variable">F</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>函数</span><strong><span>str(object)</span></strong><span>可提供R中某个对象的信息。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">rnorm</span>(<span class="cm-number">6</span>,<span class="cm-number">0</span>,<span class="cm-number">1</span>),<span class="cm-variable">sex</span> <span class="cm-operator">=</span> <span class="cm-variable">gl</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"M"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"unkonw"</span>)))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">str</span>(<span class="cm-variable">df</span>)<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment"># 第一行的6表示行数，2表示变量数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">'data.frame'</span><span class="cm-operator">:</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-number">6</span> <span class="cm-variable">obs.</span> <span class="cm-variable">of</span> &nbsp;<span class="cm-number">2</span> <span class="cm-variable">variables</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-operator cm-dollar">$</span> <span class="cm-variable">x</span> &nbsp;<span class="cm-operator">:</span> <span class="cm-variable">num</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.2018</span> <span class="cm-operator">-</span><span class="cm-number">0.4657</span> <span class="cm-operator">-</span><span class="cm-number">0.0161</span> <span class="cm-operator">-</span><span class="cm-number">0.7628</span> <span class="cm-number">0.0966</span> <span class="cm-keyword">...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-operator cm-dollar">$</span> <span class="cm-variable">sex</span><span class="cm-operator">:</span> <span class="cm-variable">Factor</span> <span class="cm-variable">w</span><span class="cm-operator">/</span> <span class="cm-number">3</span> <span class="cm-variable">levels</span> <span class="cm-string">"M"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"unkonw"</span><span class="cm-operator">:</span> <span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-number">2</span> <span class="cm-number">2</span> <span class="cm-number">3</span> <span class="cm-number">3</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 131px;"></div><div class="CodeMirror-gutters" style="display: none; height: 131px;"></div></div></div></pre></li><li><p><span>函数</span><strong><span>summary()</span></strong><span>会区别对待各个变量。显示</span><strong><span>连续型变量</span></strong><span>的最小值、最大值、均值和各四分位数，显示</span><strong><span>类别型变量</span></strong><span>各水平的频数值。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">df</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">x</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">sex</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:-</span><span class="cm-number">1.22871</span> &nbsp; <span class="cm-variable">M</span> &nbsp; &nbsp; <span class="cm-operator">:</span><span class="cm-number">2</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:-</span><span class="cm-number">0.68853</span> &nbsp; <span class="cm-variable">F</span> &nbsp; &nbsp; <span class="cm-operator">:</span><span class="cm-number">2</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Median</span> <span class="cm-operator">:-</span><span class="cm-number">0.33375</span> &nbsp; <span class="cm-variable">unkonw</span><span class="cm-operator">:</span><span class="cm-number">2</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:-</span><span class="cm-number">0.42975</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:-</span><span class="cm-number">0.06254</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">0.09665</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre></li></ul><h5 id='列表'><span>列表</span></h5><ul><li><strong><span>列表(list)</span></strong><span>是R的数据类型中最为复杂的一种。一般来说，列表就是一些对象(或成分，component) 的有序集合。</span></li><li><span>某个列表中可能是若干向量、矩阵、数据框，甚至其他列表的组合。可以使用函数</span><strong><span>list()</span></strong><span>创建列表。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">l</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-builtin">list</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>])</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><h5 id='注意事项'><span>注意事项</span></h5><ul><li><p><span>对象名称中的句点 (</span><code>.</code><span>) 没有特殊意义，但美元符号 ($) 却有着和其他语言中的句点类似的含义，即指定一个数据框或列表中的某些部分。</span></p></li><li><p><strong><span>R不提供多行注释或块注释功能</span></strong><span>。你必须以#作为多行注释每行的开始。出于调试目的，你也可以把想让解释器忽略的代码放到语句</span><strong><span>if(FALSE){...}</span></strong><span>中。将FALSE改为TRUE即允许这块代码执行。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span>(<span class="cm-variable">F</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"这是快注释"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>R语言中没有标量，标量实际上是单个元素的向量。</span></p></li><li><p><span>R语言的下标从1开始。</span></p></li><li><p><span>当赋值的下标超过原有的长度时，会自动扩展。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span>[<span class="cm-number">5</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">10</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] &nbsp;<span class="cm-number">1</span> <span class="cm-atom">NA</span> <span class="cm-atom">NA</span> <span class="cm-atom">NA</span> <span class="cm-number">10</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><h4 id='数据的输入'><span>数据的输入</span></h4><h5 id='从键盘输入数据'><span>从键盘输入数据</span></h5><ul><li><p><span>R中的函数</span><strong><span>edit()</span></strong><span>会自动调用一个允许手动输入数据的文本编辑器。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">age</span> <span class="cm-arg-is">=</span> <span class="cm-variable">numeric</span>(<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">gender</span> <span class="cm-arg-is">=</span> <span class="cm-variable">character</span>(<span class="cm-number">0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">weight</span> <span class="cm-arg-is">=</span> <span class="cm-variable">numeric</span>(<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">edit</span>(<span class="cm-variable">mydf</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre></li><li><p><span>类似于</span><strong><span>age=numeric(0)</span></strong><span>的赋值语句将创建一个指定模式但不含实际数据的变量。注意，编辑的结果需要赋值回对象本身。函数</span><strong><span>edit()</span></strong><span>事实上是在对象的一个</span><strong><span>副本</span></strong><span>上进行操作的。如果你不将其赋值到一个目标，你的所有修改将会全部丢失!</span></p></li><li><p><span>想要将修改保存到原来的变量里，使用</span><strong><span>fix()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fix</span>(<span class="cm-variable">mydf</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>从</span><strong><span>字符串</span></strong><span>读取数据：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mytxt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">age name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">12 zs</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">18 ls"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">read.table</span>(<span class="cm-variable">header</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">text</span> <span class="cm-operator">=</span> <span class="cm-variable">mytxt</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">age</span> <span class="cm-variable">name</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">12</span> &nbsp; <span class="cm-variable">zs</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">18</span> &nbsp; <span class="cm-variable">ls</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li></ul><h5 id='从带分隔符的文本文件导入数据'><span>从带分隔符的文本文件导入数据</span></h5><ul><li><span>你可以使用</span><strong><span>read.table()</span></strong><span>从带分隔符的文本文件中导人数据。此函数可读入一个表格格式的文件并将其保存为一个</span><strong><span>数据框</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydataframe</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(<span class="cm-variable">file</span>, <span class="cm-variable">options</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第2章\第2章 003.png" referrerpolicy="no-referrer" alt="第2章 003"></p><ul><li><p><span>读取</span><code>test.csv</code><span>文件数据：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="csv"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="csv"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">StudentID,First,Last,Math,Science,Social Studies</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">011,Bob,Smith,90,80,67</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">012,Jane,Weary,75,,80</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">010,Dan,"Thornton, III",65,75,70</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">040,Mary,"O'Leary",90,95,92</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"D:/桌面文件/文档/R/代码/019_R语言实战/使用资源/test.csv"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">header</span> <span class="cm-arg-is">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">row.names</span> <span class="cm-arg-is">=</span> <span class="cm-string">"StudentID"</span>,<span class="cm-variable">sep</span> <span class="cm-arg-is">=</span> <span class="cm-string">","</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">First</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Last</span> <span class="cm-variable">Math</span> <span class="cm-variable">Science</span> <span class="cm-variable">Social.Studies</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">11</span> &nbsp; <span class="cm-variable">Bob</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Smith</span> &nbsp; <span class="cm-number">90</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">80</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">67</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">12</span> &nbsp;<span class="cm-variable">Jane</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Weary</span> &nbsp; <span class="cm-number">75</span> &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">80</span> <span class="cm-keyword">.........</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>列studentID现在是行名，不再有标签，也失去了前置的0。</span></li><li><strong><span>stringsAsFactors=TRUE</span></strong><span>：将字符串变量转为因子。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"D:/桌面文件/文档/R/代码/019_R语言实战/使用资源/test.csv"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">header</span> <span class="cm-arg-is">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">row.names</span> <span class="cm-arg-is">=</span> <span class="cm-string">"StudentID"</span>,<span class="cm-variable">sep</span> <span class="cm-arg-is">=</span> <span class="cm-string">","</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">colClasses</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"character"</span>,<span class="cm-string">"character"</span>,<span class="cm-string">"character"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"numeric"</span>,<span class="cm-string">"numeric"</span>,<span class="cm-string">"numeric"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">First</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Last</span> <span class="cm-variable">Math</span> <span class="cm-variable">Science</span> <span class="cm-variable">Social.Studies</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">011</span> &nbsp; <span class="cm-variable">Bob</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Smith</span> &nbsp; <span class="cm-number">90</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">80</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">67</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">012</span> &nbsp;<span class="cm-variable">Jane</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Weary</span> &nbsp; <span class="cm-number">75</span> &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">80</span> <span class="cm-keyword">........</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><h5 id='用连接来导入数据'><span>用连接来导入数据</span></h5><ul><li><span>R也提供了若干种通过连接(connection)来访问数据的机制。例如,函数</span><strong><span>file()</span></strong><span>、</span><strong><span>gzfile()</span></strong><span>、</span><strong><span>bzfile()</span></strong><span>、</span><strong><span>xzfile()</span></strong><span>、</span><strong><span>unz()</span></strong><span>和</span><strong><span>url()</span></strong><span>可作为文件名参数使用。函数</span><strong><span>file()</span></strong><span>允许你访问文件、剪贴板和C级别的标准输入。</span></li><li><span>函数</span><strong><span>gzfile()</span></strong><span>、</span><strong><span>bzfile()</span></strong><span>、</span><strong><span>xzfile()</span></strong><span>和</span><strong><span>unz()</span></strong><span>允许你读取压缩文件。</span></li><li><span>函数</span><strong><span>url()</span></strong><span>能够让你通过一个含有</span><strong><span>http://</span></strong><span>、</span><strong><span>ftp://</span></strong><span>或</span><strong><span>fle://</span></strong><span>的完整URL访问网络上的文件，还可以为HTTP和FTP连接指定代理。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 剪切板的输入与输出</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">f</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">file</span>(<span class="cm-variable">desc</span> <span class="cm-operator">=</span> <span class="cm-string">'clipboard'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cat</span>(<span class="cm-string">'你好'</span>,<span class="cm-variable">file</span> <span class="cm-operator">=</span> <span class="cm-variable">f</span>) <span class="cm-comment"># 写出</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">f</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">file</span>(<span class="cm-variable">desc</span> <span class="cm-operator">=</span> <span class="cm-string">'clipboard'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">readLines</span>(<span class="cm-variable">f</span>) <span class="cm-comment"># 读取</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">close</span>(<span class="cm-variable">f</span>) &nbsp;<span class="cm-comment"># 关闭</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><h5 id='导入excel数据'><span>导入Excel数据</span></h5><ul><li><span>读取一个Excel文件的最好方式，就是在Excel中将其导出为一个逗号分隔文件( </span><strong><span>csv</span></strong><span>)，并使用前文描述的方式将其导入R中。此外，你可以用</span><strong><span>xlsx包</span></strong><span>直接地导人Excel工作表。请确保在第一次使用它之前先进行下载和安装。你也需要</span><strong><span>xlsxjars</span></strong><span>和</span><strong><span>rJava包</span></strong><span>，以及一个正常工作的Java。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">xlsx</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dir</span> <span class="cm-operator">=</span> <span class="cm-string">"D:/桌面文件/文档/R/代码/019_R语言实战/使用资源/test.xlsx"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.xlsx</span>(<span class="cm-variable">dir</span>,<span class="cm-variable">header</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">sheetIndex</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>) <span class="cm-comment"># 第一个工作表</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">name</span> <span class="cm-variable">age</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-variable">xm</span> &nbsp;<span class="cm-number">12</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; <span class="cm-variable">zs</span> &nbsp;<span class="cm-number">19</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>函数</span><strong><span>read.xlsx()</span></strong><span> 有些选项可以允许你指定工作表中特定的行 ( </span><strong><span>rowIndex</span></strong><span> ) 和列(</span><strong><span>colIndex</span></strong><span> )，配合上对应每一列的类 (</span><strong><span>colclasses</span></strong><span> )。对于大型的工作簿 ( 比如说，100 000+个单元格 )你也可以使用</span><strong><span>read.xlsx2()</span></strong><span>函数。这个函数用Java来运行更加多的处理过程，因此能够获得可观的质量提升。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.xlsx</span>(<span class="cm-variable">dir</span>,<span class="cm-variable">header</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">sheetIndex</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">rowIndex</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>),<span class="cm-variable">colIndex</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">name</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-variable">xm</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>也有其他包可以帮助你处理Excel文件。替代的包包含了</span><strong><span>XLConnect</span></strong><span>和</span><strong><span>openxlsx</span></strong><span>包。XLConnect依赖于Java，不过openxlsx并不是。</span></li></ul><h5 id='导入xml数据'><span>导入XML数据</span></h5><ul><li><span>以XML格式编码的数据正在逐渐增多。R中有若干用于处理</span><strong><span>XML</span></strong><span>文件的包。例如，由DuncanTempleLang编写的XML包允许你读取、写入和操作XML文件。</span></li></ul><h5 id='从网页抓取数据'><span>从网页抓取数据</span></h5><ul><li><span>网络上的数据，可以通过所谓Web数据抓取 ( Webscraping )的过程，或对应用程序接口（API）的使用来获得。</span></li><li><span>一般地说，在Web数据抓取过程中，用户从互联网上提取嵌人在网页中的信息，并将其保存为R中的数据结构以做进一步的分析。比如说，一个网页上的文字可以使用函数</span><strong><span>readlines()</span></strong><span>来下载到一个R的字符向量中，然后使用如</span><strong><span>grep()</span></strong><span>和</span><strong><span>gsub()</span></strong><span>一类的函数处理它。</span></li><li><span>比如说，如果你对社交媒体感兴趣，可以用</span><strong><span>twitteR</span></strong><span>来获取</span><strong><span>Twiter</span></strong><span>数据，用 </span><strong><span>Rfacebook</span></strong><span>来获取</span><strong><span>Facebook</span></strong><span>数据，用</span><strong><span>Rflickr</span></strong><span>来获取</span><strong><span>Flicker</span></strong><span>数据。其他软件包允许你连接上如Google、Amazon.Dropbox、Salesforce等所提供的广受欢迎的网上服务。可以查看CRAN Task View中的子版块WebTechnologies and Services (</span><a href='https://cran.r-project.org/web/views/WebTechnologies.html' target='_blank' class='url'>https://cran.r-project.org/web/views/WebTechnologies.html</a><span>)。</span></li></ul><h5 id='导入spss数据'><span>导入SPSS数据</span></h5><ul><li><span>IBM SPSS数据集可以通过</span><strong><span>foreign包</span></strong><span>中的函数</span><strong><span>read.spss()</span></strong><span>导人到R中,也可以使用</span><strong><span>Hmisc包</span></strong><span>中的</span><strong><span>spss.get()</span></strong><span>函数。函数</span><strong><span>spss.get()</span></strong><span>是对</span><strong><span>read.spss()</span></strong><span>的一个封装，它可以为你自动设置后者的许多参数，让整个转换过程更加简单一致，最后得到数据分析人员所期望的结果。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"Hmisc"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">Hmisc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydataframe</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">spss.get</span>(<span class="cm-string">"mydata.sav"</span>, <span class="cm-variable">use.value.labels</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><strong><span>mydata.sav</span></strong><span>是要导人的SPSS数据文件，</span><strong><span>use.value.labels=TRUE</span></strong><span>表示让函数将带有值标签的变量导入为R中水平对应相同的因子，</span><strong><span>mydataframe</span></strong><span>是导入后的R数据框。</span></li></ul><h5 id='导入sas数据'><span>导入SAS数据</span></h5><ul><li><p><span>R中设计了若干用来导人SAS数据集的函数，包括</span><strong><span>foreign包</span></strong><span>中的</span><strong><span>read.ssd()</span></strong><span>，</span><strong><span>Hmisc包</span></strong><span>中的</span><strong><span>sas.get()</span></strong><span>，以及</span><strong><span>sas7bdat包</span></strong><span>中的 </span><strong><span>read.sas7bdat()</span></strong><span>。</span></p></li><li><p><span>电脑上安装有SAS：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">Hmisc</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">datadir</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"C:/mydata"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sasexe</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"C:/Program Files/SASHome/SASFoundation/9.4/sas.exe"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sas.get</span>(<span class="cm-variable">libraryName</span><span class="cm-operator">=</span><span class="cm-variable">datadir</span>, <span class="cm-variable">member</span><span class="cm-operator">=</span><span class="cm-string">"clients"</span>, <span class="cm-variable">sasprog</span><span class="cm-operator">=</span><span class="cm-variable">sasexe</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>libraryName是一个包含了SAS数据集的文件夹，member是数据集名字( 去除掉后缀名sas7bdat ,sasprog是到SAS可运行程序的完整路径。</span></li></ul></li><li><p><span>电脑上安装有SAS的另一种方法：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sas"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sas"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">libname</span> datadir <span class="cm-string">"C:\mydata"</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">proc</span> <span class="cm-variable-2">export</span> <span class="cm-def">data</span><span class="cm-operator">=</span>datadir<span class="cm-number">.</span>clients</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> outfile<span class="cm-operator">=</span><span class="cm-string">"clients.csv"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> dbms<span class="cm-operator">=</span>csv;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">run;</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(<span class="cm-string">"clients.csv"</span>, <span class="cm-variable">header</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">","</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>如果你没有连接SAS的途径，函数</span><strong><span>read.sas7dbat()</span></strong><span>也许是一个好的候选项。这个函数可以直接读取</span><strong><span>sas7dbat格式</span></strong><span>的SAS数据集。</span></p></li></ul><h5 id='导入stata数据'><span>导入Stata数据</span></h5><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">foreign</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydataframe</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.dta</span>(<span class="cm-string">"mydata.dta"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h5 id='导入netcdf数据'><span>导入NetCDF数据</span></h5><ul><li><span>Unidata项目主导的开源软件库NetCDF（Network Common Data Form，网络通用数据格式）定义了一种机器无关的数据格式，可用于创建和分发面向数组的科学数据。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ncdf</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">nc_open</span>(<span class="cm-string">"mynetCDFfile"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myarray</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">get.var.ncdf</span>(<span class="cm-variable">nc</span>, <span class="cm-variable">myvar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><h5 id='导入hdf5数据'><span>导入HDF5数据</span></h5><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">source</span>(<span class="cm-string">"http://bioconductor.org/biocLite.R"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">biocLite</span>(<span class="cm-string">"rhdf5"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BiocManager</span><span class="cm-operator">::</span><span class="cm-variable">install</span>(<span class="cm-string">"rhdf5"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">rhdf5</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>这个包在Bioconductor网站。</span></li></ul><h5 id='访问数据库'><span>访问数据库</span></h5><ul><li><span>ODBC接口：在R中通过</span><strong><span>RODBC</span></strong><span>包访问一个数据库，允许访问任何一个ODBC驱动的数据库。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"RODBC"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">RODBC</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第2章\第2章 004.png" referrerpolicy="no-referrer" alt="第2章 004"></p><ul><li><p><span>下载</span><code>MySQL Connector/ODBC</code><span>：</span><a href='https://downloads.mysql.com/archives/c-odbc/' target='_blank' class='url'>https://downloads.mysql.com/archives/c-odbc/</a></p></li><li><p><span>创建ODBC数据源：</span></p><p><img src="img\019_R语言实战\第2章\第2章 005.png" alt="第2章 005" style="zoom:50%;" /></p></li><li><p><span>新建DSN：</span></p><p><img src="img\019_R语言实战\第2章\第2章 006.png" alt="第2章 006" style="zoom:50%;" /></p><p><img src="img\019_R语言实战\第2章\第2章 007.png" alt="第2章 007" style="zoom:50%;" /></p></li><li><p><span>连接数据库：</span></p><p><img src="img\019_R语言实战\第2章\第2章 008.png" alt="第2章 008" style="zoom:50%;" /></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取odbc连接</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">conn</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">odbcConnect</span>(<span class="cm-string">'mysql57'</span>,<span class="cm-variable">uid</span><span class="cm-operator">=</span><span class="cm-string">'root'</span>,<span class="cm-variable">pwd</span><span class="cm-operator">=</span><span class="cm-string">'root'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取orders数据表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqlFetch</span>(<span class="cm-variable">conn</span>,<span class="cm-string">'orders'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">print</span>(<span class="cm-variable">data</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">order_id</span> <span class="cm-variable">order_date</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">10086</span> &nbsp; <span class="cm-number">20221201</span> 广东省广州市番禺区</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">10087</span> &nbsp; <span class="cm-number">20220403</span> 广东省汕头市潮南区</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">10088</span> &nbsp; <span class="cm-number">20210703</span> 广东省佛山市南海区</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">10089</span> &nbsp; <span class="cm-number">20140608</span> 福建省厦门市集美区</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp;<span class="cm-number">10090</span> &nbsp; <span class="cm-number">20210703</span> 广东省惠州市博罗县</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 使用SQL语句</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqlQuery</span>(<span class="cm-variable">conn</span>,<span class="cm-string">'select * from orders where order_id &gt; 10088'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">print</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 关闭连接</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">close</span>(<span class="cm-variable">conn</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">order_id</span> <span class="cm-variable">order_date</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">address</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">10089</span> &nbsp; <span class="cm-number">20140608</span> 福建省厦门市集美区</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">10090</span> &nbsp; <span class="cm-number">20210703</span> 广东省惠州市博罗县</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>DBI相关包：DBI包为访问数据库提供了一个通用且一致的客户端接口。构建于这个框架之上的RJDBC包提供了通过JDBC驱动访问数据库的方案。使用时请确保安装了针对你的系统和数据库的必要JDBC驱动。其他有用的、基于DBI的包有RMySOL、ROracle、RPostgresOL和RSOLite。</span></li></ul><h4 id='处理数据对象的实用函数'><span>处理数据对象的实用函数</span></h4><p><img src="img\019_R语言实战\第2章\第2章 009.png" referrerpolicy="no-referrer" alt="第2章 009"></p><p><img src="img\019_R语言实战\第2章\第2章 010.png" referrerpolicy="no-referrer" alt="第2章 010"></p><h3 id='第3章-图形初阶'><span>第3章 图形初阶</span></h3><ul><li><p><span>绘制一幅图像，保存为pdf：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">pdf</span>(<span class="cm-string">"d:/test.pdf"</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">abline</span>(<span class="cm-variable">lm</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">title</span>(<span class="cm-string">"Test"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dev.off</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li><li><p><span>在多个图像中跳转：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x11</span>() <span class="cm-comment"># 打开一个新窗口，设为窗口1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.new</span>() <span class="cm-comment"># 打开一个新窗口于x11()类似，设为窗口2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">rnorm</span>(<span class="cm-number">10</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.set</span>(<span class="cm-variable">dev.prev</span>()) <span class="cm-comment"># 定位到前一个窗口（窗口1）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-number">0</span>, <span class="cm-number">1</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.set</span>(<span class="cm-variable">dev.next</span>()) <span class="cm-comment"># 定位到下一个窗口（窗口2）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">h</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"gray"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.set</span>(<span class="cm-variable">dev.prev</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>() </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre></li><li><p><strong><span>plot()</span></strong><span>是R中为对象作图的一个</span><strong><span>泛型函数</span></strong><span>(它的输出将根据所绘制对象类型的不同而变化)。</span></p></li></ul><h4 id='图形参数'><span>图形参数</span></h4><ul><li><strong><span>图形参数</span></strong><span>的选项来自定义一幅图形的多个特征(字体、颜色、坐标轴标签)。可以通过</span><strong><span>par()</span></strong><span>来指定。</span></li><li><span>不</span><strong><span>加参数</span></strong><span>地执行</span><strong><span>par()</span></strong><span>将生成一个含有当前图形参数设置的列表</span></li><li><strong><span>添加参数no.readonly=TRUE</span></strong><span>可以生成一个可以</span><strong><span>修改</span></strong><span>的当前图形参数列表。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取当前的参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改为三角形虚线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">lty</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">17</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">20</span>,<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"b"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改回原来的参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><h4 id='符号和线条'><span>符号和线条</span></h4><p><img src="img\019_R语言实战\第3章\第3章 001.png" referrerpolicy="no-referrer" alt="第3章 001"></p><figure><table><thead><tr><th><img src="img\019_R语言实战\第3章\第3章 002.png" alt="第3章 002"  /></th><th><img src="img\019_R语言实战\第3章\第3章 037.png" referrerpolicy="no-referrer" alt="第3章 037"></th></tr></thead><tbody></tbody></table></figure><ul><li><p><span>对于符号21~25，你还可以指定边界颜色(</span><strong><span>col=</span></strong><span>) 和填充色(</span><strong><span>bg=</span></strong><span>)。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">seq</span>(<span class="cm-number">10</span>,<span class="cm-number">100</span>,<span class="cm-number">10</span>),<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">23</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>,<span class="cm-variable">bg</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><h4 id='颜色'><span>颜色</span></h4><p><img src="img\019_R语言实战\第3章\第3章 004.png" referrerpolicy="no-referrer" alt="第3章 004"></p><ul><li><p><span>颜色值可以是</span><strong><span>颜色下标</span></strong><span>、</span><strong><span>颜色名称</span></strong><span>、</span><strong><span>十六进制的颜色值</span></strong><span>、</span><strong><span>RGB值</span></strong><span>或</span><strong><span>HSV值</span></strong><span>来指定颜色。举例来说，col=1、col=&quot;white&quot;、col=&quot;#FEFFEE&quot;、col=rgb(1,1,1)和col=hsv(0,0,1)。</span></p></li><li><p><strong><span>colours()</span></strong><span>、</span><strong><span>colors()</span></strong><span>获取所有可用的颜色。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  [<span class="cm-number">1</span>] <span class="cm-string">"white"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"aliceblue"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"antiquewhite"</span> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  [<span class="cm-number">4</span>] <span class="cm-string">"antiquewhite1"</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"antiquewhite2"</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"antiquewhite3"</span> &nbsp;<span class="cm-keyword">......</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>创建连续颜色的函数：</span><strong><span>rainbow()</span></strong><span>、</span><strong><span>heat.colors()</span></strong><span>、</span><strong><span>terrain.colors()</span></strong><span>、</span><strong><span>topo.colors()</span></strong><span>、</span><strong><span>cm.colors()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rainbow</span>(<span class="cm-number">6</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">heat.colors</span>(<span class="cm-number">6</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">terrain.colors</span>(<span class="cm-number">6</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">topo.colors</span>(<span class="cm-number">6</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cm.colors</span>(<span class="cm-number">6</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">10</span>),<span class="cm-variable">radius</span><span class="cm-operator">=</span><span class="cm-number">1</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">rainbow</span>(<span class="cm-number">10</span>))<span class="cm-semi">;</span><span class="cm-variable">title</span>(<span class="cm-string">"rainbow"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">10</span>),<span class="cm-variable">radius</span><span class="cm-operator">=</span><span class="cm-number">1</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">heat.colors</span>(<span class="cm-number">10</span>))<span class="cm-semi">;</span><span class="cm-variable">title</span>(<span class="cm-string">"heat.colors"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">10</span>),<span class="cm-variable">radius</span><span class="cm-operator">=</span><span class="cm-number">1</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">terrain.colors</span>(<span class="cm-number">10</span>))<span class="cm-semi">;</span><span class="cm-variable">title</span>(<span class="cm-string">"terrain.colors"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">10</span>),<span class="cm-variable">radius</span><span class="cm-operator">=</span><span class="cm-number">1</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">topo.colors</span>(<span class="cm-number">10</span>))<span class="cm-semi">;</span><span class="cm-variable">title</span>(<span class="cm-string">"topo.colors"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">10</span>),<span class="cm-variable">radius</span><span class="cm-operator">=</span><span class="cm-number">1</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">cm.colors</span>(<span class="cm-number">10</span>))<span class="cm-semi">;</span><span class="cm-variable">title</span>(<span class="cm-string">"cm.colors"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre></li></ul><figure><table><thead><tr><th><img src="img\019_R语言实战\第3章\第3章 005.png" referrerpolicy="no-referrer" alt="第3章 005"></th><th><img src="img\019_R语言实战\第3章\第3章 006.png" referrerpolicy="no-referrer" alt="第3章 006"></th><th><img src="img\019_R语言实战\第3章\第3章 007.png" referrerpolicy="no-referrer" alt="第3章 007"></th></tr></thead><tbody><tr><td><img src="img\019_R语言实战\第3章\第3章 008.png" referrerpolicy="no-referrer" alt="第3章 008"></td><td><img src="img\019_R语言实战\第3章\第3章 009.png" referrerpolicy="no-referrer" alt="第3章 009"></td><td>&nbsp;</td></tr></tbody></table></figure><ul><li><p><span>与调色相关的包</span><strong><span>RColorBrewer</span></strong><span>：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"RColorBrewer"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">RColorBrewer</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取显示向量：从Set1调色板中抽取了9种用十六进制表示的颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cols</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">brewer.pal</span>(<span class="cm-number">9</span>,<span class="cm-string">"Set1"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">9</span>), <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">cols</span>)<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment"># 图1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取调色板列表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">brewer.pal.info</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 显示出所有调色板的颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">display.brewer.all</span>() <span class="cm-comment"># 图2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 235px;"></div><div class="CodeMirror-gutters" style="display: none; height: 235px;"></div></div></div></pre></li></ul><figure><table><thead><tr><th><img src="img\019_R语言实战\第3章\第3章 010.png" referrerpolicy="no-referrer" alt="第3章 010"></th><th><img src="img\019_R语言实战\第3章\第3章 011.png" referrerpolicy="no-referrer" alt="第3章 011"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>多阶灰度色：</span><strong><span>gray()</span></strong><span>，输入0~1之间的数</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mygrays</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">gray</span>(<span class="cm-number">0</span><span class="cm-operator">:</span><span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-number">10</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">rep</span>(<span class="cm-number">1</span>,<span class="cm-number">10</span>),<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">mygrays</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">mygrays</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 012.png" alt="第3章 012" style="zoom:60%;" /></p><h4 id='文本属性'><span>文本属性</span></h4><p><img src="img\019_R语言实战\第3章\第3章 013.png" referrerpolicy="no-referrer" alt="第3章 013"></p><p><img src="img\019_R语言实战\第3章\第3章 014.png" referrerpolicy="no-referrer" alt="第3章 014"></p><ul><li><p><span>衬线、无衬线和等宽字体的具体映射是与图形设备相关的。举例来说，在Windows系统中，等宽字体映射为TTCourierNew，衬线字体映射为TT Times New Roman，无衬线字体则映射为TT Arial(TT代表True Type )。</span></p></li><li><p><span>在Windows中，可以通过函数</span><strong><span>windowsFonts()</span></strong><span>来创建这类映射。如：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">windowsFonts</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">A</span> <span class="cm-arg-is">=</span> <span class="cm-variable">windowsFont</span>(<span class="cm-string">"Arial Black"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">B</span> <span class="cm-arg-is">=</span> <span class="cm-variable">windowsFont</span>(<span class="cm-string">"Bookman Old Style"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">C</span> <span class="cm-arg-is">=</span> <span class="cm-variable">windowsFont</span>(<span class="cm-string">"Comic Sans MS"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><span>之后，即可使用A、B和C作为family的取值。</span></p></li><li><p><span>设置输出到PDF的字体样式，可以通过</span><code>names(pdfFonts())</code><span>获取可用的字体。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pdf</span>(<span class="cm-string">"d:/t1.pdf"</span>,<span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-string">"serif"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"ABCDEFG"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pdf</span>(<span class="cm-string">"d:/t2.pdf"</span>,<span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-string">"Bookman"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"ABCDEFG"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre></li></ul><h4 id='图形与边界尺度'><span>图形与边界尺度</span></h4><p><img src="img\019_R语言实战\第3章\第3章 015.png" referrerpolicy="no-referrer" alt="第3章 015"></p><ul><li><span>上面的mai表示的是margin。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">pin</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">4</span>),<span class="cm-variable">mai</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0.3</span>,<span class="cm-number">0.3</span>,<span class="cm-number">0.3</span>,<span class="cm-number">0.3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 016.png" alt="第3章 016" style="zoom:50%;" /></p><ul><li><span>书本案例：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 书本案例</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">20</span>, <span class="cm-number">30</span>, <span class="cm-number">40</span>, <span class="cm-number">45</span>, <span class="cm-number">60</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugA</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">16</span>, <span class="cm-number">20</span>, <span class="cm-number">27</span>, <span class="cm-number">40</span>, <span class="cm-number">60</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugB</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">15</span>, <span class="cm-number">18</span>, <span class="cm-number">25</span>, <span class="cm-number">31</span>, <span class="cm-number">40</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">pin</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>, <span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">1.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">cex.axis</span><span class="cm-operator">=</span><span class="cm-number">.75</span>, <span class="cm-variable">font.axis</span><span class="cm-operator">=</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">dose</span>, <span class="cm-variable">drugA</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">19</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">dose</span>, <span class="cm-variable">drugB</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">23</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">6</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>, <span class="cm-variable">bg</span><span class="cm-operator">=</span><span class="cm-string">"green"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第3章\第3章 017.png" referrerpolicy="no-referrer" alt="第3章 017"></th><th><img src="img\019_R语言实战\第3章\第3章 018.png" referrerpolicy="no-referrer" alt="第3章 018"></th></tr></thead><tbody></tbody></table></figure><h4 id='文本坐标轴和图例'><span>文本、坐标轴和图例</span></h4><ul><li><p><span>如下参数的作用：</span></p><ul><li><span>main：标题</span></li><li><span>sub：副标题</span></li><li><span>xlab：x轴标签</span></li><li><span>ylab：y轴标签</span></li><li><span>xlim：x轴的范围</span></li><li><span>ylim：y轴的范围</span></li></ul></li><li><p><span>并非所有的函数都支持这些选项。某些高级绘图函数已经包含了默认的标题和标签。你可以通过在</span><strong><span>plot()</span></strong><span>语句或单独的</span><strong><span>par()</span></strong><span>语句中添加</span><strong><span>ann=EALSE</span></strong><span>来移除它们。</span></p></li></ul><h5 id='标题'><span>标题</span></h5><ul><li><p><strong><span>title()</span></strong><span>函数：添加标题、副标题、x轴标签、y轴标签，同时支持添加的标签的大小，颜色等的修改。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">10</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">title</span>(<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"大标题"</span>,<span class="cm-variable">col.main</span> <span class="cm-operator">=</span> <span class="cm-string">"skyblue"</span>,<span class="cm-variable">cex.main</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sub</span> <span class="cm-operator">=</span> <span class="cm-string">"副标题"</span>,<span class="cm-variable">font.sub</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"x轴"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"y轴"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 019.png" alt="第3章 019" style="zoom:50%;" /></p></li></ul><h5 id='坐标轴-1'><span>坐标轴</span></h5><ul><li><p><strong><span>axis()</span></strong><span>函数：自定义坐标轴。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axis</span>(<span class="cm-variable">side</span>, <span class="cm-variable">at</span><span class="cm-operator">=</span>, <span class="cm-variable">labels</span><span class="cm-operator">=</span>, <span class="cm-variable">pos</span><span class="cm-operator">=</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span>, <span class="cm-variable">las</span><span class="cm-operator">=</span>, <span class="cm-variable">tck</span><span class="cm-operator">=</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第3章\第3章 020.png" referrerpolicy="no-referrer" alt="第3章 020"></p><p><img src="img\019_R语言实战\第3章\第3章 021.png" referrerpolicy="no-referrer" alt="第3章 021"></p><ul><li><span>书本实例：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">z</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 设置坐标轴边界距离</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mar</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">5</span>, <span class="cm-number">4</span>, <span class="cm-number">4</span>, <span class="cm-number">8</span>) <span class="cm-operator">+</span> <span class="cm-number">0.1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制y = x曲线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ann=FALSE禁用plot()函数的全部坐标轴标签（坐标轴显示的文字，不包括刻度文字）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># yaxt = "n"禁用y轴的 刻度文字，保留刻度线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">21</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">yaxt</span><span class="cm-operator">=</span><span class="cm-string">"n"</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">ann</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制x = 10/x曲线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lines</span>(<span class="cm-variable">x</span>, <span class="cm-variable">z</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">22</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 添加左边坐标轴</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># las=2，刻度与坐标轴的刻度线垂直，即平行与坐标轴</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axis</span>(<span class="cm-number">2</span>, <span class="cm-variable">at</span><span class="cm-operator">=</span><span class="cm-variable">x</span>, <span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">x</span>, <span class="cm-variable">col.axis</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>, <span class="cm-variable">las</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># round(z, digits=2)保留两位小数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># tck=-.01刻度线的长度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axis</span>(<span class="cm-number">4</span>, <span class="cm-variable">at</span><span class="cm-operator">=</span><span class="cm-variable">z</span>, <span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">round</span>(<span class="cm-variable">z</span>, <span class="cm-variable">digits</span><span class="cm-operator">=</span><span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col.axis</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>, <span class="cm-variable">las</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">cex.axis</span><span class="cm-operator">=</span><span class="cm-number">0.7</span>, <span class="cm-variable">tck</span><span class="cm-operator">=-</span><span class="cm-number">.01</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 在右坐标轴的右边添加文字</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtext</span>(<span class="cm-string">"y=1/x"</span>, <span class="cm-variable">side</span><span class="cm-operator">=</span><span class="cm-number">4</span>, <span class="cm-variable">line</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">cex.lab</span><span class="cm-operator">=</span><span class="cm-number">1</span>, <span class="cm-variable">las</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">title</span>(<span class="cm-string">"An Example of Creative Axes"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"X values"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Y=X"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 702px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 022.png" referrerpolicy="no-referrer" alt="第3章 022"></p><ul><li><p><strong><span>axes = FALSE</span></strong><span>：禁用函数的全部坐标轴，包括坐标轴文字标签、刻度文字、刻度、刻度线等等。</span></p></li><li><p><strong><span>xaxt = &quot;n&quot;</span></strong><span>与</span><strong><span>yaxt = &quot;n&quot;</span></strong><span>：单纯禁用</span><strong><span>刻度文字</span></strong><span>，不包括刻度线等。</span></p></li><li><p><strong><span>mtext()</span></strong><span>函数：在坐标轴外（margin处）添加文本。</span></p></li><li><p><strong><span>次要刻度线</span></strong><span>：每个主刻度要分成几个小刻度，使用</span><strong><span>Hmisc</span></strong><span>包里的</span><strong><span>minor.tick()</span></strong><span>函数添加。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">5</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">minor.tick</span>(<span class="cm-variable">nx</span><span class="cm-operator">=</span><span class="cm-variable">n</span>, <span class="cm-variable">ny</span><span class="cm-operator">=</span><span class="cm-variable">n</span>, <span class="cm-variable">tick.ratio</span><span class="cm-operator">=</span><span class="cm-variable">n</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><span>nx和ny分别指定了X轴和Y轴每两条主刻度线之间通过次要刻度线划分得到的区间个数。tick.ratio表示次要刻度线相对于主刻度线的大小比例。</span></p></li></ul><h5 id='参考线'><span>参考线</span></h5><ul><li><p><strong><span>abline()</span></strong><span>：用于添加参考线（水平、垂直）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">h</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">4</span>,<span class="cm-number">6</span>,<span class="cm-number">8</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">6</span>,<span class="cm-number">9</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">7</span>),<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第3章\第3章 023.png" referrerpolicy="no-referrer" alt="第3章 023"></p><h5 id='图例-1'><span>图例</span></h5><ul><li><strong><span>legend()</span></strong><span>：当图形中包含的数据不止一组时，图例可以帮助你辨别出每个条形、扇形区域或折线各代表哪一类数据。</span></li></ul><p><img src="img\019_R语言实战\第3章\第3章 024.png" referrerpolicy="no-referrer" alt="第3章 024"></p><ul><li><p><span>书本实例：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">20</span>, <span class="cm-number">30</span>, <span class="cm-number">40</span>, <span class="cm-number">45</span>, <span class="cm-number">60</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugA</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">16</span>, <span class="cm-number">20</span>, <span class="cm-number">27</span>, <span class="cm-number">40</span>, <span class="cm-number">60</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugB</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">15</span>, <span class="cm-number">18</span>, <span class="cm-number">25</span>, <span class="cm-number">31</span>, <span class="cm-number">40</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">0.8</span>, <span class="cm-variable">font.lab</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">dose</span>, <span class="cm-variable">drugA</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">15</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">1</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>, <span class="cm-variable">ylim</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>, <span class="cm-number">60</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Drug A vs. Drug B"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Drug Dosage"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Drug Response"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lines</span>(<span class="cm-variable">dose</span>, <span class="cm-variable">drugB</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">17</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">30</span>), <span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">1.5</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"gray"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">Hmisc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 每一个大刻度分为3个小刻度，刻度线的长度为主刻度线的一半</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">minor.tick</span>(<span class="cm-variable">nx</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">ny</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">tick.ratio</span><span class="cm-operator">=</span><span class="cm-number">0.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 图例放置于左上角，向内偏移0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 此处线条的类型lty、点的样式pch、颜色col都需要根据上面的设置来</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">legend</span>(<span class="cm-string">"topleft"</span>, <span class="cm-variable">inset</span><span class="cm-operator">=</span><span class="cm-number">.05</span>, <span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Drug Type"</span>, <span class="cm-variable">c</span>(<span class="cm-string">"A"</span>,<span class="cm-string">"B"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>, <span class="cm-number">2</span>), <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">15</span>, <span class="cm-number">17</span>), <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"red"</span>, <span class="cm-string">"blue"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第3章\第3章 025.png" alt="第3章 025" style="zoom:67%;" /></p><h5 id='文本'><span>文本</span></h5><ul><li><strong><span>text()</span></strong><span>：在绘图区域内添加文字。</span></li><li><strong><span>mtext()</span></strong><span>：在绘图区域外，即边界添加文字。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">text</span>(<span class="cm-variable">location</span>, <span class="cm-string">"text to place"</span>, <span class="cm-variable">pos</span>, <span class="cm-keyword">...</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtext</span>(<span class="cm-string">"text to place"</span>, <span class="cm-variable">side</span>, <span class="cm-variable">line</span><span class="cm-operator">=</span><span class="cm-variable">n</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 026.png" referrerpolicy="no-referrer" alt="第3章 026"></p><ul><li><span>书本实例：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">wt</span>, <span class="cm-variable">mpg</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Mileage vs. Car Weight"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Weight"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Mileage"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">18</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># pos=4在图形的右边添加文本</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">text</span>(<span class="cm-variable">wt</span>, <span class="cm-variable">mpg</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">row.names</span>(<span class="cm-variable">mtcars</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">0.6</span>, <span class="cm-variable">pos</span><span class="cm-operator">=</span><span class="cm-number">4</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 027.png" alt="第3章 027" style="zoom: 33%;" /></p><ul><li><strong><span>plot(1:10,type = &quot;n&quot;)</span></strong><span>：不显示出点来。</span></li></ul><h5 id='数学标注'><span>数学标注</span></h5><ul><li><strong><span>plotmath()</span></strong><span>函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"n"</span>,<span class="cm-variable">axes</span><span class="cm-operator">=</span><span class="cm-variable">F</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">""</span>,<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">""</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">text</span>(<span class="cm-number">5</span>,<span class="cm-number">5</span>,<span class="cm-variable">expression</span>(<span class="cm-variable">sqrt</span>(<span class="cm-variable">x</span>)),<span class="cm-variable">cex</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">text</span>(<span class="cm-number">5</span>,<span class="cm-number">3</span>,<span class="cm-variable">expression</span>(<span class="cm-variable">lim</span>(<span class="cm-variable">f</span>(<span class="cm-variable">x</span>),<span class="cm-variable">x</span><span class="cm-operator cm-variable-2">%-&gt;%</span><span class="cm-number">0</span>)),<span class="cm-variable">cex</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 030.png" alt="第3章 030" style="zoom:50%;" /></p><h4 id='各参数的综合使用'><span>各参数的综合使用</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"大标题文字"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">sub</span> <span class="cm-operator">=</span> <span class="cm-string">"副标题"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"x轴文字"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"y轴文字"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"b"</span>, <span class="cm-comment"># 设置直线连接</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">24</span>, <span class="cm-comment"># 设置图形的类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>, <span class="cm-comment"># 设置线条的宽度，图形边框</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">lty</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>, <span class="cm-comment"># 线条类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">fg</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>, <span class="cm-comment"># 前景色，坐标轴边框</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">bg</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>, <span class="cm-comment"># 背景色，图形的填充颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"green"</span>,<span class="cm-comment"># 线条的颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col.axis</span> <span class="cm-operator">=</span> <span class="cm-string">"skyblue"</span>, <span class="cm-comment"># 刻度颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col.lab</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">10</span>)[<span class="cm-number">2</span>], <span class="cm-comment"># 坐标轴标签颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col.main</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">10</span>)[<span class="cm-number">3</span>], <span class="cm-comment"># 大标题颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">col.sub</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">10</span>)[<span class="cm-number">4</span>], <span class="cm-comment"># 副标题颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">cex</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>, <span class="cm-comment"># 设置图形的相对大小</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">cex.axis</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">cex.main</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">cex.lab</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">cex.sub</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">font.axis</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-comment"># 粗体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">font.main</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>, <span class="cm-comment"># 斜体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">font.lab</span> <span class="cm-operator">=</span> <span class="cm-number">4</span>, <span class="cm-comment"># 粗斜体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">font.sub</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>, <span class="cm-comment"># 符号字体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-string">"mono"</span>, <span class="cm-comment"># 等宽字体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">pin</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">10</span>,<span class="cm-number">10</span>), <span class="cm-comment"># 宽高</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">mai</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">1</span>), <span class="cm-comment"># 边界距离(下左上右)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; )</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 884px;"></div><div class="CodeMirror-gutters" style="display: none; height: 884px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 028.png" alt="第3章 028" style="zoom:67%;" /></p><h4 id='图形组合'><span>图形组合</span></h4><ul><li><span>使用</span><strong><span>par()</span></strong><span>或</span><strong><span>layout()</span></strong><span>来将多张图片放在一起。</span></li><li><strong><span>par()</span></strong><span>函数的</span><strong><span>mfrow</span></strong><span>和</span><strong><span>mfcol</span></strong><span>分别为指定</span><strong><span>按行</span></strong><span>还是</span><strong><span>按列</span></strong><span>填充图形。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Scatterplot"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">disp</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Scatterplot"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">wt</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Histogram"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">boxplot</span>(<span class="cm-variable">wt</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Boxplot"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 031.png" alt="第3章 031" style="zoom: 50%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 1,1表示第一个图占两个格子，2,3表示接下来的各占一个格子，0表示空格</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">layout</span>(<span class="cm-variable">matrix</span>(<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>), <span class="cm-number">2</span>, <span class="cm-number">2</span>, <span class="cm-variable">byrow</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">wt</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">layout</span>(<span class="cm-variable">matrix</span>(<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">3</span>),<span class="cm-number">3</span>,<span class="cm-number">2</span>, <span class="cm-variable">byrow</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">wt</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第3章\第3章 032.png" alt="第3章 032" style="zoom: 100%;" /></th><th><img src="img\019_R语言实战\第3章\第3章 033.png" alt="第3章 033" style="zoom:67%;" /></th></tr></thead><tbody></tbody></table></figure><ul><li><strong><span>widths</span></strong><span>和</span><strong><span>heights</span></strong><span>可以设置各个列的宽度和高度的比例：有的时候，可能因为图片太大而无法直接显示，此时可以输出到文件。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">png</span>(<span class="cm-string">"d:/1.png"</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">1024</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">1024</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">layout</span>(<span class="cm-variable">matrix</span>(<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>),<span class="cm-number">2</span>,<span class="cm-number">2</span>,<span class="cm-variable">byrow</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>),<span class="cm-variable">widths</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">1</span>),<span class="cm-variable">heights</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">wt</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dev.off</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 034.png" alt="第3章 034" style="zoom: 33%;" /></p><h4 id='图形布局的精细控制'><span>图形布局的精细控制</span></h4><ul><li><strong><span>fig</span></strong><span>参数的值：</span><strong><span>fig = c(x1, x2, y1, y2)</span></strong></li></ul><p><img src="img\019_R语言实战\第3章\第3章 035.png" alt="第3章 035" style="zoom:33%;" /></p><ul><li><strong><span>fig</span></strong><span>默认会新建一幅图形，所以在添加一幅图到一幅现有图形上时，请设定参数</span><strong><span>new=TRUE</span></strong><span>。</span></li><li><span>书本实例：在散点图旁边加上两张箱线图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">png</span>(<span class="cm-string">"d:/1.png"</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">400</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">520</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">fig</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">0.8</span>,<span class="cm-number">0</span>,<span class="cm-number">0.8</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">wt</span>, <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Miles Per Gallon"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Car Weight"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 没有new=TRUE，每一个绘图函数会将上一步绘制的图形覆盖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">fig</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">0.8</span>,<span class="cm-number">0.55</span>,<span class="cm-number">1</span>), <span class="cm-variable">new</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">wt</span>, <span class="cm-variable">horizontal</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">axes</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">fig</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0.65</span>,<span class="cm-number">1</span>,<span class="cm-number">0</span>,<span class="cm-number">0.8</span>), <span class="cm-variable">new</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>, <span class="cm-variable">axes</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtext</span>(<span class="cm-string">"Enhanced Scatterplot"</span>, <span class="cm-variable">side</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">outer</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">line</span><span class="cm-operator">=-</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><p><img src="img\019_R语言实战\第3章\第3章 036.png" alt="第3章 036" style="zoom:75%;" /></p><h3 id='第4章-基本数据管理'><span>第4章 基本数据管理</span></h3><ul><li><span>本章要使用的leadership数据框：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">manager</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">3</span>, <span class="cm-number">4</span>, <span class="cm-number">5</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">date</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"10/24/08"</span>, <span class="cm-string">"10/28/08"</span>, <span class="cm-string">"10/1/08"</span>, <span class="cm-string">"10/12/08"</span>, <span class="cm-string">"5/1/09"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">country</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"US"</span>, <span class="cm-string">"US"</span>, <span class="cm-string">"UK"</span>, <span class="cm-string">"UK"</span>, <span class="cm-string">"UK"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gender</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"M"</span>, <span class="cm-string">"F"</span>, <span class="cm-string">"F"</span>, <span class="cm-string">"M"</span>, <span class="cm-string">"F"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">age</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">32</span>, <span class="cm-number">45</span>, <span class="cm-number">25</span>, <span class="cm-number">39</span>, <span class="cm-number">99</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">5</span>, <span class="cm-number">3</span>, <span class="cm-number">3</span>, <span class="cm-number">3</span>, <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">4</span>, <span class="cm-number">5</span>, <span class="cm-number">5</span>, <span class="cm-number">3</span>, <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">5</span>, <span class="cm-number">2</span>, <span class="cm-number">5</span>, <span class="cm-number">4</span>, <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q4</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">5</span>, <span class="cm-number">5</span>, <span class="cm-number">5</span>, <span class="cm-atom">NA</span>, <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">q5</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">5</span>, <span class="cm-number">5</span>, <span class="cm-number">2</span>, <span class="cm-atom">NA</span>, <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">manager</span>, <span class="cm-variable">date</span>, <span class="cm-variable">country</span>, <span class="cm-variable">gender</span>, <span class="cm-variable">age</span>,<span class="cm-variable">q1</span>, <span class="cm-variable">q2</span>, <span class="cm-variable">q3</span>, <span class="cm-variable">q4</span>, <span class="cm-variable">q5</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">leadership</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">manager</span> &nbsp; &nbsp; <span class="cm-variable">date</span> <span class="cm-variable">country</span> <span class="cm-variable">gender</span> <span class="cm-variable">age</span> <span class="cm-variable">q1</span> <span class="cm-variable">q2</span> <span class="cm-variable">q3</span> <span class="cm-variable">q4</span> <span class="cm-variable">q5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> <span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-number">24</span><span class="cm-operator">/</span><span class="cm-number">08</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">US</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">32</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-number">28</span><span class="cm-operator">/</span><span class="cm-number">08</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">US</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">45</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp;<span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-operator">/</span><span class="cm-number">08</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">UK</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">25</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">4</span> <span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-number">12</span><span class="cm-operator">/</span><span class="cm-number">08</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">UK</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">39</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span> <span class="cm-atom">NA</span> <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp; <span class="cm-number">5</span><span class="cm-operator">/</span><span class="cm-number">1</span><span class="cm-operator">/</span><span class="cm-number">09</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">UK</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">99</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><h4 id='算数运算符'><span>算数运算符</span></h4><p><img src="img\019_R语言实战\第4章\第4章 001.png" referrerpolicy="no-referrer" alt="第4章 001"></p><ul><li><span>为数据框添加新的列：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 为数据框添加新的列</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">14</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">df1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">sumxy</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">df1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-variable">df1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">meansy</span> <span class="cm-operator cm-arrow">&lt;-</span> (<span class="cm-variable">df1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-variable">df1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>)<span class="cm-operator">/</span><span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">transform</span>(<span class="cm-variable">df2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">sumxy</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span><span class="cm-operator">+</span><span class="cm-variable">y</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">meanxy</span> <span class="cm-operator">=</span> (<span class="cm-variable">x</span><span class="cm-operator">+</span><span class="cm-variable">y</span>)<span class="cm-operator">/</span><span class="cm-number">2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><h4 id='逻辑运算符'><span>逻辑运算符</span></h4><p><img src="img\019_R语言实战\第4章\第4章 002.png" referrerpolicy="no-referrer" alt="第4章 002"></p><ul><li><span>将连续的年龄替换为使用年轻、中年和年长。使用</span><strong><span>within()</span></strong><span>函数，该函数与</span><strong><span>with()</span></strong><span>类似，不同在于允许修改数据框。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 处理缺失值99岁</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span>[<span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span> <span class="cm-operator">&gt;=</span> <span class="cm-number">99</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将年龄离散化，赋值给新变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">agecat</span>[<span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span> <span class="cm-operator">&gt;</span> <span class="cm-number">75</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"老年"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">agecat</span>[<span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">75</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span> <span class="cm-operator">&gt;=</span> <span class="cm-number">55</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"中年"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">agecat</span>[<span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span> <span class="cm-operator">&lt;</span> <span class="cm-number">55</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"年轻"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">within</span>(<span class="cm-variable">leadership</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">agecat</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NA</span> <span class="cm-comment"># 在数据框新添加一列，并将该列的值都赋值为NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">agecat</span>[<span class="cm-variable">age</span> <span class="cm-operator">&gt;</span> <span class="cm-number">75</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"老年"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">agecat</span>[<span class="cm-variable">age</span> <span class="cm-operator">&gt;=</span> <span class="cm-number">55</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">age</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">75</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"中年"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">agecat</span>[<span class="cm-variable">age</span> <span class="cm-operator">&lt;</span> <span class="cm-number">55</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"年轻"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><h4 id='变量重命名'><span>变量重命名</span></h4><ul><li><span>即修改数据框的列名。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法1，fix()手动修改</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fix</span>(<span class="cm-variable">leadership</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法2，使用names()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将data 改为 testDate</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">leadership</span>)[<span class="cm-number">2</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"testDate"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法3，使用plyr包的rename()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">plyr</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># testDate 改回到 date，如果有多个变量，依次排列即可</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">plyr</span><span class="cm-operator">::</span><span class="cm-variable">rename</span>(<span class="cm-variable">leadership</span>,<span class="cm-variable">c</span>(<span class="cm-variable">testDate</span> <span class="cm-operator">=</span> <span class="cm-string">"date"</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><h4 id='缺失值'><span>缺失值</span></h4><ul><li><p><span>缺失值</span><strong><span>NA</span></strong><span>（Not Available），R语言中字符型和数字型的缺失值相同。</span></p></li><li><p><span>使用</span><strong><span>is.na()</span></strong><span>函数判断缺失值是否存在。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-atom">NA</span>,<span class="cm-number">3</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">is.na</span>(<span class="cm-variable">x</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>缺失值是不可比较的，不可以使用</span><strong><span>==</span></strong><span>来判断，只能使用</span><strong><span>is.na()</span></strong><span>函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-operator">==</span> <span class="cm-atom">NA</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">NA</span> <span class="cm-operator">==</span> <span class="cm-atom">NA</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-atom">NA</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-atom">NA</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>R语言正负无穷：</span><strong><span>Inf</span></strong><span>、</span><strong><span>-Inf</span></strong><span>，判断是否为无穷，使用</span><strong><span>is.infinite()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">is.infinite</span>(<span class="cm-number">3</span><span class="cm-operator">/</span><span class="cm-number">0</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">is.infinite</span>(<span class="cm-operator">-</span><span class="cm-atom">Inf</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>非数字</span><strong><span>NaN</span></strong><span>（not a number），判读非数字使用</span><strong><span>is.nan()</span></strong></p></li><li><p><span>确定了缺失值的位置以后，你需要在进一步分析数据之前以某种方式</span><strong><span>删除这些缺失值</span></strong><span>。原因，含有缺失值的算术表达式和函数的</span><strong><span>计算结果也是缺失值</span></strong><span>。</span></p></li><li><p><span>排除缺失值：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-atom">NA</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sum</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sum</span>(<span class="cm-variable">x</span>,<span class="cm-variable">na.rm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-atom">NA</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">52</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><strong><span>na.omit()</span></strong><span>：删除含有缺失值的行（观测），只要该行含有缺失值就删除。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">x</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>,<span class="cm-atom">NA</span>,<span class="cm-number">5</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">y</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">2</span>,<span class="cm-atom">NA</span>,<span class="cm-number">3</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">na.omit</span>(<span class="cm-variable">df</span>)<span class="cm-semi">;</span><span class="cm-variable">new.df</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">x</span> <span class="cm-variable">y</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">2</span> <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-number">5</span> <span class="cm-number">2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><h4 id='日期'><span>日期</span></h4><ul><li><p><strong><span>as.Date()</span></strong><span>：将字符串转为日期变量。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">as.Date</span>(<span class="cm-variable">x</span>, <span class="cm-variable">format</span>, <span class="cm-variable">tryFormats</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"%Y-%m-%d"</span>, <span class="cm-string">"%Y/%m/%d"</span>),<span class="cm-variable">optional</span> <span class="cm-operator">=</span> <span class="cm-variable">FALSE</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第4章\第4章 003.png" referrerpolicy="no-referrer" alt="第4章 003"></p><ul><li><p><span>将leadership数据框里的date列的字符串日期格式转为日期类型（mm/dd/yy）。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">date</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">date</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">date</span>,<span class="cm-string">"%m/%d/%y"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">date</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"10/24/08"</span> <span class="cm-string">"10/28/08"</span> <span class="cm-string">"10/1/08"</span> &nbsp;<span class="cm-string">"10/12/08"</span> <span class="cm-string">"5/1/09"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"2008-10-24"</span> <span class="cm-string">"2008-10-28"</span> <span class="cm-string">"2008-10-01"</span> <span class="cm-string">"2008-10-12"</span> <span class="cm-string">"2009-05-01"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><strong><span>Sys.Date()</span></strong><span>：获取当前日期</span></p></li><li><p><strong><span>date()</span></strong><span>：获取当期日期和时间。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sys.Date</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">date</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"2023-03-31"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Fri Mar 31 13:52:34 2023"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><strong><span>format()</span></strong><span>：输出指定格式的字符串。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">format</span>(<span class="cm-variable">Sys.Date</span>(),<span class="cm-string">"%A--%Y==%m"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"星期五--2023==03"</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>R的内部在存储日期时，是使用自</span><strong><span>1970年1月1日</span></strong><span>以来的天数表示的，更早的日期则表示为负数。这意味着可以在日期值上执行算术运算。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 计算两个日期相差的天数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">day1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-string">"2023-3-31"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">day2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-string">"2000-3-31"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">day1</span> <span class="cm-operator">-</span> <span class="cm-variable">day2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Time</span> <span class="cm-variable">difference</span> <span class="cm-variable">of</span> <span class="cm-number">8400</span> <span class="cm-variable">days</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>difftime()</span></strong><span>：计算时间间隔，星期、天、时、分、秒</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">difftime</span>(<span class="cm-variable">time1</span>, <span class="cm-variable">time2</span>, <span class="cm-variable">tz</span>, <span class="cm-variable">units</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"auto"</span>, <span class="cm-string">"secs"</span>, <span class="cm-string">"mins"</span>, <span class="cm-string">"hours"</span>,<span class="cm-string">"days"</span>, <span class="cm-string">"weeks"</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">difftime</span>(<span class="cm-variable">Sys.Date</span>(),<span class="cm-variable">as.Date</span>(<span class="cm-string">"1949-10-01"</span>),<span class="cm-variable">units</span> <span class="cm-operator">=</span> <span class="cm-string">"weeks"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Time</span> <span class="cm-variable">difference</span> <span class="cm-variable">of</span> <span class="cm-number">3834.857</span> <span class="cm-variable">weeks</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>将日期转为字符串：</span><strong><span>as.character()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-string">"2020-02-20"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">as.character</span>(<span class="cm-variable">d</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><h4 id='类型转换'><span>类型转换</span></h4><p><img src="img\019_R语言实战\第4章\第4章 004.png" referrerpolicy="no-referrer" alt="第4章 004"></p><h4 id='数据排序'><span>数据排序</span></h4><ul><li><p><span>使用</span><strong><span>order()</span></strong><span>函数，将数据框依据某一个变量（列）排序，默认为</span><strong><span>升序排列</span></strong><span>，想要降序排列，只需要在变量的前面添加 </span><strong><span>-</span></strong><span> 即可。返回的结果是该列排序后的下标数组。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">22</span>,<span class="cm-number">23</span>,<span class="cm-number">12</span>,<span class="cm-number">43</span>,<span class="cm-number">26</span>,<span class="cm-number">22</span>,<span class="cm-number">39</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">order</span>(<span class="cm-variable">l</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">l</span>[<span class="cm-variable">order</span>(<span class="cm-variable">l</span>)]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">3</span> <span class="cm-number">1</span> <span class="cm-number">6</span> <span class="cm-number">2</span> <span class="cm-number">5</span> <span class="cm-number">7</span> <span class="cm-number">4</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">12</span> <span class="cm-number">22</span> <span class="cm-number">22</span> <span class="cm-number">23</span> <span class="cm-number">26</span> <span class="cm-number">39</span> <span class="cm-number">43</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>实例：依据某些列排序数据框。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">name</span> <span class="cm-arg-is">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">7</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">gender</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"M"</span>,<span class="cm-string">"M"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"M"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"F"</span>,<span class="cm-string">"M"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">age</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">22</span>,<span class="cm-number">23</span>,<span class="cm-number">12</span>,<span class="cm-number">43</span>,<span class="cm-number">26</span>,<span class="cm-number">22</span>,<span class="cm-number">39</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 先按性别升序，在按年龄降序。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">df</span>[<span class="cm-variable">with</span>(<span class="cm-variable">df</span>,<span class="cm-variable">order</span>(<span class="cm-variable">gender</span>,<span class="cm-operator">-</span><span class="cm-variable">age</span>)),]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">name</span> <span class="cm-variable">gender</span> <span class="cm-variable">age</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp;<span class="cm-variable">e</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">26</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-variable">f</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">22</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-variable">c</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">12</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-variable">d</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">43</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">7</span> &nbsp; &nbsp;<span class="cm-variable">g</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">39</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-variable">b</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">23</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-variable">a</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">22</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre></li></ul><h4 id='合并数据集'><span>合并数据集</span></h4><ul><li><p><strong><span>merge()</span></strong><span>：用于合并两个数据框（数据集），即向数据框中添加列（变量），默认情况下为内连接。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">n1</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>,<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">26</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">n2</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">10</span><span class="cm-operator">:</span><span class="cm-number">20</span>], &nbsp;<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">160</span><span class="cm-operator">:</span><span class="cm-number">170</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">m.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">merge</span>(<span class="cm-variable">df1</span>,<span class="cm-variable">df2</span>,<span class="cm-variable">by.x</span><span class="cm-operator">=</span><span class="cm-string">"n1"</span>,<span class="cm-variable">by.y</span><span class="cm-operator">=</span><span class="cm-string">"n2"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nrow</span>(<span class="cm-variable">m.df</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">m.df</span>,<span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">11</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">n1</span> <span class="cm-variable">age</span> <span class="cm-variable">height</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-variable">j</span> &nbsp;<span class="cm-number">10</span> &nbsp; &nbsp;<span class="cm-number">160</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-variable">k</span> &nbsp;<span class="cm-number">11</span> &nbsp; &nbsp;<span class="cm-number">161</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-variable">l</span> &nbsp;<span class="cm-number">12</span> &nbsp; &nbsp;<span class="cm-number">162</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><ul><li><span>如果两个数据框有两个或以上相同列名的列，可以使用</span><strong><span>by=c(c1,c2)</span></strong><span>依据两列进行合并，其他用法见</span><a href='./013_数学运算（集合、排列组合等）.html'><span>013_数学运算（集合、排列组合等）.html</span></a><span> / </span><a href='./013_数学运算（集合、排列组合等）.md'><span>013_数学运算（集合、排列组合等）.md</span></a></li></ul></li><li><p><strong><span>cbind()</span></strong><span>：单纯将所有列并在一起，此时要求两个数据框有相同行数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">cbind</span>(<span class="cm-variable">df1</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">11</span>,],<span class="cm-variable">df2</span>),<span class="cm-number">3</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">n1</span> <span class="cm-variable">age</span> <span class="cm-variable">n2</span> <span class="cm-variable">height</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-variable">a</span> &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-variable">j</span> &nbsp; &nbsp;<span class="cm-number">160</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-variable">b</span> &nbsp; <span class="cm-number">2</span> &nbsp;<span class="cm-variable">k</span> &nbsp; &nbsp;<span class="cm-number">161</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-variable">c</span> &nbsp; <span class="cm-number">3</span> &nbsp;<span class="cm-variable">l</span> &nbsp; &nbsp;<span class="cm-number">162</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li><li><p><strong><span>rbind()</span></strong><span>：向数据框中添加行（观测），不要求变量的顺序一致，但变量个数要相同，如果不同，可以删除多余的列，或添加少的列。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">a.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">n1</span><span class="cm-operator">=</span><span class="cm-variable">letters</span>,<span class="cm-variable">age</span><span class="cm-operator">=</span><span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">26</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">b.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">n1</span><span class="cm-operator">=</span><span class="cm-variable">LETTERS</span>,<span class="cm-variable">age</span><span class="cm-operator">=</span><span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">36</span>,<span class="cm-variable">weight</span><span class="cm-operator">=</span><span class="cm-number">160</span><span class="cm-operator">:</span><span class="cm-number">185</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">a.df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weight</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 或 b.df$weight &lt;- NULL 删除一个列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">rbind</span>(<span class="cm-variable">a.df</span>,<span class="cm-variable">b.df</span>),<span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">n1</span> <span class="cm-variable">age</span> <span class="cm-variable">weight</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-variable">a</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-variable">b</span> &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-variable">c</span> &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-atom">NA</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><h4 id='取子集-1'><span>取子集</span></h4><h5 id='选取变量列）'><span>选取变量（列）</span></h5><ul><li><span>选部分变量（列）：</span><strong><code>df[c()]</code></strong><span> </span></li></ul><h5 id='删除变量'><span>删除变量</span></h5><ul><li><strong><span>%in%</span></strong><span>：判断一个集合中的元素是否在另一个集合中。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 删除 q3和q4</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法1，使用%in%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">names</span>(<span class="cm-variable">leadership</span>) <span class="cm-operator cm-variable-2">%in%</span> <span class="cm-variable">c</span>(<span class="cm-string">"q3"</span>,<span class="cm-string">"q4"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">leadership</span>[<span class="cm-operator">!</span><span class="cm-variable">vs</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法2，使用负号</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">leadership</span>[<span class="cm-variable">c</span>(<span class="cm-operator">-</span><span class="cm-number">8</span>,<span class="cm-operator">-</span><span class="cm-number">9</span>)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法3，将变量赋值为NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">leadership</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">q3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">q4</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><h5 id='选取观测行）'><span>选取观测（行）</span></h5><ul><li><p><span>使用下标：</span><strong><code>df[c(), ]</code></strong><span> </span></p></li><li><p><span>使用条件判断：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 2009年1月1日到2009年12月31日入职的女性</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">date</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-variable">leadership</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">date</span>,<span class="cm-string">"%m/%d/%y"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">s</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-string">"2009-1-1"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">e</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.Date</span>(<span class="cm-string">"2009-10-31"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">leadership</span>[<span class="cm-variable">with</span>(<span class="cm-variable">leadership</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">which</span>(<span class="cm-variable">date</span><span class="cm-operator">&gt;=</span><span class="cm-variable">s</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">date</span> <span class="cm-operator">&lt;=</span><span class="cm-variable">e</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">gender</span> <span class="cm-operator">==</span> <span class="cm-string">"F"</span>)),]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre></li></ul><h5 id='取子集-2'><span>取子集</span></h5><ul><li><strong><span>subset()</span></strong><span>：用于取出符合条件的行以及选中的列。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">subset</span>(<span class="cm-variable">leadership</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">date</span><span class="cm-operator">&gt;=</span><span class="cm-variable">s</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">date</span> <span class="cm-operator">&lt;=</span><span class="cm-variable">e</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">gender</span> <span class="cm-operator">==</span> <span class="cm-string">"F"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">select</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-variable">gender</span><span class="cm-operator">:</span><span class="cm-variable">q3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">gender</span> <span class="cm-variable">age</span> <span class="cm-variable">q1</span> <span class="cm-variable">q2</span> <span class="cm-variable">q3</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">99</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h5 id='随机抽样'><span>随机抽样</span></h5><ul><li><span>使用</span><strong><span>sample()</span></strong><span>函数</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 不放回随机抽取2个样本</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">leadership</span>[<span class="cm-variable">sample</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nrow</span>(<span class="cm-variable">leadership</span>),<span class="cm-number">2</span>,<span class="cm-variable">replace</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>),]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">manager</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">date</span> <span class="cm-variable">country</span> <span class="cm-variable">gender</span> <span class="cm-variable">age</span> <span class="cm-variable">q1</span> <span class="cm-variable">q2</span> <span class="cm-variable">q3</span> <span class="cm-variable">q4</span> <span class="cm-variable">q5</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">4</span> <span class="cm-number">2008</span><span class="cm-operator">-</span><span class="cm-number">10</span><span class="cm-operator">-</span><span class="cm-number">12</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">UK</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">M</span> &nbsp;<span class="cm-number">39</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span> <span class="cm-atom">NA</span> <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">2008</span><span class="cm-operator">-</span><span class="cm-number">10</span><span class="cm-operator">-</span><span class="cm-number">28</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">US</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> &nbsp;<span class="cm-number">45</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">5</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><h4 id='使用sql语句操作数据框'><span>使用SQL语句操作数据框</span></h4><ul><li><p><span>下载</span><strong><span>sqldf</span></strong><span>包。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"sqldf"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">sqldf</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>从数据框</span><strong><span>mtcars</span></strong><span>中选择所有的变量(列)，保留那些使用化油器(carb)的车型(行)，按照mpg对车型进行了升序排序，并将结果保存为数据框newdf。参数</span><strong><span>row.names=TRUE</span></strong><span>将原始数据框中的行名延续到了新数据框中。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">new.df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqldf</span>(<span class="cm-string">"select * from mtcars where carb = 1 order by mpg"</span>,<span class="cm-variable">row.names</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">new.df</span>,<span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">mpg</span> <span class="cm-variable">cyl</span> &nbsp;<span class="cm-variable">disp</span> &nbsp;<span class="cm-variable">hp</span> <span class="cm-variable">drat</span> &nbsp; &nbsp;<span class="cm-variable">wt</span> &nbsp;<span class="cm-variable">qsec</span> <span class="cm-variable">vs</span> <span class="cm-variable">am</span> <span class="cm-variable">gear</span> <span class="cm-variable">carb</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Valiant</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">18.1</span> &nbsp; <span class="cm-number">6</span> <span class="cm-number">225.0</span> <span class="cm-number">105</span> <span class="cm-number">2.76</span> <span class="cm-number">3.460</span> <span class="cm-number">20.22</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Hornet</span> <span class="cm-number">4</span> <span class="cm-variable">Drive</span> <span class="cm-number">21.4</span> &nbsp; <span class="cm-number">6</span> <span class="cm-number">258.0</span> <span class="cm-number">110</span> <span class="cm-number">3.08</span> <span class="cm-number">3.215</span> <span class="cm-number">19.44</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Toyota</span> <span class="cm-variable">Corona</span> &nbsp;<span class="cm-number">21.5</span> &nbsp; <span class="cm-number">4</span> <span class="cm-number">120.1</span> &nbsp;<span class="cm-number">97</span> <span class="cm-number">3.70</span> <span class="cm-number">2.465</span> <span class="cm-number">20.01</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>输出四缸和六缸车型每一gear水平的mpg和disp的平均值。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sqldf</span>(<span class="cm-string">"select avg(mpg) avg_mpg, avg(disp) avg_disp,gear</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">from mtcars where cyl in (4,6) group by gear"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">avg_mpg</span> <span class="cm-variable">avg_disp</span> <span class="cm-variable">gear</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">20.33333</span> <span class="cm-number">201.0333</span> &nbsp; &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">24.53333</span> <span class="cm-number">123.0167</span> &nbsp; &nbsp;<span class="cm-number">4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">25.36667</span> <span class="cm-number">120.1333</span> &nbsp; &nbsp;<span class="cm-number">5</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><h3 id='第5章-高级数据管理'><span>第5章 高级数据管理</span></h3><h4 id='数值和字符处理函数'><span>数值和字符处理函数</span></h4><h5 id='数学函数'><span>数学函数</span></h5><p><img src="img\019_R语言实战\第5章\第5章 001.png" referrerpolicy="no-referrer" alt="第5章 001"><img src="img\019_R语言实战\第5章\第5章 002.png" referrerpolicy="no-referrer" alt="第5章 002"></p><ul><li><span>对数据做变换是这些函数的一个主要用途。例如，你经常会在进一步分析之前将收入这种存在明显偏倚的变量取对数。</span></li></ul><h5 id='统计函数'><span>统计函数</span></h5><ul><li><p><span>实例：去除前后5%，以及NA值。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span>(<span class="cm-variable">x</span>, <span class="cm-variable">trim</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span>, <span class="cm-variable">na.rm</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第5章\第5章 003.png" referrerpolicy="no-referrer" alt="第5章 003"><img src="img\019_R语言实战\第5章\第5章 004.png" referrerpolicy="no-referrer" alt="第5章 004"></p><ul><li><p><span>数据的</span><strong><span>中心化</span></strong><span>：是指向量的每个元素减去均值，使得均值变为</span><strong><span>0</span></strong><span>。</span></p></li><li><p><span>数据的</span><strong><span>标准化</span></strong><span>：是指在中心化的基础上除以标准差，使得均值变为</span><strong><span>0</span></strong><span>，方差变为</span><strong><span>1</span></strong><span>。</span></p></li><li><p><span>数据的</span><strong><span>归一化</span></strong><span>：是指将原数据集中的元素映射到</span><strong><span>[0,1]</span></strong><span>或</span><strong><span>[-1,1]</span></strong><span>区间内。</span></p></li><li><p><strong><span>scale()</span></strong><span>：可以对数据进行中心化或标准化。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">runif</span>(<span class="cm-number">100</span>,<span class="cm-number">1</span>,<span class="cm-number">1000</span>)<span class="cm-semi">;</span><span class="cm-variable">mean</span>(<span class="cm-variable">x</span>)<span class="cm-semi">;</span><span class="cm-variable">sd</span>(<span class="cm-variable">x</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">scale</span>(<span class="cm-variable">x</span>)<span class="cm-semi">;</span><span class="cm-variable">mean</span>(<span class="cm-variable">y</span>)<span class="cm-semi">;</span><span class="cm-variable">sd</span>(<span class="cm-variable">y</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">532.707</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">265.9704</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-operator">-</span><span class="cm-number">8.744958e-17</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><span>如果想要将原向量转为标准差为SD，均值为M的向量，可以使用 </span><strong><span>scale(x) * SD + M</span></strong><span> 获得。</span></p></li></ul><h5 id='概率函数'><span>概率函数</span></h5><p><img src="img\019_R语言实战\第5章\第5章 005.png" alt="第5章 005" style="zoom:67%;" /></p><p><img src="img\019_R语言实战\第5章\第5章 006.png" referrerpolicy="no-referrer" alt="第5章 006"></p><ul><li><span>以正态分布函数为例：</span></li></ul><p><img src="img\019_R语言实战\第5章\第5章 007.png" referrerpolicy="no-referrer" alt="第5章 007"></p><ul><li><span>设置随机种子：</span><strong><span>set.seed()</span></strong><span>，在每次生成伪随机数的时候，函数都会使用一个不同的种子，通过设置相同的种子，可以得到相同的随机数。通过手动设定种子，就可以重现你的结果了。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">set.seed</span>(<span class="cm-number">1024</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">runif</span>(<span class="cm-number">5</span>,<span class="cm-number">0</span>,<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">set.seed</span>(<span class="cm-number">1024</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">runif</span>(<span class="cm-number">5</span>,<span class="cm-number">0</span>,<span class="cm-number">10</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2.1808916</span> <span class="cm-number">9.8763424</span> <span class="cm-number">3.4846189</span> <span class="cm-number">3.8104699</span> <span class="cm-number">0.2098596</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2.1808916</span> <span class="cm-number">9.8763424</span> <span class="cm-number">3.4846189</span> <span class="cm-number">3.8104699</span> <span class="cm-number">0.2098596</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>生成多元正态数据：</span><strong><span>MASS</span></strong><span>包中的</span><strong><span>mvrnorm()</span></strong><span>函数</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">MASS</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 均值向量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">230.7</span>, <span class="cm-number">146.7</span>, <span class="cm-number">3.6</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 协方差阵（3个）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sigma</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">c</span>(<span class="cm-number">15360.8</span>, <span class="cm-number">6721.2</span>, <span class="cm-operator">-</span><span class="cm-number">47.1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">6721.2</span>, <span class="cm-number">4700.9</span>, <span class="cm-operator">-</span><span class="cm-number">16.5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">47.1</span>, <span class="cm-operator">-</span><span class="cm-number">16.5</span>, <span class="cm-number">0.3</span>), <span class="cm-variable">nr</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">nc</span><span class="cm-operator">=</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mvrnorm</span>(<span class="cm-number">500</span>,<span class="cm-variable">mean</span>,<span class="cm-variable">sigma</span>) <span class="cm-comment"># 生成500个伪随机观测值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">mydata</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">mydata</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"y"</span>,<span class="cm-string">"x1"</span>,<span class="cm-string">"x2"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dim</span>(<span class="cm-variable">mydata</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">mydata</span>,<span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">500</span> &nbsp; <span class="cm-number">3</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">y</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x1</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">x2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">98.77329</span> &nbsp;<span class="cm-number">41.25824</span> <span class="cm-number">3.432574</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">244.46398</span> <span class="cm-number">205.19804</span> <span class="cm-number">3.795507</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">375.66346</span> <span class="cm-number">186.71273</span> <span class="cm-number">2.512743</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><h5 id='字符处理函数'><span>字符处理函数</span></h5><p><img src="img\019_R语言实战\第5章\第5章 008.png" referrerpolicy="no-referrer" alt="第5章 008"><img src="img\019_R语言实战\第5章\第5章 009.png" referrerpolicy="no-referrer" alt="第5章 009"></p><h5 id='其他实用函数'><span>其他实用函数</span></h5><p><img src="img\019_R语言实战\第5章\第5章 010.png" referrerpolicy="no-referrer" alt="第5章 010"></p><ul><li><span>查看R语言的转义符：</span><strong><span>?Quotes</span></strong><span>，如\n、\t等等。</span></li><li><strong><span>apply()</span></strong><span>函数：</span><a href='./023_apply函数.html'><span>023_apply函数.html</span></a><span> / </span><a href='./023_apply函数.md'><span>023_apply函数.md</span></a><span> </span></li></ul><h4 id='实例'><span>实例</span></h4><ul><li><span>一组学生参加了数学、秘学和英语考试。为了给所有学生确定一个单一的成绩衡量指标，需要将这些科目的成绩组合起来。另外，你还想将前20%的学生评定为A，接下来20%的学生评定为B，依次类推。最后，你希望按字母顺序对学生排序（按照名字lastname进行排序）。</span></li></ul><p><img src="img\019_R语言实战\第5章\第5章 011.png" referrerpolicy="no-referrer" alt="第5章 011"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 保留小数点后2位</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">digits</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Student</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"John Davis"</span>, <span class="cm-string">"Angela Williams"</span>, <span class="cm-string">"Bullwinkle Moose"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"David Jones"</span>, <span class="cm-string">"Janice Markhammer"</span>, <span class="cm-string">"Cheryl Cushing"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"Reuven Ytzrhak"</span>, <span class="cm-string">"Greg Knox"</span>, <span class="cm-string">"Joel England"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"Mary Rayburn"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Math</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">502</span>, <span class="cm-number">600</span>, <span class="cm-number">412</span>, <span class="cm-number">358</span>, <span class="cm-number">495</span>, <span class="cm-number">512</span>, <span class="cm-number">410</span>, <span class="cm-number">625</span>, <span class="cm-number">573</span>, <span class="cm-number">522</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Science</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">95</span>, <span class="cm-number">99</span>, <span class="cm-number">80</span>, <span class="cm-number">82</span>, <span class="cm-number">75</span>, <span class="cm-number">85</span>, <span class="cm-number">80</span>, <span class="cm-number">95</span>, <span class="cm-number">89</span>, <span class="cm-number">86</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">English</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">25</span>, <span class="cm-number">22</span>, <span class="cm-number">18</span>, <span class="cm-number">15</span>, <span class="cm-number">20</span>, <span class="cm-number">28</span>, <span class="cm-number">15</span>, <span class="cm-number">30</span>, <span class="cm-number">27</span>, <span class="cm-number">18</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">Student</span>, <span class="cm-variable">Math</span>, <span class="cm-variable">Science</span>, <span class="cm-variable">Science</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 计算综合得分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 数据标准化(sd=1,mean=0)，因为分数的满分分值不同</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">z</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">scale</span>(<span class="cm-variable">roster</span>[<span class="cm-variable">c</span>(<span class="cm-string">"Math"</span>,<span class="cm-string">"Science"</span>,<span class="cm-string">"Science"</span>)])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 计算标准化后的平均分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">score</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">apply</span>(<span class="cm-variable">z</span>, <span class="cm-number">1</span>, <span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cbind</span>(<span class="cm-variable">roster</span>,<span class="cm-variable">score</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 计算成绩的等级</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">quantile</span>(<span class="cm-variable">score</span>,<span class="cm-variable">c</span>(<span class="cm-number">0.8</span>,<span class="cm-number">0.6</span>,<span class="cm-number">0.4</span>,<span class="cm-number">0.2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 计算学生成绩等级</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">grade</span>[<span class="cm-variable">score</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">y</span>[<span class="cm-number">1</span>]] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"A"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">grade</span>[<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">y</span>[<span class="cm-number">1</span>] <span class="cm-operator">&amp;</span> <span class="cm-variable">score</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">y</span>[<span class="cm-number">2</span>]] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"B"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">grade</span>[<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">y</span>[<span class="cm-number">2</span>] <span class="cm-operator">&amp;</span> <span class="cm-variable">score</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">y</span>[<span class="cm-number">3</span>]] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"C"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">grade</span>[<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">y</span>[<span class="cm-number">3</span>] <span class="cm-operator">&amp;</span> <span class="cm-variable">score</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">y</span>[<span class="cm-number">4</span>]] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"D"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">grade</span>[<span class="cm-variable">score</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">y</span>[<span class="cm-number">4</span>]] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"E"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将名字拆开（姓 名：firstname lastname）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">name</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">strsplit</span>(<span class="cm-variable">roster</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Student</span>,<span class="cm-string">"</span> <span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">firstname</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sapply</span>(<span class="cm-variable">name</span>,<span class="cm-string">"["</span>,<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lastname</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sapply</span>(<span class="cm-variable">name</span>,<span class="cm-string">"["</span>,<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 合并为性和名分开的数据框</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cbind</span>(<span class="cm-variable">firstname</span>,<span class="cm-variable">lastname</span>,<span class="cm-variable">roster</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 排序，先名字（lastname）后姓氏（firstname）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roster</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">roster</span>[<span class="cm-variable">order</span>(<span class="cm-variable">lastname</span>,<span class="cm-variable">firstname</span>),]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">digits</span> <span class="cm-operator">=</span> <span class="cm-number">7</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><h4 id='控制流'><span>控制流</span></h4><h5 id='重复和循环'><span>重复和循环</span></h5><ul><li><strong><span>for</span></strong><span>：</span><code>for (var in seq) statement</code></li><li><strong><span>while</span></strong><span>：</span><code>while (cond) statement</code></li><li><span>在处理大数据集中的行和列时，</span><strong><span>R中的循环可能比较低效费时</span></strong><span>。只要可能，最好联用R中的内建数值/字符处理函数和</span><strong><span>apply族</span></strong><span>函数。</span></li></ul><h5 id='条件执行'><span>条件执行</span></h5><ul><li><p><strong><span>if-else</span></strong><span>：</span><code>if (cond) statement</code><span>、</span><code>if (cond) statement1 else statement2</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">10</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span>(<span class="cm-variable">x</span> <span class="cm-operator">&gt;</span> <span class="cm-number">30</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">print</span>(<span class="cm-string">"---"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}<span class="cm-keyword">else</span> <span class="cm-keyword">if</span>(<span class="cm-variable">x</span> <span class="cm-operator">&lt;</span> <span class="cm-number">20</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">print</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}<span class="cm-keyword">else</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">print</span>(<span class="cm-string">"====="</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre></li><li><p><strong><span>ifelse()</span></strong><span>：</span><code>ifelse(cond, statement1, statement2)</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ifelse</span>(<span class="cm-variable">TRUE</span>,<span class="cm-string">"条件为真"</span>,<span class="cm-string">"条件为假"</span>)<span class="cm-semi">;</span><span class="cm-variable">x</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"条件为真"</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>switch()</span></strong><span>：</span><code>switch(expr, ...)</code></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"B"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">switch</span>(<span class="cm-variable">x</span>,<span class="cm-variable">A</span> <span class="cm-operator">=</span> <span class="cm-string">"11111"</span>,<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-string">"22222"</span>,<span class="cm-variable">C</span> <span class="cm-operator">=</span> <span class="cm-string">"33333"</span>,<span class="cm-string">"找不到匹配的值"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">switch</span>(<span class="cm-string">"ddd"</span>,<span class="cm-variable">A</span> <span class="cm-operator">=</span> <span class="cm-string">"11111"</span>,<span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-string">"22222"</span>,<span class="cm-variable">C</span> <span class="cm-operator">=</span> <span class="cm-string">"33333"</span>,<span class="cm-string">"找不到匹配的值"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"22222"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"找不到匹配的值"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><h4 id='自定义函数'><span>自定义函数</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myfunction</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">arg1</span>, <span class="cm-variable">arg2</span>, <span class="cm-keyword">...</span> ){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">statements</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-builtin">return</span>(<span class="cm-variable">object</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><strong><span>warning()</span></strong><span>：返回警告信息。</span></li><li><strong><span>message()</span></strong><span>：返回诊断信息。</span></li><li><strong><span>stop()</span></strong><span>：返回错误信息，并终止程序的进行。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myfunc1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">message</span>(<span class="cm-string">"诊断信息"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">return</span>(<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myfunc2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">warning</span>(<span class="cm-string">"警告信息"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">return</span>(<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myfunc3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">stop</span>(<span class="cm-string">"错误信息"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">return</span>(<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">myfunc1</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">诊断信息</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">myfunc2</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Warning</span> <span class="cm-variable">message</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">In</span> <span class="cm-variable">myfunc2</span>() <span class="cm-operator">:</span> 警告信息</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">myfunc3</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span> <span class="cm-keyword">in</span> <span class="cm-variable">myfunc3</span>() <span class="cm-operator">:</span> 错误信息</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><ul><li><strong><span>mtcars</span></strong><span>：从Motor Trend杂志(1974)提取的，它述了34种车型的设计和性能特点(汽缸数、排量、马力每加仑汽油行驶的英里数，等等 )。</span></li></ul><h5 id='转置'><span>转置</span></h5><ul><li><span>反转行和列。使用</span><strong><span>t()</span></strong><span>函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">letters</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">row.names</span>(<span class="cm-variable">df</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">LETTERS</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>]<span class="cm-semi">;</span><span class="cm-variable">df</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t</span>(<span class="cm-variable">df</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">x</span> <span class="cm-variable">y</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">A</span> <span class="cm-number">1</span> <span class="cm-variable">a</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">B</span> <span class="cm-number">2</span> <span class="cm-variable">b</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">C</span> <span class="cm-number">3</span> <span class="cm-variable">c</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">D</span> <span class="cm-number">4</span> <span class="cm-variable">d</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">A</span> &nbsp; <span class="cm-variable">B</span> &nbsp; <span class="cm-variable">C</span> &nbsp; <span class="cm-variable">D</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-string">"1"</span> <span class="cm-string">"2"</span> <span class="cm-string">"3"</span> <span class="cm-string">"4"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-string">"a"</span> <span class="cm-string">"b"</span> <span class="cm-string">"c"</span> <span class="cm-string">"d"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><h5 id='整合数据'><span>整合数据</span></h5><ul><li><span>使用一个或多个by变量和一个预先定义好的函数来折叠( collapse )数据。</span></li><li><strong><span>aggregate()</span></strong><span>：数据</span><strong><span>x</span></strong><span>，根据</span><strong><span>by</span></strong><span>变量的分组，执行</span><strong><span>FUN</span></strong><span>函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">aggregate</span>(<span class="cm-variable">x</span>, <span class="cm-variable">by</span>, <span class="cm-variable">FUN</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">digits</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 以气缸数（cyl）和档位数（gear）计算其他数据的均值。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">aggregate</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">cyl</span>,<span class="cm-variable">gear</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>,<span class="cm-variable">na.rm</span><span class="cm-operator">=</span><span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 类似与数据库中使用cyl和gear进行分组后计算平均值一样。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">sqldf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqldf</span>(<span class="cm-string">"select cyl,gear,avg(mpg) mpg,cyl,avg(disp) disp,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">avg(hp) hp,avg(drat) drat,avg(wt) wt,avg(qsec) qsec,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">avg(vs) vs,avg(am) am,gear,avg(carb) carb</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">from mtcars </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">group by cyl,gear"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x1</span>[<span class="cm-variable">order</span>(<span class="cm-variable">x1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Group.1</span>,<span class="cm-variable">x1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Group.2</span>),]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x2</span>[<span class="cm-variable">order</span>(<span class="cm-variable">x2</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>,<span class="cm-variable">x2</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">gear</span>),]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x1</span> <span class="cm-operator">==</span> <span class="cm-variable">x2</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 结果理论上来讲是相同的，但由于浮点数计算的原因，看起来相同的数比较起来会不同</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 442px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> cyl<span class="cm-punctuation">,</span>gear<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>mpg<span class="cm-bracket">)</span> mpg<span class="cm-punctuation">,</span>cyl<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>disp<span class="cm-bracket">)</span> disp<span class="cm-punctuation">,</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>hp<span class="cm-bracket">)</span> hp<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>drat<span class="cm-bracket">)</span> drat<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>wt<span class="cm-bracket">)</span> wt<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>qsec<span class="cm-bracket">)</span> qsec<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>vs<span class="cm-bracket">)</span> vs<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>am<span class="cm-bracket">)</span> am<span class="cm-punctuation">,</span>gear<span class="cm-punctuation">,</span><span class="cm-keyword">AVG</span><span class="cm-bracket">(</span>carb<span class="cm-bracket">)</span> carb</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FROM</span> mtcars </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">GROUP</span> <span class="cm-keyword">BY</span> cyl<span class="cm-punctuation">,</span>gear</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><h5 id='reshape2包'><span>reshape2包</span></h5><ul><li><strong><span>reshape2</span></strong><span>包是一套重构和整合数据集的万能工具。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"reshape2"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">reshape2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><p><span>你需要首先将数据</span><strong><span>融合(melt)</span></strong><span>，以使每一行都是唯一的标识符-变量组合。然后将数据</span><strong><span>重铸(cast)</span></strong><span>为你想要的任何形状。</span></p></li><li><p><span>基本流程是选择原数据框中的某一些列为</span><strong><span>标识符</span></strong><span>变量（可以唯一区别每一行的一个或多个变量），而其他属于</span><strong><span>测量</span></strong><span>变量。</span></p></li><li><p><span>原始数据集：</span></p><p><img src="img\019_R语言实战\第5章\第5章 012.png" alt="第5章 012" style="zoom:50%;" /></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ID</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Time</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">X1</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">5</span>,<span class="cm-number">3</span>,<span class="cm-number">6</span>,<span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">X2</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-number">6</span>,<span class="cm-number">5</span>,<span class="cm-number">1</span>,<span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)<span class="cm-semi">;</span><span class="cm-variable">data</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>融合：</span><strong><span>melt()</span></strong><span>，使用标识符变量，将每一行数据都变为可以唯一表示的。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">md</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">melt</span>(<span class="cm-variable">data</span>,<span class="cm-variable">id</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"ID"</span>,<span class="cm-string">"Time"</span>))<span class="cm-semi">;</span><span class="cm-variable">md</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第5章\第5章 013.png" alt="第5章 013" style="zoom:50%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">names</span>(<span class="cm-variable">md</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"ID"</span> &nbsp; &nbsp; &nbsp; <span class="cm-string">"Time"</span> &nbsp; &nbsp; <span class="cm-string">"variable"</span> <span class="cm-string">"value"</span> &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>重铸：</span><strong><span>dcast()</span></strong><span>，</span><code>dcast(md, formula, fun.aggregate)</code><span>，依据部分标识符列，使用函数进行计算，形成新的表。</span><strong><span>formula</span></strong><span>的形式为</span><code>rowvar1 + rowvar2 + ... ~ colvar1 + colvar2 + ...</code></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dcast</span>(<span class="cm-variable">md</span>,<span class="cm-variable">ID</span><span class="cm-operator">~</span><span class="cm-variable">variable</span>,<span class="cm-variable">sum</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ID</span> <span class="cm-variable">X1</span> <span class="cm-variable">X2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">8</span> <span class="cm-number">11</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">8</span> &nbsp;<span class="cm-number">5</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第5章\第5章 014.png" referrerpolicy="no-referrer" alt="第5章 014"></p><h2 id='第二部分-基本方法'><span>第二部分 基本方法</span></h2><ul><li><span>类别型变量：条形图、饼图以及比较新的扇形图。</span></li><li><span>数值型变量：直方图、密度图、箱线图、点图和不那么著名的小提琴图 (violin plot)。</span></li></ul><h3 id='第6章-基本图形'><span>第6章 基本图形</span></h3><h4 id='数据集'><span>数据集</span></h4><ul><li><p><strong><span>vcd</span></strong><span>包里的</span><strong><span>Arthritis</span></strong><span>数据框，有关类风湿性关节炎新疗法研究的结果。</span></p></li><li><p><span>在关节炎研究中，变量</span><strong><span>Improved</span></strong><span>记录了对每位接受了安慰剂或药物治疗的病人的治疗结果。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">None</span> &nbsp; <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">42</span> &nbsp; &nbsp; <span class="cm-number">14</span> &nbsp; &nbsp; <span class="cm-number">28</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li></ul><h4 id='条形图'><span>条形图</span></h4><ul><li><p><span>条形图通过垂直的或水平的条形展示了</span><strong><span>类别型(离散)</span></strong><span>变量的分布(频数)。</span></p></li><li><p><span>使用</span><strong><span>barplot()</span></strong><span>函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">height</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>使用</span><strong><span>horiz=TRUE</span></strong><span>可以绘制水平的条形图。</span></p></li></ul><h5 id='简单条形图'><span>简单条形图</span></h5><ul><li><span>若height是一个</span><strong><span>向量</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">counts</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">counts</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"竖直条形图(默认)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Improvement(改善情况)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Frequency(频数)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">counts</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"水平条形图"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Frequency(频数)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Improvement(改善情况)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">horiz</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第6章\第6章 001.png" referrerpolicy="no-referrer" alt="第6章 001"></th><th><img src="img\019_R语言实战\第6章\第6章 002.png" referrerpolicy="no-referrer" alt="第6章 002"></th></tr></thead><tbody></tbody></table></figure><ul><li><p><span>若要绘制的类别型变量是一个</span><strong><span>因子或有序型因子</span></strong><span>，就可以使用函数</span><strong><span>plot()</span></strong><span>，使用plot()可以绘制出和上面两个图一样的图，不需要使用</span><strong><span>table()</span></strong><span>。而因子不可以直接使用</span><strong><span>parplot()</span></strong><span>绘制。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Simple Bar Plot"</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Improved"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Frequency"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>, <span class="cm-variable">horiz</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Horizontal Bar Plot"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Frequency"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Improved"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><h5 id='堆砌条形图和分组条形图'><span>堆砌条形图和分组条形图</span></h5><ul><li><span>如果height是一个</span><strong><span>矩阵</span></strong><span>而不是一个向量，则绘图结果将是一幅堆砌条形图或分组条形图。</span></li><li><span>若</span><strong><span>beside=FALSE</span></strong><span>(默认值 )，各列中的值将给出</span><strong><span>堆砌</span></strong><span>的“子条”的高度。</span></li><li><span>若</span><strong><span>beside=TRUE</span></strong><span>，各列中的值将</span><strong><span>并列</span></strong><span>而不是堆砌。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">counts</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>,<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Treatment</span>)<span class="cm-semi">;</span><span class="cm-variable">counts</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">counts</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"堆砌条形图(默认)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Treatment(治疗)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Frequency(频数)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">legend</span>(<span class="cm-string">"toprigh"</span>,<span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">15</span>,<span class="cm-variable">rownames</span>(<span class="cm-variable">counts</span>),<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">counts</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"分组条形图"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Treatment(治疗)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Frequency(频数)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">3</span>),<span class="cm-variable">beside</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">legend</span>(<span class="cm-string">"toprigh"</span>,<span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">15</span>,<span class="cm-variable">rownames</span>(<span class="cm-variable">counts</span>),<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">3</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第6章\第6章 003.png" referrerpolicy="no-referrer" alt="第6章 003"></th><th><img src="img\019_R语言实战\第6章\第6章 004.png" referrerpolicy="no-referrer" alt="第6章 004"></th></tr></thead><tbody></tbody></table></figure><h5 id='均值条形图'><span>均值条形图</span></h5><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">state.region</span>, <span class="cm-variable">state.x77</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">means</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">states</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Illiteracy</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">state.region</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">means</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">means</span>[<span class="cm-variable">order</span>(<span class="cm-variable">means</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span>),] <span class="cm-comment"># 递增排序</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">means</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span>,<span class="cm-variable">names.arg</span> <span class="cm-operator">=</span> <span class="cm-variable">means</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Group.1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"平均文盲率"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><ul><li><strong><span>names.arg=means$Group.1</span></strong><span>：添加列名。</span></li></ul><p><img src="img\019_R语言实战\第6章\第6章 005.png" alt="第6章 005" style="zoom:50%;" /></p><h5 id='条形图的微调'><span>条形图的微调</span></h5><ul><li><strong><span>names.arg</span></strong><span>添加条形图标签（列名）。</span></li><li><span>条形图的标签太长被覆盖，可以使用</span><strong><span>cex.names</span></strong><span>调小。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mar</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">5</span>,<span class="cm-number">8</span>,<span class="cm-number">4</span>,<span class="cm-number">1</span>)) <span class="cm-comment"># 调整边界</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">counts</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">counts</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Treatment Outcome(治疗结果)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">horiz</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>,<span class="cm-variable">cex.names</span> <span class="cm-operator">=</span> <span class="cm-number">0.8</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">3</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">las</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-comment"># 每一个类的标签调为水平</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">names.arg</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"No Improvement"</span>, <span class="cm-string">"Some Improvement"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"Marked Improvement"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 006.png" alt="第6章 006" style="zoom:50%;" /></p><h5 id='棘妆图'><span>棘妆图</span></h5><ul><li><span>一种特殊的条形图。</span></li><li><span>棘状图对堆砌条形图进行了重缩放，这样每个条形的高度均为1，每一段的</span><strong><span>高度即表示比例</span></strong><span>。</span></li><li><span>棘状图可由</span><strong><span>vcd</span></strong><span>包中的函数</span><strong><span>spine()</span></strong><span>绘制。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">counts</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">Arthritis</span>,<span class="cm-variable">table</span>(<span class="cm-variable">Treatment</span>,<span class="cm-variable">Improved</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">spine</span>(<span class="cm-variable">counts</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"棘状图"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 007.png" alt="第6章 007" style="zoom:67%;" /></p><h4 id='饼图'><span>饼图</span></h4><ul><li><p><span>使用</span><strong><span>pie()</span></strong><span>函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">x</span>, <span class="cm-variable">labels</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>x</span></strong><span>是一个非负数值向量,表示每个扇形的面积，而</span><strong><span>labels</span></strong><span>则是表示各扇形标签的字符型向量。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">png</span>(<span class="cm-string">"d:/1.png"</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">720</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">720</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">slice</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">10</span>, <span class="cm-number">12</span>,<span class="cm-number">4</span>, <span class="cm-number">16</span>, <span class="cm-number">8</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">label1</span> <span class="cm-operator cm-arrow">&lt;-</span> &nbsp;<span class="cm-variable">c</span>(<span class="cm-string">"US"</span>, <span class="cm-string">"UK"</span>, <span class="cm-string">"Australia"</span>, <span class="cm-string">"Germany"</span>, <span class="cm-string">"France"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 简单饼图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">slice</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">label1</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"简单饼图"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 百分比饼图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pct</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">round</span>(<span class="cm-variable">slice</span><span class="cm-operator">/</span><span class="cm-variable">sum</span>(<span class="cm-variable">slice</span>)<span class="cm-operator">*</span><span class="cm-number">100</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">label2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste0</span>(<span class="cm-variable">label1</span>,<span class="cm-string">"</span> <span class="cm-string">"</span>,<span class="cm-variable">pct</span>,<span class="cm-string">"%"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">slice</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">label2</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-variable">length</span>(<span class="cm-variable">label2</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"百分比饼图"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">#3D饼图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">plotrix</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># explode = 0.1 表示各个块分开的程度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie3D</span>(<span class="cm-variable">slice</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">label1</span>,<span class="cm-variable">explode</span> <span class="cm-operator">=</span> <span class="cm-number">0.4</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"三维饼图"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 使用table()帮助创建表格</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">state.region</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">label3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste0</span>(<span class="cm-variable">names</span>(<span class="cm-variable">t</span>),<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>,<span class="cm-variable">t</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pie</span>(<span class="cm-variable">slice</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">label3</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"使用table()"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 572px;"></div><div class="CodeMirror-gutters" style="display: none; height: 572px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 009.png" alt="第6章 009" style="zoom: 50%;" /></p><h5 id='扇形图'><span>扇形图</span></h5><ul><li><p><span>使用</span><strong><span>plotrix</span></strong><span>包里的</span><strong><span>fan.plot()</span></strong><span>绘制，可以弥补普通扇形图无法比较各组分的大小的缺点。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">plotrix</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fan.plot</span>(<span class="cm-variable">slice</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">label1</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"扇形图"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第6章\第6章 010.png" alt="第6章 010" style="zoom:50%;" /></p><h4 id='直方图'><span>直方图</span></h4><ul><li><p><span>描述</span><strong><span>连续型</span></strong><span>变量的分布，使用</span><strong><span>hist()</span></strong><span>函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hist</span>(<span class="cm-variable">x</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>freq=FALSE</span></strong><span>表示是否按照</span><strong><span>概率密度</span></strong><span>而不是频率绘制图形，</span><strong><span>breaks</span></strong><span>用于控制分组的数量。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Miles Per Gallo(英里/加仑)"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 加载调色板</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">library</span>(<span class="cm-variable">RColorBrewer</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 默认直方图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 彩色直方图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>,<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-number">12</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">brewer.pal</span>(<span class="cm-number">12</span>,<span class="cm-string">"Set3"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-variable">xlab</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"分为12组的彩色直方图"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 添加密度曲线，轴须图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>,<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-number">12</span>,<span class="cm-variable">freq</span> <span class="cm-operator">=</span> <span class="cm-variable">FALSE</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">brewer.pal</span>(<span class="cm-number">12</span>,<span class="cm-string">"Paired"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-variable">xlab</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"添加密度曲线、轴须图"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 轴须图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rug</span>(<span class="cm-variable">jitter</span>(<span class="cm-variable">mpg</span>),<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 添加密度曲线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lines</span>(<span class="cm-variable">density</span>(<span class="cm-variable">mpg</span>),<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>,<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 添加正态密度曲线、盒型（外框）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">h</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">hist</span>(<span class="cm-variable">mpg</span>,<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-number">12</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">brewer.pal</span>(<span class="cm-number">11</span>,<span class="cm-string">"PiYG"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-variable">xlab</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"正态分布密度曲线、外框"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 生成正态分布数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">xfit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">seq</span>(<span class="cm-variable">min</span>(<span class="cm-variable">mpg</span>),<span class="cm-variable">max</span>(<span class="cm-variable">mpg</span>),<span class="cm-variable">length</span> <span class="cm-operator">=</span> <span class="cm-number">40</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">yfit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">dnorm</span>(<span class="cm-variable">xfit</span>,<span class="cm-variable">mean</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">mpg</span>),<span class="cm-variable">sd</span> <span class="cm-operator">=</span> <span class="cm-variable">sd</span>(<span class="cm-variable">mpg</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># h$mids为每一个组的中位数（h$mids：11 13 15 17 19 21 23 25 27 29 31 33）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 对得到的正态分布的值进行缩放</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">yfit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">yfit</span> <span class="cm-operator">*</span> <span class="cm-variable">diff</span>(<span class="cm-variable">h</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mids</span>[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">2</span>]) <span class="cm-operator">*</span> <span class="cm-variable">length</span>(<span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lines</span>(<span class="cm-variable">xfit</span>,<span class="cm-variable">yfit</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>,<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">box</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 754px;"></div><div class="CodeMirror-gutters" style="display: none; height: 754px;"></div></div></div></pre><ul><li><span>轴须图（rug plot）：使用</span><strong><span>rug()</span></strong><span>，会将实际的值显示在每个直方图的下面。</span></li><li><strong><span>jitter()</span></strong><span>：当结(相同的值)较多时，可以将值打散，让他们有细微差异，以此在图上区别显示开来。</span><strong><span>amount</span></strong><span>设置差别的范围，这样将向每个数据点添加一个小的随机值 (一个</span><strong><span>±amount</span></strong><span>之间的均匀分布随机数 )，以避免重叠的点产生影响。</span></li><li><strong><span>box()</span></strong><span>：绘制外框。</span></li></ul><p><img src="img\019_R语言实战\第6章\第6章 011.png" alt="第6章 011" style="zoom:67%;" /></p><h4 id='概率密度图'><span>概率密度图</span></h4><ul><li><span>核密度估计是用于估计随机变量概率密度函数的一种非参数方法。</span></li><li><span>绘制一条新的概率密度曲线使用</span><strong><span>plot(density())</span></strong><span>，而在原有图上追加，使用</span><strong><span>lines()</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">png</span>(<span class="cm-string">"d:/1.png"</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">500</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">500</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">density</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">d</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">d</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"mpg概率密度曲线"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">polygon</span>(<span class="cm-variable">d</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>,<span class="cm-variable">border</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rug</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"green"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><ul><li><strong><span>polygon()</span></strong><span>用于绘制多边形。</span></li></ul><p><img src="img\019_R语言实战\第6章\第6章 012.png" referrerpolicy="no-referrer" alt="第6章 012"></p><ul><li><p><strong><span>sm</span></strong><span>包里的</span><strong><span>sm.density.compare()</span></strong><span>可向图形叠加两组或更多的核密度图。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sm.density.compare</span>(<span class="cm-variable">x</span>, <span class="cm-variable">factor</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>其中的</span><strong><span>x</span></strong><span>是一个数值型向量，</span><strong><span>factor</span></strong><span>是一个分组变量。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"sm"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">sm</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 不同气缸的mpg密度曲线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cyl.f</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">cyl</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">4</span>,<span class="cm-number">6</span>,<span class="cm-number">8</span>),<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"4c"</span>,<span class="cm-string">"6c"</span>,<span class="cm-string">"8c"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">sm.density.compare</span>(<span class="cm-variable">mpg</span>,<span class="cm-variable">cyl</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"mpg"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">title</span>(<span class="cm-string">"MPG Distribution by Car Cylinders"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">colfill</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span><span class="cm-operator">:</span>(<span class="cm-number">1</span><span class="cm-operator">+</span><span class="cm-variable">length</span>(<span class="cm-variable">levels</span>(<span class="cm-variable">cyl.f</span>))))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 使用鼠标定位图例</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">legend</span>(<span class="cm-variable">locator</span>(<span class="cm-number">1</span>),<span class="cm-variable">levels</span>(<span class="cm-variable">cyl.f</span>),<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">colfill</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 013.png" alt="第6章 013" style="zoom:50%;" /></p><h4 id='箱线图'><span>箱线图</span></h4><ul><li><strong><span>箱线图</span></strong><span>(又称盒须图)通过绘制连续型变量的</span><strong><span>五数总括</span></strong><span>，即最小值、下四分位数(第25百分位数)、中位数(第50百分位数 、上四分位数(第75百分位数)以及最大值，描述了连续型变量的分布。箱线图能够显示出可能为</span><strong><span>离群点</span></strong><span>(范围+1.5*IQR以外的值，IQR表示四分位距，即上四分位数与下四分位数的差值) 的观测。</span></li></ul><p><img src="img\019_R语言实战\第6章\第6章 014.png" alt="第6章 014" style="zoom:40%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"box plot"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"mpg"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取构建图形的统计量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot.stats</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><h5 id='并列箱线图比较'><span>并列箱线图比较</span></h5><ul><li><span>可以使用公式的形式。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">dataframe</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><span>其中的formula是一个公式，dataframe代表提供数据的数据框(或列表 )。一个示例公式为</span><strong><span>y~A</span></strong><span>，这将为类别型变量A的每个值并列地生成数值型变量y的箱线图。公式</span><strong><span>y ~ A*B</span></strong><span>则将为类别型变量A和B所有水平的</span><strong><span>两两组合</span></strong><span>生成数值型变量y的箱线图。</span></li><li><strong><span>varwidth=TRUE</span></strong><span>：将使箱线图的宽度与其样本大小的平方根成正比。(矩形的宽度)</span></li><li><strong><span>horizontal=TRUE</span></strong><span>：可以反转坐标轴的方向。</span></li><li><strong><span>notch=TRUE</span></strong><span>：得到含凹槽的箱线图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">cyl</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Car Mileage Data"</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"气缸数cyl"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"每英里加仑数"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">cyl</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Car Mileage Data"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"气缸数cyl"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"每英里加仑数"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>,<span class="cm-variable">notch</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">varwidth</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第6章\第6章 015.png" referrerpolicy="no-referrer" alt="第6章 015"></th><th><img src="img\019_R语言实战\第6章\第6章 016.png" referrerpolicy="no-referrer" alt="第6章 016"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>六缸车型的每加仑汽油行驶的英里数分布较其他两类车型更为均匀。与六缸和八缸车型相比，四缸车型的每加仑汽油行驶的英里数散布最广 (且正偏 )。在八缸组还有一个离群点。</span></li><li><span>四缸、六缸、八缸车型的油耗中位数是不同的。随着汽缸数的减少油耗明显降低。</span></li><li><span>多分组因子绘制箱型图（两个或两个以上不同变量）：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 气缸数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl.f</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">4</span>,<span class="cm-number">6</span>,<span class="cm-number">8</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"4c"</span>,<span class="cm-string">"6c"</span>,<span class="cm-string">"8c"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 变数箱</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am.f</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"auto"</span>,<span class="cm-string">"standard"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mai</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">0.3</span>,<span class="cm-number">0.3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">cyl.f</span><span class="cm-operator">*</span><span class="cm-variable">am.f</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mt</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">varwidth</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">horizontal</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">3</span>),<span class="cm-variable">las</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"cyl"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"MPG Distribution by cyl"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 017.png" alt="第6章 017" style="zoom:50%;" /></p><ul><li><span>再一次清晰地显示出油耗随着缸数的下降而减少。对于四缸和六缸车型，标准变速箱standard的油耗更高。但是对于八缸车型，油耗似乎没有差别。可以从箱线图的宽度看出四缸标准变速箱的车型和八缸自动变速箱的车型在数据集中最常见。</span></li></ul><h4 id='小提琴图'><span>小提琴图</span></h4><ul><li><p><span>小提琴图是箱线图与核密度图的结合，可以使用</span><strong><span>vioplot</span></strong><span>包里的</span><strong><span>vioplot()</span></strong><span>绘制。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vioplot</span>(<span class="cm-variable">x1</span>, <span class="cm-variable">x2</span>, <span class="cm-keyword">...</span> , <span class="cm-variable">names</span><span class="cm-operator">=</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>x</span><sub><span>n</span></sub></strong><span>表示要绘制的一个或多个向量。将为每个向量绘制一幅小提琴图。</span><strong><span>names</span></strong><span>小提琴图中标签的字符向量，</span><strong><span>col</span></strong><span>为每幅小提琴图指定颜色的向量。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"vioplot"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">vioplot</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>[<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span> <span class="cm-operator">==</span> <span class="cm-number">4</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>[<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span> <span class="cm-operator">==</span> <span class="cm-number">6</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>[<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span> <span class="cm-operator">==</span> <span class="cm-number">8</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vioplot</span>(<span class="cm-variable">x1</span>,<span class="cm-variable">x2</span>,<span class="cm-variable">x3</span>,<span class="cm-variable">names</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"4c"</span>,<span class="cm-string">"6c"</span>,<span class="cm-string">"8c"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"小提琴图mpg-cyl"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"cyl"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"mpg"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 018.png" alt="第6章 018" style="zoom:50%;" /></p><ul><li><span>白点是中位数，黑色盒型的范围是下四分位点到上四分位点，细黑线表示须。外部形状即为核密度估计。</span></li></ul><h4 id='点图'><span>点图</span></h4><ul><li><p><span>可以使用</span><strong><span>dotchar()</span></strong><span>绘制。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dotchart</span>(<span class="cm-variable">x</span>, <span class="cm-variable">labels</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>x</span></strong><span>是一个数值向量，而</span><strong><span>labels</span></strong><span>则是由每个点的标签组成的向量，</span><strong><span>groups</span></strong><span>指定x的分组方式，</span><strong><span>gcolor</span></strong><span>控制不同的分组方式标签的颜色。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dotchart</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">row.names</span>(<span class="cm-variable">mtcars</span>),</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"不同车型的里程数"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"mpg"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第6章\第6章 019.png" alt="第6章 019" style="zoom:50%;" /></p><ul><li><p><span>排序、分组、添加颜色：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span>[<span class="cm-variable">order</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>),]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">col</span>[<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span><span class="cm-operator">==</span><span class="cm-number">4</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"red"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">col</span>[<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span><span class="cm-operator">==</span><span class="cm-number">6</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"blue"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">col</span>[<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span><span class="cm-operator">==</span><span class="cm-number">8</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"darkgreen"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dotchart</span>(<span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mpg</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">row.names</span>(<span class="cm-variable">mt</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">cex</span> <span class="cm-operator">=</span> <span class="cm-number">0.7</span>,<span class="cm-variable">groups</span> <span class="cm-operator">=</span> <span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">gcolor</span> <span class="cm-operator">=</span> <span class="cm-variable">heat.colors</span>(<span class="cm-number">3</span>),<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">mt</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">col</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">19</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"mpg"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"使用气缸数分组</span><span class="cm-string-2">\n</span><span class="cm-string">不同车型的耗油量"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第6章\第6章 020.png" alt="第6章 020" style="zoom:50%;" /></p><ul><li><span>随着汽缸数的减少，每加仑汽油行驶的英里数有了增加。</span></li></ul><h3 id='第7章-基本统计分析'><span>第7章 基本统计分析</span></h3><h4 id='描述性统计分析'><span>描述性统计分析</span></h4><ul><li><p><span>使用数据：mtcars，其中每加仑汽油行驶英里数(mpg)、马力(hp) 和车重(wt)。</span></p></li><li><p><span>首先查看所有32种车型的描述性统计量，然后按照变速箱类型(am)和汽缸数(cyl)考察描述性统计量。变速箱类型是一个以0表示自动挡、1表示手动挡来编码的二分变量，而汽缸数可为4、5或6。</span></p></li><li><p><strong><span>summary()</span></strong><span>：获得变量的描述信息。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summary</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>])</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">wt</span> &nbsp; &nbsp; &nbsp; </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">10.40</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">52.0</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">1.513</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">15.43</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">96.5</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">2.581</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">19.20</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">123.0</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">3.325</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">20.09</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">146.7</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">3.217</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">22.80</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">180.0</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">3.610</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">33.90</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">335.0</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">5.424</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li><li><p><strong><span>summary()</span></strong><span>函数提供了</span><strong><span>最小值</span></strong><span>、</span><strong><span>最大值</span></strong><span>、</span><strong><span>四分位数</span></strong><span>和数值型变量的</span><strong><span>均值</span></strong><span>，以及因子向量和逻辑型向量的</span><strong><span>频数</span></strong><span>统计。</span></p></li><li><p><span>或使用</span><strong><span>sapply(x,FUN,options)</span></strong><span>，其中</span><strong><span>FUN</span></strong><span>使用mean()、sd()、var()、min()、max()、median()、length()、range()、quantile()、</span><strong><span>fivenum()</span></strong><span>(极值、上下四分位数、中位数)</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mystats</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>, <span class="cm-variable">na.omit</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">na.omit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x</span>[<span class="cm-operator">!</span><span class="cm-variable">is.na</span>(<span class="cm-variable">x</span>)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">m</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mean</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">n</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">length</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">s</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sd</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">skew</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sum</span>((<span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-variable">m</span>)<span class="cm-operator">^</span><span class="cm-number">3</span><span class="cm-operator">/</span><span class="cm-variable">s</span><span class="cm-operator">^</span><span class="cm-number">3</span>)<span class="cm-operator">/</span><span class="cm-variable">n</span> <span class="cm-comment"># 偏度系数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">kurt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sum</span>((<span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-variable">m</span>)<span class="cm-operator">^</span><span class="cm-number">4</span><span class="cm-operator">/</span><span class="cm-variable">s</span><span class="cm-operator">^</span><span class="cm-number">4</span>)<span class="cm-operator">/</span><span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-number">3</span> <span class="cm-comment"># 峰度系数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">return</span>(<span class="cm-variable">c</span>(<span class="cm-variable">n</span><span class="cm-operator">=</span><span class="cm-variable">n</span>, <span class="cm-variable">mean</span><span class="cm-operator">=</span><span class="cm-variable">m</span>, <span class="cm-variable">stdev</span><span class="cm-operator">=</span><span class="cm-variable">s</span>, <span class="cm-variable">skew</span><span class="cm-operator">=</span><span class="cm-variable">skew</span>, <span class="cm-variable">kurtosis</span><span class="cm-operator">=</span><span class="cm-variable">kurt</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sapply</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>], <span class="cm-variable">mystats</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">wt</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">32.000000</span> &nbsp;<span class="cm-number">32.0000000</span> <span class="cm-number">32.00000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> &nbsp; &nbsp; <span class="cm-number">20.090625</span> <span class="cm-number">146.6875000</span> &nbsp;<span class="cm-number">3.21725000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stdev</span> &nbsp; &nbsp; <span class="cm-number">6.026948</span> &nbsp;<span class="cm-number">68.5628685</span> &nbsp;<span class="cm-number">0.97845744</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">skew</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.610655</span> &nbsp; <span class="cm-number">0.7260237</span> &nbsp;<span class="cm-number">0.42314646</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kurtosis</span> <span class="cm-operator">-</span><span class="cm-number">0.372766</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.1355511</span> <span class="cm-operator">-</span><span class="cm-number">0.02271075</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>对于样本中的车型，每加仑汽油行驶英里数的平均值为20.1,标准差为6.0。分布呈现右偏(偏度+0.61)，并且较正态分布稍平(峰度-0.37 )。</span></li><li><strong><span>偏度系数</span></strong><span>：相对于图形的尾部而言的，尾部在左叫左偏，左偏偏度系数为负，右偏偏度系数为正。</span></li><li><strong><span>峰度系数</span></strong><span>：峰度系数为负表示越尖峭，为正表示越平稳。</span></li></ul><h5 id='更多方法'><span>更多方法</span></h5><ul><li><strong><span>Hmisc</span></strong><span>包中的</span><strong><span>describe()</span></strong><span>可以返回变量和观测值的数量、缺失值、唯一值的数目、平均值、分位数、5个最大值和最小值。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">Hmisc</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Hmisc</span><span class="cm-operator">::</span><span class="cm-variable">describe</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>])</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span> &nbsp;<span class="cm-variable">Variables</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">32</span> &nbsp;<span class="cm-variable">Observations</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------------------------------------------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mpg</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">n</span> &nbsp;<span class="cm-variable">missing</span> <span class="cm-variable">distinct</span> &nbsp; &nbsp; <span class="cm-variable">Info</span> &nbsp; &nbsp; <span class="cm-variable">Mean</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Gmd</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.05</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.10</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">32</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">25</span> &nbsp; &nbsp;<span class="cm-number">0.999</span> &nbsp; &nbsp;<span class="cm-number">20.09</span> &nbsp; &nbsp;<span class="cm-number">6.796</span> &nbsp; &nbsp;<span class="cm-number">12.00</span> &nbsp; &nbsp;<span class="cm-number">14.34</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">.25</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.50</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.75</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.90</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.95</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">15.43</span> &nbsp; &nbsp;<span class="cm-number">19.20</span> &nbsp; &nbsp;<span class="cm-number">22.80</span> &nbsp; &nbsp;<span class="cm-number">30.09</span> &nbsp; &nbsp;<span class="cm-number">31.30</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lowest</span> <span class="cm-operator">:</span> <span class="cm-number">10.4</span> <span class="cm-number">13.3</span> <span class="cm-number">14.3</span> <span class="cm-number">14.7</span> <span class="cm-number">15.0</span>, <span class="cm-variable">highest</span><span class="cm-operator">:</span> <span class="cm-number">26.0</span> <span class="cm-number">27.3</span> <span class="cm-number">30.4</span> <span class="cm-number">32.4</span> <span class="cm-number">33.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------------------------------------------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hp</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">n</span> &nbsp;<span class="cm-variable">missing</span> <span class="cm-variable">distinct</span> &nbsp; &nbsp; <span class="cm-variable">Info</span> &nbsp; &nbsp; <span class="cm-variable">Mean</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Gmd</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.05</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.10</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">32</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">22</span> &nbsp; &nbsp;<span class="cm-number">0.997</span> &nbsp; &nbsp;<span class="cm-number">146.7</span> &nbsp; &nbsp;<span class="cm-number">77.04</span> &nbsp; &nbsp;<span class="cm-number">63.65</span> &nbsp; &nbsp;<span class="cm-number">66.00</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">.25</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.50</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.75</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.90</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.95</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">96.50</span> &nbsp; <span class="cm-number">123.00</span> &nbsp; <span class="cm-number">180.00</span> &nbsp; <span class="cm-number">243.50</span> &nbsp; <span class="cm-number">253.55</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lowest</span> <span class="cm-operator">:</span> &nbsp;<span class="cm-number">52</span> &nbsp;<span class="cm-number">62</span> &nbsp;<span class="cm-number">65</span> &nbsp;<span class="cm-number">66</span> &nbsp;<span class="cm-number">91</span>, <span class="cm-variable">highest</span><span class="cm-operator">:</span> <span class="cm-number">215</span> <span class="cm-number">230</span> <span class="cm-number">245</span> <span class="cm-number">264</span> <span class="cm-number">335</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------------------------------------------------------------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wt</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">n</span> &nbsp;<span class="cm-variable">missing</span> <span class="cm-variable">distinct</span> &nbsp; &nbsp; <span class="cm-variable">Info</span> &nbsp; &nbsp; <span class="cm-variable">Mean</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Gmd</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.05</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.10</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">32</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-number">0.999</span> &nbsp; &nbsp;<span class="cm-number">3.217</span> &nbsp; &nbsp;<span class="cm-number">1.089</span> &nbsp; &nbsp;<span class="cm-number">1.736</span> &nbsp; &nbsp;<span class="cm-number">1.956</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">.25</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.50</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.75</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.90</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">.95</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">2.581</span> &nbsp; &nbsp;<span class="cm-number">3.325</span> &nbsp; &nbsp;<span class="cm-number">3.610</span> &nbsp; &nbsp;<span class="cm-number">4.048</span> &nbsp; &nbsp;<span class="cm-number">5.293</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lowest</span> <span class="cm-operator">:</span> <span class="cm-number">1.513</span> <span class="cm-number">1.615</span> <span class="cm-number">1.835</span> <span class="cm-number">1.935</span> <span class="cm-number">2.140</span>, <span class="cm-variable">highest</span><span class="cm-operator">:</span> <span class="cm-number">3.845</span> <span class="cm-number">4.070</span> <span class="cm-number">5.250</span> <span class="cm-number">5.345</span> <span class="cm-number">5.424</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------------------------------------------------------------------</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 676px;"></div><div class="CodeMirror-gutters" style="display: none; height: 676px;"></div></div></div></pre><ul><li><p><strong><span>pastecs</span></strong><span>包中的</span><strong><span>stat.desc()</span></strong><span>可以计算种类繁多的描述性统计量。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stat.desc</span>(<span class="cm-variable">x</span>, <span class="cm-variable">basic</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">desc</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">norm</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>, <span class="cm-variable">p</span><span class="cm-operator">=</span><span class="cm-number">0.95</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>x</span></strong><span>是一个数据框或时间序列。若</span><strong><span>basic=TRUE</span></strong><span>(默认值 )，则计算其中所有值、空值、缺失值的数量，以及最小值、最大值、值域，还有总和。若</span><strong><span>desc=TRUE</span></strong><span>( 同样也是默认值 )，则计算中位数、平均数、平均数的标准误、平均数置信度为95%的置信区间、方差、标准差以及变异系数。最后，若</span><strong><span>norm=TRUE</span></strong><span> (不是默认的 )，则返回正态分布统计量，包括偏度和峰度(以及它们的统计显著程度)和</span><strong><span>Shapiro-Wik</span></strong><span>正态检验结果。这里使用了p值来计算平均数的置信区间(默认置信度为0.95)。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">pastecs</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stat.desc</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>],<span class="cm-variable">norm</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">wt</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nbr.val</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">32.0000000</span> &nbsp; <span class="cm-number">32.0000000</span> &nbsp;<span class="cm-number">32.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nbr.null</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.0000000</span> &nbsp; &nbsp;<span class="cm-number">0.0000000</span> &nbsp; <span class="cm-number">0.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nbr.na</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.0000000</span> &nbsp; &nbsp;<span class="cm-number">0.0000000</span> &nbsp; <span class="cm-number">0.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">min</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">10.4000000</span> &nbsp; <span class="cm-number">52.0000000</span> &nbsp; <span class="cm-number">1.5130000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">max</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">33.9000000</span> &nbsp;<span class="cm-number">335.0000000</span> &nbsp; <span class="cm-number">5.4240000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">range</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">23.5000000</span> &nbsp;<span class="cm-number">283.0000000</span> &nbsp; <span class="cm-number">3.9110000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sum</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">642.9000000</span> <span class="cm-number">4694.0000000</span> <span class="cm-number">102.9520000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">median</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">19.2000000</span> &nbsp;<span class="cm-number">123.0000000</span> &nbsp; <span class="cm-number">3.3250000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">20.0906250</span> &nbsp;<span class="cm-number">146.6875000</span> &nbsp; <span class="cm-number">3.2172500</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SE.mean</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.0654240</span> &nbsp; <span class="cm-number">12.1203173</span> &nbsp; <span class="cm-number">0.1729685</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CI.mean.0.95</span> &nbsp; <span class="cm-number">2.1729465</span> &nbsp; <span class="cm-number">24.7195501</span> &nbsp; <span class="cm-number">0.3527715</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">var</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">36.3241028</span> <span class="cm-number">4700.8669355</span> &nbsp; <span class="cm-number">0.9573790</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">std.dev</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">6.0269481</span> &nbsp; <span class="cm-number">68.5628685</span> &nbsp; <span class="cm-number">0.9784574</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">coef.var</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.2999881</span> &nbsp; &nbsp;<span class="cm-number">0.4674077</span> &nbsp; <span class="cm-number">0.3041285</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><ul><li><strong><span>psych</span></strong><span>包的</span><strong><span>describe()</span></strong><span>可以计算非缺失值的数量、平均数、标准差、中位数、截尾均值、绝对中位差、最小值、最大值、值域、偏度、峰度和平均值的标准误。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">psych</span><span class="cm-operator">::</span><span class="cm-variable">describe</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>])</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">vars</span> &nbsp;<span class="cm-variable">n</span> &nbsp; <span class="cm-variable">mean</span> &nbsp; &nbsp;<span class="cm-variable">sd</span> <span class="cm-variable">median</span> <span class="cm-variable">trimmed</span> &nbsp; <span class="cm-variable">mad</span> &nbsp; <span class="cm-variable">min</span> &nbsp; &nbsp;<span class="cm-variable">max</span> &nbsp;<span class="cm-variable">range</span> <span class="cm-variable">skew</span> <span class="cm-variable">kurtosis</span> &nbsp; &nbsp;<span class="cm-variable">se</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mpg</span> &nbsp; &nbsp;<span class="cm-number">1</span> <span class="cm-number">32</span> &nbsp;<span class="cm-number">20.09</span> &nbsp;<span class="cm-number">6.03</span> &nbsp;<span class="cm-number">19.20</span> &nbsp; <span class="cm-number">19.70</span> &nbsp;<span class="cm-number">5.41</span> <span class="cm-number">10.40</span> &nbsp;<span class="cm-number">33.90</span> &nbsp;<span class="cm-number">23.50</span> <span class="cm-number">0.61</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.37</span> &nbsp;<span class="cm-number">1.07</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hp</span> &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">32</span> <span class="cm-number">146.69</span> <span class="cm-number">68.56</span> <span class="cm-number">123.00</span> &nbsp;<span class="cm-number">141.19</span> <span class="cm-number">77.10</span> <span class="cm-number">52.00</span> <span class="cm-number">335.00</span> <span class="cm-number">283.00</span> <span class="cm-number">0.73</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.14</span> <span class="cm-number">12.12</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wt</span> &nbsp; &nbsp; <span class="cm-number">3</span> <span class="cm-number">32</span> &nbsp; <span class="cm-number">3.22</span> &nbsp;<span class="cm-number">0.98</span> &nbsp; <span class="cm-number">3.33</span> &nbsp; &nbsp;<span class="cm-number">3.15</span> &nbsp;<span class="cm-number">0.77</span> &nbsp;<span class="cm-number">1.51</span> &nbsp; <span class="cm-number">5.42</span> &nbsp; <span class="cm-number">3.91</span> <span class="cm-number">0.42</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.02</span> &nbsp;<span class="cm-number">0.17</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><p><span>SE为标准误，即均值的标准差。</span></p></li><li><p><span>由于Hmisc包的describe()于psych包的describe()同名，以后导入的包的函数为主。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">载入程辑包：‘<span class="cm-variable">psych</span>’</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">following</span> <span class="cm-variable">object</span> <span class="cm-variable">is</span> <span class="cm-variable">masked</span> <span class="cm-variable">from</span> ‘<span class="cm-variable">package</span><span class="cm-operator">:</span><span class="cm-variable">Hmisc</span>’<span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">describe</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><h5 id='分组计算描述性统计量'><span>分组计算描述性统计量</span></h5><ul><li><span>在比较多组个体或观测时，关注的焦点经常是各组的描述性统计信息，而不是样本整体的描述性统计信息。</span></li><li><span>使用</span><strong><span>aggregate()</span></strong><span>来分组获得统计量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 根据变速类型（am，自动和手动）分组计算均值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">aggregate</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>],<span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">am</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>),<span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">aggregate</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>],<span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">am</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>),<span class="cm-variable">sd</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">am</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">wt</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> <span class="cm-number">17.14737</span> <span class="cm-number">160.2632</span> <span class="cm-number">3.768895</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> <span class="cm-number">24.39231</span> <span class="cm-number">126.8462</span> <span class="cm-number">2.411000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">am</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">wt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> <span class="cm-number">3.833966</span> <span class="cm-number">53.90820</span> <span class="cm-number">0.7774001</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> <span class="cm-number">6.166504</span> <span class="cm-number">84.06232</span> <span class="cm-number">0.6169816</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><p><span>aggregate()仅允许在每次调用中使用平均数、标准差这样的</span><strong><span>单返回值</span></strong><span>函数，它无法一次返回若干个统计量。多返回值统计量，使用</span><strong><span>by()</span></strong><span>分组计算描述性统计量。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">by</span>(<span class="cm-variable">data</span>, <span class="cm-variable">INDICES</span>, <span class="cm-variable">FUN</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>data</span></strong><span>是一个数据框或矩阵，</span><strong><span>INDICES</span></strong><span>是一个因子或因子组成的列表，定义了分组，</span><strong><span>FUN</span></strong><span>是任意函数。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dstats</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>) <span class="cm-variable">sapply</span>(<span class="cm-variable">x</span>, <span class="cm-variable">mystats</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">by</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>],<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>,<span class="cm-variable">dstats</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span><span class="cm-operator">:</span> <span class="cm-number">0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">wt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">19.00000000</span> &nbsp;<span class="cm-number">19.00000000</span> <span class="cm-number">19.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> &nbsp; &nbsp; <span class="cm-number">17.14736842</span> <span class="cm-number">160.26315789</span> &nbsp;<span class="cm-number">3.7688947</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stdev</span> &nbsp; &nbsp; <span class="cm-number">3.83396639</span> &nbsp;<span class="cm-number">53.90819573</span> &nbsp;<span class="cm-number">0.7774001</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">skew</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.01395038</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.01422519</span> &nbsp;<span class="cm-number">0.9759294</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kurtosis</span> <span class="cm-operator">-</span><span class="cm-number">0.80317826</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.20969733</span> &nbsp;<span class="cm-number">0.1415676</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-----------------------------------------------------------------------</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span><span class="cm-operator">:</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mpg</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">wt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">13.00000000</span> &nbsp;<span class="cm-number">13.0000000</span> <span class="cm-number">13.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> &nbsp; &nbsp; <span class="cm-number">24.39230769</span> <span class="cm-number">126.8461538</span> &nbsp;<span class="cm-number">2.4110000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stdev</span> &nbsp; &nbsp; <span class="cm-number">6.16650381</span> &nbsp;<span class="cm-number">84.0623243</span> &nbsp;<span class="cm-number">0.6169816</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">skew</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.05256118</span> &nbsp; <span class="cm-number">1.3598859</span> &nbsp;<span class="cm-number">0.2103128</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kurtosis</span> <span class="cm-operator">-</span><span class="cm-number">1.45535200</span> &nbsp; <span class="cm-number">0.5634635</span> <span class="cm-operator">-</span><span class="cm-number">1.1737358</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><ul><li><span>dstats()将其应用于数据框的每一栏（列）中，再通过by()函数则可得到am中每一水平的概括统计量。</span></li></ul><h5 id='分组计算的扩展'><span>分组计算的扩展</span></h5><ul><li><p><strong><span>doBy</span></strong><span>和</span><strong><span>psych</span></strong><span>包提供了分组计算描述性统计量的方法。</span></p></li><li><p><strong><span>doBy</span></strong><span>中的</span><strong><span>summaryBy()</span></strong><span>：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summaryBy</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">dataframe</span>, <span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-keyword">function</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"doBy"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">doBy</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summaryBy</span>(<span class="cm-variable">mpg</span><span class="cm-operator">+</span><span class="cm-variable">hp</span><span class="cm-operator">+</span><span class="cm-variable">wt</span> <span class="cm-operator">~</span> <span class="cm-variable">am</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>,<span class="cm-variable">FUN</span> <span class="cm-operator">=</span> <span class="cm-variable">mystats</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">am</span> <span class="cm-variable">mpg.n</span> <span class="cm-variable">mpg.mean</span> <span class="cm-variable">mpg.stdev</span> &nbsp; <span class="cm-variable">mpg.skew</span> <span class="cm-variable">mpg.kurtosis</span> <span class="cm-variable">hp.n</span> &nbsp;<span class="cm-variable">hp.mean</span> <span class="cm-variable">hp.stdev</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">19</span> <span class="cm-number">17.14737</span> &nbsp;<span class="cm-number">3.833966</span> <span class="cm-number">0.01395038</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.8031783</span> &nbsp; <span class="cm-number">19</span> <span class="cm-number">160.2632</span> <span class="cm-number">53.90820</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">13</span> <span class="cm-number">24.39231</span> &nbsp;<span class="cm-number">6.166504</span> <span class="cm-number">0.05256118</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">1.4553520</span> &nbsp; <span class="cm-number">13</span> <span class="cm-number">126.8462</span> <span class="cm-number">84.06232</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">hp.skew</span> <span class="cm-variable">hp.kurtosis</span> <span class="cm-variable">wt.n</span> &nbsp;<span class="cm-variable">wt.mean</span> &nbsp;<span class="cm-variable">wt.stdev</span> &nbsp; <span class="cm-variable">wt.skew</span> <span class="cm-variable">wt.kurtosis</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-operator">-</span><span class="cm-number">0.01422519</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.2096973</span> &nbsp; <span class="cm-number">19</span> <span class="cm-number">3.768895</span> <span class="cm-number">0.7774001</span> <span class="cm-number">0.9759294</span> &nbsp; <span class="cm-number">0.1415676</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">1.35988586</span> &nbsp; <span class="cm-number">0.5634635</span> &nbsp; <span class="cm-number">13</span> <span class="cm-number">2.411000</span> <span class="cm-number">0.6169816</span> <span class="cm-number">0.2103128</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.1737358</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><strong><span>psych</span></strong><span>中的</span><strong><span>describeBy()</span></strong><span>：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mpg"</span>,<span class="cm-string">"hp"</span>,<span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">describeBy</span>(<span class="cm-variable">mtcars</span>[<span class="cm-variable">vars</span>],<span class="cm-builtin">list</span>(<span class="cm-variable">am</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Descriptive</span> <span class="cm-variable">statistics</span> <span class="cm-variable">by</span> <span class="cm-variable">group</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">am</span><span class="cm-operator">:</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">vars</span> &nbsp;<span class="cm-variable">n</span> &nbsp; <span class="cm-variable">mean</span> &nbsp; &nbsp;<span class="cm-variable">sd</span> <span class="cm-variable">median</span> <span class="cm-variable">trimmed</span> &nbsp; <span class="cm-variable">mad</span> &nbsp; <span class="cm-variable">min</span> &nbsp; &nbsp;<span class="cm-variable">max</span> &nbsp;<span class="cm-variable">range</span> &nbsp;<span class="cm-variable">skew</span> <span class="cm-variable">kurtosis</span> &nbsp; &nbsp;<span class="cm-variable">se</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mpg</span> &nbsp; &nbsp;<span class="cm-number">1</span> <span class="cm-number">19</span> &nbsp;<span class="cm-number">17.15</span> &nbsp;<span class="cm-number">3.83</span> &nbsp;<span class="cm-number">17.30</span> &nbsp; <span class="cm-number">17.12</span> &nbsp;<span class="cm-number">3.11</span> <span class="cm-number">10.40</span> &nbsp;<span class="cm-number">24.40</span> &nbsp;<span class="cm-number">14.00</span> &nbsp;<span class="cm-number">0.01</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.80</span> &nbsp;<span class="cm-number">0.88</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hp</span> &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">19</span> <span class="cm-number">160.26</span> <span class="cm-number">53.91</span> <span class="cm-number">175.00</span> &nbsp;<span class="cm-number">161.06</span> <span class="cm-number">77.10</span> <span class="cm-number">62.00</span> <span class="cm-number">245.00</span> <span class="cm-number">183.00</span> <span class="cm-operator">-</span><span class="cm-number">0.01</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.21</span> <span class="cm-number">12.37</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wt</span> &nbsp; &nbsp; <span class="cm-number">3</span> <span class="cm-number">19</span> &nbsp; <span class="cm-number">3.77</span> &nbsp;<span class="cm-number">0.78</span> &nbsp; <span class="cm-number">3.52</span> &nbsp; &nbsp;<span class="cm-number">3.75</span> &nbsp;<span class="cm-number">0.45</span> &nbsp;<span class="cm-number">2.46</span> &nbsp; <span class="cm-number">5.42</span> &nbsp; <span class="cm-number">2.96</span> &nbsp;<span class="cm-number">0.98</span> &nbsp; &nbsp; <span class="cm-number">0.14</span> &nbsp;<span class="cm-number">0.18</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---------------------------------------------------------------------</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">am</span><span class="cm-operator">:</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">vars</span> &nbsp;<span class="cm-variable">n</span> &nbsp; <span class="cm-variable">mean</span> &nbsp; &nbsp;<span class="cm-variable">sd</span> <span class="cm-variable">median</span> <span class="cm-variable">trimmed</span> &nbsp; <span class="cm-variable">mad</span> &nbsp; <span class="cm-variable">min</span> &nbsp; &nbsp;<span class="cm-variable">max</span> &nbsp;<span class="cm-variable">range</span> <span class="cm-variable">skew</span> <span class="cm-variable">kurtosis</span> &nbsp; &nbsp;<span class="cm-variable">se</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mpg</span> &nbsp; &nbsp;<span class="cm-number">1</span> <span class="cm-number">13</span> &nbsp;<span class="cm-number">24.39</span> &nbsp;<span class="cm-number">6.17</span> &nbsp;<span class="cm-number">22.80</span> &nbsp; <span class="cm-number">24.38</span> &nbsp;<span class="cm-number">6.67</span> <span class="cm-number">15.00</span> &nbsp;<span class="cm-number">33.90</span> &nbsp;<span class="cm-number">18.90</span> <span class="cm-number">0.05</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.46</span> &nbsp;<span class="cm-number">1.71</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hp</span> &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">13</span> <span class="cm-number">126.85</span> <span class="cm-number">84.06</span> <span class="cm-number">109.00</span> &nbsp;<span class="cm-number">114.73</span> <span class="cm-number">63.75</span> <span class="cm-number">52.00</span> <span class="cm-number">335.00</span> <span class="cm-number">283.00</span> <span class="cm-number">1.36</span> &nbsp; &nbsp; <span class="cm-number">0.56</span> <span class="cm-number">23.31</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wt</span> &nbsp; &nbsp; <span class="cm-number">3</span> <span class="cm-number">13</span> &nbsp; <span class="cm-number">2.41</span> &nbsp;<span class="cm-number">0.62</span> &nbsp; <span class="cm-number">2.32</span> &nbsp; &nbsp;<span class="cm-number">2.39</span> &nbsp;<span class="cm-number">0.68</span> &nbsp;<span class="cm-number">1.51</span> &nbsp; <span class="cm-number">3.57</span> &nbsp; <span class="cm-number">2.06</span> <span class="cm-number">0.21</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.17</span> &nbsp;<span class="cm-number">0.17</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><ul><li><span>与前面的示例不同，</span><strong><span>describeBy()</span></strong><span>函数不允许指定任意函数，所以它的普适性较低。可以通过list()同时指定多个分组的变量。</span></li></ul><h4 id='频数表和列联表'><span>频数表和列联表</span></h4><ul><li><p><span>数据：来自vcd包中的Arthritis数据集。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">vcd</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">head</span>(<span class="cm-variable">Arthritis</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ID</span> <span class="cm-variable">Treatment</span> &nbsp;<span class="cm-variable">Sex</span> <span class="cm-variable">Age</span> <span class="cm-variable">Improved</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">57</span> &nbsp; <span class="cm-variable">Treated</span> <span class="cm-variable">Male</span> &nbsp;<span class="cm-number">27</span> &nbsp; &nbsp; <span class="cm-variable">Some</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">46</span> &nbsp; <span class="cm-variable">Treated</span> <span class="cm-variable">Male</span> &nbsp;<span class="cm-number">29</span> &nbsp; &nbsp; <span class="cm-variable">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">77</span> &nbsp; <span class="cm-variable">Treated</span> <span class="cm-variable">Male</span> &nbsp;<span class="cm-number">30</span> &nbsp; &nbsp; <span class="cm-variable">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> <span class="cm-number">17</span> &nbsp; <span class="cm-variable">Treated</span> <span class="cm-variable">Male</span> &nbsp;<span class="cm-number">32</span> &nbsp; <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-number">36</span> &nbsp; <span class="cm-variable">Treated</span> <span class="cm-variable">Male</span> &nbsp;<span class="cm-number">46</span> &nbsp; <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> <span class="cm-number">23</span> &nbsp; <span class="cm-variable">Treated</span> <span class="cm-variable">Male</span> &nbsp;<span class="cm-number">58</span> &nbsp; <span class="cm-variable">Marked</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li></ul><h5 id='生成频数表'><span>生成频数表</span></h5><p><img src="img\019_R语言实战\第7章\第7章 001.png" referrerpolicy="no-referrer" alt="第7章 001"><img src="img\019_R语言实战\第7章\第7章 002.png" referrerpolicy="no-referrer" alt="第7章 002"></p><ul><li><p><strong><span>一维列联表</span></strong><span>：</span><strong><span>table()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>)<span class="cm-semi">;</span><span class="cm-variable">t</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">None</span> &nbsp; <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">42</span> &nbsp; &nbsp; <span class="cm-number">14</span> &nbsp; &nbsp; <span class="cm-number">28</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>计算相对频率：</span><strong><span>prop.table()</span></strong><span>，需要table()的结果。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">prop.table</span>(<span class="cm-variable">t</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Some</span> &nbsp; &nbsp;<span class="cm-variable">Marked</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.5000000</span> <span class="cm-number">0.1666667</span> <span class="cm-number">0.3333333</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><strong><span>二维列联表</span></strong><span>：</span><strong><span>table()</span></strong><span>或</span><strong><span>xtabs()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">table</span>(<span class="cm-variable">A</span>, <span class="cm-variable">B</span>) <span class="cm-comment"># 或</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span> <span class="cm-variable">A</span> <span class="cm-operator">+</span> <span class="cm-variable">B</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mydata</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 若某个变量写在公式的左侧，则其为一个频数向量(在数据已经被表格化时很有用)。</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span><span class="cm-variable">Treatment</span><span class="cm-operator">+</span><span class="cm-variable">Improved</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Arthritis</span>)<span class="cm-semi">;</span><span class="cm-variable">t1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">Arthritis</span>,<span class="cm-variable">table</span>(<span class="cm-variable">Treatment</span>,<span class="cm-variable">Improved</span>))<span class="cm-semi">;</span><span class="cm-variable">t2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">None</span> <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; <span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; <span class="cm-number">13</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">21</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">None</span> <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; <span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; <span class="cm-number">13</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">21</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre></li><li><p><span>使用</span><strong><span>margin.table()</span></strong><span>生成边缘频数。使用</span><strong><span>prop.table()</span></strong><span>计算边缘频率。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">margin.table</span>(<span class="cm-variable">t1</span>) <span class="cm-comment"># 总数 == sum(t1)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">prop.table</span>(<span class="cm-variable">t1</span>) <span class="cm-comment"># 各项在总数中的比例</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">margin.table</span>(<span class="cm-variable">t1</span>,<span class="cm-number">1</span>) <span class="cm-comment"># 行</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">prop.table</span>(<span class="cm-variable">t1</span>,<span class="cm-number">1</span>) <span class="cm-comment"># 行</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">margin.table</span>(<span class="cm-variable">t1</span>,<span class="cm-number">2</span>) <span class="cm-comment"># 列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">prop.table</span>(<span class="cm-variable">t1</span>,<span class="cm-number">2</span>) <span class="cm-comment"># 列</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">84</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Some</span> &nbsp; &nbsp; <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-number">0.34523810</span> <span class="cm-number">0.08333333</span> <span class="cm-number">0.08333333</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> <span class="cm-number">0.15476190</span> <span class="cm-number">0.08333333</span> <span class="cm-number">0.25000000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Placebo</span> <span class="cm-variable">Treated</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">43</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">41</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Some</span> &nbsp; &nbsp;<span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-number">0.6744186</span> <span class="cm-number">0.1627907</span> <span class="cm-number">0.1627907</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> <span class="cm-number">0.3170732</span> <span class="cm-number">0.1707317</span> <span class="cm-number">0.5121951</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Improved</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">None</span> &nbsp; <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">42</span> &nbsp; &nbsp; <span class="cm-number">14</span> &nbsp; &nbsp; <span class="cm-number">28</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Some</span> &nbsp; &nbsp;<span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-number">0.6904762</span> <span class="cm-number">0.5000000</span> <span class="cm-number">0.2500000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> <span class="cm-number">0.3095238</span> <span class="cm-number">0.5000000</span> <span class="cm-number">0.7500000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li><li><p><span>为表格添加边际和：</span><strong><span>addmargins()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">addmargins</span>(<span class="cm-variable">t1</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">None</span> <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span> <span class="cm-variable">Sum</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; <span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp;<span class="cm-number">43</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; <span class="cm-number">13</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">21</span> &nbsp;<span class="cm-number">41</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Sum</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">42</span> &nbsp; <span class="cm-number">14</span> &nbsp; &nbsp; <span class="cm-number">28</span> &nbsp;<span class="cm-number">84</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">addmargins</span>(<span class="cm-variable">prop.table</span>(<span class="cm-variable">t1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Some</span> &nbsp; &nbsp; <span class="cm-variable">Marked</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Sum</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-number">0.34523810</span> <span class="cm-number">0.08333333</span> <span class="cm-number">0.08333333</span> <span class="cm-number">0.51190476</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> <span class="cm-number">0.15476190</span> <span class="cm-number">0.08333333</span> <span class="cm-number">0.25000000</span> <span class="cm-number">0.48809524</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Sum</span> &nbsp; &nbsp; <span class="cm-number">0.50000000</span> <span class="cm-number">0.16666667</span> <span class="cm-number">0.33333333</span> <span class="cm-number">1.00000000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre></li><li><p><span>仅添加行或列的边际和：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 仅添加行或列的边际和(一共有4中情况)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">addmargins</span>(<span class="cm-variable">prop.table</span>(<span class="cm-variable">t1</span>,<span class="cm-number">1</span>),<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">addmargins</span>(<span class="cm-variable">prop.table</span>(<span class="cm-variable">t1</span>,<span class="cm-number">1</span>),<span class="cm-number">1</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Some</span> &nbsp; &nbsp;<span class="cm-variable">Marked</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Sum</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-number">0.6744186</span> <span class="cm-number">0.1627907</span> <span class="cm-number">0.1627907</span> <span class="cm-number">1.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> <span class="cm-number">0.3170732</span> <span class="cm-number">0.1707317</span> <span class="cm-number">0.5121951</span> <span class="cm-number">1.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Some</span> &nbsp; &nbsp;<span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-number">0.6744186</span> <span class="cm-number">0.1627907</span> <span class="cm-number">0.1627907</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> <span class="cm-number">0.3170732</span> <span class="cm-number">0.1707317</span> <span class="cm-number">0.5121951</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Sum</span> &nbsp; &nbsp; <span class="cm-number">0.9914918</span> <span class="cm-number">0.3335224</span> <span class="cm-number">0.6749858</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre></li><li><p><span>将多维的表格平铺（三维或三维以上）：</span><strong><span>ftable()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>,<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>,<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">gear</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ftable</span>(<span class="cm-variable">x</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">5</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0</span> <span class="cm-number">4</span> &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">6</span> &nbsp; <span class="cm-number">2</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">8</span> &nbsp;<span class="cm-number">12</span> &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">4</span> &nbsp; <span class="cm-number">0</span> &nbsp;<span class="cm-number">6</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">6</span> &nbsp; <span class="cm-number">0</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">8</span> &nbsp; <span class="cm-number">0</span> &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre></li><li><p><strong><span>table()</span></strong><span>会默认将NA值忽略，因此要计算NA的值，需要添加参数</span><strong><span>useNA=&quot;ifany&quot;</span></strong><span>。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-variable">letters</span>[<span class="cm-variable">sample</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">26</span>,<span class="cm-number">10</span>,<span class="cm-variable">replace</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)],<span class="cm-atom">NA</span>,<span class="cm-atom">NA</span>)<span class="cm-semi">;</span><span class="cm-variable">x</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-string">"v"</span> <span class="cm-string">"r"</span> <span class="cm-string">"p"</span> <span class="cm-string">"y"</span> <span class="cm-string">"l"</span> <span class="cm-string">"h"</span> <span class="cm-string">"v"</span> <span class="cm-string">"s"</span> <span class="cm-string">"f"</span> <span class="cm-string">"h"</span> <span class="cm-atom">NA</span> &nbsp;<span class="cm-atom">NA</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">f</span> <span class="cm-variable">h</span> <span class="cm-variable">l</span> <span class="cm-variable">p</span> <span class="cm-variable">r</span> <span class="cm-variable">s</span> <span class="cm-variable">v</span> <span class="cm-variable">y</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">2</span> <span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-number">2</span> <span class="cm-number">1</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">x</span>,<span class="cm-variable">useNA</span> <span class="cm-operator">=</span> <span class="cm-string">"ifany"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">f</span> &nbsp; &nbsp;<span class="cm-variable">h</span> &nbsp; &nbsp;<span class="cm-variable">l</span> &nbsp; &nbsp;<span class="cm-variable">p</span> &nbsp; &nbsp;<span class="cm-variable">r</span> &nbsp; &nbsp;<span class="cm-variable">s</span> &nbsp; &nbsp;<span class="cm-variable">v</span> &nbsp; &nbsp;<span class="cm-variable">y</span> <span class="cm-operator">&lt;</span><span class="cm-atom">NA</span><span class="cm-operator">&gt;</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">2</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre></li><li><p><span>使用</span><strong><span>gmodels</span></strong><span>包的</span><strong><span>CrossTable()</span></strong><span>可以创建二维的列联表。CrossTable()函数仿照SAS中PROC FREO或SPSS中CROSSTABS的形式生成二维列联表。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"gmodels"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">gmodels</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CrossTable</span>(<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Treatment</span>,<span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">Cell</span> <span class="cm-variable">Contents</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|-------------------------|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">N</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> <span class="cm-variable">Chi</span><span class="cm-operator">-</span><span class="cm-variable">square</span> <span class="cm-variable">contribution</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">N</span> <span class="cm-operator">/</span> <span class="cm-variable">Row</span> <span class="cm-variable">Total</span> <span class="cm-operator">|</span><span class="cm-tab" role="presentation" cm-text="	"> </span> <span class="cm-comment"># 对应下面单元格的各项内容</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">N</span> <span class="cm-operator">/</span> <span class="cm-variable">Col</span> <span class="cm-variable">Total</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">N</span> <span class="cm-operator">/</span> <span class="cm-variable">Table</span> <span class="cm-variable">Total</span> <span class="cm-operator">|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">|-------------------------|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Total</span> <span class="cm-variable">Observations</span> <span class="cm-keyword">in</span> <span class="cm-variable">Table</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">84</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> <span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Improved</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Arthritis</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Treatment</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">None</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Some</span> <span class="cm-operator">|</span> &nbsp; &nbsp;<span class="cm-variable">Marked</span> <span class="cm-operator">|</span> <span class="cm-variable">Row</span> <span class="cm-variable">Total</span> <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------|-----------|-----------|-----------|-----------|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Placebo</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">29</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">7</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">7</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">43</span> <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">2.616</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.004</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">3.752</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.674</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.163</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.163</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.512</span> <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.690</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.500</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.250</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.345</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.083</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.083</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------|-----------|-----------|-----------|-----------|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Treated</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">13</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">7</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">21</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">41</span> <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">2.744</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.004</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">3.935</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.317</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.171</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.512</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.488</span> <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.310</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.500</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.750</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.155</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.083</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.250</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------|-----------|-----------|-----------|-----------|</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Column</span> <span class="cm-variable">Total</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">42</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">14</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">28</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">84</span> <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.500</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.167</span> <span class="cm-operator">|</span> &nbsp; &nbsp; <span class="cm-number">0.333</span> <span class="cm-operator">|</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">|</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">--------------------|-----------|-----------|-----------|-----------|</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 703px;"></div><div class="CodeMirror-gutters" style="display: none; height: 703px;"></div></div></div></pre></li><li><p><strong><span>多维列联表</span></strong><span>：</span><strong><span>table()</span></strong><span>或</span><strong><span>xtabs()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 三个变量的维度或下标依次为1，2，3 ------------</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span><span class="cm-variable">Treatment</span><span class="cm-operator">+</span><span class="cm-variable">Sex</span><span class="cm-operator">+</span><span class="cm-variable">Improved</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">Arthritis</span>)<span class="cm-semi">;</span><span class="cm-variable">t</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">, , <span class="cm-variable">Improved</span> <span class="cm-operator">=</span> <span class="cm-variable">None</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Sex</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">Female</span> <span class="cm-variable">Male</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; &nbsp; <span class="cm-number">19</span> &nbsp; <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">, , <span class="cm-variable">Improved</span> <span class="cm-operator">=</span> <span class="cm-variable">Some</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Sex</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">Female</span> <span class="cm-variable">Male</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> &nbsp; &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">, , <span class="cm-variable">Improved</span> <span class="cm-operator">=</span> <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Sex</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">Female</span> <span class="cm-variable">Male</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; &nbsp; <span class="cm-number">16</span> &nbsp; &nbsp;<span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 使用ftable()扁平化 ------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ftable</span>(<span class="cm-variable">t</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span> <span class="cm-variable">None</span> <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">Sex</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Placebo</span> &nbsp; <span class="cm-variable">Female</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">19</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Male</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">10</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treated</span> &nbsp; <span class="cm-variable">Female</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-number">5</span> &nbsp; &nbsp; <span class="cm-number">16</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Male</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 使用各维度计算边缘频数 ------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">margin.table</span>(<span class="cm-variable">t</span>,<span class="cm-number">1</span>) <span class="cm-comment"># Treatment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Placebo</span> <span class="cm-variable">Treated</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">43</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">41</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">margin.table</span>(<span class="cm-variable">t</span>,<span class="cm-number">2</span>) <span class="cm-comment"># Sex</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sex</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Female</span> &nbsp; <span class="cm-variable">Male</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">59</span> &nbsp; &nbsp; <span class="cm-number">25</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">margin.table</span>(<span class="cm-variable">t</span>,<span class="cm-number">3</span>) <span class="cm-comment"># Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">None</span> &nbsp; <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">42</span> &nbsp; &nbsp; <span class="cm-number">14</span> &nbsp; &nbsp; <span class="cm-number">28</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 选其中两个维度计算边缘频数 ------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">margin.table</span>(<span class="cm-variable">t</span>,<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">None</span> <span class="cm-variable">Some</span> <span class="cm-variable">Marked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Placebo</span> &nbsp; <span class="cm-number">29</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Treated</span> &nbsp; <span class="cm-number">13</span> &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; <span class="cm-number">21</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 计算边际和（使用没有选中的列3，计算边际和） ------------</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ftable</span>(<span class="cm-variable">addmargins</span>(<span class="cm-variable">prop.table</span>(<span class="cm-variable">t</span>,<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>)),<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Improved</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">None</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Some</span> &nbsp; &nbsp; <span class="cm-variable">Marked</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Sum</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treatment</span> <span class="cm-variable">Sex</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Placebo</span> &nbsp; <span class="cm-variable">Female</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.59375000</span> <span class="cm-number">0.21875000</span> <span class="cm-number">0.18750000</span> <span class="cm-number">1.00000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Male</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.90909091</span> <span class="cm-number">0.00000000</span> <span class="cm-number">0.09090909</span> <span class="cm-number">1.00000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Treated</span> &nbsp; <span class="cm-variable">Female</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.22222222</span> <span class="cm-number">0.18518519</span> <span class="cm-number">0.59259259</span> <span class="cm-number">1.00000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Male</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.50000000</span> <span class="cm-number">0.14285714</span> <span class="cm-number">0.35714286</span> <span class="cm-number">1.00000000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1404px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1404px;"></div></div></div></pre></li><li><p><span>想要得到百分比，只需要在结果上乘100即可。</span></p></li></ul><h5 id='独立性检验'><span>独立性检验</span></h5><ul><li><strong><span>卡方独立性检验</span></strong><span>：</span><strong><span>chisq.test()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span><span class="cm-variable">Treatment</span><span class="cm-operator">+</span><span class="cm-variable">Improved</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Arthritis</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">chisq.test</span>(<span class="cm-variable">t1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Pearso</span>’<span class="cm-variable">s</span> <span class="cm-variable">Chi</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">t1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">X</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">13.055</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.001463</span> <span class="cm-comment"># p&lt;0.01，可以认为不独立</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span><span class="cm-variable">Improved</span><span class="cm-operator">+</span><span class="cm-variable">Sex</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span><span class="cm-variable">Arthritis</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">chisq.test</span>(<span class="cm-variable">t2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Pearson</span>‘<span class="cm-variable">s</span> <span class="cm-variable">Chi</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">t2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">X</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">4.8407</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.08889</span> <span class="cm-comment"># p&gt;0.05，可以认为独立</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Warning</span> <span class="cm-variable">message</span><span class="cm-operator">:</span> <span class="cm-comment"># 由于t2存在单元格的值小于5，可能导致不准确，因此发出警告</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">In</span> <span class="cm-variable">chisq.test</span>(<span class="cm-variable">t2</span>) <span class="cm-operator">:</span> <span class="cm-variable">Chi</span><span class="cm-operator">-</span><span class="cm-variable">squared</span>近似算法有可能不准</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 339px;"></div><div class="CodeMirror-gutters" style="display: none; height: 339px;"></div></div></div></pre><ul><li><strong><span>Fisher精确检验</span></strong><span>：</span><strong><span>fisher.test()</span></strong><span>。</span></li><li><span>原假设是：边界固定的列联表中行和列是相互独立的。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span><span class="cm-variable">Treatment</span><span class="cm-operator">+</span><span class="cm-variable">Improved</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Arthritis</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fisher.test</span>(<span class="cm-variable">t</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Fisher</span>‘<span class="cm-variable">s</span> <span class="cm-variable">Exact</span> <span class="cm-variable">Test</span> <span class="cm-keyword">for</span> <span class="cm-variable">Count</span> <span class="cm-variable">Data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">t</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.001393</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">two.sided</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><ul><li><p><strong><span>Cochran-Mantel-Haenszel检验</span></strong><span>：</span><strong><span>mantelhaen.test()</span></strong><span>，卡方检验，其原假设是：两个名义变量在第三个变量的每一层中都是条件独立的。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">xtabs</span>(<span class="cm-operator">~</span><span class="cm-variable">Treatment</span><span class="cm-operator">+</span><span class="cm-variable">Improved</span><span class="cm-operator">+</span><span class="cm-variable">Sex</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Arthritis</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">mantelhaen.test</span>(<span class="cm-variable">t</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Cochran</span><span class="cm-operator">-</span><span class="cm-variable">Mantel</span><span class="cm-operator">-</span><span class="cm-variable">Haenszel</span> <span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">t</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cochran</span><span class="cm-operator">-</span><span class="cm-variable">Mantel</span><span class="cm-operator">-</span><span class="cm-variable">Haenszel</span> <span class="cm-variable">M</span><span class="cm-operator">^</span><span class="cm-number">2</span> <span class="cm-operator">=</span> <span class="cm-number">14.632</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.0006647</span> <span class="cm-comment"># 由p值可知，不独立，即不同的治疗条件下的改善情况于性别有关。</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><p><span>检验治疗情况和改善情况在性别的每一水平下是否独立。</span></p></li></ul><h5 id='相关性度量'><span>相关性度量</span></h5><ul><li><span>显著性检验评估了是否存在充分的证据以拒绝变量间相互独立的原假设。如果可以拒绝原假设，那么就会自然而然地转向用以衡量相关性强弱的相关性度量。</span></li><li><strong><span>vcd</span></strong><span>包里的</span><strong><span>assoctats()</span></strong><span>。可以计算二维列联表的</span><strong><span>phi系数</span></strong><span>、</span><strong><span>列联系数</span></strong><span>和</span><strong><span>Cramer’s V</span></strong><span>系数</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">vcd</span><span class="cm-operator">::</span><span class="cm-variable">assocstats</span>(<span class="cm-variable">t</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">X</span><span class="cm-operator">^</span><span class="cm-number">2</span> <span class="cm-variable">df</span> &nbsp;<span class="cm-variable">P</span>(<span class="cm-operator">&gt;</span> <span class="cm-variable">X</span><span class="cm-operator">^</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Likelihood</span> <span class="cm-variable">Ratio</span> <span class="cm-number">13.530</span> &nbsp;<span class="cm-number">2</span> <span class="cm-number">0.0011536</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Pearson</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">13.055</span> &nbsp;<span class="cm-number">2</span> <span class="cm-number">0.0014626</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Phi</span><span class="cm-operator">-</span><span class="cm-variable">Coefficient</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-atom">NA</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Contingency</span> <span class="cm-variable">Coeff.</span><span class="cm-operator">:</span> <span class="cm-number">0.367</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cramer</span><span class="cm-string">'s V &nbsp; &nbsp; &nbsp;  : 0.394 </span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>较大的值意味着较强的相关性。</span></li><li><strong><span>kappa()</span></strong><span>计算混淆矩阵的Cohen&#39;s kappa值以及加权的kappa值。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">kappa</span>(<span class="cm-variable">t</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2.760342</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h4 id='相关'><span>相关</span></h4><h5 id='相关类型'><span>相关类型</span></h5><ul><li><span>相关系数可以用来描述定量变量之间的关系。相关系数的符号 (±) 表明关系的方向(正相关或负相关)，其值的大小表示关系的强弱程度( 完全不相关时为0，完全相关时为1)。</span></li><li><span>state.x77数据集，它提供了美国50个州在1977年的人口、收入、文盲率、预期寿命、谋杀率和高中毕业率数据。</span></li><li><span>R可以计算多种相关系数，包括Pearson相关系数、Spearman相关系数、Kendall相关系数、偏相关系数、多分格(polychoric)相关系数和多系列(polyserial)相关系数。</span></li></ul><h6 id='pearsonspearman和kendall相关'><span>Pearson、Spearman和Kendall相关</span></h6><ul><li><strong><span>Pearson</span></strong><span>积差相关系数衡量了两个定量变量之间的线性相关程度。</span></li><li><strong><span>Spearman</span></strong><span>等级相关系数则衡量分级定序变量之间的相关程度。</span></li><li><strong><span>Kendalls Tau</span></strong><span>相关系数也是一种非参数的等级相关度量。</span></li><li><strong><span>cor()</span></strong><span>：用于计算3种相关系数。</span></li><li><strong><span>cov()</span></strong><span>：用于计算协方差。</span></li><li><span>相关系数 == 协方差 / (两个变量的标准差的积)</span></li></ul><p><img src="img\019_R语言实战\第7章\第7章 003.png" referrerpolicy="no-referrer" alt="第7章 003"></p><ul><li><span>默认参数为use=&quot;evervthing&quot;利method=&quot;pearson&quot;</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">state.x77</span>[,<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">6</span>]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 协方差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cov</span>(<span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Population</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Income</span> &nbsp; <span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">HS</span> <span class="cm-variable">Grad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> <span class="cm-number">19931683.7588</span> <span class="cm-number">571229.7796</span> &nbsp;<span class="cm-number">292.8679592</span> <span class="cm-operator">-</span><span class="cm-number">407.8424612</span> <span class="cm-number">5663.523714</span> <span class="cm-operator">-</span><span class="cm-number">3551.509551</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">571229.7796</span> <span class="cm-number">377573.3061</span> <span class="cm-operator">-</span><span class="cm-number">163.7020408</span> &nbsp;<span class="cm-number">280.6631837</span> <span class="cm-operator">-</span><span class="cm-number">521.894286</span> &nbsp;<span class="cm-number">3076.768980</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">292.8680</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">163.7020</span> &nbsp; &nbsp;<span class="cm-number">0.3715306</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.4815122</span> &nbsp; &nbsp;<span class="cm-number">1.581776</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">3.235469</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">407.8425</span> &nbsp; &nbsp;<span class="cm-number">280.6632</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.4815122</span> &nbsp; &nbsp;<span class="cm-number">1.8020204</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">3.869480</span> &nbsp; &nbsp; <span class="cm-number">6.312685</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">5663.5237</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">521.8943</span> &nbsp; &nbsp;<span class="cm-number">1.5817755</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">3.8694804</span> &nbsp; <span class="cm-number">13.627465</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">14.549616</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HS</span> <span class="cm-variable">Grad</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">3551.5096</span> &nbsp; <span class="cm-number">3076.7690</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">3.2354694</span> &nbsp; &nbsp;<span class="cm-number">6.3126849</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">14.549616</span> &nbsp; &nbsp;<span class="cm-number">65.237894</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 相关系数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor</span>(<span class="cm-variable">states</span>) <span class="cm-comment"># pearson</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Population</span> &nbsp; &nbsp; <span class="cm-variable">Income</span> <span class="cm-variable">Illiteracy</span> &nbsp; &nbsp;<span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> &nbsp; &nbsp; <span class="cm-variable">HS</span> <span class="cm-variable">Grad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp;<span class="cm-number">1.00000000</span> &nbsp;<span class="cm-number">0.2082276</span> &nbsp;<span class="cm-number">0.1076224</span> <span class="cm-operator">-</span><span class="cm-number">0.06805195</span> &nbsp;<span class="cm-number">0.3436428</span> <span class="cm-operator">-</span><span class="cm-number">0.09848975</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.20822756</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.4370752</span> &nbsp;<span class="cm-number">0.34025534</span> <span class="cm-operator">-</span><span class="cm-number">0.2300776</span> &nbsp;<span class="cm-number">0.61993232</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">0.10762237</span> <span class="cm-operator">-</span><span class="cm-number">0.4370752</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.58847793</span> &nbsp;<span class="cm-number">0.7029752</span> <span class="cm-operator">-</span><span class="cm-number">0.65718861</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.06805195</span> &nbsp;<span class="cm-number">0.3402553</span> <span class="cm-operator">-</span><span class="cm-number">0.5884779</span> &nbsp;<span class="cm-number">1.00000000</span> <span class="cm-operator">-</span><span class="cm-number">0.7808458</span> &nbsp;<span class="cm-number">0.58221620</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.34364275</span> <span class="cm-operator">-</span><span class="cm-number">0.2300776</span> &nbsp;<span class="cm-number">0.7029752</span> <span class="cm-operator">-</span><span class="cm-number">0.78084575</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.48797102</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HS</span> <span class="cm-variable">Grad</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.09848975</span> &nbsp;<span class="cm-number">0.6199323</span> <span class="cm-operator">-</span><span class="cm-number">0.6571886</span> &nbsp;<span class="cm-number">0.58221620</span> <span class="cm-operator">-</span><span class="cm-number">0.4879710</span> &nbsp;<span class="cm-number">1.00000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor</span>(<span class="cm-variable">states</span>,<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"spearman"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Population</span> &nbsp; &nbsp; <span class="cm-variable">Income</span> <span class="cm-variable">Illiteracy</span> &nbsp; <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span> &nbsp; &nbsp;<span class="cm-variable">HS</span> <span class="cm-variable">Grad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp;<span class="cm-number">1.0000000</span> &nbsp;<span class="cm-number">0.1246098</span> &nbsp;<span class="cm-number">0.3130496</span> <span class="cm-operator">-</span><span class="cm-number">0.1040171</span> &nbsp;<span class="cm-number">0.3457401</span> <span class="cm-operator">-</span><span class="cm-number">0.3833649</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.1246098</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.3145948</span> &nbsp;<span class="cm-number">0.3241050</span> <span class="cm-operator">-</span><span class="cm-number">0.2174623</span> &nbsp;<span class="cm-number">0.5104809</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">0.3130496</span> <span class="cm-operator">-</span><span class="cm-number">0.3145948</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.5553735</span> &nbsp;<span class="cm-number">0.6723592</span> <span class="cm-operator">-</span><span class="cm-number">0.6545396</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.1040171</span> &nbsp;<span class="cm-number">0.3241050</span> <span class="cm-operator">-</span><span class="cm-number">0.5553735</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.7802406</span> &nbsp;<span class="cm-number">0.5239410</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.3457401</span> <span class="cm-operator">-</span><span class="cm-number">0.2174623</span> &nbsp;<span class="cm-number">0.6723592</span> <span class="cm-operator">-</span><span class="cm-number">0.7802406</span> &nbsp;<span class="cm-number">1.0000000</span> <span class="cm-operator">-</span><span class="cm-number">0.4367330</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HS</span> <span class="cm-variable">Grad</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.3833649</span> &nbsp;<span class="cm-number">0.5104809</span> <span class="cm-operator">-</span><span class="cm-number">0.6545396</span> &nbsp;<span class="cm-number">0.5239410</span> <span class="cm-operator">-</span><span class="cm-number">0.4367330</span> &nbsp;<span class="cm-number">1.0000000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 702px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><ul><li><span>以上计算，矩阵沿着对角线对称。也可以输入两个变量进行计算，这样就不会有重复的值了。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">states</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Population"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"HS Grad"</span>)]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">states</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Life Exp"</span>, <span class="cm-string">"Murder"</span>)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; <span class="cm-variable">Murder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> <span class="cm-operator">-</span><span class="cm-number">0.06805195</span> &nbsp;<span class="cm-number">0.3436428</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.34025534</span> <span class="cm-operator">-</span><span class="cm-number">0.2300776</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> <span class="cm-operator">-</span><span class="cm-number">0.58847793</span> &nbsp;<span class="cm-number">0.7029752</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HS</span> <span class="cm-variable">Grad</span> &nbsp; &nbsp; <span class="cm-number">0.58221620</span> <span class="cm-operator">-</span><span class="cm-number">0.4879710</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>上述结果并未指明相关系数是否显著不为0，因此需要对相关系数进行</span><strong><span>显著性检验</span></strong><span>。</span></li></ul><h6 id='偏相关'><span>偏相关</span></h6><ul><li><p><strong><span>偏相关性</span></strong><span>，是两个随机变量在</span><strong><span>排除</span></strong><span>了其余部分或全部随机变量影响情形下的净相关性或纯相关性，是两个随机变量在处于同一体系的其余部分或全部随机变量</span><strong><span>取给定值</span></strong><span>的情形下的条件相关性。</span></p></li><li><p><span>偏相关是指在控制一个或多个定量变量时，另外两个定量变量之间的相互关系。</span></p></li><li><p><span>使用</span><strong><span>ggm</span></strong><span>包里的</span><strong><span>pcor()</span></strong><span>函数计算。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pcor</span>(<span class="cm-variable">u</span>, <span class="cm-variable">S</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>u</span></strong><span>是一个数值向量，</span><strong><span>前两个</span></strong><span>数值表示</span><strong><span>要计算相关系数的变量下标</span></strong><span>，其余的数值为条件变量( 即要排除影响的变量)的下标。</span><strong><span>s</span></strong><span>为变量的</span><strong><span>协方差阵</span></strong><span>。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"ggm"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggm</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">state.x77</span>[,<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">6</span>]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">colnames</span>(<span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Population"</span> <span class="cm-string">"Income"</span> &nbsp; &nbsp; <span class="cm-string">"Illiteracy"</span> <span class="cm-string">"Life Exp"</span> &nbsp; <span class="cm-string">"Murder"</span> &nbsp; &nbsp; <span class="cm-string">"HS Grad"</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 控制收入(2)、文盲(3)、高中毕业率(6)的影响</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 计算人口(1)与谋杀率(5)的相关系数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pcor</span>(<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">5</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>,<span class="cm-number">6</span>),<span class="cm-variable">cov</span>(<span class="cm-variable">states</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.3462724</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><h6 id='其他类型相关'><span>其他类型相关</span></h6><ul><li><strong><span>polycor</span></strong><span>包中的</span><strong><span>hetcor()</span></strong><span>函数可以计算一种混合的相关矩阵，其中包括数值型变量的Pearson积差相关系数、数值型变量和有序变量之间的多系列相关系数、有序变量之间的多分格相关系数以及二分变量之间的四分相关系数。</span></li><li><span>多系列、多分格和四分相关系数都假设有序变量或二分变量由潜在的正态分布导出。</span></li></ul><h5 id='相关的显著性检验'><span>相关的显著性检验</span></h5><h6 id='单个'><span>单个</span></h6><ul><li><p><span>使用</span><strong><span>cor.test()</span></strong><span>函数对</span><strong><span>单个</span></strong><span>的Pearson、Spearman和Kendall相关系数进行检验。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cor.test</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">alternative</span> <span class="cm-operator">=</span> , <span class="cm-variable">method</span> <span class="cm-operator">=</span> )</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>x</span></strong><span>和</span><strong><span>y</span></strong><span>为要检验相关性的变量，</span><strong><span>alternative</span></strong><span>则用来指定进行双侧检验或单侧检验(取值为&quot;</span><strong><span>two.side</span></strong><span>&quot;、 &quot;</span><strong><span>less</span></strong><span>&quot; 或&quot;</span><strong><span>greater</span></strong><span>&quot;)，而</span><strong><span>method</span></strong><span>用以指定要计算的相关类型 (&quot;</span><strong><span>pearson</span></strong><span>&quot; &quot;</span><strong><span>kendall</span></strong><span>&quot; 或&quot;</span><strong><span>spearman</span></strong><span>&quot;)。</span></p></li><li><p><span>当研究的假设为总体的相关系数</span><strong><span>小于0</span></strong><span>时，请使用</span><strong><span>alternative=&quot;less&quot;</span></strong><span>。在研究的假设为总体的相关系数</span><strong><span>大于0</span></strong><span>时，应审用</span><strong><span>alternative=&quot;greater&quot;</span></strong><span>。在默认情况下，假设为</span><strong><span>alternative=&quot;two.side&quot;</span></strong><span>( 总体相关系数</span><strong><span>不等于0</span></strong><span>)。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 文盲和谋杀率</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor.test</span>(<span class="cm-variable">states</span>[,<span class="cm-number">3</span>],<span class="cm-variable">states</span>[,<span class="cm-number">5</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Pearson</span>‘<span class="cm-variable">s</span> <span class="cm-variable">product</span><span class="cm-operator">-</span><span class="cm-variable">moment</span> <span class="cm-variable">correlation</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">states</span>[, <span class="cm-number">3</span>] <span class="cm-variable">and</span> <span class="cm-variable">states</span>[, <span class="cm-number">5</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t</span> <span class="cm-operator">=</span> <span class="cm-number">6.8479</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">48</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">1.258e-08</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">correlation</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span> <span class="cm-variable">percent</span> <span class="cm-variable">confidence</span> <span class="cm-variable">interval</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">0.5279280</span> <span class="cm-number">0.8207295</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sample</span> <span class="cm-variable">estimates</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">cor</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.7029752</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 287px;"></div><div class="CodeMirror-gutters" style="display: none; height: 287px;"></div></div></div></pre><ul><li><span>p值小于0.01，认为二者的相关度不为0。（原假设是相关度为0）</span></li></ul><h6 id='多个'><span>多个</span></h6><ul><li><strong><span>psych</span></strong><span>包的</span><strong><span>corr.test()</span></strong><span>，可以同时检验</span><strong><span>多个</span></strong><span>变量的相关系数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 同时比较多个</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">psych</span><span class="cm-operator">::</span><span class="cm-variable">corr.test</span>(<span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span><span class="cm-variable">psych</span><span class="cm-operator">::</span><span class="cm-variable">corr.test</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Correlation</span> <span class="cm-variable">matrix</span> &nbsp;<span class="cm-comment"># 相关系数矩阵</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Population</span> <span class="cm-variable">Income</span> <span class="cm-variable">Illiteracy</span> <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Murder</span> <span class="cm-variable">HS</span> <span class="cm-variable">Grad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1.00</span> &nbsp; <span class="cm-number">0.21</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.11</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.07</span> &nbsp; <span class="cm-number">0.34</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.21</span> &nbsp; <span class="cm-number">1.00</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.44</span> &nbsp; &nbsp; <span class="cm-number">0.34</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.23</span> &nbsp; &nbsp;<span class="cm-number">0.62</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.11</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.44</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1.00</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.59</span> &nbsp; <span class="cm-number">0.70</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.66</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.07</span> &nbsp; <span class="cm-number">0.34</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.59</span> &nbsp; &nbsp; <span class="cm-number">1.00</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.78</span> &nbsp; &nbsp;<span class="cm-number">0.58</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.34</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.23</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.70</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.78</span> &nbsp; <span class="cm-number">1.00</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.49</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HS</span> <span class="cm-variable">Grad</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.10</span> &nbsp; <span class="cm-number">0.62</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.66</span> &nbsp; &nbsp; <span class="cm-number">0.58</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.49</span> &nbsp; &nbsp;<span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sample</span> <span class="cm-variable">Size</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">50</span> <span class="cm-comment"># 相关系数的显著性矩阵（越小越显著）即p值矩阵</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Probability</span> <span class="cm-variable">values</span> (<span class="cm-variable">Entries</span> <span class="cm-variable">above</span> <span class="cm-variable">the</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">are</span> <span class="cm-variable">adjusted</span> <span class="cm-keyword">for</span> <span class="cm-variable">multiple</span> <span class="cm-variable">tests.</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Population</span> <span class="cm-variable">Income</span> <span class="cm-variable">Illiteracy</span> <span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Murder</span> <span class="cm-variable">HS</span> <span class="cm-variable">Grad</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00</span> &nbsp; <span class="cm-number">0.59</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1.00</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.0</span> &nbsp; <span class="cm-number">0.10</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.15</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.01</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.1</span> &nbsp; <span class="cm-number">0.54</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.46</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.0</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Life</span> <span class="cm-variable">Exp</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.64</span> &nbsp; <span class="cm-number">0.02</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.0</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.01</span> &nbsp; <span class="cm-number">0.11</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.0</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HS</span> <span class="cm-variable">Grad</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.50</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.0</span> &nbsp; <span class="cm-number">0.00</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">To</span> <span class="cm-variable">see</span> <span class="cm-variable">confidence</span> <span class="cm-variable">intervals</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">correlations</span>, <span class="cm-variable">print</span> <span class="cm-variable">with</span> <span class="cm-variable">the</span> <span class="cm-variable">short</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span> <span class="cm-variable">option</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><ul><li><strong><span>use=</span></strong><span>的取值可为&quot;</span><strong><span>pairwise</span></strong><span>&quot;或&quot;</span><strong><span>complete</span></strong><span>&quot;( 分别表示对缺失值执行</span><strong><span>成对</span></strong><span>删除或</span><strong><span>行删除</span></strong><span>)。</span><strong><span>method=</span></strong><span>的取值可为&quot;</span><strong><span>pearson</span></strong><span>&quot;(默认值)&quot;</span><strong><span>spearman</span></strong><span>&quot;或&quot;</span><strong><span>kendall</span></strong><span>&quot;。</span></li><li><span>这里可以看到，人口数量和高中毕业率的相关系数(-0.10) 并不显著(p=0.5 )。</span></li></ul><h6 id='其他'><span>其他</span></h6><ul><li><p><span>在多元正态性的假设下，</span><strong><span>ggm</span></strong><span>包里的</span><strong><span>pcor.test()</span></strong><span>可以用来检验在控制一个或多个额外变量时两个变量之间的条件独立性。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pcor.test</span>(<span class="cm-variable">r</span>, <span class="cm-variable">q</span>, <span class="cm-variable">n</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>r</span></strong><span>是由pcor()函数计算得到的偏相关系数，</span><strong><span>q</span></strong><span>为要控制的变量数( 以数值表示位置 )，</span><strong><span>n</span></strong><span>为样本大小。</span></p></li></ul><h4 id='t检验-1'><span>t检验</span></h4><ul><li><span>连续型的组间比较，并假设其呈正态分布。</span></li><li><span>数据：</span><strong><span>MASS</span></strong><span>包里的</span><strong><span>UScrime</span></strong><span>。它包含了1960年美国47个州的刑罚制度对犯罪率影响的信息。我们感兴趣的结果变量为</span><strong><span>Prob</span></strong><span>(监禁的概率) 、</span><strong><span>U1</span></strong><span>(14-24岁年龄段城市男性失业率)和</span><strong><span>U2</span></strong><span> (35-39岁年龄段城市男性失业率)。类别型变量</span><strong><span>So</span></strong><span>(指示该州是否位于南方的指示变量)将作为分组变量使用。</span></li></ul><h5 id='独立样本的t检验'><span>独立样本的t检验</span></h5><ul><li><span>如果你在美国的南方犯罪，是否更有可能被判监禁。</span></li><li><span>对两组的独立样本t检验可以用于检验两个总体的</span><strong><span>均值相等的假设</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t.test</span>(<span class="cm-variable">y</span> <span class="cm-operator">~</span> <span class="cm-variable">x</span>, <span class="cm-variable">data</span>) <span class="cm-comment"># 或</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t.test</span>(<span class="cm-variable">y1</span>, <span class="cm-variable">y2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>t检验默认假定</span><strong><span>方差不相等</span></strong><span>，并使用Welsh的修正自由度。</span><strong><span>var.equal=TRUE</span></strong><span>假定方差相等。默认的备择假设是双侧的(即均值不相等，但大小的方向不确定 )。参数</span><strong><span>al=&quot;less&quot;</span></strong><span>或</span><strong><span>al=&quot;greater&quot;</span></strong><span>来进行有方向的检验。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 南方1，非南方0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t.test</span>(<span class="cm-variable">Prob</span> <span class="cm-operator">~</span> <span class="cm-variable">So</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">UScrime</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Welch</span> <span class="cm-variable">Two</span> <span class="cm-variable">Sample</span> <span class="cm-variable">t</span><span class="cm-operator">-</span><span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">Prob</span> <span class="cm-variable">by</span> <span class="cm-variable">So</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">3.8954</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">24.925</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.0006506</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">difference</span> <span class="cm-keyword">in</span> <span class="cm-variable">means</span> <span class="cm-variable">between</span> <span class="cm-variable">group</span> <span class="cm-number">0</span> <span class="cm-variable">and</span> <span class="cm-variable">group</span> <span class="cm-number">1</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span> <span class="cm-variable">percent</span> <span class="cm-variable">confidence</span> <span class="cm-variable">interval</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-operator">-</span><span class="cm-number">0.03852569</span> <span class="cm-operator">-</span><span class="cm-number">0.01187439</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sample</span> <span class="cm-variable">estimates</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> <span class="cm-keyword">in</span> <span class="cm-variable">group</span> <span class="cm-number">0</span> <span class="cm-variable">mean</span> <span class="cm-keyword">in</span> <span class="cm-variable">group</span> <span class="cm-number">1</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">0.03851265</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.06371269</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 287px;"></div><div class="CodeMirror-gutters" style="display: none; height: 287px;"></div></div></div></pre><ul><li><span>p值小于0.001拒绝原假设，认为判刑存在差异。</span></li></ul><h5 id='非独立样本的t检验'><span>非独立样本的t检验</span></h5><ul><li><span>较年轻(14~24岁)男性的失业率是否比年长(35~39岁)男性的失业率更高?在这种情况下，这两组数据并不独立。</span></li><li><span>非独立样本的t检验假定组间的差异呈</span><strong><span>正态分布</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t.test</span>(<span class="cm-variable">y1</span>, <span class="cm-variable">y2</span>, <span class="cm-variable">paired</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">sapply</span>(<span class="cm-variable">UScrime</span>[<span class="cm-variable">c</span>(<span class="cm-string">"U1"</span>,<span class="cm-string">"U2"</span>)],<span class="cm-keyword">function</span>(<span class="cm-variable">x</span>) {<span class="cm-variable">c</span>(<span class="cm-variable">mean</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">x</span>),<span class="cm-variable">sd</span> <span class="cm-operator">=</span> <span class="cm-variable">sd</span>(<span class="cm-variable">x</span>))})</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">U1</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">U2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> <span class="cm-number">95.46809</span> <span class="cm-number">33.97872</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sd</span> &nbsp; <span class="cm-number">18.02878</span> &nbsp;<span class="cm-number">8.44545</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">with</span>(<span class="cm-variable">UScrime</span>,<span class="cm-variable">t.test</span>(<span class="cm-variable">U1</span>,<span class="cm-variable">U2</span>,<span class="cm-variable">paired</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Paired</span> <span class="cm-variable">t</span><span class="cm-operator">-</span><span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">U1</span> <span class="cm-variable">and</span> <span class="cm-variable">U2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t</span> <span class="cm-operator">=</span> <span class="cm-number">32.407</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">46</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">&lt;</span> <span class="cm-number">2.2e-16</span> <span class="cm-comment"># 极其小，因此拒绝原假设（mean相同），认为年轻人的失业率高</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">mean</span> <span class="cm-variable">difference</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span> <span class="cm-variable">percent</span> <span class="cm-variable">confidence</span> <span class="cm-variable">interval</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">57.67003</span> <span class="cm-number">65.30870</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sample</span> <span class="cm-variable">estimates</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> <span class="cm-variable">difference</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-number">61.48936</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 365px;"></div><div class="CodeMirror-gutters" style="display: none; height: 365px;"></div></div></div></pre><h5 id='多于两组-1'><span>多于两组</span></h5><ul><li><span>假设数据是从</span><strong><span>正态总体</span></strong><span>中独立抽样而得的，那么你可以使用</span><strong><span>方差分析(ANOVA)</span></strong><span>。</span></li><li><strong><span>第9章内容</span></strong></li></ul><h4 id='组间差异的非参数检验'><span>组间差异的非参数检验</span></h4><ul><li><span>如果数据无法满足t检验或ANOVA的参数假设，可以转而使用非参数方法。</span></li></ul><h5 id='两组比较'><span>两组比较</span></h5><ul><li><span>若两组数据</span><strong><span>独立</span></strong><span>，可以使用</span><strong><span>Wilcoxon秩和检验</span></strong><span>（Mann-Whitney U检验）</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wilcox.test</span>(<span class="cm-variable">y</span> <span class="cm-operator">~</span> <span class="cm-variable">x</span>, <span class="cm-variable">data</span>) <span class="cm-comment"># x为2分变量</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 或</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wilcox.test</span>(<span class="cm-variable">y1</span>, <span class="cm-variable">y2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>exact是否进行精确检验，</span><strong><span>al=&quot;less&quot;</span></strong><span>或</span><strong><span>al=&quot;greater&quot;</span></strong><span>来进行有方向的检验。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 计算中位数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">with</span>(<span class="cm-variable">UScrime</span>,<span class="cm-variable">aggregate</span>(<span class="cm-variable">Prob</span>,<span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">So</span> <span class="cm-operator">=</span> <span class="cm-variable">So</span>),<span class="cm-variable">median</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">So</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span> <span class="cm-number">0.038201</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> <span class="cm-number">0.055552</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 或</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">with</span>(<span class="cm-variable">UScrime</span>,<span class="cm-variable">by</span>(<span class="cm-variable">Prob</span>,<span class="cm-variable">So</span>,<span class="cm-variable">median</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 秩和检验</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">wilcox.test</span>(<span class="cm-variable">Prob</span> <span class="cm-operator">~</span> <span class="cm-variable">So</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">UScrime</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Wilcoxon</span> <span class="cm-variable">rank</span> <span class="cm-variable">sum</span> <span class="cm-variable">exact</span> <span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">Prob</span> <span class="cm-variable">by</span> <span class="cm-variable">So</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">W</span> <span class="cm-operator">=</span> <span class="cm-number">81</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">8.488e-05</span> <span class="cm-comment"># p值极小，因此认为中位数不相等</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">location</span> <span class="cm-variable">shift</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 339px;"></div><div class="CodeMirror-gutters" style="display: none; height: 339px;"></div></div></div></pre><ul><li><strong><span>Wilcoxon符号秩检验</span></strong><span>是非独立样本t检验的一种非参数替代方法。它适用于</span><strong><span>两组成对数据</span></strong><span>和</span><strong><span>无法保证正态性</span></strong><span>假设的情境。添加参数</span><strong><span>paired=TRUE</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 符号秩检验</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">sapply</span>(<span class="cm-variable">UScrime</span>[<span class="cm-variable">c</span>(<span class="cm-string">"U1"</span>,<span class="cm-string">"U2"</span>)],<span class="cm-variable">median</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">U1</span> <span class="cm-variable">U2</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">92</span> <span class="cm-number">34</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">with</span>(<span class="cm-variable">UScrime</span>,<span class="cm-variable">wilcox.test</span>(<span class="cm-variable">U1</span>,<span class="cm-variable">U2</span>,<span class="cm-variable">paired</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Wilcoxon</span> <span class="cm-variable">signed</span> <span class="cm-variable">rank</span> <span class="cm-variable">test</span> <span class="cm-variable">with</span> <span class="cm-variable">continuity</span> <span class="cm-variable">correction</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">U1</span> <span class="cm-variable">and</span> <span class="cm-variable">U2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">V</span> <span class="cm-operator">=</span> <span class="cm-number">1128</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">2.464e-09</span> <span class="cm-comment"># 与前面的参数检验（t检验）结论相同，失业率不相同</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">location</span> <span class="cm-variable">shift</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 287px;"></div><div class="CodeMirror-gutters" style="display: none; height: 287px;"></div></div></div></pre><ul><li><span>在本例中，含参的t检验和与其作用相同的非参数检验得到了相同的结论。当t检验的假设合理时，参数检验的功效更强(更容易发现存在的差异)。而非参数检验在假设非常不合理时(如对于等级有序数据)更适用。</span></li></ul><h5 id='多于两组-2'><span>多于两组</span></h5><ul><li><span>如果无法满足ANOVA设计的假设，那么可以使用非参数方法来评估组间的差异。</span></li><li><span>如果各组</span><strong><span>独立</span></strong><span>，则</span><strong><span>Kruskal-Wallis检验</span></strong><span>将是一种实用的方法。</span></li><li><span>如果各组</span><strong><span>不独立</span></strong><span>(如重复测量设计或随机区组设计)，那么</span><strong><span>Friedman检验</span></strong><span>会更合适。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kruskal.test</span>(<span class="cm-variable">y</span> <span class="cm-operator">~</span> <span class="cm-variable">A</span>, <span class="cm-variable">data</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">friedman.test</span>(<span class="cm-variable">y</span> <span class="cm-operator">~</span> <span class="cm-variable">A</span> <span class="cm-operator">|</span> <span class="cm-variable">B</span>, <span class="cm-variable">data</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>B是一个用以认定匹配观测的区组变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 检验不同地区（4个）的文盲率是否存在显著差异</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">state.region</span>,<span class="cm-variable">state.x77</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">kruskal.test</span>(<span class="cm-variable">Illiteracy</span> <span class="cm-operator">~</span> <span class="cm-variable">state.region</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Kruskal</span><span class="cm-operator">-</span><span class="cm-variable">Wallis</span> <span class="cm-variable">rank</span> <span class="cm-variable">sum</span> <span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">Illiteracy</span> <span class="cm-variable">by</span> <span class="cm-variable">state.region</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Kruskal</span><span class="cm-operator">-</span><span class="cm-variable">Wallis</span> <span class="cm-variable">chi</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">22.672</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">4.726e-05</span> <span class="cm-comment"># p值极小，存在显著差异，即文盲率不同</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 235px;"></div><div class="CodeMirror-gutters" style="display: none; height: 235px;"></div></div></div></pre><ul><li><span>虽然你可以拒绝不存在差异的原假设，但这个检验并没有告诉你哪些地区显著地与其他地区不同。</span></li><li><span>作者编写的函数</span><strong><span>vmc()</span></strong><span>：在控制犯第一类错误的概率(发现一个事实上并不存在的差异的概率)的前提下，执行可以同步讲行的多组比较，这样可以直接完成所有组之间的成对比较。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">source</span>(<span class="cm-string">"http://www.statmethods.net/RiA/wmc.txt"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">state.region</span>, <span class="cm-variable">state.x77</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">wmc</span>(<span class="cm-variable">Illiteracy</span> <span class="cm-operator">~</span> <span class="cm-variable">state.region</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>, <span class="cm-variable">method</span><span class="cm-operator">=</span><span class="cm-string">"holm"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Descriptive</span> <span class="cm-variable">Statistics</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-variable">West</span> <span class="cm-variable">North</span> <span class="cm-variable">Central</span> <span class="cm-variable">Northeast</span> <span class="cm-variable">South</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> <span class="cm-number">13.00</span> <span class="cm-number">12.00</span> <span class="cm-number">9.0</span> <span class="cm-number">16.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">median</span> <span class="cm-number">0.60</span> <span class="cm-number">0.70</span> <span class="cm-number">1.1</span> <span class="cm-number">1.75</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mad</span> <span class="cm-number">0.15</span> <span class="cm-number">0.15</span> <span class="cm-number">0.3</span> <span class="cm-number">0.59</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">Comparisons</span> (<span class="cm-variable">Wilcoxon</span> <span class="cm-variable">Rank</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Tests</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Probability</span> <span class="cm-variable">Adjustment</span> <span class="cm-operator">=</span> <span class="cm-variable">holm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-variable">Group.1</span> <span class="cm-variable">Group.2</span> <span class="cm-variable">W</span> <span class="cm-variable">p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-variable">West</span> <span class="cm-variable">North</span> <span class="cm-variable">Central</span> <span class="cm-number">88</span> <span class="cm-number">8.7e-01</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-variable">West</span> <span class="cm-variable">Northeast</span> <span class="cm-number">46</span> <span class="cm-number">8.7e-01</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-variable">West</span> <span class="cm-variable">South</span> <span class="cm-number">39</span> <span class="cm-number">1.8e-02</span> <span class="cm-operator">*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> <span class="cm-variable">North</span> <span class="cm-variable">Central</span> <span class="cm-variable">Northeast</span> <span class="cm-number">20</span> <span class="cm-number">5.4e-02</span> <span class="cm-variable">.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-variable">North</span> <span class="cm-variable">Central</span> <span class="cm-variable">South</span> <span class="cm-number">2</span> <span class="cm-number">8.1e-05</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> <span class="cm-variable">Northeast</span> <span class="cm-variable">South</span> <span class="cm-number">18</span> <span class="cm-number">1.2e-02</span> <span class="cm-operator">*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> <span class="cm-number">0</span> <span class="cm-string">'***'</span> <span class="cm-number">0.001</span> <span class="cm-string">'**'</span> <span class="cm-number">0.01</span> <span class="cm-string">'*'</span> <span class="cm-number">0.05</span> <span class="cm-string">'.'</span> <span class="cm-number">0.1</span> <span class="cm-string">'</span> <span class="cm-string">'</span> <span class="cm-number">1</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 495px;"></div><div class="CodeMirror-gutters" style="display: none; height: 495px;"></div></div></div></pre><h2 id='第三部分-中级方法'><span>第三部分 中级方法</span></h2><h3 id='第8章-回归'><span>第8章 回归</span></h3><ul><li><span>通指那些用一个或多个预测变量(也称自变量或解释变量)来预测响应变量(也称因变量、效标变量或结果变量)的方法。</span></li></ul><p><img src="img\019_R语言实战\第8章\第8章 001.png" referrerpolicy="no-referrer" alt="第8章 001"></p><ul><li><span>这一章中，我们的重点是</span><strong><span>普通最小二乘(OLS)回归法</span></strong><span>，包括简单线性回归、多项式回归和多元线性回归。OLS回归是现今最常见的统计分析方法。</span></li><li><span>OLS回归是通过预测变量的加权和来预测量化的因变量，其中权重是通过数据估计而得的参数。</span></li></ul><h4 id='ols回归'><span>OLS回归</span></h4><ul><li><p><span>OLS回归拟合模型的形式：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n1371" cid="n1371" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="41.672ex" height="2.867ex" role="img" focusable="false" viewBox="0 -1073 18419.1 1267" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.439ex;"><defs><path id="MJX-1-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-1-TEX-N-5E" d="M112 560L249 694L257 686Q387 562 387 560L361 531Q359 532 303 581L250 627L195 580Q182 569 169 557T148 538L140 532Q138 530 125 546L112 560Z"></path><path id="MJX-1-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-1-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-1-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-1-TEX-I-1D44C"></use></g><g data-mml-node="mo" transform="translate(427,257) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-1-TEX-N-5E"></use></g></g></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(1185.7,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(2241.5,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-1-TEX-I-1D6FD"></use></g><g data-mml-node="mo" transform="translate(366.3,279) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-1-TEX-N-5E"></use></g></g></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-1-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(3466.3,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(4466.5,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-1-TEX-I-1D6FD"></use></g><g data-mml-node="mo" transform="translate(366.3,279) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-1-TEX-N-5E"></use></g></g></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(5469.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"></use></g></g></g><g data-mml-node="mo" transform="translate(7199.8,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(8200,0)"><use data-c="22EF" xlink:href="#MJX-1-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(9594.2,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(10594.5,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-1-TEX-I-1D6FD"></use></g><g data-mml-node="mo" transform="translate(366.3,279) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-1-TEX-N-5E"></use></g></g></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-1-TEX-I-1D458"></use></g></g><g data-mml-node="msub" transform="translate(11611.9,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-1-TEX-I-1D458"></use></g><g data-mml-node="mi" transform="translate(521,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"></use></g></g></g><g data-mml-node="mstyle" transform="translate(13135.2,0)"><g data-mml-node="mspace"></g></g><g data-mml-node="mi" transform="translate(14135.2,0)"><use data-c="1D456" xlink:href="#MJX-1-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(14758,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(15813.8,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(16480.4,0)"><use data-c="22EF" xlink:href="#MJX-1-TEX-N-22EF"></use></g><g data-mml-node="mi" transform="translate(17819.1,0)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow data-mjx-texclass="ORD"><mover><mi>Y</mi><mo stretchy="false">^</mo></mover></mrow><mi>i</mi></msub><mo>=</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mn>0</mn></msub><mo>+</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mn>1</mn></msub><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mn>1</mn><mi>i</mi></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mi>k</mi></msub><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mi>k</mi><mi>i</mi></mrow></msub><mstyle scriptlevel="0"><mspace width="1em"></mspace></mstyle><mi>i</mi><mo>=</mo><mn>1</mn><mo>⋯</mo><mi>n</mi></math></mjx-assistive-mml></mjx-container></div></div><p><strong><span>n</span></strong><span>为观测的数目，</span><strong><span>k</span></strong><span>为预测变量的数目。</span></p><p><img src="img\019_R语言实战\第8章\第8章 002.png" alt="第8章 002" style="zoom: 50%;" /></p></li><li><p><span>目标是通过减少响应变量的</span><strong><span>真实值</span></strong><span>与</span><strong><span>预测值的差值</span></strong><span>来获得</span><strong><span>模型参数(截距项和斜率)</span></strong><span>。具体而言，即使得</span><strong><span>残差平方和最小</span></strong><span>。</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n1376" cid="n1376" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="59.103ex" height="6.712ex" role="img" focusable="false" viewBox="0 -1720.9 26123.3 2966.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.819ex;"><defs><path id="MJX-2-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-2-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-2-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-2-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-2-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-2-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-2-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-2-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-2-TEX-N-5E" d="M112 560L249 694L257 686Q387 562 387 560L361 531Q359 532 303 581L250 627L195 580Q182 569 169 557T148 538L140 532Q138 530 125 546L112 560Z"></path><path id="MJX-2-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-2-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-2-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-2-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-2-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-2-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-2-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-2-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-2-TEX-I-1D700" d="M190 -22Q124 -22 76 11T27 107Q27 174 97 232L107 239L99 248Q76 273 76 304Q76 364 144 408T290 452H302Q360 452 405 421Q428 405 428 392Q428 381 417 369T391 356Q382 356 371 365T338 383T283 392Q217 392 167 368T116 308Q116 289 133 272Q142 263 145 262T157 264Q188 278 238 278H243Q308 278 308 247Q308 206 223 206Q177 206 142 219L132 212Q68 169 68 112Q68 39 201 39Q253 39 286 49T328 72T345 94T362 105Q376 103 376 88Q376 79 365 62T334 26T275 -8T190 -22Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munderover"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-2-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(345,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1123,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g><g data-mml-node="TeXAtom" transform="translate(509.9,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g></g></g><g data-mml-node="mo" transform="translate(1444,0)"><use data-c="28" xlink:href="#MJX-2-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(1833,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-2-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(2963.2,0)"><use data-c="2212" xlink:href="#MJX-2-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(3963.4,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-2-TEX-I-1D44C"></use></g><g data-mml-node="mo" transform="translate(427,257) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-2-TEX-N-5E"></use></g></g></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(4871.3,0)"><use data-c="29" xlink:href="#MJX-2-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5538.1,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="munderover" transform="translate(6593.9,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-2-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(345,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1123,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g><g data-mml-node="mi" transform="translate(509.9,1150) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-2-TEX-I-1D45B"></use></g></g><g data-mml-node="mo" transform="translate(8037.9,0)"><use data-c="28" xlink:href="#MJX-2-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(8426.9,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-2-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(9557.1,0)"><use data-c="2212" xlink:href="#MJX-2-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(10557.3,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-2-TEX-I-1D6FD"></use></g><g data-mml-node="mo" transform="translate(366.3,279) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-2-TEX-N-5E"></use></g></g></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-2-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(11782.1,0)"><use data-c="2B" xlink:href="#MJX-2-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(12782.3,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-2-TEX-I-1D6FD"></use></g><g data-mml-node="mo" transform="translate(366.3,279) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-2-TEX-N-5E"></use></g></g></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(13784.9,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-2-TEX-I-1D44B"></use></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g></g><g data-mml-node="mo" transform="translate(15515.6,0)"><use data-c="2B" xlink:href="#MJX-2-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(16515.8,0)"><use data-c="22EF" xlink:href="#MJX-2-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(17910,0)"><use data-c="2B" xlink:href="#MJX-2-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(18910.2,0)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-2-TEX-I-1D6FD"></use></g><g data-mml-node="mo" transform="translate(366.3,279) translate(-250 0)"><use data-c="5E" xlink:href="#MJX-2-TEX-N-5E"></use></g></g></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-2-TEX-I-1D458"></use></g></g><g data-mml-node="msub" transform="translate(19927.6,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-2-TEX-I-1D44B"></use></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D458" xlink:href="#MJX-2-TEX-I-1D458"></use></g><g data-mml-node="mi" transform="translate(521,0)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g></g><g data-mml-node="msup" transform="translate(21451,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-2-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,413) scale(0.707)"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(22554.3,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="munderover" transform="translate(23610.1,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-2-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(345,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1123,0)"><use data-c="31" xlink:href="#MJX-2-TEX-N-31"></use></g></g><g data-mml-node="mn" transform="translate(545.2,1150) scale(0.707)"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g></g><g data-mml-node="msubsup" transform="translate(25220.8,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-2-TEX-I-1D700"></use></g><g data-mml-node="mn" transform="translate(499,413) scale(0.707)"><use data-c="32" xlink:href="#MJX-2-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(499,-247) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover><mo stretchy="false">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>Y</mi><mo stretchy="false">^</mo></mover></mrow><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mn>0</mn></msub><mo>+</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mn>1</mn></msub><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mn>1</mn><mi>i</mi></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>β</mi><mo stretchy="false">^</mo></mover></mrow><mi>k</mi></msub><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mi>k</mi><mi>i</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><msubsup><mi>ε</mi><mi>i</mi><mn>2</mn></msubsup></math></mjx-assistive-mml></mjx-container></div></div></li><li><p><span>为了满足OLS模型，数据必须满足：</span></p><ul><li><strong><span>正态性</span></strong><span>：对于固定的自变量值，因变量值成正态分布。</span></li><li><strong><span>独立性</span></strong><span>：Y</span><sub><span>i</span></sub><span>值之间相互独立。</span></li><li><strong><span>线性</span></strong><span>：因变量与自变量之间为线性相关。</span></li><li><strong><span>同方差性</span></strong><span>：因变量的方差不随自变量的水平不同而变化，也可称作不变方差。（方差齐性）</span></li></ul></li></ul><h5 id='lm拟合回归模型'><span>lm()拟合回归模型</span></h5><ul><li><p><span>拟合线性模型最基本的函数</span><strong><span>lm()</span></strong><span>：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myfit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>formula</span></strong><span>指要拟合的模型形式，</span><strong><span>data</span></strong><span>是一个数据框，包含了用于拟合模型的数据。</span></p></li><li><p><span>表达式（公式）常用的符号：</span></p></li></ul><p><img src="img\019_R语言实战\第8章\第8章 003.png" referrerpolicy="no-referrer" alt="第8章 003"></p><ul><li><span>拟合模型的其他函数：</span></li></ul><p><img src="img\019_R语言实战\第8章\第8章 004.png" referrerpolicy="no-referrer" alt="第8章 004"></p><ul><li><strong><span>简单线性回归</span></strong><span>：当回归模型包含一个因变量和一个自变量时。</span></li><li><strong><span>多项式回归</span></strong><span>：当只有一个预测变量但同时句含变量的幂(比如，X、X^2、X^3)时。</span></li><li><strong><span>多元线性回归</span></strong><span>：当有不止一个预测变量时。</span></li></ul><h5 id='简单线性回归'><span>简单线性回归</span></h5><ul><li><span>数据：</span><strong><span>women</span></strong><span>提供了15个年龄在30~39岁间女性的身高和体重信息，我们想通过</span><strong><span>身高来预测体重</span></strong><span>，获得一个等式可以帮助我们分辨出那些过重或过轻的个体。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 简单线性回归</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">1.73333</span> <span class="cm-operator">-</span><span class="cm-number">1.13333</span> <span class="cm-operator">-</span><span class="cm-number">0.38333</span> &nbsp;<span class="cm-number">0.74167</span> &nbsp;<span class="cm-number">3.11667</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) <span class="cm-operator">-</span><span class="cm-number">87.516667</span> &nbsp; <span class="cm-number">5.936944</span> <span class="cm-operator">-</span><span class="cm-number">14.741</span> <span class="cm-number">1.711e-09</span> <span class="cm-operator">***</span> &nbsp;<span class="cm-comment"># 截距β0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3.450000</span> &nbsp; <span class="cm-number">0.091136</span> &nbsp;<span class="cm-number">37.855</span> <span class="cm-number">1.091e-14</span> <span class="cm-operator">***</span> &nbsp;<span class="cm-comment"># 回归系数β1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">1.525</span> <span class="cm-variable">on</span> <span class="cm-number">13</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.99101</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.99032</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> &nbsp; <span class="cm-number">1433</span> <span class="cm-variable">on</span> <span class="cm-number">1</span> <span class="cm-variable">and</span> <span class="cm-number">13</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">1.091e-14</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 521px;"></div><div class="CodeMirror-gutters" style="display: none; height: 521px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 真实体重</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">zs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">women</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weight</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测体重</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">yc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">fitted</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 残差 = 真实 - 预测</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">residuals</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 由于浮点数的精度问题，直接比较会全部不相等</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 使用round()截取之后就全部相等了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">zs</span> <span class="cm-operator">=</span> <span class="cm-variable">zs</span>,<span class="cm-variable">yc</span> <span class="cm-operator">=</span> <span class="cm-variable">yc</span>,<span class="cm-variable">cc</span> <span class="cm-operator">=</span> <span class="cm-variable">cc</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">zs.yc</span> <span class="cm-operator">=</span> <span class="cm-variable">zs</span> <span class="cm-operator">-</span> <span class="cm-variable">yc</span>, <span class="cm-variable">zj</span> <span class="cm-operator">=</span> (<span class="cm-variable">cc</span> <span class="cm-operator">==</span> <span class="cm-variable">zs</span> <span class="cm-operator">-</span> <span class="cm-variable">yc</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">jq</span> <span class="cm-operator">=</span> (<span class="cm-variable">round</span>(<span class="cm-variable">cc</span>,<span class="cm-number">3</span>) <span class="cm-operator">==</span> <span class="cm-variable">round</span>(<span class="cm-variable">zs</span> <span class="cm-operator">-</span> <span class="cm-variable">yc</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">zs</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">yc</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">cc</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">zs.yc</span> &nbsp; &nbsp;<span class="cm-variable">zj</span> &nbsp; <span class="cm-variable">jq</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">115</span> <span class="cm-number">112.58333</span> &nbsp;<span class="cm-number">2.416666667</span> &nbsp;<span class="cm-number">2.416666667</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">117</span> <span class="cm-number">116.03333</span> &nbsp;<span class="cm-number">0.966666667</span> &nbsp;<span class="cm-number">0.966666667</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">120</span> <span class="cm-number">119.48333</span> &nbsp;<span class="cm-number">0.516666667</span> &nbsp;<span class="cm-number">0.516666667</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> <span class="cm-number">123</span> <span class="cm-number">122.93333</span> &nbsp;<span class="cm-number">0.066666667</span> &nbsp;<span class="cm-number">0.066666667</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-number">126</span> <span class="cm-number">126.38333</span> <span class="cm-operator">-</span><span class="cm-number">0.383333333</span> <span class="cm-operator">-</span><span class="cm-number">0.383333333</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> <span class="cm-number">129</span> <span class="cm-number">129.83333</span> <span class="cm-operator">-</span><span class="cm-number">0.833333333</span> <span class="cm-operator">-</span><span class="cm-number">0.833333333</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 绘图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">women</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">women</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">height</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Height(身高)"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Weight(体重)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 绘制拟合直线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">abline</span>(<span class="cm-variable">fit</span>,<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 624px;"></div><div class="CodeMirror-gutters" style="display: none; height: 624px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 005.png" alt="第8章 005" style="zoom: 50%;" /></p><ul><li><p><span>从以上结果可以得出方程式：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n1418" cid="n1418" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="42.232ex" height="3.14ex" role="img" focusable="false" viewBox="0 -1183 18666.4 1388" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-3-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path><path id="MJX-3-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-3-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-3-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-3-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path id="MJX-3-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-3-TEX-S4-2C6" d="M5 561Q-4 561 -9 582T-14 618Q-14 623 -13 625Q-11 628 461 736T943 845Q945 845 1417 738T1896 628Q1902 628 1902 618Q1902 607 1897 584T1883 561Q1881 561 1412 654L945 750L476 654Q6 561 5 561Z"></path><path id="MJX-3-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-3-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-3-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-3-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-3-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-3-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-3-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-3-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-3-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-3-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-3-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-3-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-3-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-3-TEX-I-1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><use data-c="1D464" xlink:href="#MJX-3-TEX-I-1D464"></use></g><g data-mml-node="mi" transform="translate(716,0)"><use data-c="1D452" xlink:href="#MJX-3-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(1182,0)"><use data-c="1D456" xlink:href="#MJX-3-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(1527,0)"><use data-c="1D454" xlink:href="#MJX-3-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(2004,0)"><use data-c="210E" xlink:href="#MJX-3-TEX-I-210E"></use></g><g data-mml-node="mi" transform="translate(2580,0)"><use data-c="1D461" xlink:href="#MJX-3-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(1470.5,238) translate(-951 0)"><use data-c="2C6" xlink:href="#MJX-3-TEX-S4-2C6"></use></g></g></g><g data-mml-node="mo" transform="translate(3218.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mo" transform="translate(4274.6,0)"><use data-c="2212" xlink:href="#MJX-3-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(5052.6,0)"><use data-c="38" xlink:href="#MJX-3-TEX-N-38"></use><use data-c="37" xlink:href="#MJX-3-TEX-N-37" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-3-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="35" xlink:href="#MJX-3-TEX-N-35" transform="translate(1278,0)"></use><use data-c="31" xlink:href="#MJX-3-TEX-N-31" transform="translate(1778,0)"></use><use data-c="36" xlink:href="#MJX-3-TEX-N-36" transform="translate(2278,0)"></use><use data-c="36" xlink:href="#MJX-3-TEX-N-36" transform="translate(2778,0)"></use><use data-c="36" xlink:href="#MJX-3-TEX-N-36" transform="translate(3278,0)"></use><use data-c="37" xlink:href="#MJX-3-TEX-N-37" transform="translate(3778,0)"></use></g><g data-mml-node="mo" transform="translate(9552.8,0)"><use data-c="2B" xlink:href="#MJX-3-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(10553,0)"><use data-c="33" xlink:href="#MJX-3-TEX-N-33"></use><use data-c="2E" xlink:href="#MJX-3-TEX-N-2E" transform="translate(500,0)"></use><use data-c="34" xlink:href="#MJX-3-TEX-N-34" transform="translate(778,0)"></use><use data-c="35" xlink:href="#MJX-3-TEX-N-35" transform="translate(1278,0)"></use><use data-c="30" xlink:href="#MJX-3-TEX-N-30" transform="translate(1778,0)"></use><use data-c="30" xlink:href="#MJX-3-TEX-N-30" transform="translate(2278,0)"></use><use data-c="30" xlink:href="#MJX-3-TEX-N-30" transform="translate(2778,0)"></use><use data-c="30" xlink:href="#MJX-3-TEX-N-30" transform="translate(3278,0)"></use></g><g data-mml-node="mo" transform="translate(14553.2,0)"><use data-c="D7" xlink:href="#MJX-3-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(15553.4,0)"><use data-c="1D43B" xlink:href="#MJX-3-TEX-I-1D43B"></use></g><g data-mml-node="mi" transform="translate(16441.4,0)"><use data-c="1D452" xlink:href="#MJX-3-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(16907.4,0)"><use data-c="1D456" xlink:href="#MJX-3-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(17252.4,0)"><use data-c="1D454" xlink:href="#MJX-3-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(17729.4,0)"><use data-c="210E" xlink:href="#MJX-3-TEX-I-210E"></use></g><g data-mml-node="mi" transform="translate(18305.4,0)"><use data-c="1D461" xlink:href="#MJX-3-TEX-I-1D461"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="ORD"><mover><mrow><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><mo>^</mo></mover></mrow><mo>=</mo><mo>−</mo><mn>87.516667</mn><mo>+</mo><mn>3.450000</mn><mo>×</mo><mi>H</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></math></mjx-assistive-mml></mjx-container></div></div></li><li><p><span>因为身高不可能为0，所以没必要给截距项一个物理解释，它仅仅是一个常量调整项。</span></p></li><li><p><span>在Pr(&gt;|t|)栏，可以看到回归系数(3.45) 显著不为0(p&lt;0.001)，表明身高每增高1英寸，体重将预期增加3.45磅”。</span></p></li><li><p><span>R平方项(0.991) 表明模型可以解释体重99.1%的方差，它也是实际和预测值之间相关系数的平方。</span></p></li><li><p><span>残差标准误(1.53 lbs)，则可认为是模型用身高预测体重的平均误差。</span></p></li><li><p><span>F统计量检验所有的预测变量预测响应变量是否都在某个几率水平之上。由于简单回归只有一个预测变量，此处F检验等同于身高回归系数的t检验。</span></p></li></ul><h5 id='多项式回归'><span>多项式回归</span></h5><ul><li><span>上面的问题，通过添加一个二项式（X^2）来提高精度。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 多项式回归</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># I()可以将^2识别为一般的表达式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span><span class="cm-operator">+</span><span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>),<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span> <span class="cm-operator">+</span> <span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; &nbsp;<span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">0.509405</span> <span class="cm-operator">-</span><span class="cm-number">0.296105</span> <span class="cm-operator">-</span><span class="cm-number">0.009405</span> &nbsp;<span class="cm-number">0.286151</span> &nbsp;<span class="cm-number">0.597059</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Estimate</span> &nbsp;<span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) <span class="cm-number">261.8781836</span> &nbsp;<span class="cm-number">25.1967708</span> <span class="cm-number">10.3933</span> <span class="cm-number">2.357e-07</span> <span class="cm-operator">***</span> <span class="cm-comment"># 截距β0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">7.3483193</span> &nbsp; <span class="cm-number">0.7776923</span> <span class="cm-operator">-</span><span class="cm-number">9.4489</span> <span class="cm-number">6.584e-07</span> <span class="cm-operator">***</span> <span class="cm-comment"># 回归系数β1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>) &nbsp; <span class="cm-number">0.0830640</span> &nbsp; <span class="cm-number">0.0059796</span> <span class="cm-number">13.8911</span> <span class="cm-number">9.322e-09</span> <span class="cm-operator">***</span> <span class="cm-comment"># 回归系数β2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">0.38407</span> <span class="cm-variable">on</span> <span class="cm-number">12</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.99947</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.99939</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">11393</span> <span class="cm-variable">on</span> <span class="cm-number">2</span> <span class="cm-variable">and</span> <span class="cm-number">12</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-operator">&lt;</span> <span class="cm-number">2.22e-16</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 599px;"></div><div class="CodeMirror-gutters" style="display: none; height: 599px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">women</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">women</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">height</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Height(身高)"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Weight(体重)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lines</span>(<span class="cm-variable">women</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">height</span>,<span class="cm-variable">fitted</span>(<span class="cm-variable">fit2</span>),<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 006.png" alt="第8章 006" style="zoom: 67%;" /></p><ul><li><p><span>新的回归方程：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n1439" cid="n1439" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="67.106ex" height="3.14ex" role="img" focusable="false" viewBox="0 -1183 29660.9 1388" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-4-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path><path id="MJX-4-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-4-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-4-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-4-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path id="MJX-4-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-4-TEX-S4-2C6" d="M5 561Q-4 561 -9 582T-14 618Q-14 623 -13 625Q-11 628 461 736T943 845Q945 845 1417 738T1896 628Q1902 628 1902 618Q1902 607 1897 584T1883 561Q1881 561 1412 654L945 750L476 654Q6 561 5 561Z"></path><path id="MJX-4-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-4-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-4-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-4-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-4-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-4-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-4-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-4-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-4-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-4-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-4-TEX-I-1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path><path id="MJX-4-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-4-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><use data-c="1D464" xlink:href="#MJX-4-TEX-I-1D464"></use></g><g data-mml-node="mi" transform="translate(716,0)"><use data-c="1D452" xlink:href="#MJX-4-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(1182,0)"><use data-c="1D456" xlink:href="#MJX-4-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(1527,0)"><use data-c="1D454" xlink:href="#MJX-4-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(2004,0)"><use data-c="210E" xlink:href="#MJX-4-TEX-I-210E"></use></g><g data-mml-node="mi" transform="translate(2580,0)"><use data-c="1D461" xlink:href="#MJX-4-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(1470.5,238) translate(-951 0)"><use data-c="2C6" xlink:href="#MJX-4-TEX-S4-2C6"></use></g></g></g><g data-mml-node="mo" transform="translate(3218.8,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(4274.6,0)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use><use data-c="36" xlink:href="#MJX-4-TEX-N-36" transform="translate(500,0)"></use><use data-c="31" xlink:href="#MJX-4-TEX-N-31" transform="translate(1000,0)"></use><use data-c="2E" xlink:href="#MJX-4-TEX-N-2E" transform="translate(1500,0)"></use><use data-c="38" xlink:href="#MJX-4-TEX-N-38" transform="translate(1778,0)"></use><use data-c="37" xlink:href="#MJX-4-TEX-N-37" transform="translate(2278,0)"></use><use data-c="38" xlink:href="#MJX-4-TEX-N-38" transform="translate(2778,0)"></use><use data-c="31" xlink:href="#MJX-4-TEX-N-31" transform="translate(3278,0)"></use><use data-c="38" xlink:href="#MJX-4-TEX-N-38" transform="translate(3778,0)"></use><use data-c="33" xlink:href="#MJX-4-TEX-N-33" transform="translate(4278,0)"></use><use data-c="36" xlink:href="#MJX-4-TEX-N-36" transform="translate(4778,0)"></use></g><g data-mml-node="mo" transform="translate(9774.8,0)"><use data-c="2212" xlink:href="#MJX-4-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(10775,0)"><use data-c="37" xlink:href="#MJX-4-TEX-N-37"></use><use data-c="2E" xlink:href="#MJX-4-TEX-N-2E" transform="translate(500,0)"></use><use data-c="33" xlink:href="#MJX-4-TEX-N-33" transform="translate(778,0)"></use><use data-c="34" xlink:href="#MJX-4-TEX-N-34" transform="translate(1278,0)"></use><use data-c="38" xlink:href="#MJX-4-TEX-N-38" transform="translate(1778,0)"></use><use data-c="33" xlink:href="#MJX-4-TEX-N-33" transform="translate(2278,0)"></use><use data-c="31" xlink:href="#MJX-4-TEX-N-31" transform="translate(2778,0)"></use><use data-c="39" xlink:href="#MJX-4-TEX-N-39" transform="translate(3278,0)"></use><use data-c="33" xlink:href="#MJX-4-TEX-N-33" transform="translate(3778,0)"></use></g><g data-mml-node="mo" transform="translate(15275.2,0)"><use data-c="D7" xlink:href="#MJX-4-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(16275.4,0)"><use data-c="1D43B" xlink:href="#MJX-4-TEX-I-1D43B"></use></g><g data-mml-node="mi" transform="translate(17163.4,0)"><use data-c="1D452" xlink:href="#MJX-4-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(17629.4,0)"><use data-c="1D456" xlink:href="#MJX-4-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(17974.4,0)"><use data-c="1D454" xlink:href="#MJX-4-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(18451.4,0)"><use data-c="210E" xlink:href="#MJX-4-TEX-I-210E"></use></g><g data-mml-node="mi" transform="translate(19027.4,0)"><use data-c="1D461" xlink:href="#MJX-4-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(19610.7,0)"><use data-c="2B" xlink:href="#MJX-4-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(20610.9,0)"><use data-c="30" xlink:href="#MJX-4-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-4-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(778,0)"></use><use data-c="38" xlink:href="#MJX-4-TEX-N-38" transform="translate(1278,0)"></use><use data-c="33" xlink:href="#MJX-4-TEX-N-33" transform="translate(1778,0)"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(2278,0)"></use><use data-c="36" xlink:href="#MJX-4-TEX-N-36" transform="translate(2778,0)"></use><use data-c="34" xlink:href="#MJX-4-TEX-N-34" transform="translate(3278,0)"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(3778,0)"></use></g><g data-mml-node="mo" transform="translate(25111.1,0)"><use data-c="D7" xlink:href="#MJX-4-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(26111.3,0)"><use data-c="1D43B" xlink:href="#MJX-4-TEX-I-1D43B"></use></g><g data-mml-node="mi" transform="translate(26999.3,0)"><use data-c="1D452" xlink:href="#MJX-4-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(27465.3,0)"><use data-c="1D456" xlink:href="#MJX-4-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(27810.3,0)"><use data-c="1D454" xlink:href="#MJX-4-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(28287.3,0)"><use data-c="210E" xlink:href="#MJX-4-TEX-I-210E"></use></g><g data-mml-node="msup" transform="translate(28863.3,0)"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-4-TEX-I-1D461"></use></g><g data-mml-node="mn" transform="translate(394,413) scale(0.707)"><use data-c="32" xlink:href="#MJX-4-TEX-N-32"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="ORD"><mover><mrow><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow><mo>^</mo></mover></mrow><mo>=</mo><mn>261.8781836</mn><mo>−</mo><mn>7.3483193</mn><mo>×</mo><mi>H</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>+</mo><mn>0.0830640</mn><mo>×</mo><mi>H</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><msup><mi>t</mi><mn>2</mn></msup></math></mjx-assistive-mml></mjx-container></div></div></li><li><p><span>在p&lt;0.001水平下，回归系数都非常显著。模型的方差解释率已经增加到了99.9%。二次项的显著性(=13.89，p&lt;0.001) 表明包含二次项提高了模型的拟合度。</span></p></li><li><p><span>线性与非线性模型：</span></p></li></ul><p><img src="img\019_R语言实战\第8章\第8章 007.png" referrerpolicy="no-referrer" alt="第8章 007"></p><ul><li><strong><span>car</span></strong><span>包下的</span><strong><span>scatterplot()</span></strong><span>很容易、方便地绘制</span><strong><span>二元</span></strong><span>关系图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">scatterplot</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>,<span class="cm-variable">spread</span><span class="cm-operator">=</span><span class="cm-variable">F</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">smoother.args</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">lty</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>),<span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">19</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"身高体重"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Height"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Weight"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 008.png" alt="第8章 008" style="zoom:50%;" /></p><ul><li><span>这个功能加强的图形，既提供了身高与体重的散点图、线性拟合曲线和平滑拟合 (loess)曲线，还在相应边界展示了每个变量的箱线图。</span><strong><span>spread=FALSE</span></strong><span>选项删除了残差正负均方根在平滑曲线上的展开和非对称信息（警告信息）。</span><strong><span>smoother.args=list(lty=2)</span></strong><span>选项设置loess拟合曲线为虚线。</span><strong><span>pch=19</span></strong><span>选项设置点为实心圆(默认为空心圆)。</span></li></ul><h5 id='多元线性回归'><span>多元线性回归</span></h5><ul><li><p><span>当预测变量不止一个时，简单线性回归就变成了多元线性回归。</span></p></li><li><p><span>数据：</span><strong><span>state.x77</span></strong><span>，探究一个州的犯罪率和其他因素的关系，包括人口、文盲率、平均收入和结霜天数( 温度在冰点以下的平均天数 )。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.75px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>多元线性回归中，第一步先检查变量间的相关性，使用</span><strong><span>cor()</span></strong><span>计算两两变量之间的相关性。</span><strong><span>car</span></strong><span>包中的</span><strong><span>scatterplotMatrix()</span></strong><span>可以生成散点图矩阵（两两变量之间的拟合图形）。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 计算变量之间的相关性</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cor</span>(<span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 散点图矩阵</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">car</span><span class="cm-operator">::</span><span class="cm-variable">scatterplotMatrix</span>(<span class="cm-variable">states</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Scatter Plot Matrix"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 左上角第二幅图：plot(states$Population,states$Murder)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 009.png" alt="第8章 009" style="zoom:67%;" /></p><ul><li><span>scatterplotMatrix()默认在非对角线区域绘制</span><strong><span>变量间的散点图</span></strong><span>，并添加</span><strong><span>平滑</span></strong><span>和</span><strong><span>线性拟合曲线</span></strong><span>。对角线区域绘制每个变量的</span><strong><span>密度图</span></strong><span>和</span><strong><span>轴须图</span></strong><span>。</span></li><li><span>使用</span><strong><span>lm()</span></strong><span>拟合线性回归模型：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">4.79597</span> <span class="cm-operator">-</span><span class="cm-number">1.64946</span> <span class="cm-operator">-</span><span class="cm-number">0.08112</span> &nbsp;<span class="cm-number">1.48150</span> &nbsp;<span class="cm-number">7.62104</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) <span class="cm-number">1.2346e+00</span> <span class="cm-number">3.8661e+00</span> &nbsp;<span class="cm-number">0.3193</span> &nbsp; <span class="cm-number">0.75095</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp;<span class="cm-number">2.2368e-04</span> <span class="cm-number">9.0517e-05</span> &nbsp;<span class="cm-number">2.4711</span> &nbsp; <span class="cm-number">0.01732</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">4.1428e+00</span> <span class="cm-number">8.7435e-01</span> &nbsp;<span class="cm-number">4.7382</span> <span class="cm-number">2.188e-05</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6.4425e-05</span> <span class="cm-number">6.8370e-04</span> &nbsp;<span class="cm-number">0.0942</span> &nbsp; <span class="cm-number">0.92534</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Frost</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">5.8131e-04</span> <span class="cm-number">1.0054e-02</span> &nbsp;<span class="cm-number">0.0578</span> &nbsp; <span class="cm-number">0.95415</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">2.5349</span> <span class="cm-variable">on</span> <span class="cm-number">45</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.56695</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.52846</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> <span class="cm-number">14.729</span> <span class="cm-variable">on</span> <span class="cm-number">4</span> <span class="cm-variable">and</span> <span class="cm-number">45</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">9.1328e-08</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 651px;"></div><div class="CodeMirror-gutters" style="display: none; height: 651px;"></div></div></div></pre><ul><li><span>当预测变量不止一个时，回归系数的含义为：一个预测变量增加一个单位，其他预测变量保持不变时，因变量将要增加的数量。</span></li><li><span>本例中，文盲率的回归系数为4.14，表示控制人口、收人和温度不变时，文盲率上升1%，谋杀率将会上升4.14%，它的系数在p&lt;0.001的水平下显著。相反，Frost的系数不显著(p=0.954)，表明当控制其他变量不变时，Frost与Murder不呈线性相关。总体来看，所有的预测变量解释了各州谋杀率57%的方差。</span></li></ul><h5 id='有交互项的多元线性回归'><span>有交互项的多元线性回归</span></h5><ul><li><span>数据：</span><strong><span>mtcars</span></strong><span>，研究汽车重量（wt）和马力（hp）对行驶距离（mpg）的影响。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">hp</span><span class="cm-operator">+</span><span class="cm-variable">wt</span><span class="cm-operator">+</span><span class="cm-variable">hp</span><span class="cm-operator">:</span><span class="cm-variable">wt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">hp</span> <span class="cm-operator">+</span> <span class="cm-variable">wt</span> <span class="cm-operator">+</span> <span class="cm-variable">hp</span><span class="cm-operator">:</span><span class="cm-variable">wt</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">3.06317</span> <span class="cm-operator">-</span><span class="cm-number">1.64912</span> <span class="cm-operator">-</span><span class="cm-number">0.73625</span> &nbsp;<span class="cm-number">1.42107</span> &nbsp;<span class="cm-number">4.55134</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) <span class="cm-number">49.8084234</span> &nbsp;<span class="cm-number">3.6051558</span> <span class="cm-number">13.8159</span> <span class="cm-number">5.006e-14</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hp</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.1201021</span> &nbsp;<span class="cm-number">0.0246983</span> <span class="cm-operator">-</span><span class="cm-number">4.8628</span> <span class="cm-number">4.036e-05</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wt</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">8.2166243</span> &nbsp;<span class="cm-number">1.2697081</span> <span class="cm-operator">-</span><span class="cm-number">6.4713</span> <span class="cm-number">5.199e-07</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hp</span><span class="cm-operator">:</span><span class="cm-variable">wt</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.0278481</span> &nbsp;<span class="cm-number">0.0074196</span> &nbsp;<span class="cm-number">3.7533</span> <span class="cm-number">0.0008108</span> <span class="cm-operator">***</span> <span class="cm-comment"># 可见交互效应显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">2.1528</span> <span class="cm-variable">on</span> <span class="cm-number">28</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.88476</span>,<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.87242</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">71.66</span> <span class="cm-variable">on</span> <span class="cm-number">3</span> <span class="cm-variable">and</span> <span class="cm-number">28</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">2.9814e-13</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 573px;"></div><div class="CodeMirror-gutters" style="display: none; height: 573px;"></div></div></div></pre><ul><li><p><span>若两个预测变量的交互项显著，说明响应变量与其中一个预测变量的关系依赖于另外一个预测变量的水平。</span></p></li><li><p><span>由以上可知，预测模型为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n1485" cid="n1485" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="50.289ex" height="2.57ex" role="img" focusable="false" viewBox="0 -931 22227.8 1136" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-5-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-5-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-5-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-5-TEX-S4-2C6" d="M5 561Q-4 561 -9 582T-14 618Q-14 623 -13 625Q-11 628 461 736T943 845Q945 845 1417 738T1896 628Q1902 628 1902 618Q1902 607 1897 584T1883 561Q1881 561 1412 654L945 750L476 654Q6 561 5 561Z"></path><path id="MJX-5-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-5-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-5-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-5-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-5-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-2013" d="M0 248V285H499V248H0Z"></path><path id="MJX-5-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-5-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-5-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-5-TEX-I-210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path id="MJX-5-TEX-I-1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path><path id="MJX-5-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-5-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-5-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><use data-c="1D45A" xlink:href="#MJX-5-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(878,0)"><use data-c="1D45D" xlink:href="#MJX-5-TEX-I-1D45D"></use></g><g data-mml-node="mi" transform="translate(1381,0)"><use data-c="1D454" xlink:href="#MJX-5-TEX-I-1D454"></use></g></g><g data-mml-node="mo" transform="translate(929,-14) translate(-951 0)"><use data-c="2C6" xlink:href="#MJX-5-TEX-S4-2C6"></use></g></g></g><g data-mml-node="mo" transform="translate(2135.8,0)"><use data-c="3D" xlink:href="#MJX-5-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(3191.6,0)"><use data-c="34" xlink:href="#MJX-5-TEX-N-34"></use><use data-c="39" xlink:href="#MJX-5-TEX-N-39" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-5-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="38" xlink:href="#MJX-5-TEX-N-38" transform="translate(1278,0)"></use><use data-c="31" xlink:href="#MJX-5-TEX-N-31" transform="translate(1778,0)"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(5469.6,0)"><g data-mml-node="mo"><use data-c="2013" xlink:href="#MJX-5-TEX-N-2013"></use></g></g><g data-mml-node="mn" transform="translate(5969.6,0)"><use data-c="30" xlink:href="#MJX-5-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-5-TEX-N-2E" transform="translate(500,0)"></use><use data-c="31" xlink:href="#MJX-5-TEX-N-31" transform="translate(778,0)"></use><use data-c="32" xlink:href="#MJX-5-TEX-N-32" transform="translate(1278,0)"></use></g><g data-mml-node="mo" transform="translate(7969.8,0)"><use data-c="D7" xlink:href="#MJX-5-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(8970,0)"><use data-c="210E" xlink:href="#MJX-5-TEX-I-210E"></use></g><g data-mml-node="mi" transform="translate(9546,0)"><use data-c="1D45D" xlink:href="#MJX-5-TEX-I-1D45D"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(10049,0)"><g data-mml-node="mo"><use data-c="2013" xlink:href="#MJX-5-TEX-N-2013"></use></g></g><g data-mml-node="mn" transform="translate(10549,0)"><use data-c="38" xlink:href="#MJX-5-TEX-N-38"></use><use data-c="2E" xlink:href="#MJX-5-TEX-N-2E" transform="translate(500,0)"></use><use data-c="32" xlink:href="#MJX-5-TEX-N-32" transform="translate(778,0)"></use><use data-c="32" xlink:href="#MJX-5-TEX-N-32" transform="translate(1278,0)"></use></g><g data-mml-node="mo" transform="translate(12549.2,0)"><use data-c="D7" xlink:href="#MJX-5-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(13549.4,0)"><use data-c="1D464" xlink:href="#MJX-5-TEX-I-1D464"></use></g><g data-mml-node="mi" transform="translate(14265.4,0)"><use data-c="1D461" xlink:href="#MJX-5-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(14848.7,0)"><use data-c="2B" xlink:href="#MJX-5-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(15848.9,0)"><use data-c="30" xlink:href="#MJX-5-TEX-N-30"></use><use data-c="2E" xlink:href="#MJX-5-TEX-N-2E" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-5-TEX-N-30" transform="translate(778,0)"></use><use data-c="33" xlink:href="#MJX-5-TEX-N-33" transform="translate(1278,0)"></use></g><g data-mml-node="mo" transform="translate(17849.1,0)"><use data-c="D7" xlink:href="#MJX-5-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(18849.3,0)"><use data-c="210E" xlink:href="#MJX-5-TEX-I-210E"></use></g><g data-mml-node="mi" transform="translate(19425.3,0)"><use data-c="1D45D" xlink:href="#MJX-5-TEX-I-1D45D"></use></g><g data-mml-node="mo" transform="translate(20150.6,0)"><use data-c="D7" xlink:href="#MJX-5-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(21150.8,0)"><use data-c="1D464" xlink:href="#MJX-5-TEX-I-1D464"></use></g><g data-mml-node="mi" transform="translate(21866.8,0)"><use data-c="1D461" xlink:href="#MJX-5-TEX-I-1D461"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow data-mjx-texclass="ORD"><mover><mrow><mi>m</mi><mi>p</mi><mi>g</mi></mrow><mo>^</mo></mover></mrow><mo>=</mo><mn>49.81</mn><mrow data-mjx-texclass="ORD"><mo>–</mo></mrow><mn>0.12</mn><mo>×</mo><mi>h</mi><mi>p</mi><mrow data-mjx-texclass="ORD"><mo>–</mo></mrow><mn>8.22</mn><mo>×</mo><mi>w</mi><mi>t</mi><mo>+</mo><mn>0.03</mn><mo>×</mo><mi>h</mi><mi>p</mi><mo>×</mo><mi>w</mi><mi>t</mi></math></mjx-assistive-mml></mjx-container></div></div></li><li><p><span>使用</span><strong><span>effects</span></strong><span>包里的</span><strong><span>effect()</span></strong><span>可以使用图形展示交互项的结果。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">effect</span>(<span class="cm-variable">term</span>, <span class="cm-variable">mod</span>,, <span class="cm-variable">xlevels</span>), <span class="cm-variable">multiline</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>term</span></strong><span>即模型要画的项，</span><strong><span>mod</span></strong><span>为通过lm()拟合的模型，</span><strong><span>xlevels</span></strong><span>是一个列表，指定变量要设定的常量值，</span><strong><span>multiline=TRUE</span></strong><span>选项表示添加相应直线。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"effects"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">effects</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># list(wt = c(2.2,3.2,4.2))：指定wt的常数值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">effect</span>(<span class="cm-string">"hp:wt"</span>,<span class="cm-variable">fit</span>,,<span class="cm-builtin">list</span>(<span class="cm-variable">wt</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2.2</span>,<span class="cm-number">3.2</span>,<span class="cm-number">4.2</span>))),<span class="cm-variable">multiline</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 010.png" alt="第8章 010" style="zoom:50%;" /></p><ul><li><span>从图中可以很清晰地看出，随着车重的增加，马力与每加仑汽油行驶英里数的关系减弱了，当wt=4.2时，直线几乎是水平的，表明随着hp的增加，mpg不会发生改变。</span></li></ul><h4 id='回归诊断'><span>回归诊断</span></h4><ul><li><span>需要看看模型是否合适，一方面，你可能得出某个预测变量与响应变量无关的结论，但事实上它们是相关的。另一方面，情况可能恰好相反。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">confint</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2.5</span> <span class="cm-operator cm-variable-2">% &nbsp; &nbsp; &nbsp;  97.5 %</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) <span class="cm-operator">-</span><span class="cm-number">6.5521914e+00</span> <span class="cm-number">9.02131821486</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp; <span class="cm-number">4.1363966e-05</span> <span class="cm-number">0.00040598675</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp; <span class="cm-number">2.3817989e+00</span> <span class="cm-number">5.90387431923</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.3126106e-03</span> <span class="cm-number">0.00144146000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Frost</span> &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">1.9667806e-02</span> <span class="cm-number">0.02083041698</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><ul><li><span>在数据满足统计假设的前提下，结果表明，文盲率改变1%，谋杀率就在95%的置信区间[2.38,5.90]中变化。另外，因为Frost的置信区间包含0，所以可以得出结论，当其他变量不变时，温度的改变与谋杀率无关。</span></li><li><span>回归诊断技术向你提供了评价回归模型适用性的必要工具,它能帮助发现并纠正问题。</span></li></ul><h5 id='标准方法'><span>标准方法</span></h5><ul><li><span>最常见的方法：对lm()返回的对象使用plot()，可以生成评价模型拟合情况的</span><strong><span>四幅图形</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">fit</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 011.png" referrerpolicy="no-referrer" alt="第8章 011"></p><ul><li><p><span>OLS回归的统计假设：</span></p><ul><li><span>正态性：当预测变量值固定时，因变量成正态分布，则残差值也应该是一个均值为0的正态分布。QQ图沿直线分布（右上图）</span></li><li><span>独立性：</span></li><li><span>线性：（左上图）</span></li><li><span>同方差性：水平线周围的点应该随机分布（左下图）</span></li></ul></li><li><p><span>二次拟合：</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span> <span class="cm-operator">+</span> <span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>), <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">women</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">fit2</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 016.png" alt="第8章 016" style="zoom:67%;" /></p><ul><li><span>由图删除13（残差不符合正态分布）和15（强影响点）</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">newfit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span><span class="cm-operator">~</span> <span class="cm-variable">height</span> <span class="cm-operator">+</span> <span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>), <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">women</span>[<span class="cm-operator">-</span><span class="cm-variable">c</span>(<span class="cm-number">13</span>,<span class="cm-number">15</span>),])</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><h6 id='qq图自己补充'><span>QQ图(自己补充)</span></h6><ul><li><p><span>QQ图的作用：（Quantile-Quantile图）本质为分位数的比较。</span></p><ul><li><span>检验一组样本的分布是不是符合某种分布</span></li><li><span>检验两组样本的分布是不是符合相同的分布</span></li></ul></li><li><p><span>解读正态QQ图：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 第二张图</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第8章\第8章 012.png" alt="第8章 012" style="zoom:67%;" /></p><ul><li><span>如果散点趋近于直线，则服从我们比较的分布，这里是回归的残差服从正态分布。</span></li><li><span>截距代表样本均值，斜率代表样本标准差。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 看看花的长度的数据是否满足正态分布</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">iris</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">sample</span> <span class="cm-operator">=</span> <span class="cm-variable">iris</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Petal.Length</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_qq</span>() <span class="cm-operator">+</span> <span class="cm-variable">geom_qq_line</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 自己绘制参考直线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">iris</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">sample</span> <span class="cm-operator">=</span> <span class="cm-variable">iris</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Petal.Length</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 斜率为1，截距为0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_qq</span>() <span class="cm-operator">+</span> <span class="cm-variable">geom_abline</span>(<span class="cm-variable">slope</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>,<span class="cm-variable">intercept</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 看是否服从均匀分布</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">iris</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">sample</span> <span class="cm-operator">=</span> <span class="cm-variable">iris</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Petal.Length</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_qq</span>(<span class="cm-variable">distribution</span> <span class="cm-operator">=</span> <span class="cm-variable">qunif</span>) <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_qq_line</span>(<span class="cm-variable">distribution</span> <span class="cm-operator">=</span> <span class="cm-variable">qunif</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第8章\第8章 013.png" referrerpolicy="no-referrer" alt="第8章 013"></th><th><img src="img\019_R语言实战\第8章\第8章 014.png" referrerpolicy="no-referrer" alt="第8章 014"></th><th><img src="img\019_R语言实战\第8章\第8章 015.png" referrerpolicy="no-referrer" alt="第8章 015"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>states的多元回归：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">fit</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 017.png" alt="第8章 017" style="zoom:67%;" /></p><h5 id='改进方法'><span>改进方法</span></h5><ul><li><strong><span>car</span></strong><span>包提供的方法：</span></li></ul><p><img src="img\019_R语言实战\第8章\第8章 018.png" referrerpolicy="no-referrer" alt="第8章 018"><img src="img\019_R语言实战\第8章\第8章 019.png" referrerpolicy="no-referrer" alt="第8章 019"></p><ul><li><strong><span>gvlam</span></strong><span>包提供了对所有线性模型假设进行检验的方法。</span></li></ul><h6 id='正态性'><span>正态性</span></h6><ul><li><strong><span>qqplot()</span></strong><span>提供了更为精确的正态假设检验方法，画出了在n-p-1个自由度的t分布下的学生化残差( studentized residual，也称学生化删除残差或折叠化残差)（</span><strong><span>残差/标准差</span></strong><span>）图形，其中n是样本大小，p是回归参数的数目(包括截距项 )。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)]) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">qqPlot</span>(<span class="cm-variable">fit</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">row.names</span>(<span class="cm-variable">states</span>),<span class="cm-variable">id.method</span> <span class="cm-operator">=</span> <span class="cm-string">"identify"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">simulate</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Q-Q 图"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Nevada</span> <span class="cm-variable">Rhode</span> <span class="cm-variable">Island</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">28</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">39</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 020.png" alt="第8章 020" style="zoom:67%;" /></p><ul><li><span>除了Nevada，所有的点都离直线很近，并都落在置信区间内，这表明正态性假设符合得很好但是你也必须关注Nevada，它有一个很大的正残差值(真实值 - 预测值)，表明模型低估了该州的谋杀率。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 异常值点Nevada</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span>[<span class="cm-string">"Nevada"</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 预测值/残差/学生化残差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fitted</span>(<span class="cm-variable">fit</span>)[<span class="cm-string">"Nevada"</span>]<span class="cm-semi">;</span><span class="cm-variable">residuals</span>(<span class="cm-variable">fit</span>)[<span class="cm-string">"Nevada"</span>]<span class="cm-semi">;</span><span class="cm-variable">rstudent</span>(<span class="cm-variable">fit</span>)[<span class="cm-string">"Nevada"</span>]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Murder</span> <span class="cm-variable">Population</span> <span class="cm-variable">Illiteracy</span> <span class="cm-variable">Income</span> <span class="cm-variable">Frost</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Nevada</span> &nbsp; <span class="cm-number">11.5</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">590</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.5</span> &nbsp; <span class="cm-number">5149</span> &nbsp; <span class="cm-number">188</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Nevada</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.878958</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Nevada</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">7.621042</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Nevada</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3.542929</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>可视化学生残差的直方图，并添加正态曲线、核密度曲线和轴须线。</span><strong><span>residplot()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">residplot</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">fit</span>, <span class="cm-variable">nbreaks</span><span class="cm-operator">=</span><span class="cm-number">10</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">z</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rstudent</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">z</span>, <span class="cm-variable">breaks</span><span class="cm-operator">=</span><span class="cm-variable">nbreaks</span>, <span class="cm-variable">freq</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Studentized Residual"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Distribution of Errors"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rug</span>(<span class="cm-variable">jitter</span>(<span class="cm-variable">z</span>), <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"brown"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">curve</span>(<span class="cm-variable">dnorm</span>(<span class="cm-variable">x</span>, <span class="cm-variable">mean</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">z</span>), <span class="cm-variable">sd</span><span class="cm-operator">=</span><span class="cm-variable">sd</span>(<span class="cm-variable">z</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">add</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>, <span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lines</span>(<span class="cm-variable">density</span>(<span class="cm-variable">z</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span>, <span class="cm-variable">density</span>(<span class="cm-variable">z</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>, <span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">legend</span>(<span class="cm-string">"topright"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">legend</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>( <span class="cm-string">"Normal Curve"</span>, <span class="cm-string">"Kernel Density Curve"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"blue"</span>,<span class="cm-string">"red"</span>), <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">.7</span>,<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">residplot</span>(<span class="cm-variable">fit</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 021.png" alt="第8章 021" style="zoom:67%;" /></p><h6 id='误差的独立性'><span>误差的独立性</span></h6><ul><li><span>判断因变量值(或残差)是否相互独立，最好的方法是依据收集数据方式的先验知识。例如，时间序列数据通常呈现自相关性一一相隔时间越近的观测相关性大于相隔越远的观测。</span></li><li><strong><span>car</span></strong><span>包提供了</span><strong><span>Durbin-Watson检验</span></strong><span>的函数</span><strong><span>durbinWatsonTest()</span></strong><span>能够检测误差的序列相关性。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">durbinWatsonTest</span>(<span class="cm-variable">fit</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">lag</span> <span class="cm-variable">Autocorrelation</span> <span class="cm-variable">D</span><span class="cm-operator">-</span><span class="cm-variable">W</span> <span class="cm-variable">Statistic</span> <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.2006929</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">2.317691</span> &nbsp; <span class="cm-number">0.248</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">rho</span> <span class="cm-operator">!=</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>p值不显著(p=0.282) 说明无自相关性，误差项之间独立。滞后项 (lag=1) 表明数据集中每个数据都是与其后一个数据进行比较的。</span></li><li><span>该检验适用于时间独立的数据，对于非聚集型的数据并不适用。注意，durbinwatsonTest()函数使用自助法来导出值。如果添加了选项simulate=TRUE，则每次运行测试时获得的结果都将略有不同。</span></li></ul><h6 id='线性'><span>线性</span></h6><ul><li><span>通过成</span><strong><span>分残差图</span></strong><span>( component plus residualplot) 也称</span><strong><span>偏残差图</span></strong><span> ( partialresidualplot )，你可以看看因变量与自变量之间是否呈非线性关系，也可以看看是否有不同于已设定线性模型的系统偏差。</span></li><li><span>使用</span><strong><span>car</span></strong><span>包里的</span><strong><span>crPlots()</span></strong><span>绘制。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">car</span><span class="cm-operator">::</span><span class="cm-variable">crPlots</span>(<span class="cm-variable">fit</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 022.png" alt="第8章 022" style="zoom: 80%;" /></p><ul><li><span>若图形存在非线性，则说明你可能对预测变量的函数形式建模不够充分那么就需要添加一些曲线成分，比如多项式项，或对一个或多个变量进行变换(如用log(x)代替x)，或用其他回归变体形式而不是线性回归。</span></li><li><span>成分残差图证实了你的线性假设，线性模型形式对该数据集看似是合适的。</span></li></ul><h6 id='同方差性'><span>同方差性</span></h6><ul><li><strong><span>car</span></strong><span>包两个函数可以判断误差方差是否恒定。</span></li><li><strong><span>ncvTest()</span></strong><span>：生成计分检验，零假设为误差方差不变，备择假设为误差方差随着拟合值水平的变化而变化。</span></li><li><strong><span>spreadLevelPlot()</span></strong><span>：创建一个添加了最佳拟合曲线的散点图，展示标准化残差绝对值与拟合值的关系。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">car</span><span class="cm-operator">::</span><span class="cm-variable">ncvTest</span>(<span class="cm-variable">fit</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Non</span><span class="cm-operator">-</span><span class="cm-variable">constant</span> <span class="cm-variable">Variance</span> <span class="cm-variable">Score</span> <span class="cm-variable">Test</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Variance</span> <span class="cm-variable">formula</span><span class="cm-operator">:</span> <span class="cm-operator">~</span> <span class="cm-variable">fitted.values</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Chisquare</span> <span class="cm-operator">=</span> <span class="cm-number">1.746514</span>, <span class="cm-variable">Df</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-variable">p</span> <span class="cm-operator">=</span> <span class="cm-number">0.18632</span> <span class="cm-comment"># 不显著，说明同方差性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">car</span><span class="cm-operator">::</span><span class="cm-variable">spreadLevelPlot</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Suggested</span> <span class="cm-variable">power</span> <span class="cm-variable">transformation</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">1.209626</span> <span class="cm-comment"># 变量变换的指数 x^1.2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 023.png" alt="第8章 023" style="zoom:67%;" /></p><ul><li><span>可以看到，计分检验不显著(p=0.19)，说明满足方差不变假设。你还可以通过分布水平图看到这一点，其中的点在水平的最佳拟合曲线周围呈水平随机分布。若违反了该假设你将会看到一个非水平的曲线。</span></li></ul><h5 id='线性模型假设的综合验证'><span>线性模型假设的综合验证</span></h5><ul><li><strong><span>gvlma</span></strong><span>包中的</span><strong><span>gvlma()</span></strong><span>函数，能对线性模型假设进行综合验证，同时还能做偏斜度、峰度和异方差性的评价。它给模型假设提供了一个单独的综合检验(通过/不通过)。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">gvlma</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">gvmdel</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">gvlma</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">gvmdel</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp;<span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; <span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">4.7960</span> <span class="cm-operator">-</span><span class="cm-number">1.6495</span> <span class="cm-operator">-</span><span class="cm-number">0.0811</span> &nbsp;<span class="cm-number">1.4815</span> &nbsp;<span class="cm-number">7.6210</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) <span class="cm-number">1.235e+00</span> &nbsp;<span class="cm-number">3.866e+00</span> &nbsp; <span class="cm-number">0.319</span> &nbsp; <span class="cm-number">0.7510</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp;<span class="cm-number">2.237e-04</span> &nbsp;<span class="cm-number">9.052e-05</span> &nbsp; <span class="cm-number">2.471</span> &nbsp; <span class="cm-number">0.0173</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">4.143e+00</span> &nbsp;<span class="cm-number">8.744e-01</span> &nbsp; <span class="cm-number">4.738</span> <span class="cm-number">2.19e-05</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6.442e-05</span> &nbsp;<span class="cm-number">6.837e-04</span> &nbsp; <span class="cm-number">0.094</span> &nbsp; <span class="cm-number">0.9253</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Frost</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">5.813e-04</span> &nbsp;<span class="cm-number">1.005e-02</span> &nbsp; <span class="cm-number">0.058</span> &nbsp; <span class="cm-number">0.9541</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">2.535</span> <span class="cm-variable">on</span> <span class="cm-number">45</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.567</span>,<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.5285</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> <span class="cm-number">14.73</span> <span class="cm-variable">on</span> <span class="cm-number">4</span> <span class="cm-variable">and</span> <span class="cm-number">45</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">9.133e-08</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ASSESSMENT</span> <span class="cm-variable">OF</span> <span class="cm-variable">THE</span> <span class="cm-variable">LINEAR</span> <span class="cm-variable">MODEL</span> <span class="cm-variable">ASSUMPTIONS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">USING</span> <span class="cm-variable">THE</span> <span class="cm-variable">GLOBAL</span> <span class="cm-variable">TEST</span> <span class="cm-variable">ON</span> <span class="cm-number">4</span> <span class="cm-variable">DEGREES</span><span class="cm-operator">-</span><span class="cm-variable">OF</span><span class="cm-operator">-</span><span class="cm-variable">FREEDOM</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Level</span> <span class="cm-variable">of</span> <span class="cm-variable">Significance</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">0.05</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">gvlma</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">fit</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Value</span> <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Decision</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Global</span> <span class="cm-variable">Stat</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2.7728</span> &nbsp;<span class="cm-number">0.5965</span> <span class="cm-variable">Assumptions</span> <span class="cm-variable">acceptable.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Skewness</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.5374</span> &nbsp;<span class="cm-number">0.2150</span> <span class="cm-variable">Assumptions</span> <span class="cm-variable">acceptable.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Kurtosis</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.6376</span> &nbsp;<span class="cm-number">0.4246</span> <span class="cm-variable">Assumptions</span> <span class="cm-variable">acceptable.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Link</span> <span class="cm-variable">Function</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.1154</span> &nbsp;<span class="cm-number">0.7341</span> <span class="cm-variable">Assumptions</span> <span class="cm-variable">acceptable.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Heteroscedasticity</span> <span class="cm-number">0.4824</span> &nbsp;<span class="cm-number">0.4873</span> <span class="cm-variable">Assumptions</span> <span class="cm-variable">acceptable.</span> <span class="cm-comment"># 异方差</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1040px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1040px;"></div></div></div></pre><ul><li><span>从输出项(global stat中的文字栏)我们可以看到数据满足OLS回归模型所有的统计假设p=0.597)。</span></li></ul><h5 id='多重共线性'><span>多重共线性</span></h5><ul><li><span>例如：使用年龄和出生日期（二者关系极大）回归分析握力。</span></li><li><span>多重共线性可用统计量</span><strong><span>VIF</span></strong><span> ( Variance Inflation Factor，</span><strong><span>方差膨胀因子</span></strong><span>) 进行检测。</span></li><li><span>VIF的平方根表示变量回归参数的置信区间能膨胀为与模型无关的预测变量的程度(因此而得名)。</span></li><li><strong><span>car</span></strong><span>包下的</span><strong><span>vif()</span></strong><span>可以获取vif值，一般√vif &gt; 2就表明存在多重共线性问题。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">vif</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> <span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; <span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Frost</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1.245282</span> &nbsp; <span class="cm-number">2.165848</span> &nbsp; <span class="cm-number">1.345822</span> &nbsp; <span class="cm-number">2.082547</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">sqrt</span>(<span class="cm-variable">vif</span>(<span class="cm-variable">fit</span>)) <span class="cm-operator">&gt;</span> <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> <span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; <span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Frost</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">FALSE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">FALSE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">FALSE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">FALSE</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>以上结果不存在多重共线性问题。</span></li></ul><h4 id='异常观测值'><span>异常观测值</span></h4><ul><li><span>一个全面的回归分析要覆盖对异常值的分析，包括离群点、高杠杆值点和强影响点。</span></li></ul><h5 id='离群点'><span>离群点</span></h5><ul><li><strong><span>离群点</span></strong><span>是指那些模型</span><strong><span>预测效果不佳</span></strong><span>的观测点。它们通常有很大的、或正或负的残差(Yi真实 - Yi预测)。</span></li><li><span>QQ图，落在置信区间带外的点可以被认为是离群点。</span></li><li><span>另外一个，粗糙的判断准则：标准化残差值大于2或者小于-2的点可能是离群点。</span></li><li><strong><span>car</span></strong><span>包的离群点的统计检验方法</span><strong><span>outlierTest()</span></strong><span>：可以求得最大标准化残差绝对值Bonferroni调整后的p值</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 离群点</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">outlierTest</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">rstudent</span> <span class="cm-variable">unadjusted</span> <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-variable">Bonferroni</span> <span class="cm-variable">p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Nevada</span> <span class="cm-number">3.542929</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.00095088</span> &nbsp; &nbsp; <span class="cm-number">0.047544</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><ul><li><span>此处，Nevada被判定为离群点(p=0.048)。注意，该函数只是根据单个最大(或正或负)残差值的显著性来判断是否有离群点。</span></li></ul><h5 id='高杠杆值点'><span>高杠杆值点</span></h5><ul><li><strong><span>高杠杆值观测点</span></strong><span>，即与其他预测变量有关的离群点。换句话说，它们是由许多异常的预测变量值组合起来的，与响应变量（因变量）值没有关系。</span></li><li><span>高杠杆值的观测点可通过</span><strong><span>帽子统计量</span></strong><span>(hat statistic)判断。</span></li><li><span>对于一个给定的数据集，帽子均值为</span><strong><span>p/n</span></strong><span>，其中p是模型估计的参数数目(包含截距项，βi)，n是样本量。一般来说，若观测点的帽子值</span><strong><span>大于帽子均值的2或3倍</span></strong><span>，就可以认定为</span><strong><span>高杠杆值点</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hat.plot</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">fit</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">p</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">length</span>(<span class="cm-variable">coefficients</span>(<span class="cm-variable">fit</span>)) <span class="cm-comment"># 获取估计参数的数目</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">n</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">length</span>(<span class="cm-variable">fitted</span>(<span class="cm-variable">fit</span>)) <span class="cm-comment"># 获取总的观测数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># hatvalues():获取每个观察值的帽子值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">hatvalues</span>(<span class="cm-variable">fit</span>),<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"每个观察的帽子值"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 绘制2倍3倍的平均帽子值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">abline</span>(<span class="cm-variable">h</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">3</span>)<span class="cm-operator">*</span><span class="cm-variable">p</span><span class="cm-operator">/</span><span class="cm-variable">n</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"green"</span>,<span class="cm-variable">lty</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">lwd</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 使用鼠标交互式的点出哪一个点要标出标签，按esc退出交互模式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">identify</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">n</span>,<span class="cm-variable">hatvalues</span>(<span class="cm-variable">fit</span>), <span class="cm-variable">names</span>(<span class="cm-variable">hatvalues</span>(<span class="cm-variable">fit</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hat.plot</span>(<span class="cm-variable">fit</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 024.png" alt="第8章 024" style="zoom: 67%;" /></p><ul><li><span>此图中，可以看到Alaska(top1)和California(top2)非常异常，查看它们的预测变量值，与其他48个州进行比较发现：Alaska收入比其他州高得多，而人口和温度却很低；Califormia人口比其他州府多得多但收入和温度也很高。</span></li><li><span>高杠杆值点可能是强影响点，也可能不是，这要看它们是否是离群点。</span></li></ul><h5 id='强影响点'><span>强影响点</span></h5><ul><li><strong><span>强影响点</span></strong><span>，即对模型参数估计值影响有些比例失衡的点。例如，若移除模型的一个观测点时模型会发生巨大的改变，那么你就需要检测一下数据中是否存在强影响点了。</span></li><li><span>两种方法检查</span><strong><span>强影响点</span></strong><span>： </span><strong><span>Cook距离</span></strong><span>，或称D统计量，以及</span><strong><span>变量添加图</span></strong><span> (added variableplot)。一般来说，Cook&#39;s D值大于</span><strong><span>4/(n-k-1)</span></strong><span>，则表明它是强影响点，其中n为样本量大小，k是预测变量（Xi）数目。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cutoff</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">4</span><span class="cm-operator">/</span>(<span class="cm-variable">nrow</span>(<span class="cm-variable">states</span>)<span class="cm-operator">-</span><span class="cm-variable">length</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">coefficients</span>)<span class="cm-operator">-</span><span class="cm-number">2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># which=4 表示绘制Cook距离图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">fit</span>, <span class="cm-variable">which</span><span class="cm-operator">=</span><span class="cm-number">4</span>, <span class="cm-variable">cook.levels</span><span class="cm-operator">=</span><span class="cm-variable">cutoff</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span><span class="cm-variable">cutoff</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 025.png" alt="第8章 025" style="zoom: 67%;" /></p><ul><li><span>通过图形可以判断Alaska、Hawaii和Nevada是强影响点。若删除这些点，将会导致回归模型截距项和斜率发生显著变化。</span></li><li><span>Cook’s D图有助于鉴别强影响点，但是并不提供关于这些点如何影响模型的信息。</span><strong><span>变量添加图</span></strong><span>弥补了这个缺陷。</span></li><li><span>所谓</span><strong><span>变量添加图</span></strong><span>，即对于每个预测变量Xi，绘制Xi在其他k-1个预测变量上回归的残差值相对于因变量在其他k-1个预测变量上回归的残差值的关系图。</span></li><li><strong><span>car</span></strong><span>包里的</span><strong><span>avPlots()</span></strong><span>可以绘制。</span></li></ul><p><img src="img\019_R语言实战\第8章\第8章 026.png" alt="第8章 026" style="zoom:67%;" /></p><ul><li><span>图中的直线表示相应预测变量的实际回归系数。</span></li><li><strong><span>car</span></strong><span>包里的</span><strong><span>influencePlot()</span></strong><span>可以将离群点、杠杆值和强影响点绘制于一副图中。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">car</span><span class="cm-operator">::</span><span class="cm-variable">influencePlot</span>(<span class="cm-variable">fit</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Influence Plot"</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">sub</span><span class="cm-operator">=</span><span class="cm-string">"Circle size is proportional to Cook's distance"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">StudRes</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Hat</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">CookD</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Alaska</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.7536917</span> <span class="cm-number">0.43247319</span> <span class="cm-number">0.448050997</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">California</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.2761492</span> <span class="cm-number">0.34087628</span> <span class="cm-number">0.008052956</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Nevada</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3.5429286</span> <span class="cm-number">0.09508977</span> <span class="cm-number">0.209915743</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Rhode</span> <span class="cm-variable">Island</span> <span class="cm-operator">-</span><span class="cm-number">2.0001631</span> <span class="cm-number">0.04562377</span> <span class="cm-number">0.035858963</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 027.png" alt="第8章 027" style="zoom:67%;" /></p><ul><li><span>影响图：</span><strong><span>纵坐标</span></strong><span>超过+2或小于-2的州可被认为是</span><strong><span>离群点</span></strong><span>，</span><strong><span>水平轴</span></strong><span>超过0.2或0.3的州有</span><strong><span>高杠杆值</span></strong><span>(通常为预测值的组合 )。</span><strong><span>圆圈大小</span></strong><span>与影响成比例，圆圈很大的点可能是对模型参数的估计造成的不成比例影响的</span><strong><span>强影响点</span></strong><span>。</span></li></ul><h4 id='改进措施'><span>改进措施</span></h4><ul><li><span>解决回归分析发现的问题：删除观测点；变量变换；添加或删除变量；使用其他回归方法。</span></li></ul><h5 id='删除观测点'><span>删除观测点</span></h5><ul><li><span>删除离群点通常可以提高数据集对于正态假设的拟合度，而强影响点会干扰结果，通常也会被删除。删除最大的离群点或者强影响点后，模型需要重新拟合。若离群点或强影响点仍然存在重复以上过程直至获得比较满意的拟合。</span></li></ul><h5 id='变量变换'><span>变量变换</span></h5><ul><li><span>当模型不符合正态性、线性或者同方差性假设时，一个或多个变量的变换通常可以改善或调整模型效果。变换多用 Y</span><sup><span>λ</span></sup><span> 替换Y。若Y是比例数，通常使用 logit 变换[ ln(Y/1-Y) ]。</span></li></ul><p><img src="img\019_R语言实战\第8章\第8章 028.png" referrerpolicy="no-referrer" alt="第8章 028"></p><ul><li><strong><span>car</span></strong><span>包的</span><strong><span>powerTransform()</span></strong><span>通过λ的最大似然估计来正态化X</span><sup><span>λ</span></sup><span> </span></li><li><span>Box-Cox正态变换：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">powerTransform</span>(<span class="cm-variable">states</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Murder</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bcPower</span> <span class="cm-variable">Transformation</span> <span class="cm-variable">to</span> <span class="cm-variable">Normality</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Est</span> <span class="cm-variable">Power</span> <span class="cm-variable">Rounded</span> <span class="cm-variable">Pwr</span> <span class="cm-variable">Wald</span> <span class="cm-variable">Lwr</span> <span class="cm-variable">Bnd</span> <span class="cm-variable">Wald</span> <span class="cm-variable">Upr</span> <span class="cm-variable">Bnd</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Murder</span> &nbsp; &nbsp;<span class="cm-number">0.6055</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.0884</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1.1227</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Likelihood</span> <span class="cm-variable">ratio</span> <span class="cm-variable">test</span> <span class="cm-variable">that</span> <span class="cm-variable">transformation</span> <span class="cm-variable">parameter</span> <span class="cm-variable">is</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> (<span class="cm-variable">log</span> <span class="cm-variable">transformation</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">LRT</span> <span class="cm-variable">df</span> &nbsp; &nbsp; <span class="cm-variable">pval</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LR</span> <span class="cm-variable">test</span>, <span class="cm-variable">lambda</span> <span class="cm-operator">=</span> (<span class="cm-number">0</span>) <span class="cm-number">5.665991</span> &nbsp;<span class="cm-number">1</span> <span class="cm-number">0.017297</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Likelihood</span> <span class="cm-variable">ratio</span> <span class="cm-variable">test</span> <span class="cm-variable">that</span> <span class="cm-variable">no</span> <span class="cm-variable">transformation</span> <span class="cm-variable">is</span> <span class="cm-variable">needed</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">LRT</span> <span class="cm-variable">df</span> &nbsp; &nbsp;<span class="cm-variable">pval</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LR</span> <span class="cm-variable">test</span>, <span class="cm-variable">lambda</span> <span class="cm-operator">=</span> (<span class="cm-number">1</span>) <span class="cm-number">2.122763</span> &nbsp;<span class="cm-number">1</span> <span class="cm-number">0.14512</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><ul><li><span>结果表明，你可以用Murder^0.6来正态化变量Murder。由于0.6很接近0.5，你可以尝试用平方根变换来提高模型正态性的符合程度。但在本例中，λ=1的假设也无法拒绝(p=0.145)，因此没有强有力的证据表明本例需要变量变换，这与前面的QQ图结果一致。</span></li><li><span>当违反了线性假设时，对预测变量进行变换常常会比较有用。</span><strong><span>car</span></strong><span>包中的</span><strong><span>boxTidwell()</span></strong><span>通过获得预测变量幂数的最大似然估计来改善线性关系。</span></li><li><span>对模型进行了Box-Tidwell：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">boxTidwell</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">MLE</span> <span class="cm-variable">of</span> <span class="cm-variable">lambda</span> <span class="cm-variable">Score</span> <span class="cm-variable">Statistic</span> (<span class="cm-variable">z</span>) <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">z</span><span class="cm-operator">|</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.86939</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.3228</span> &nbsp; <span class="cm-number">0.7468</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1.35812</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.6194</span> &nbsp; <span class="cm-number">0.5357</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">iterations</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">19</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><ul><li><span>结果显示，使用变换Population^0.87和Illiteracy^1.36能够大大改善线性关系。但是对Population(p=0.75)和lliteracy(p=0.54)的计分检验又表明变量并不需要变换。这些结果与前面的成分残差图一致。</span></li><li><span>响应变量变换还能改善异方差性（误差方差非恒定）。</span><strong><span>car</span></strong><span>包</span><strong><span>spreadLevelPlot()</span></strong><span>提供了幂次变换的应用。</span></li></ul><h5 id='增删变量'><span>增删变量</span></h5><ul><li><span>删除变量在处理</span><strong><span>多重共线性</span></strong><span>时是一种非常重要的方法。如果你仅仅是做预测，那么多重共线性并不构成问题，但是如果还要对每个预测变量进行解释，那么就必须解决这个问题。最常见的方法就是删除某个存在多重共线性的变量(某个变量sqrt(vif)&gt;2)。</span></li><li><span>岭回归：多元回归的变体。</span></li></ul><h5 id='其他方法'><span>其他方法</span></h5><ul><li><span>如果存在离群点和/或强影响点，可以使用稳健回归模型替代OLS回归。</span></li><li><span>如果违背了正态性假设，可以使用非参数回归模型。</span></li><li><span>如果存在显著的非线性，能尝试非线性回归模型。</span></li><li><span>如果违背了误差独立性假设，还能用那些专门研究误差结构的模型，比如时间序列模型或者多层次回归模型。</span></li><li><span>最后，你还能转向广泛应用的广义线性模型，它能适用于许多OLS回归假设不成立的情况。</span></li></ul><h4 id='选择最佳的回归模型'><span>选择最佳的回归模型</span></h4><h5 id='模型比较'><span>模型比较</span></h5><ul><li><span>用基础安装中的</span><strong><span>anova()</span></strong><span>函数可以比较两个嵌套模型的拟合优度。</span></li><li><strong><span>嵌套模型</span></strong><span>：即它的一些项完全包含在另一个模型中。</span></li><li><span>在states的多元回归模型中，我们发现Income和Frost的回归系数不显著，此时你可以检验不含这两个变量的模型与包含这两项的模型预测效果是否一样好。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">anova</span>(<span class="cm-variable">fit2</span>,<span class="cm-variable">fit1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Analysis</span> <span class="cm-variable">of</span> <span class="cm-variable">Variance</span> <span class="cm-variable">Table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Model</span> <span class="cm-number">1</span><span class="cm-operator">:</span> <span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Model</span> <span class="cm-number">2</span><span class="cm-operator">:</span> <span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Res.Df</span> &nbsp; &nbsp;<span class="cm-variable">RSS</span> <span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">of</span> <span class="cm-variable">Sq</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">F</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">47</span> <span class="cm-number">289.25</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">45</span> <span class="cm-number">289.17</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">0.078505</span> <span class="cm-number">0.0061</span> <span class="cm-number">0.9939</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><ul><li><span>此处，模型1嵌套在模型2中。anova()函数同时还对是否应该添加Income和Frost到线性模型中进行了检验。由于检验</span><strong><span>不显著(p=0.994)</span></strong><span>，我们可以得出结论：不需要将这两个变量添加到线性模型中，可以将它们从模型中删除。</span></li><li><span>AIC（Akaike Information Criterion，赤池信息准则）也可以用来比较模型，它考虑了模型的统计拟合度以及用来拟合的参数数目。</span><strong><span>AIC值较小的模型要优先选择</span></strong><span>，它说明模型用较少的参数获得了足够的拟合度。</span></li><li><span>使用</span><strong><span>AIC()</span></strong><span>函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">AIC</span>(<span class="cm-variable">fit1</span>,<span class="cm-variable">fit2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">df</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">AIC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit1</span> &nbsp;<span class="cm-number">6</span> <span class="cm-number">241.6429</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit2</span> &nbsp;<span class="cm-number">4</span> <span class="cm-number">237.6565</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>ANOVA需要嵌套模型，而AIC方法不需要。</span></li></ul><h5 id='变量选择'><span>变量选择</span></h5><ul><li><span>选择预测变量的方法：</span><strong><span>逐步回归法</span></strong><span>( stepwisemethod ) 和</span><strong><span>全子集回归</span></strong><span> (all-subsets regression )。</span></li></ul><h5 id='逐步回归'><span>逐步回归</span></h5><ul><li><p><span>模型会一次添加或者删除一个变量，直到达到某个判停准则为止。</span></p></li><li><p><strong><span>向前逐步回归</span></strong><span>(forward stepwise regression) 每次添加一个预测变量到模型中，直到添加变量不会使模型有所改进为止。</span></p></li><li><p><strong><span>向后逐步回归</span></strong><span>( backward stepwise regression)从模型包含所有预测变量开始次删除一个变量直到会隆低模型质量为止。</span></p></li><li><p><strong><span>向前向后逐步回归</span></strong><span>( stepwise stepwise regression通常称作</span><strong><span>逐步回归</span></strong><span>)，结合了向前逐步回归和向后逐步回归的方法，变量每次进入一个，但是每一步中，变量都会被重新评价，对模型没有贡献的变量将会被删除，预测变量可能会被添加、删除好几次，直到获得最优模型为止。</span></p></li><li><p><strong><span>MASS</span></strong><span>包中的</span><strong><span>stepAIC()</span></strong><span>函数可以实现逐步回归模型(向前、向后和向前向后 )，依据的是</span><strong><span>精确AIC准则</span></strong><span>。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">direction</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"both"</span>, <span class="cm-string">"backward"</span>, <span class="cm-string">"forward"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">MASS</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">stepAIC</span>(<span class="cm-variable">fit</span>,<span class="cm-variable">direction</span> <span class="cm-operator">=</span> <span class="cm-string">"backward"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Start</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">97.75</span> <span class="cm-comment"># 全部变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">of</span> <span class="cm-variable">Sq</span> &nbsp; &nbsp;<span class="cm-variable">RSS</span> &nbsp; &nbsp; <span class="cm-variable">AIC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Frost</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0.021</span> <span class="cm-number">289.19</span> &nbsp;<span class="cm-number">95.753</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0.057</span> <span class="cm-number">289.22</span> &nbsp;<span class="cm-number">95.759</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">none</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">289.17</span> &nbsp;<span class="cm-number">97.749</span> <span class="cm-comment"># &lt;none&gt;表示没有删除任何变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Population</span> &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">39.238</span> <span class="cm-number">328.41</span> <span class="cm-number">102.111</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">144.264</span> <span class="cm-number">433.43</span> <span class="cm-number">115.986</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Step</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">95.75</span> <span class="cm-comment"># 删除Frost，AIC下降</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">of</span> <span class="cm-variable">Sq</span> &nbsp; &nbsp;<span class="cm-variable">RSS</span> &nbsp; &nbsp; <span class="cm-variable">AIC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Income</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0.057</span> <span class="cm-number">289.25</span> &nbsp;<span class="cm-number">93.763</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">none</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">289.19</span> &nbsp;<span class="cm-number">95.753</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Population</span> &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">43.658</span> <span class="cm-number">332.85</span> <span class="cm-number">100.783</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">236.196</span> <span class="cm-number">525.38</span> <span class="cm-number">123.605</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Step</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">93.76</span> <span class="cm-comment"># 删除Income，AIC下降</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">of</span> <span class="cm-variable">Sq</span> &nbsp; &nbsp;<span class="cm-variable">RSS</span> &nbsp; &nbsp; <span class="cm-variable">AIC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">none</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">289.25</span> &nbsp;<span class="cm-number">93.763</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Population</span> &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">48.517</span> <span class="cm-number">337.76</span> &nbsp;<span class="cm-number">99.516</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">Illiteracy</span> &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">299.646</span> <span class="cm-number">588.89</span> <span class="cm-number">127.311</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 之后删除变量，AIC反而上升，因此停止删除</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; <span class="cm-variable">Population</span> &nbsp; <span class="cm-variable">Illiteracy</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1.6515497</span> &nbsp; &nbsp;<span class="cm-number">0.0002242</span> &nbsp; &nbsp;<span class="cm-number">4.0807366</span> &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 962px;"></div><div class="CodeMirror-gutters" style="display: none; height: 962px;"></div></div></div></pre><ul><li><span>逐步回归法其实存在争议，虽然它可能会找到一个好的模型，但是不能保证模型就是最佳模型，因为不是每一个可能的模型都被评价了。为克服这个限制，便有了</span><strong><span>全子集回归法</span></strong><span>。</span></li></ul><h5 id='全子集回归'><span>全子集回归</span></h5><ul><li><span>全子集回归是指</span><strong><span>所有可能的模型</span></strong><span>都会被检验。</span></li><li><span>全子集回归可以使用</span><strong><span>leaps</span></strong><span>包里的</span><strong><span>regsubsets()</span></strong><span>实现。通过</span><strong><span>R平方</span></strong><span>、</span><strong><span>调整R平方</span></strong><span>或</span><strong><span>Mallows Cp统计量</span></strong><span>等准则来选择“最佳”模型。</span></li><li><strong><span>R平方</span></strong><span>含义是预测变量解释响应变量的程度：调整R平方与之类似，但考虑了模型的参数数目。R平方总会随着变量数目的增加而增加。当与样本量相比，预测变量数目很大时，容易导致过拟合。R平方很可能会丢失数据的偶然变异信息，而</span><strong><span>调整R平方则提供了更为真实的R平方估计</span></strong><span>。</span></li><li><span>另外，</span><strong><span>Mallows Cp统计量</span></strong><span>也用来作为逐步回归的判停规则。广泛研究表明，对于一个好的模型它的Cp统计量</span><strong><span>非常接近于模型的参数数目(句括截距项)</span></strong><span>。</span></li><li><span>结果可以使用</span><strong><span>leaps</span></strong><span>包里的</span><strong><span>plot()</span></strong><span>绘制，也可以使用</span><strong><span>car</span></strong><span>包里的</span><strong><span>subsets()</span></strong><span>绘制。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">leaps</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)]) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># nbest=4：每次找出最优的4个单变量、双变量、三变量...的模型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">leaps</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">regsubsets</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>, <span class="cm-variable">nbest</span><span class="cm-operator">=</span><span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">leaps</span>,<span class="cm-variable">scale</span> <span class="cm-operator">=</span> <span class="cm-string">"adjr2"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方法2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">subsets</span>(<span class="cm-variable">leaps</span>,<span class="cm-variable">statistic</span> <span class="cm-operator">=</span> <span class="cm-string">"cp"</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Cp Plot for All Subsets Regression"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-variable">lty</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第8章\第8章 029.png" referrerpolicy="no-referrer" alt="第8章 029"></th><th><img src="img\019_R语言实战\第8章\第8章 030.png" referrerpolicy="no-referrer" alt="第8章 030"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>图一可以看出，最顶端只有两个变量的时候，R^2为0.55最佳，因此两个变量的模型是最佳模型。</span></li><li><span>图二越好的模型，离截距和斜率均为1的</span><strong><span>直线越近</span></strong><span>（图中红线），图形表明，你可以选择这几个模型，其余可能的模型都可以不予考虑：含Population和Illiteracy的双变量模型；含Population、Illiteracy和Frost的三变量模型，或Population、Illiteracy和Income的三变量模型(它们在图形上重叠了，不易分辨 )；含Population、Illiteracy、Income和Frost的四变量模型。</span></li></ul><h4 id='深层次分析'><span>深层次分析</span></h4><ul><li><span>介绍模型泛化能力和变量相对重要性的方法。</span></li></ul><h5 id='交叉验证'><span>交叉验证</span></h5><ul><li><span>从定义来看，回归方法本就是用来从一堆数据中获取最优模型参数。对于OLS回归，通过使得预测误差(残差)平方和最小和对响应变量的解释度(R平方)最大，可获得模型参数。由于等式只是最优化已给出的数据，所以在新数据集上表现并不一定好。</span></li><li><span>通过交叉验证法，我们便可以评价回归方程的</span><strong><span>泛化能力</span></strong><span>。</span></li><li><span>所谓</span><strong><span>交叉验证</span></strong><span>，即将一定比例的数据挑选出来作为</span><strong><span>训练样本</span></strong><span>，另外的样本作</span><strong><span>保留样本</span></strong><span>，先在训练样本上获取回归方程，然后在保留样本上做预测。由于保留样本不涉及模型参数的选择，该样本可获得比新数据更为精确的估计。</span></li><li><span>在</span><strong><span>k重交叉验证</span></strong><span>中，样本被分为k个子样本，轮流将K-1个子样本组合作为训练集，另外1个子样本作为保留集。这样会获得k个预测方程，记录k个保留样本的预测表现结果，然后求其平均值(当n是观测总数目，且k为n时，该方法又称作刀切法，iackknifing)。</span></li><li><strong><span>bootstrap</span></strong><span>包中</span><strong><span>crossval()</span></strong><span>可以实现k重交叉验证。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">shrinkage</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">fit</span>,<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">require</span>(<span class="cm-variable">bootstrap</span>) <span class="cm-comment"># 加载数据包</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># β的最小二乘估计</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theta.fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>){<span class="cm-variable">lsfit</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 在最前面添加全为1的列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># %*% 进行矩阵的乘法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 预测模型的预测参数（βi）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theta.predict</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">fit</span>,<span class="cm-variable">x</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># x为每次交叉验证的数据（包括所有预测变量的数据）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># fit$coef为预测变量的次数（βi）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment"># cbind(1,x)的行数与fit$coef的列数相同</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cbind</span>(<span class="cm-number">1</span>,<span class="cm-variable">x</span>)<span class="cm-operator cm-variable-2">%*%</span><span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">coef</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 去掉第一列数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">model</span>[,<span class="cm-number">2</span><span class="cm-operator">:</span><span class="cm-variable">ncol</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">model</span>)]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 取第一列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">model</span>[,<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 进行交叉验证，次数为k</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">results</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">crossval</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">theta.fit</span>,<span class="cm-variable">theta.predict</span>,<span class="cm-variable">ngroup</span> <span class="cm-operator">=</span> <span class="cm-variable">k</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># fitted(fit) == fit$fitted.values：变量的预测值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">r2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cor</span>(<span class="cm-variable">y</span>,<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">fitted.values</span>)<span class="cm-operator">^</span><span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">r2cv</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cor</span>(<span class="cm-variable">y</span>,<span class="cm-variable">results</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cv.fit</span>)<span class="cm-operator">^</span><span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cat</span>(<span class="cm-string">"原始R^2："</span>,<span class="cm-variable">r2</span>,<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cat</span>(<span class="cm-variable">k</span>,<span class="cm-string">"交叉验证(Fold Cross-Validated)R^2："</span>,<span class="cm-variable">r2cv</span>,<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cat</span>(<span class="cm-string">"改变量：(原-交叉)"</span>,<span class="cm-variable">r2</span><span class="cm-operator">-</span><span class="cm-variable">r2cv</span>,<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">shrinkage</span>(<span class="cm-variable">fit</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 754px;"></div><div class="CodeMirror-gutters" style="display: none; height: 754px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">原始<span class="cm-variable">R</span><span class="cm-operator">^</span><span class="cm-number">2</span>： <span class="cm-number">0.5669502</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> 交叉验证(<span class="cm-variable">Fold</span> <span class="cm-variable">Cross</span><span class="cm-operator">-</span><span class="cm-variable">Validated</span>)<span class="cm-variable">R</span><span class="cm-operator">^</span><span class="cm-number">2</span>： <span class="cm-number">0.4797622</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">改变量：(原<span class="cm-operator">-</span>交叉) <span class="cm-number">0.08718801</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>通过选择有更好泛化能力的模型，还可以用交叉验证来挑选变量，可以看出，只有两个变量（Population和Illiteracy）的R^2减少的更少。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">shrinkage</span>(<span class="cm-variable">fit2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">原始<span class="cm-variable">R</span><span class="cm-operator">^</span><span class="cm-number">2</span>： <span class="cm-number">0.5668327</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> 交叉验证(<span class="cm-variable">Fold</span> <span class="cm-variable">Cross</span><span class="cm-operator">-</span><span class="cm-variable">Validated</span>)<span class="cm-variable">R</span><span class="cm-operator">^</span><span class="cm-number">2</span>： <span class="cm-number">0.5283144</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">改变量：(原<span class="cm-operator">-</span>交叉) <span class="cm-number">0.03851831</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><h5 id='相对重要性'><span>相对重要性</span></h5><ul><li><span>评价预测变量相对重要性。最简单的是比较</span><strong><span>标准化的回归系数</span></strong><span>，它表示当其他预测变量不变时，该预测变量</span><strong><span>一个标准差的变化</span></strong><span>可引起的响应变量的预期变化( 以标准差单位度量 )。在进行回归分析前，可用</span><strong><span>scale()</span></strong><span>函数将数据标准化为均值为0、标准差为1的数据集，这样用R回归即可获得</span><strong><span>标准化的回归系数</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)]) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将scale()返回的矩阵转为数据框</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">zstates</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">scale</span>(<span class="cm-variable">states</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">zfit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span><span class="cm-operator">~</span><span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">zstates</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># coefficients(zfit)的简写，获取回归参数（βi）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">coef</span>(<span class="cm-variable">zfit</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  (<span class="cm-variable">Intercept</span>) &nbsp; &nbsp;<span class="cm-variable">Population</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Income</span> &nbsp; &nbsp;<span class="cm-variable">Illiteracy</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Frost</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">2.054026e-16</span> &nbsp;<span class="cm-number">2.705095e-01</span> &nbsp;<span class="cm-number">1.072372e-02</span> &nbsp;<span class="cm-number">6.840496e-01</span> &nbsp;<span class="cm-number">8.185407e-03</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>当其他因素不变时，文盲率一个标准差的变化将增加0.68个标准差的谋杀率。根据标准化的回归系数，我们可认为Illiteracy是最重要的预测变量，而Frost是最不重要的。</span></li><li><strong><span>相对权重</span></strong><span>：对所有可能子模型添加一个预测变量引起的R平方平均增加量的一个近似值。</span></li><li><span>生成相对权重的函数：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">relweights</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">fit</span>,<span class="cm-keyword">...</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">R</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cor</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">model</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">nvar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ncol</span>(<span class="cm-variable">R</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rxx</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">R</span>[<span class="cm-number">2</span><span class="cm-operator">:</span><span class="cm-variable">nvar</span>, <span class="cm-number">2</span><span class="cm-operator">:</span><span class="cm-variable">nvar</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rxy</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">R</span>[<span class="cm-number">2</span><span class="cm-operator">:</span><span class="cm-variable">nvar</span>, <span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">svd</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">eigen</span>(<span class="cm-variable">rxx</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">evec</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">svd</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">vectors</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ev</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">svd</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">delta</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">diag</span>(<span class="cm-variable">sqrt</span>(<span class="cm-variable">ev</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lambda</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">evec</span> <span class="cm-operator cm-variable-2">%*%</span> <span class="cm-variable">delta</span> <span class="cm-operator cm-variable-2">%*%</span> <span class="cm-variable">t</span>(<span class="cm-variable">evec</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lambdasq</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lambda</span> <span class="cm-operator">^</span> <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">beta</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">solve</span>(<span class="cm-variable">lambda</span>) <span class="cm-operator cm-variable-2">%*%</span> <span class="cm-variable">rxy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rsquare</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">colSums</span>(<span class="cm-variable">beta</span> <span class="cm-operator">^</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rawwgt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lambdasq</span> <span class="cm-operator cm-variable-2">%*%</span> <span class="cm-variable">beta</span> <span class="cm-operator">^</span> <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">import</span> <span class="cm-operator cm-arrow">&lt;-</span> (<span class="cm-variable">rawwgt</span> <span class="cm-operator">/</span> <span class="cm-variable">rsquare</span>) <span class="cm-operator">*</span> <span class="cm-number">100</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">import</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">import</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">row.names</span>(<span class="cm-variable">import</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">names</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">model</span>[<span class="cm-number">2</span><span class="cm-operator">:</span><span class="cm-variable">nvar</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">names</span>(<span class="cm-variable">import</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"Weights"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">import</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">import</span>[<span class="cm-variable">order</span>(<span class="cm-variable">import</span>),<span class="cm-number">1</span>, <span class="cm-variable">drop</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dotchart</span>(<span class="cm-variable">import</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Weights</span>, <span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">row.names</span>(<span class="cm-variable">import</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"% of R-Square"</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">19</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Relative Importance of Predictor Variables"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">sub</span><span class="cm-operator">=</span><span class="cm-variable">paste</span>(<span class="cm-string">"Total R-Square="</span>, <span class="cm-variable">round</span>(<span class="cm-variable">rsquare</span>, <span class="cm-variable">digits</span><span class="cm-operator">=</span><span class="cm-number">3</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-keyword">...</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">return</span>(<span class="cm-variable">import</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 676px;"></div><div class="CodeMirror-gutters" style="display: none; height: 676px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>[,<span class="cm-variable">c</span>(<span class="cm-string">"Murder"</span>, <span class="cm-string">"Population"</span>,<span class="cm-string">"Illiteracy"</span>, <span class="cm-string">"Income"</span>, <span class="cm-string">"Frost"</span>)]) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">relweights</span>(<span class="cm-variable">fit</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第8章\第8章 031.png" alt="第8章 031" style="zoom:50%;" /></p><ul><li><span>可以看到各个预测变量对模型方差的解释程度(R平方=0.567)，Illiteracy解释了59%的R平方，Frost解释了20.79%，等等。根据相对权重法，Illiteracy有最大的相对重要性，余下依次是Frost、Population和Income。</span></li></ul><h3 id='第9章-方差分析'><span>第9章 方差分析</span></h3><ul><li><span>当包含的</span><strong><span>因子</span></strong><span>是解释变量时，我们关注的重点通常会从预测转向组别差异的分析，这种分析法称作</span><strong><span>方差分析(ANOVA)</span></strong><span>。</span></li><li><span>在每种方案下观测数相等，因此这种设计也称为</span><strong><span>均衡设计</span></strong><span>(balanced design)；若观测数不同，则称作</span><strong><span>非均衡设计</span></strong><span>(unbalanced design)。</span></li><li><span>仅有一个类别型变量的统计设计又称为</span><strong><span>单因素方差分析</span></strong><span>(one-way ANOVA )。方差分析主要通过</span><strong><span>F检验</span></strong><span>来进行效果评测，若治疗方案的</span><strong><span>F检验显著</span></strong><span>，则说明五周后两种疗法的STAI得分</span><strong><span>均值不同</span></strong><span>。</span></li><li><span>疗法(therapy) 和时间 ( time ) 都作为因子时，我们既可分析疗法的影响(时间跨度上的平均)和时间的影响(疗法类型跨度上的平均 )，又可分析疗法和时间的交互影响。前两个称作</span><strong><span>主效应</span></strong><span>，交瓦部分称作</span><strong><span>交互效应</span></strong><span>。</span></li><li><span>本例中，你将做三次F检验：疗法因素一次，时间因素一次，两者交互因素一次。若疗法结果显著。说明CBT和EMDR对焦虑症的治疗效果不同；若时间结果显著，说明焦虑度从五周到六个月发生了变化；若两者交互效应显著，说明两种疗法随着时间变化对焦虑症治疗影响不同(也就是说，焦虑度从五周到六个月的改变程度在两种疗法间是不同的)。</span></li><li><span>有协变量，该设计为</span><strong><span>协方差分析</span></strong><span>(ANCOVA)。</span></li><li><span>当因变量不止一个时，设计被称作</span><strong><span>多元方差分析</span></strong><span> (MANOVA )，若协变量也存在，那么就叫</span><strong><span>多元协方差分析</span></strong><span>(MANCOVA)。</span></li></ul><h4 id='anova模型拟合'><span>ANOVA模型拟合</span></h4><h5 id='aov函数'><span>aov()函数</span></h5><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">aov</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">dataframe</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 001.png" referrerpolicy="no-referrer" alt="第9章 001"></p><p><img src="img\019_R语言实战\第9章\第9章 002.png" referrerpolicy="no-referrer" alt="第9章 002"></p><ul><li><span>y是因变量，字母A、B、C代表因子。小写字母表示定量变量，大写字母表示组别因子，Subject是对被试者独有的标识变量。</span></li></ul><h5 id='表达式的顺序'><span>表达式的顺序</span></h5><ul><li><span>表达式中效应的顺序在两种情况下会造成影响：(a)因子不止一个，并且是非平衡设计；(b)存在协变量。</span></li><li><span>出现任意一种情况时，等式右边的变量都与其他每个变量相关。此时，我们无法清晰地划分它们对因变量的影响。例如，对于双因素方差分析，若不同处理方式中的观测数不同那么模型y ~ A</span><span>*</span><span>B与模型y ~ B</span><span>*</span><span>A的结果不同。</span></li><li><strong><span>y ~ A + B + A:B</span></strong><span>：A对y的影响；控制A时，B对y的影响；控制A和B的主效应时，A与B的交互效应。</span></li></ul><p><img src="img\019_R语言实战\第9章\第9章 003.png" referrerpolicy="no-referrer" alt="第9章 003"></p><ul><li><span>样本大小越不平衡，效应项的顺序对结果的影响越大。一般来说，越基础性的效应越需要放在表达式前面。具体来讲，首先是</span><strong><span>协变量</span></strong><span>，然后是</span><strong><span>主效应</span></strong><span>，接着是</span><strong><span>双因素的交互项</span></strong><span>，再接着是</span><strong><span>三因素的交互项</span></strong><span>，以此类推。对于主效应，越基础性的变量越应放在表达式前面，因此性别要放在处理方式之前。</span></li><li><span>有一个基本的准则：若研究设计</span><strong><span>不是正交的</span></strong><span>(也就是说，因子和/或协变量相关)，一定要谨慎设置效应的顺序。</span></li><li><strong><span>car</span></strong><span>包里的</span><strong><span>Anova()</span></strong><span>提供了类型Ⅱ和类型Ⅲ。</span></li></ul><h4 id='单因素方差分析'><span>单因素方差分析</span></h4><ul><li><span>单因素方差分析中，你感兴趣的是比较分类因子定义的两个或多个组别中的因变量均值。</span></li><li><span>数据集：</span><strong><span>multcomp</span></strong><span>包中的</span><strong><span>cholesterol</span></strong><span>数据集。</span><strong><span>50个患者</span></strong><span>均接受降低胆固醇药物治疗 ( trt ) </span><strong><span>五种疗法</span></strong><span>中的一种疗法。其中</span><strong><span>三种治疗条件使用药物相同</span></strong><span>，分别是20mg一天一次(1time)、10mg一天两次(2times) 和5mg一天四次 (4times)。剩下的</span><strong><span>两种方式(drugD和drugE)</span></strong><span> 代表侯选药物。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cholesterol</span>[<span class="cm-variable">sample</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">50</span>,<span class="cm-number">6</span>),]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">trt</span> <span class="cm-variable">response</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">10</span> <span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; <span class="cm-number">9.4123</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">40</span> <span class="cm-variable">drugD</span> &nbsp;<span class="cm-number">17.6316</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">48</span> <span class="cm-variable">drugE</span> &nbsp;<span class="cm-number">18.3058</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">49</span> <span class="cm-variable">drugE</span> &nbsp;<span class="cm-number">20.3851</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">8</span> &nbsp;<span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; <span class="cm-number">2.3039</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">37</span> <span class="cm-variable">drugD</span> &nbsp;<span class="cm-number">17.5897</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>哪种药物疗法降低胆固醇(响应变量)最多？</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 各组样本的数据</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">cho</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">trt</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span><span class="cm-variable">time</span> <span class="cm-number">2</span><span class="cm-variable">times</span> <span class="cm-number">4</span><span class="cm-variable">times</span> &nbsp;<span class="cm-variable">drugD</span> &nbsp;<span class="cm-variable">drugE</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">10</span> &nbsp; &nbsp; <span class="cm-number">10</span> &nbsp; &nbsp; <span class="cm-number">10</span> &nbsp; &nbsp; <span class="cm-number">10</span> &nbsp; &nbsp; <span class="cm-number">10</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 计算各组样本的均值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">cho</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">response</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">cho</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">trt</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Group.1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp;<span class="cm-number">5.78197</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">2</span><span class="cm-variable">times</span> &nbsp;<span class="cm-number">9.22497</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span><span class="cm-variable">times</span> <span class="cm-number">12.37478</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; <span class="cm-variable">drugD</span> <span class="cm-number">15.36117</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; <span class="cm-variable">drugE</span> <span class="cm-number">20.94752</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 各组样本的标准差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">cho</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">response</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">cho</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">trt</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">sd</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Group.1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">time</span> <span class="cm-number">2.878113</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">2</span><span class="cm-variable">times</span> <span class="cm-number">3.483054</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span><span class="cm-variable">times</span> <span class="cm-number">2.923119</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; <span class="cm-variable">drugD</span> <span class="cm-number">3.454636</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; <span class="cm-variable">drugE</span> <span class="cm-number">3.345003</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 方差分析</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aov</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cho</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp; <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trt</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> <span class="cm-number">1351.4</span> &nbsp; <span class="cm-number">337.8</span> &nbsp; <span class="cm-number">32.43</span> <span class="cm-number">9.82e-13</span> <span class="cm-operator">***</span> <span class="cm-comment"># 效果显著，说明治疗存在差异</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">45</span> &nbsp;<span class="cm-number">468.8</span> &nbsp; &nbsp;<span class="cm-number">10.4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 绘图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">gplots</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plotmeans</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"治疗"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"反应"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cho</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Mean Plot</span><span class="cm-string-2">\n</span><span class="cm-string">with 95% CI"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 858px;"></div><div class="CodeMirror-gutters" style="display: none; height: 858px;"></div></div></div></pre><ul><li><span>CI表示置信区间。</span><strong><span>gplots</span></strong><span>包中的</span><strong><span>plotmeans()</span></strong><span>可以用来绘制带有</span><strong><span>置信区间</span></strong><span>的</span><strong><span>组均值</span></strong><span>图形。</span></li></ul><p><img src="img\019_R语言实战\第9章\第9章 004.png" alt="第9章 004" style="zoom:50%;" /></p><h5 id='多重比较'><span>多重比较</span></h5><ul><li><span>虽然ANOVA对各疗法的F检验表明五种药物疗法效果不同，但是并没有告诉你哪种疗法与其他疗法不同。</span></li><li><strong><span>TukeyHSD()</span></strong><span>提供了各组均值差异的成对检验。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">TukeyHSD</span>(<span class="cm-variable">fit</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Tukey</span> <span class="cm-variable">multiple</span> <span class="cm-variable">comparisons</span> <span class="cm-variable">of</span> <span class="cm-variable">means</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">95</span><span class="cm-operator cm-variable-2">%</span> <span class="cm-variable">family</span><span class="cm-operator">-</span><span class="cm-variable">wise</span> <span class="cm-variable">confidence</span> <span class="cm-variable">level</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span><span class="cm-operator">:</span> <span class="cm-variable">aov</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cho</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">trt</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># 均值的差值  置信下限  置信上限  调整后的p值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">diff</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">lwr</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">upr</span> &nbsp; &nbsp; <span class="cm-variable">p</span> <span class="cm-variable">adj</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span><span class="cm-variable">times</span><span class="cm-operator">-</span><span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; <span class="cm-number">3.44300</span> <span class="cm-operator">-</span><span class="cm-number">0.6582817</span> &nbsp;<span class="cm-number">7.544282</span> <span class="cm-number">0.1380949</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span><span class="cm-variable">times</span><span class="cm-operator">-</span><span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; <span class="cm-number">6.59281</span> &nbsp;<span class="cm-number">2.4915283</span> <span class="cm-number">10.694092</span> <span class="cm-number">0.0003542</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugD</span><span class="cm-operator">-</span><span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; &nbsp;<span class="cm-number">9.57920</span> &nbsp;<span class="cm-number">5.4779183</span> <span class="cm-number">13.680482</span> <span class="cm-number">0.0000003</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugE</span><span class="cm-operator">-</span><span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; <span class="cm-number">15.16555</span> <span class="cm-number">11.0642683</span> <span class="cm-number">19.266832</span> <span class="cm-number">0.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span><span class="cm-variable">times</span><span class="cm-operator">-</span><span class="cm-number">2</span><span class="cm-variable">times</span> &nbsp;<span class="cm-number">3.14981</span> <span class="cm-operator">-</span><span class="cm-number">0.9514717</span> &nbsp;<span class="cm-number">7.251092</span> <span class="cm-number">0.2050382</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugD</span><span class="cm-operator">-</span><span class="cm-number">2</span><span class="cm-variable">times</span> &nbsp; <span class="cm-number">6.13620</span> &nbsp;<span class="cm-number">2.0349183</span> <span class="cm-number">10.237482</span> <span class="cm-number">0.0009611</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugE</span><span class="cm-operator">-</span><span class="cm-number">2</span><span class="cm-variable">times</span> &nbsp;<span class="cm-number">11.72255</span> &nbsp;<span class="cm-number">7.6212683</span> <span class="cm-number">15.823832</span> <span class="cm-number">0.0000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugD</span><span class="cm-operator">-</span><span class="cm-number">4</span><span class="cm-variable">times</span> &nbsp; <span class="cm-number">2.98639</span> <span class="cm-operator">-</span><span class="cm-number">1.1148917</span> &nbsp;<span class="cm-number">7.087672</span> <span class="cm-number">0.2512446</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugE</span><span class="cm-operator">-</span><span class="cm-number">4</span><span class="cm-variable">times</span> &nbsp; <span class="cm-number">8.57274</span> &nbsp;<span class="cm-number">4.4714583</span> <span class="cm-number">12.674022</span> <span class="cm-number">0.0000037</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugE</span><span class="cm-operator">-</span><span class="cm-variable">drugD</span> &nbsp; &nbsp;<span class="cm-number">5.58635</span> &nbsp;<span class="cm-number">1.4850683</span> &nbsp;<span class="cm-number">9.687632</span> <span class="cm-number">0.0030633</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 417px;"></div><div class="CodeMirror-gutters" style="display: none; height: 417px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">las</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mar</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">5</span>,<span class="cm-number">8</span>,<span class="cm-number">4</span>,<span class="cm-number">2</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">TukeyHSD</span>(<span class="cm-variable">fit</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 005.png" alt="第9章 005" style="zoom:67%;" /></p><ul><li><span>可以看到，1time和2times的均值差异不显著(p=0.138 )，而1time和4times间的差异非常显著( p&lt;0.001 )。</span></li><li><span>图形中置信区间包含0的疗法说明差异不显著。</span></li><li><strong><span>multcomp</span></strong><span>包中的</span><strong><span>glht()</span></strong><span>提供了多重均值比较更为全面的方法。既适用于线性模型(如本章各例)，也适用于广义线性模型(见第13章)。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mar</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">5</span>,<span class="cm-number">4</span>,<span class="cm-number">6</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tuk</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glht</span>(<span class="cm-variable">fit</span>, <span class="cm-variable">linfct</span><span class="cm-operator">=</span><span class="cm-variable">mcp</span>(<span class="cm-variable">trt</span><span class="cm-operator">=</span><span class="cm-string">"Tukey"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 设置显著水平为0.05，对应于95%的置信区间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">cld</span>(<span class="cm-variable">tuk</span>, <span class="cm-variable">level</span><span class="cm-operator">=</span><span class="cm-number">.05</span>),<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"lightgrey"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 006.png" alt="第9章 006" style="zoom:67%;" /></p><ul><li><span>有相同字母的组 ( 用箱线图表示 ) 说明均值差异不显著。</span></li></ul><h5 id='评估检验的假设条件-1'><span>评估检验的假设条件</span></h5><ul><li><span>单因素方差分析中，假设因变量服从</span><strong><span>正态分布</span></strong><span>，</span><strong><span>各组方差相等</span></strong><span>。</span></li><li><span>正态性：QQ图，</span><strong><span>car::qqPlot()</span></strong><span> </span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">qqPlot</span>(<span class="cm-variable">lm</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"QQ图"</span>,<span class="cm-variable">simulate</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 007.png" alt="第9章 007" style="zoom:67%;" /></p><ul><li><span>方差齐性检验：Bartlett检验，</span><strong><span>bartlett.test()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">bartlett.test</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Bartlett</span> <span class="cm-variable">test</span> <span class="cm-variable">of</span> <span class="cm-variable">homogeneity</span> <span class="cm-variable">of</span> <span class="cm-variable">variances</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">response</span> <span class="cm-variable">by</span> <span class="cm-variable">trt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Bartlett</span>‘<span class="cm-variable">s</span> <span class="cm-variable">K</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">0.57975</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">4</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.9653</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><ul><li><p><span>Bartlett检验表明五组的方差并没有显著不同 (p=0.97)。</span></p></li><li><p><span>其他数据包的函数也可以用来检测方差齐性，如：Fligner-Killeen检验的函数</span><strong><span>fligner.test()</span></strong><span>，Brown-Forsythe检验的函数</span><strong><span>HH::hov()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fligner.test</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hov</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>方差齐性分析对</span><strong><span>离群点</span></strong><span>非常敏感，可以使用car包里的</span><strong><span>outlierTest()</span></strong><span>来检测。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">outlierTest</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">No</span> <span class="cm-variable">Studentized</span> <span class="cm-variable">residuals</span> <span class="cm-variable">with</span> <span class="cm-variable">Bonferroni</span> <span class="cm-variable">p</span> <span class="cm-operator">&lt;</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Largest</span> <span class="cm-operator">|</span><span class="cm-variable">rstudent</span><span class="cm-operator">|:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">rstudent</span> <span class="cm-variable">unadjusted</span> <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-variable">Bonferroni</span> <span class="cm-variable">p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">19</span> <span class="cm-number">2.251149</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.029422</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-atom">NA</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>没有离群点（当p&gt;1时将产生NA）。</span></li></ul><h4 id='单因素协方差分析'><span>单因素协方差分析</span></h4><ul><li><span>单因素协方差分析(ANCOVA)扩展了单因素方差分析(ANOVA )，包含一个或多个定量的协变量。</span></li><li><span>数据集：</span><strong><span>multcomp</span></strong><span>包的</span><strong><span>litter</span></strong><span>数据集，怀孕小鼠被分为</span><strong><span>4个小组</span></strong><span>，每个小组接受不同剂量 (0、5、50或500) 的药物处理。产下幼崽的</span><strong><span>体重均值为因变量</span></strong><span>，</span><strong><span>怀孕时间为协变量</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 加载litter数据集</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span>(<span class="cm-variable">litter</span>,<span class="cm-variable">package</span> <span class="cm-operator">=</span> <span class="cm-string">"multcomp"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 各组样本数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">litter</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">5</span> &nbsp;<span class="cm-number">50</span> <span class="cm-number">500</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">20</span> &nbsp;<span class="cm-number">19</span> &nbsp;<span class="cm-number">18</span> &nbsp;<span class="cm-number">17</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 各组均值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">litter</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weight</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">litter</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Group.1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> <span class="cm-number">32.30850</span> <span class="cm-comment"># 均值最大，即体重最重</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">5</span> <span class="cm-number">29.30842</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">50</span> <span class="cm-number">29.86611</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; <span class="cm-number">500</span> <span class="cm-number">29.64647</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 方差分析</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aov</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">gesttime</span> <span class="cm-operator">+</span> <span class="cm-variable">dose</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">litter</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gesttime</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">134.3</span> &nbsp;<span class="cm-number">134.30</span> &nbsp; <span class="cm-number">8.049</span> <span class="cm-number">0.00597</span> <span class="cm-operator">**</span> <span class="cm-comment"># 显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp;<span class="cm-number">137.1</span> &nbsp; <span class="cm-number">45.71</span> &nbsp; <span class="cm-number">2.739</span> <span class="cm-number">0.04988</span> <span class="cm-operator">*</span> &nbsp;<span class="cm-comment"># 显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">69</span> <span class="cm-number">1151.3</span> &nbsp; <span class="cm-number">16.69</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 572px;"></div><div class="CodeMirror-gutters" style="display: none; height: 572px;"></div></div></div></pre><ul><li><span>ANCOVA的E检验表明：(a)怀孕时间与幼崽出生体重相关；(b)控制怀孕时间药物剂量与出生体重相关。控制怀孕时间，确实发现每种药物剂量下幼崽出生体重均值不同。</span></li><li><span>获得调整后的均值，即去除协变量的影响后的组均值，可以使用</span><strong><span>effects</span></strong><span>包里的</span><strong><span>effect()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">effects</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">effect</span>(<span class="cm-string">"dose"</span>,<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">dose</span> <span class="cm-variable">effect</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">50</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">500</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">32.35367</span> <span class="cm-number">28.87672</span> <span class="cm-number">30.56614</span> <span class="cm-number">29.33460</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>以上只说明了各组均值存在差异。使用</span><strong><span>multcomp</span></strong><span>包里的</span><strong><span>glht()</span></strong><span>来比较各组之间的均值差异。可以用来检验用户自定义的均值假设。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 用户定义的对照多重比较</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">multcomp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">contrast</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rbind</span>(<span class="cm-string">"no drug vs. drug"</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>, <span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-operator">-</span><span class="cm-number">1</span>, <span class="cm-operator">-</span><span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">glht</span>(<span class="cm-variable">fit</span>, <span class="cm-variable">linfct</span><span class="cm-operator">=</span><span class="cm-variable">mcp</span>(<span class="cm-variable">dose</span><span class="cm-operator">=</span><span class="cm-variable">contrast</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-variable">Simultaneous</span> <span class="cm-variable">Tests</span> <span class="cm-keyword">for</span> <span class="cm-variable">General</span> <span class="cm-variable">Linear</span> <span class="cm-variable">Hypotheses</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">Comparisons</span> <span class="cm-variable">of</span> <span class="cm-variable">Means</span><span class="cm-operator">:</span> <span class="cm-variable">User</span><span class="cm-operator">-</span><span class="cm-variable">defined</span> <span class="cm-variable">Contrasts</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span><span class="cm-operator">:</span> <span class="cm-variable">aov</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">gesttime</span> <span class="cm-operator">+</span> <span class="cm-variable">dose</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">litter</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Linear</span> <span class="cm-variable">Hypotheses</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">no</span> <span class="cm-variable">drug</span> <span class="cm-variable">vs.</span> <span class="cm-variable">drug</span> <span class="cm-operator">==</span> <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">8.284</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.209</span> &nbsp; <span class="cm-number">2.581</span> &nbsp; &nbsp;<span class="cm-number">0.012</span> <span class="cm-operator">*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Adjusted</span> <span class="cm-variable">p</span> <span class="cm-variable">values</span> <span class="cm-variable">reported</span> <span class="cm-operator">--</span> <span class="cm-variable">single</span><span class="cm-operator">-</span><span class="cm-variable">step</span> <span class="cm-variable">method</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 365px;"></div><div class="CodeMirror-gutters" style="display: none; height: 365px;"></div></div></div></pre><ul><li><span>对照c(3，-1，-1，-1)设定第一组和其他三组的均值进行比较。假设检验的统计量(2.581)在p&lt;0.05水平下显著，因此，可以得出未用药组比其他用药条件下的出生体重高的结论。</span></li></ul><h5 id='评估检验的假设条件-2'><span>评估检验的假设条件</span></h5><ul><li><span>ANCOVA与ANOVA相同，都需要正态性和同方差性假设。另外，ANCOVA还假定</span><strong><span>回归斜率相同</span></strong><span>。</span></li><li><span>本例中，假定四个处理组通过怀孕时间来预测出生体重的回归斜率都相同。ANCOVA模型包含怀孕时间x剂量的交互项时，可对</span><strong><span>回归斜率的同质性</span></strong><span>进行检验。交互效应若显著，则意味着时间和幼崽出生体重间的关系依赖于药物剂量的水平。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 检验回归斜率的同质性</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aov</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">gesttime</span><span class="cm-operator">*</span><span class="cm-variable">dose</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">litter</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gesttime</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">134.3</span> &nbsp;<span class="cm-number">134.30</span> &nbsp; <span class="cm-number">8.289</span> <span class="cm-number">0.00537</span> <span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp;<span class="cm-number">137.1</span> &nbsp; <span class="cm-number">45.71</span> &nbsp; <span class="cm-number">2.821</span> <span class="cm-number">0.04556</span> <span class="cm-operator">*</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gesttime</span><span class="cm-operator">:</span><span class="cm-variable">dose</span> &nbsp;<span class="cm-number">3</span> &nbsp; <span class="cm-number">81.9</span> &nbsp; <span class="cm-number">27.29</span> &nbsp; <span class="cm-number">1.684</span> <span class="cm-number">0.17889</span> &nbsp; <span class="cm-comment"># 不显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; &nbsp; <span class="cm-number">66</span> <span class="cm-number">1069.4</span> &nbsp; <span class="cm-number">16.20</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><ul><li><span>可以看到交互效应不显著，支持了斜率相等的假设。若假设不成立，可以尝试变换协变量或因变量，或使用能对每个斜率独立解释的模型，或使用</span><strong><span>不需要假设回归斜率同质性的非参数ANCOVA方法</span></strong><span>。</span><strong><span>sm</span></strong><span>包中的</span><strong><span>sm.ancova()</span></strong><span>函数为后者提供了一个例子。</span></li></ul><h5 id='结果可视化'><span>结果可视化</span></h5><ul><li><strong><span>HH</span></strong><span>包中的</span><strong><span>ancova()</span></strong><span>函数可以绘制因变量、协变量和因子之间的关系图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">HH</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 由前面可知，交互效应不显著，因此使用+，如果显著使用*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ancova</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">gesttime</span><span class="cm-operator">+</span><span class="cm-variable">dose</span>,<span class="cm-variable">data.in</span> <span class="cm-operator">=</span> <span class="cm-variable">litter</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 008.png" alt="第9章 008" style="zoom:67%;" /></p><ul><li><span>用怀孕时间来预测出生体重的回归线相互平行，只是截距项不同。</span></li></ul><h4 id='双因素方差分析-1'><span>双因素方差分析</span></h4><ul><li><span>在双因素方差分析中，受试者被分配到</span><strong><span>两因子</span></strong><span>的</span><strong><span>交叉类别组</span></strong><span>中。</span></li><li><span>数据集：</span><strong><span>ToothGrowth</span></strong><span>数据集，随机分配60只豚鼠，分别采用两种喂食方法(橙汁或维生素C )，各喂食方法中抗坏血酸含量有三种水平 (0.5mg、1mg或2mg )，每种处理方式组合都被分配10只豚鼠。牙齿长度为因变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tg</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ToothGrowth</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># supp：VC、OJ，dose:：0.5、1、2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">supp</span>,<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">0.5</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">10</span> <span class="cm-number">10</span> <span class="cm-number">10</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment"># 均衡设计，各组数据大小相等</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">VC</span> &nbsp;<span class="cm-number">10</span> <span class="cm-number">10</span> <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 计算各组均值、标准差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">len</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">supp</span><span class="cm-operator">=</span><span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">supp</span>,<span class="cm-variable">dose</span><span class="cm-operator">=</span><span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">supp</span> <span class="cm-variable">dose</span> &nbsp; &nbsp; <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">0.5</span> <span class="cm-number">13.23</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; <span class="cm-variable">VC</span> &nbsp;<span class="cm-number">0.5</span> &nbsp;<span class="cm-number">7.98</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; <span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">1.0</span> <span class="cm-number">22.70</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; <span class="cm-variable">VC</span> &nbsp;<span class="cm-number">1.0</span> <span class="cm-number">16.77</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; <span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">2.0</span> <span class="cm-number">26.06</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; <span class="cm-variable">VC</span> &nbsp;<span class="cm-number">2.0</span> <span class="cm-number">26.14</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">len</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">supp</span><span class="cm-operator">=</span><span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">supp</span>,<span class="cm-variable">dose</span><span class="cm-operator">=</span><span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">sd</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">supp</span> <span class="cm-variable">dose</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">0.5</span> <span class="cm-number">4.459709</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; <span class="cm-variable">VC</span> &nbsp;<span class="cm-number">0.5</span> <span class="cm-number">2.746634</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; <span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">1.0</span> <span class="cm-number">3.910953</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; <span class="cm-variable">VC</span> &nbsp;<span class="cm-number">1.0</span> <span class="cm-number">2.515309</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; <span class="cm-variable">OJ</span> &nbsp;<span class="cm-number">2.0</span> <span class="cm-number">2.655058</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; <span class="cm-variable">VC</span> &nbsp;<span class="cm-number">2.0</span> <span class="cm-number">4.797731</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 方差分析</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aov</span>(<span class="cm-variable">len</span> <span class="cm-operator">~</span> <span class="cm-variable">supp</span><span class="cm-operator">*</span><span class="cm-variable">dose</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">tg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp; <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">supp</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">205.4</span> &nbsp; <span class="cm-number">205.4</span> &nbsp;<span class="cm-number">15.572</span> <span class="cm-number">0.000231</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">2426.4</span> &nbsp;<span class="cm-number">1213.2</span> &nbsp;<span class="cm-number">92.000</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">supp</span><span class="cm-operator">:</span><span class="cm-variable">dose</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">108.3</span> &nbsp; &nbsp;<span class="cm-number">54.2</span> &nbsp; <span class="cm-number">4.107</span> <span class="cm-number">0.021860</span> <span class="cm-operator">*</span> &nbsp; &nbsp;<span class="cm-comment"># 交互效应显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">54</span> &nbsp;<span class="cm-number">712.1</span> &nbsp; &nbsp;<span class="cm-number">13.2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 884px;"></div><div class="CodeMirror-gutters" style="display: none; height: 884px;"></div></div></div></pre><ul><li><strong><span>dose</span></strong><span>变量被转换为因子变量，这样</span><strong><span>aov()</span></strong><span>函数就会将它当做一个分组变量，而不是一个数值型协变量。(supp原来就是因子)。由P值可知，交互效应显著。</span></li><li><span>可视化双因素方差分析的交互效应：</span><strong><span>interaction.plot()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">interaction.plot</span>(<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>,<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">supp</span>,<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">len</span>,<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"b"</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"red"</span>,<span class="cm-string">"blue"</span>),</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">16</span>,<span class="cm-number">18</span>),<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"dose 和 supp的交互效应"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 009.png" alt="第9章 009" style="zoom: 67%;" /></p><ul><li><span>或使用</span><strong><span>gplots</span></strong><span>包里的</span><strong><span>plotmeans()</span></strong><span>来展示交互效应。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">gplots</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># interaction(supp,dose,sep = " ")每个水平两两组合并用空格连接</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plotmeans</span>(<span class="cm-variable">len</span> <span class="cm-operator">~</span> <span class="cm-variable">interaction</span>(<span class="cm-variable">supp</span>,<span class="cm-variable">dose</span>,<span class="cm-variable">sep</span> <span class="cm-operator">=</span> <span class="cm-string">"</span> <span class="cm-string">"</span>),<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">ToothGrowth</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># 设置连接的点</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">connect</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">3</span>,<span class="cm-number">5</span>),<span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">4</span>,<span class="cm-number">6</span>)),<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"95%置信区间的交互效应图"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"supp和dose的组合"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 010.png" alt="第9章 010" style="zoom:67%;" /></p><ul><li><span>还可以使用</span><strong><span>HH</span></strong><span>包的</span><strong><span>interaction2wt()</span></strong><span>来可视化，图形对任意顺序的因子设计的主效应和交互效应都会进行展示。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">tg</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ToothGrowth</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HH</span><span class="cm-operator">::</span><span class="cm-variable">interaction2wt</span>(<span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">len</span> <span class="cm-operator">~</span> <span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">supp</span><span class="cm-operator">*</span><span class="cm-variable">tg</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dose</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 011.png" alt="第9章 011" style="zoom: 50%;" /></p><ul><li><span>以上三幅图形都表明随着橙汁和维生素C中的抗坏血酸剂量的增加，牙齿长度变长。对于0.5mg和1mg剂量，橙汁比维生素C更能促进牙齿生长;对于2mg剂量的抗坏血酸，两种喂食方法下牙齿长度增长相同。</span></li></ul><h4 id='重复测量方差分析'><span>重复测量方差分析</span></h4><ul><li><span>所谓重复测量方差分析，即受试者被测量不止一次。</span></li><li><span>数据集：</span><strong><span>CO2</span></strong><span>数据集，包含了</span><strong><span>北方</span></strong><span>和</span><strong><span>南方</span></strong><span>牧草类植物Echinochloa crus-galli的寒冷容忍度研究结果，在某浓度二氧化碳的环境中，对</span><strong><span>寒带植物</span></strong><span>与</span><strong><span>非寒带植物</span></strong><span>的光合作用率进行了比较。研究所用植物一半来自于</span><strong><span>加拿大</span></strong><span>的魁北克省 (Quebec )，另一半来自</span><strong><span>美国</span></strong><span>的密西西比州 ( Mississippi )。</span></li><li><span>因变量是二氧化碳吸收量(uptake)，单位为ml/L，自变量是植物类型Type(魁北克VS.密西西比)和七种水平(95~1000 umol/m2 sec )的二氧化碳度(conc)另外，</span><strong><span>Type是组间因子</span></strong><span>，</span><strong><span>conc是组内因子</span></strong><span>。Type已经被存储为一个因子变量，但你还需要先将conc转换为因子变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">co2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">CO2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">co2</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">conc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">CO2</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">conc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取寒带植物的子集</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">w1b1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">subset</span>(<span class="cm-variable">CO2</span>,<span class="cm-variable">Treatment</span> <span class="cm-operator">==</span> <span class="cm-string">"chilled"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># Error(Plant/(conc)) 表示模型中的残差项,包含Plant和conc之间的交互作用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aov</span>(<span class="cm-variable">uptake</span> <span class="cm-operator">~</span> <span class="cm-variable">conc</span><span class="cm-operator">*</span><span class="cm-variable">Type</span> <span class="cm-operator">+</span> <span class="cm-variable">Error</span>(<span class="cm-variable">Plant</span><span class="cm-operator">/</span>(<span class="cm-variable">conc</span>)),<span class="cm-variable">w1b1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span><span class="cm-operator">:</span> <span class="cm-variable">Plant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Type</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> <span class="cm-number">2667.2</span> &nbsp;<span class="cm-number">2667.2</span> &nbsp; <span class="cm-number">60.41</span> <span class="cm-number">0.00148</span> <span class="cm-operator">**</span> <span class="cm-comment"># Type对于因变量（cnoc）的影响显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">176.6</span> &nbsp; &nbsp;<span class="cm-number">44.1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span><span class="cm-operator">:</span> <span class="cm-variable">Plant</span><span class="cm-operator">:</span><span class="cm-variable">conc</span> <span class="cm-comment"># conc 和 Type，及其交互效应对于因变量的影响</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp; <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">conc</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">888.6</span> &nbsp; <span class="cm-number">888.6</span> &nbsp;<span class="cm-number">215.46</span> <span class="cm-number">0.000125</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">conc</span><span class="cm-operator">:</span><span class="cm-variable">Type</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">239.2</span> &nbsp; <span class="cm-number">239.2</span> &nbsp; <span class="cm-number">58.01</span> <span class="cm-number">0.001595</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp;<span class="cm-number">4</span> &nbsp; <span class="cm-number">16.5</span> &nbsp; &nbsp; <span class="cm-number">4.1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span><span class="cm-operator">:</span> <span class="cm-variable">Within</span> <span class="cm-comment"># 组内误差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> <span class="cm-number">30</span> &nbsp; &nbsp;<span class="cm-number">869</span> &nbsp; <span class="cm-number">28.97</span><span class="cm-tab" role="presentation" cm-text="	"> </span> &nbsp; &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 677px;"></div><div class="CodeMirror-gutters" style="display: none; height: 677px;"></div></div></div></pre><ul><li><span>方差分析表表明在0.01的水平下，主效应类型和浓度以及交叉效应类型x浓度都非常显著。</span></li><li><span>交互效应图：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">w1b1</span>,<span class="cm-variable">interaction.plot</span>(<span class="cm-variable">conc</span>,<span class="cm-variable">Type</span>,<span class="cm-variable">uptake</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rainbow</span>(<span class="cm-number">2</span>),<span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">16</span>,<span class="cm-number">18</span>),<span class="cm-variable">las</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Interaction Plot for Plant Type and Concentration"</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 012.png" alt="第9章 012" style="zoom: 60%;" /></p><ul><li><span>箱线图：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">las</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mar</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">10</span>,<span class="cm-number">4</span>,<span class="cm-number">4</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boxplot</span>(<span class="cm-variable">uptake</span> <span class="cm-operator">~</span> <span class="cm-variable">Type</span><span class="cm-operator">*</span><span class="cm-variable">conc</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">w1b1</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span>(<span class="cm-variable">c</span>(<span class="cm-string">"gold"</span>, <span class="cm-string">"green"</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Chilled Quebec and Mississippi Plants"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"CO2的吸收率"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 013.png" alt="第9章 013" style="zoom:50%;" /></p><ul><li><span>从以上任意一幅图都可以看出，魁北克省的植物比密西西比州的植物二氧化碳吸收率高，而且随着CO2，浓度的升高，差异越来越明显。</span></li></ul><h4 id='多元方差分析'><span>多元方差分析</span></h4><ul><li><span>当因变量(结果变量)不止一个时，可用多元方差分析(MANOVA )对它们同时进行分析。</span></li><li><span>数据集：</span><strong><span>MASS</span></strong><span>包里的</span><strong><span>UScereal</span></strong><span>数据集，我们将研究美国谷物中的卡路里、脂肪和糖含量是否会因为储存架位置的不同而发生变化：其中1代表底层货架，2代表中层货架，3代表顶层货架。卡路里、脂肪和糖含量是因变量，货架是三水平(1、2、3) 的自变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">MASS</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">usc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">UScereal</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cbind</span>(<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">calories</span>,<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">fat</span>,<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">sugars</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">y</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span>),<span class="cm-variable">FUN</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Group.1</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">V1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">V2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">V3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> <span class="cm-number">119.4774</span> <span class="cm-number">0.6621338</span> &nbsp;<span class="cm-number">6.295493</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">129.8162</span> <span class="cm-number">1.3413488</span> <span class="cm-number">12.507670</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> <span class="cm-number">180.1466</span> <span class="cm-number">1.9449071</span> <span class="cm-number">10.856821</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 因变量的方差和协方差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cov</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [,<span class="cm-number">1</span>] &nbsp; &nbsp;  [,<span class="cm-number">2</span>] &nbsp; &nbsp; &nbsp; [,<span class="cm-number">3</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>,] <span class="cm-number">3895.24210</span> <span class="cm-number">60.674383</span> <span class="cm-number">180.380317</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">2</span>,] &nbsp; <span class="cm-number">60.67438</span> &nbsp;<span class="cm-number">2.713399</span> &nbsp; <span class="cm-number">3.995474</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">3</span>,] &nbsp;<span class="cm-number">180.38032</span> &nbsp;<span class="cm-number">3.995474</span> &nbsp;<span class="cm-number">34.050018</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 单因素多元方差分析</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">manova</span>(<span class="cm-variable">y</span> <span class="cm-operator">~</span> <span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 汇总</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Pillai</span> <span class="cm-variable">approx</span> <span class="cm-variable">F</span> <span class="cm-variable">num</span> <span class="cm-variable">Df</span> <span class="cm-variable">den</span> <span class="cm-variable">Df</span> &nbsp; &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span> &nbsp;<span class="cm-number">2</span> <span class="cm-number">0.4021</span> &nbsp; <span class="cm-number">5.1167</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-number">122</span> <span class="cm-number">0.0001015</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> <span class="cm-number">62</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 单变量汇总</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary.aov</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Response</span> <span class="cm-number">1</span> <span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp; &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">50435</span> <span class="cm-number">25217.6</span> &nbsp;<span class="cm-number">7.8623</span> <span class="cm-number">0.0009054</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">62</span> <span class="cm-number">198860</span> &nbsp;<span class="cm-number">3207.4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Response</span> <span class="cm-number">2</span> <span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">18.44</span> &nbsp;<span class="cm-number">9.2199</span> &nbsp;<span class="cm-number">3.6828</span> <span class="cm-number">0.03081</span> <span class="cm-operator">*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">62</span> <span class="cm-number">155.22</span> &nbsp;<span class="cm-number">2.5035</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Response</span> <span class="cm-number">3</span> <span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> &nbsp;<span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp; <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span> &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">381.33</span> <span class="cm-number">190.667</span> &nbsp;<span class="cm-number">6.5752</span> <span class="cm-number">0.002572</span> <span class="cm-operator">**</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">62</span> <span class="cm-number">1797.87</span> &nbsp;<span class="cm-number">28.998</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1196px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1196px;"></div></div></div></pre><ul><li><span>manova() 函数能对组间差异进行多元检验。上面F值显著，说明三个组的营养成分测量值不同。注意shelf变量已经转成了因子变量，因此它可以代表一个分组变量。</span></li><li><span>由于多元检验是显著的，可以使用summary.aov()函数对每一个变量做</span><strong><span>单因素方差分析</span></strong><span>。</span></li></ul><h5 id='评估假设检验'><span>评估假设检验</span></h5><ul><li><span>单因素多元方差分析有</span><strong><span>两个前提</span></strong><span>假设，一个是</span><strong><span>多元正态性</span></strong><span>，一个是</span><strong><span>方差-协方差矩阵同质性</span></strong><span>。第一个假设即指因变量组合成的向量服从一个多元正态分布，可以使用QQ图来检验。如果点全部落在斜率为1、截距项为0的直线上，则表明数据服从多元正态分布。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">usc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">MASS</span><span class="cm-operator">::</span><span class="cm-variable">UScereal</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cbind</span>(<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">calories</span>,<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">fat</span>,<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">sugars</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">center</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">colMeans</span>(<span class="cm-variable">y</span>) <span class="cm-comment"># 计算各列的均值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">nrow</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ncol</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cov</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cov</span>(<span class="cm-variable">y</span>) <span class="cm-comment"># 计算协方差</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 用于计算数据点相对于多元正态分布均值的马氏距离</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mahalanobis</span>(<span class="cm-variable">y</span>,<span class="cm-variable">center</span>,<span class="cm-variable">cov</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># ppoints()用于生成指定数的概率点序列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">coord</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">qqplot</span>(<span class="cm-variable">qchisq</span>(<span class="cm-variable">ppoints</span>(<span class="cm-variable">n</span>),<span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span>),<span class="cm-variable">d</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"多元正态性的QQ图"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"马氏距离的平方"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">a</span><span class="cm-operator">=</span><span class="cm-number">0</span>,<span class="cm-variable">b</span><span class="cm-operator">=</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 交互性的标出部分点</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">identify</span>(<span class="cm-variable">coord</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span>,<span class="cm-variable">coord</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>,<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">row.names</span>(<span class="cm-variable">usc</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 014.png" alt="第9章 014" style="zoom:67%;" /></p><ul><li><span>可以发现有两个异常数据，可以删除后重新分析。</span></li><li><strong><span>方差-协方差矩阵同质性</span></strong><span>即指各组的协方差矩阵相同，通常可用</span><strong><span>Box’s M</span></strong><span>检验来评估该假设。</span></li><li><span>可以使用</span><strong><span>mvoutlier</span></strong><span>包的</span><strong><span>ap.plot()</span></strong><span>检验</span><strong><span>多元离群点</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9991px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">mvoutlier</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">outliner</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aq.plot</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Projection</span> <span class="cm-variable">to</span> <span class="cm-variable">the</span> <span class="cm-variable">first</span> <span class="cm-variable">and</span> <span class="cm-variable">second</span> <span class="cm-variable">robust</span> <span class="cm-variable">principal</span> <span class="cm-variable">components.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">of</span> <span class="cm-variable">total</span> <span class="cm-variable">variation</span> (<span class="cm-variable">explained</span> <span class="cm-variable">variance</span>)<span class="cm-operator">:</span> <span class="cm-number">0.9789888</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">outliner</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">outliers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">10</span>] <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">19</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">28</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">37</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">46</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">55</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">64</span>] <span class="cm-variable">FALSE</span> <span class="cm-variable">FALSE</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><p><img src="img\019_R语言实战\第9章\第9章 015.png" alt="第9章 015" style="zoom:67%;" /></p><h5 id='稳健多元方差分析'><span>稳健多元方差分析</span></h5><ul><li><span>如果多元正态性或者方差-协方差均值假设都</span><strong><span>不满足</span></strong><span>，或者你担心多元离群点，那么可以考虑用</span><strong><span>稳健</span></strong><span>或</span><strong><span>非参数</span></strong><span>版本的MANOVA检验。</span></li><li><span>稳健单因素使用</span><strong><span>rrcov</span></strong><span>包里的</span><strong><span>Wilks.test()</span></strong><span>实现。非参数使用</span><strong><span>vegan</span></strong><span>包里的</span><strong><span>adoins()</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">rrcov</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Wilks.test</span>(<span class="cm-variable">y</span>,<span class="cm-variable">usc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">shelf</span>,<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"mcd"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h4 id='使用回归来做方差分析'><span>使用回归来做方差分析</span></h4><ul><li><span>本章的所有分析都可以使用</span><strong><span>lm()</span></strong><span>来做。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">multcomp</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取因子的水平</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">levels</span>(<span class="cm-variable">cholesterol</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">trt</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"1time"</span> &nbsp;<span class="cm-string">"2times"</span> <span class="cm-string">"4times"</span> <span class="cm-string">"drugD"</span> &nbsp;<span class="cm-string">"drugE"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.aov</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aov</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit.aov</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">F</span> <span class="cm-variable">value</span> &nbsp; <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">F</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trt</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> <span class="cm-number">1351.4</span> &nbsp; <span class="cm-number">337.8</span> &nbsp; <span class="cm-number">32.43</span> <span class="cm-number">9.82e-13</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> &nbsp; <span class="cm-number">45</span> &nbsp;<span class="cm-number">468.8</span> &nbsp; &nbsp;<span class="cm-number">10.4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 会根据因子的数目（k）创建k-1个对照变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.lm</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit.lm</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp;<span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; <span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">6.5418</span> <span class="cm-operator">-</span><span class="cm-number">1.9672</span> <span class="cm-operator">-</span><span class="cm-number">0.0016</span> &nbsp;<span class="cm-number">1.8901</span> &nbsp;<span class="cm-number">6.6008</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;<span class="cm-comment"># k-1个对照变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; &nbsp;<span class="cm-number">5.782</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.021</span> &nbsp; <span class="cm-number">5.665</span> <span class="cm-number">9.78e-07</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trt2times</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.443</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.443</span> &nbsp; <span class="cm-number">2.385</span> &nbsp; <span class="cm-number">0.0213</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trt4times</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">6.593</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.443</span> &nbsp; <span class="cm-number">4.568</span> <span class="cm-number">3.82e-05</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trtdrugD</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">9.579</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.443</span> &nbsp; <span class="cm-number">6.637</span> <span class="cm-number">3.53e-08</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trtdrugE</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">15.166</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.443</span> &nbsp;<span class="cm-number">10.507</span> <span class="cm-number">1.08e-13</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">3.227</span> <span class="cm-variable">on</span> <span class="cm-number">45</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.7425</span>,<span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.7196</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> <span class="cm-number">32.43</span> <span class="cm-variable">on</span> <span class="cm-number">4</span> <span class="cm-variable">and</span> <span class="cm-number">45</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">9.819e-13</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 937px;"></div><div class="CodeMirror-gutters" style="display: none; height: 937px;"></div></div></div></pre><ul><li><span>变量trt2times表示水平1time和2times的一个对照。类似地，trt4times是1time和4times的一个对照，其余以此类推。从输出的概率值来看，各药物条件与第一组 (1time ) 显著不同。</span></li></ul><p><img src="img\019_R语言实战\第9章\第9章 016.png" referrerpolicy="no-referrer" alt="第9章 016"></p><ul><li><span>因子的第一个水平变成了参考组，随后的变量都以它为标准。可以通过</span><strong><span>contrasts()</span></strong><span> 函数查看它的编码过程。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">contrasts</span>(<span class="cm-variable">cholesterol</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">trt</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span><span class="cm-variable">times</span> <span class="cm-number">4</span><span class="cm-variable">times</span> <span class="cm-variable">drugD</span> <span class="cm-variable">drugE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span><span class="cm-variable">time</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span><span class="cm-variable">times</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span><span class="cm-variable">times</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugD</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">drugE</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>若患者处于drugD条件下，变量drugD等于1，其他变量2times、4times和drugE都等于0无需列出第一组的变量值，因为其他四个变量都为0，这已经说明患者处于1time条件。</span></li><li><span>可以在lm()中修改对照的方法。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit.lm</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">cholesterol</span>, <span class="cm-variable">contrasts</span><span class="cm-operator">=</span><span class="cm-string">"contr.helmert"</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><span>使用options()修改。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">contrasts</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"contr.SAS"</span>, <span class="cm-string">"contr.helmert"</span>)) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><span>设定无序因子的默认对比方法为contr.SAS，有序因子的默认对比方法为contr.helmert。</span></li></ul><h3 id='第10章-功效分析'><span>第10章 功效分析</span></h3><ul><li><span>功效分析可以帮助在给定置信度的情况下，判断检测到给定效应值时所需的</span><strong><span>样本量</span></strong><span>。反过来它也可以帮助你在给定置信度水平情况下，计算在某样本量内能</span><strong><span>检测到给定效应值的概率</span></strong><span>。</span></li><li><span>第一类错误：弃真。</span></li><li><span>第二类错误：保假。</span></li></ul><p><img src="img\019_R语言实战\第10章\第10章 001.png" alt="第10章 001" style="zoom: 50%;" /></p><ul><li><p><span>研究者通常关注四个量：样本大小、显著性水平、功效和效应值。</span></p><ul><li><span>样本大小指的是实验设计中每种条件/组中观测的数目。</span></li><li><span>显著性水平(也称为alpha)由Ⅰ型错误的概率来定义。也可以把它看作发现效应</span><strong><span>不发生的概率</span></strong><span>。</span></li><li><span>功效通过1减去Ⅱ型错误的概率来定义。我们可以把它看作真实效应</span><strong><span>发生的概率</span></strong><span>。</span></li><li><span>效应值指的是在备择或研究假设下效应的量。效应值的表达式依赖于假设检验中使用的统计方法。</span></li></ul></li></ul><p><img src="img\019_R语言实战\第10章\第10章 002.png" alt="第10章 002" style="zoom:50%;" /></p><ul><li><span>虽然研究者可以直接控制样本大小和显著性水平，但是对于功效和效应值的影响却是间接的。例如，放宽显著性水平时(换句话说，使得拒绝原假设更容易时 )，检验的功效便会增加。类似地，样本量增加，功效也会增加。</span></li><li><span>通常来说，研究目标是维持一个可接受的显著性水平，尽量使用较少的样本，然后最大化统计检验的功效。</span></li><li><span>四个量(样本大小、显著性水平、功效和效应值) 紧密相关，给定其中任意三个量，便可推算第四个量。</span></li></ul><h4 id='使用pwr包做功效分析'><span>使用pwr包做功效分析</span></h4><ul><li><span>对于每个函数，用户可以设定四个量中的三个量，第四个量将由软件计算出来。</span></li></ul><p><img src="img\019_R语言实战\第10章\第10章 003.png" referrerpolicy="no-referrer" alt="第10章 003"></p><h5 id='t检验-2'><span>t检验</span></h5><ul><li><p><span>样本大小相同：</span><strong><span>pwr.t.test()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.t.test</span>(<span class="cm-variable">n</span><span class="cm-operator">=</span>, <span class="cm-variable">d</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span>, <span class="cm-variable">alternative</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><span>n为样本大小，d为标准化的均值差，sig.level为显著性水平，power为功效水平。</span></li><li><span>type为检验类型：双样本t检验 (&quot;two.sample&quot;)、单样本t检验 (&quot;one.sample&quot;) 或相依样本t检验(“paired”)。默认为双样本t检验。</span></li><li><span>alternative指统计检验是双侧检验 (&quot;two.sided&quot;) 还是单侧检验 (&quot;less&quot;或greater&quot;)。默认为双侧检验。</span></li></ul><p><img src="img\019_R语言实战\第10章\第10章 004.png" alt="第10章 004" style="zoom:50%;" /></p></li><li><p><span>如果你根据过去的经验知道反应时间有1.25s的标准偏差，并认定反应时间1s的差值是巨大的差异，那么在这个研究中，可设定要检测的效应值为d=1/1.25=0.8或者更大。另外，如果差异存在，你希望有90%的把握检测到它，由于随机变异性的存在，你也希望有95%的把握不会误报差异显著。这时，对于该研究需要多少受试者呢？</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.t.test</span>(<span class="cm-variable">d</span><span class="cm-operator">=</span><span class="cm-number">0.8</span>,<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>,<span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">0.9</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"two.sample"</span>,<span class="cm-variable">al</span><span class="cm-operator">=</span><span class="cm-string">"two.sided"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Two</span><span class="cm-operator">-</span><span class="cm-variable">sample</span> <span class="cm-variable">t</span> <span class="cm-variable">test</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">33.82555</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">d</span> <span class="cm-operator">=</span> <span class="cm-number">0.8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alternative</span> <span class="cm-operator">=</span> <span class="cm-variable">two.sided</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NOTE</span><span class="cm-operator">:</span> <span class="cm-variable">n</span> <span class="cm-variable">is</span> <span class="cm-variable">number</span> <span class="cm-keyword">in</span> <span class="cm-operator">*</span><span class="cm-variable">each</span><span class="cm-operator">*</span> <span class="cm-variable">group</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>由结果可知，需要34组实验（68人）。</span></li><li><span>计算功效：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.t.test</span>(<span class="cm-variable">n</span><span class="cm-operator">=</span><span class="cm-number">20</span>,<span class="cm-variable">d</span><span class="cm-operator">=</span><span class="cm-number">0.5</span>,<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.01</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"two.sample"</span>,<span class="cm-variable">al</span><span class="cm-operator">=</span><span class="cm-string">"two.sided"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Two</span><span class="cm-operator">-</span><span class="cm-variable">sample</span> <span class="cm-variable">t</span> <span class="cm-variable">test</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">d</span> <span class="cm-operator">=</span> <span class="cm-number">0.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.1439551</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alternative</span> <span class="cm-operator">=</span> <span class="cm-variable">two.sided</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NOTE</span><span class="cm-operator">:</span> <span class="cm-variable">n</span> <span class="cm-variable">is</span> <span class="cm-variable">number</span> <span class="cm-keyword">in</span> <span class="cm-operator">*</span><span class="cm-variable">each</span><span class="cm-operator">*</span> <span class="cm-variable">group</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><p><span>结果表明，在0.01的先验显著性水平下，每组20个受试者（40人），因变量的标准差为1.25s，有低于</span><strong><span>14%</span></strong><span>（功效）的可能性断言差值为0.625s或者不显著 (d=.5=0.625/1.25 )。换句话说，你将有86%的可能性错过你要寻找的效应值。因此，可能需要慎重考虑要投入到该研穷中的时间和精力。</span></p></li><li><p><span>样本大小不同：</span><strong><span>pwr.t2n.test()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.t2n.test</span>(<span class="cm-variable">n1</span><span class="cm-operator">=</span>, <span class="cm-variable">n2</span><span class="cm-operator">=</span>, <span class="cm-variable">d</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>, <span class="cm-variable">alternative</span><span class="cm-operator">=</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><h5 id='方差分析'><span>方差分析</span></h5><ul><li><p><strong><span>pwr.anova.test()</span></strong><span>函数可以对平衡单因素方差分析进行功效分析。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.anova.test</span>(<span class="cm-variable">k</span><span class="cm-operator">=</span>, <span class="cm-variable">n</span><span class="cm-operator">=</span>, <span class="cm-variable">f</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><span>k是组的个数，n是各组中的样本大小。</span></li></ul><p><img src="img\019_R语言实战\第10章\第10章 005.png" alt="第10章 005" style="zoom:50%;" /></p></li><li><p><span>现对五个组做单因素方差分析，要达到0.8的功效，效应值为0.25并选择0.05的显著性水平，计算各组需要的样本大小。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.anova.test</span>(<span class="cm-variable">k</span><span class="cm-operator">=</span><span class="cm-number">5</span>,<span class="cm-variable">f</span><span class="cm-operator">=</span><span class="cm-number">0.25</span>,<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>,<span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">0.8</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Balanced</span> <span class="cm-variable">one</span><span class="cm-operator">-</span><span class="cm-variable">way</span> <span class="cm-variable">analysis</span> <span class="cm-variable">of</span> <span class="cm-variable">variance</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">39.1534</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">f</span> <span class="cm-operator">=</span> <span class="cm-number">0.25</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NOTE</span><span class="cm-operator">:</span> <span class="cm-variable">n</span> <span class="cm-variable">is</span> <span class="cm-variable">number</span> <span class="cm-keyword">in</span> <span class="cm-variable">each</span> <span class="cm-variable">group</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>总样本大小为5*40，即200。注意，本例中需要估计在同方差时五个组的均值。</span></li></ul><h5 id='相关性'><span>相关性</span></h5><ul><li><p><strong><span>pwr.r.test()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.r.test</span>(<span class="cm-variable">n</span><span class="cm-operator">=</span>, <span class="cm-variable">r</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>, <span class="cm-variable">alternative</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>n是观测数目，r是效应值(通过线性相关系数衡量)，sig.level是显著性水平，power为功效水平，alternative指统计检验是双侧检验 (&quot;two.sided&quot;) 还是单侧检验 (&quot;less&quot;或greater&quot;)。</span></p></li><li><p><span>假定正在研究抑郁与孤独的关系。你的零假设和研究假设为：H0：p ≤ 0.25和H1：p &gt; 0.25</span></p><p><span>p是两个心理变量的总体相关性大小。你设定显著性水平为0.05，而且如果H0，是错误的，你想有90%的信心拒绝H0，那么研究需要多少观测呢？</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.r.test</span>(<span class="cm-variable">r</span><span class="cm-operator">=</span><span class="cm-number">0.25</span>,<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>,<span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">0.9</span>,<span class="cm-variable">al</span><span class="cm-operator">=</span><span class="cm-string">"gr"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">approximate</span> <span class="cm-variable">correlation</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> (<span class="cm-variable">arctangh</span> <span class="cm-variable">transformation</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">133.2803</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-number">0.25</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alternative</span> <span class="cm-operator">=</span> <span class="cm-variable">greater</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>由结果可知，需要134个样本。</span></li></ul><h5 id='线性模型'><span>线性模型</span></h5><ul><li><p><span>对于线性模型(比如多元回归 )，</span><strong><span>pwr.f2.test()</span></strong><span>函数可以完成相应的功效分析。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.f2.test</span>(<span class="cm-variable">u</span><span class="cm-operator">=</span>, <span class="cm-variable">v</span><span class="cm-operator">=</span>, <span class="cm-variable">f2</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>u和v分别是分子自由度和分母自由度，f2是效应值。</span></p></li></ul><p><img src="img\019_R语言实战\第10章\第10章 006.png" alt="第10章 006" style="zoom:50%;" /></p><ul><li><span>当要评价一组预测变量对结果的影响程度时，适宜用第一个公式来计算f2; 当要评价一组预测变量对结果的影响超过第二组变量( 协变量 )多少时，适宜用第二个公式。</span></li><li><span>现假设你想研究老板的领导风格对员工满意度的影响，是否超过薪水和工作小费对员工满意度的影响。领导风格可用四个变量来评估，薪水和小费与三个变量(前面4个的其中3个)有关。过去的经验表明，薪水和小费能够解释约30%的员工满意度的方差。而从现实出发，领导风格至少能解释35%的方差。假定显著性水平为0.05，那么在90%的置信度情况下，你需要多少受试者才能得到这样的方差贡献率呢?</span></li><li><span>此处，sig.level=0.05，power=0.90，u=3 ( 总预测变量数减去集合B中的预测变量数，4 - 1 = 3 )，效应值为f2=(0.35-0.30)/(1-0.35) = 0.0769。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.f2.test</span>(<span class="cm-variable">u</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">f2</span><span class="cm-operator">=</span><span class="cm-number">0.0769</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">0.90</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Multiple</span> <span class="cm-variable">regression</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">u</span> <span class="cm-operator">=</span> <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-number">184.2426</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">f2</span> <span class="cm-operator">=</span> <span class="cm-number">0.0769</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.9</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>在多元回归中，分母的自由度等于N-k-1,N是总观测数,k是预测变量数。本例中，N-7-1=185，即需要样本大小N=185+7+1=193。</span></li></ul><h5 id='比例检验'><span>比例检验</span></h5><ul><li><p><span>当比较两个比例时，可使用</span><strong><span>pwr.2p.test()</span></strong><span>函数进行功效分析。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.2p.test</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span>, <span class="cm-variable">n</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>h是效应值，n是各组相同的样本量。</span></p><p><img src="img\019_R语言实战\第10章\第10章 007.png" alt="第10章 007" style="zoom:50%;" /></p><ul><li><span>可以使用</span><strong><span>ES.h(p1,p2)</span></strong><span>函数计算。</span></li></ul><p><span>各组样本数不同时，使用</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.2p2n.test</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span>, <span class="cm-variable">n1</span><span class="cm-operator">=</span>, <span class="cm-variable">n2</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>假定你对某流行药物能缓解60%使用者的症状感到怀疑。而一种更贵的新药如果能缓解65%使用者的症状，就会被投放到市场中。此时，在研究中你需要多少受试者才能够检测到两种药物存在这一特定的差异?假设你想有90%的把握得出新药更有效的结论，并且希望有95%的把握不会误得结论。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.2p.test</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span><span class="cm-variable">ES.h</span>(<span class="cm-number">.65</span>, <span class="cm-number">.6</span>), <span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">.05</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">.9</span>,<span class="cm-variable">al</span><span class="cm-operator">=</span><span class="cm-string">"gr"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Difference</span> <span class="cm-variable">of</span> <span class="cm-variable">proportion</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> <span class="cm-keyword">for</span> <span class="cm-variable">binomial</span> <span class="cm-variable">distribution</span> (<span class="cm-variable">arcsine</span> <span class="cm-variable">transformation</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">h</span> <span class="cm-operator">=</span> <span class="cm-number">0.1033347</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">1604.007</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alternative</span> <span class="cm-operator">=</span> <span class="cm-variable">greater</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NOTE</span><span class="cm-operator">:</span> <span class="cm-variable">same</span> <span class="cm-variable">sample</span> <span class="cm-variable">sizes</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><ul><li><span>由结果可知，需要1605人。</span></li></ul><h5 id='卡方检验'><span>卡方检验</span></h5><ul><li><p><span>卡方检验常常用来评价</span><strong><span>两个类别型变量</span></strong><span>的关系。典型的零假设是变量之间独立，备择假设是不独立。</span><strong><span>pwr.chisg.test()</span></strong><span>函数可以评估卡方检验的功效、效应值和所需的样本大小。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pwr.chisq.test</span>(<span class="cm-variable">w</span><span class="cm-operator">=</span>, <span class="cm-variable">N</span><span class="cm-operator">=</span>, <span class="cm-variable">df</span><span class="cm-operator">=</span>, <span class="cm-variable">sig.level</span><span class="cm-operator">=</span>, <span class="cm-variable">power</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>w是效应值，N是总样本大小，df是自由度。</span></p></li></ul><p><img src="img\019_R语言实战\第10章\第10章 008.png" alt="第10章 008" style="zoom: 67%;" /></p><ul><li><span>函数</span><strong><span>ES.w2(P)</span></strong><span>可以计算双因素列联表中备择假设的效应值，P是一个假设的双因素概率表。</span></li><li><span>举一个简单的例子，假设你想研究人种与工作晋升的关系。你预期样本中70%是白种人，10%是美国黑人，20%是西班牙裔人。而且，你认为相比30%的美国黑人和50%的西班牙裔人，60%的白种人更容易晋升。</span></li></ul><p><img src="img\019_R语言实战\第10章\第10章 009.png" referrerpolicy="no-referrer" alt="第10章 009"></p><ul><li><span>从表中看到，你预期总人数的42%是晋升的白种人(0.42=0.70x0.60 ，总人数的7%是未晋的美国黑人 (0.07=0.10x0.70 )。让我们取0.05的显著性水平和0.90的预期功效水平。双因素列联表的自由度为(r-1)(C-1)，r是行数，c是列数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 卡方检验（两个类别）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">prob</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">c</span>(<span class="cm-number">0.42</span>,<span class="cm-number">0.28</span>,<span class="cm-number">0.03</span>,<span class="cm-number">0.07</span>,<span class="cm-number">0.10</span>,<span class="cm-number">0.10</span>),<span class="cm-variable">byrow</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">nc</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ES.w2</span>(<span class="cm-variable">prob</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.1853198</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pwr.chisq.test</span>(<span class="cm-variable">w</span><span class="cm-operator">=</span><span class="cm-variable">ES.w2</span>(<span class="cm-variable">prob</span>),<span class="cm-variable">df</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>,<span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">0.9</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Chi</span> <span class="cm-variable">squared</span> <span class="cm-variable">power</span> <span class="cm-variable">calculation</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">w</span> <span class="cm-operator">=</span> <span class="cm-number">0.1853198</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">N</span> <span class="cm-operator">=</span> <span class="cm-number">368.4528</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sig.level</span> <span class="cm-operator">=</span> <span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">power</span> <span class="cm-operator">=</span> <span class="cm-number">0.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NOTE</span><span class="cm-operator">:</span> <span class="cm-variable">N</span> <span class="cm-variable">is</span> <span class="cm-variable">the</span> <span class="cm-variable">number</span> <span class="cm-variable">of</span> <span class="cm-variable">observations</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><ul><li><span>需要369个样本。</span></li></ul><h5 id='在新情况中选择合适的效应值'><span>在新情况中选择合适的效应值</span></h5><p><img src="img\019_R语言实战\第10章\第10章 010.png" referrerpolicy="no-referrer" alt="第10章 010"></p><ul><li><span>单因素ANOVA中检测显著效应所需的样本大小：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制各效应与样本数的图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">pwr</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">effs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">seq</span>(<span class="cm-number">0.1</span>,<span class="cm-number">0.5</span>,<span class="cm-number">0.01</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">samsize</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">length</span>(<span class="cm-variable">effs</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 5个分组的单因素方差分析</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">result</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">pwr.anova.test</span>(<span class="cm-variable">k</span><span class="cm-operator">=</span><span class="cm-number">5</span>,<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>,<span class="cm-variable">f</span><span class="cm-operator">=</span><span class="cm-variable">effs</span>[<span class="cm-variable">i</span>],<span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-number">0.9</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">samsize</span>[<span class="cm-variable">i</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ceiling</span>(<span class="cm-variable">result</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">n</span>) <span class="cm-comment"># 不小于的最小整数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">samsize</span>,<span class="cm-variable">effs</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"l"</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"效应"</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"样本数（每个单元格）"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"One Way ANOVA with Power=.90 and Alpha=.05"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p><img src="img\019_R语言实战\第10章\第10章 011.png" alt="第10章 011" style="zoom:60%;" /></p><ul><li><span>实验设计中，这样的图形有助于估计不同条件时的影响值。例如，从图形可以看到各组样本量高于200个观测时，再增加样本已经效果不大了。</span></li></ul><h4 id='绘制功效分析图'><span>绘制功效分析图</span></h4><ul><li><span>假设对于相关系数统计显著性的检验，你想计算一系列效应值和功效水平下所需的样本量，此时可用</span><strong><span>powr.r.test()</span></strong><span> 函数和for循环来完成。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制功效分析图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">pwr</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 生成相关系数（效应值）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">r</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">seq</span>(<span class="cm-number">0.1</span>,<span class="cm-number">0.5</span>,<span class="cm-number">0.01</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nr</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">length</span>(<span class="cm-variable">r</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 生成功效</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">seq</span>(<span class="cm-number">0.4</span>,<span class="cm-number">0.9</span>,<span class="cm-number">0.1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">np</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">length</span>(<span class="cm-variable">p</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 生成一个全零矩阵，用于存储样本数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">samsize</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">array</span>(<span class="cm-variable">numeric</span>(<span class="cm-variable">nr</span><span class="cm-operator">*</span><span class="cm-variable">np</span>),<span class="cm-variable">dim</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-variable">nr</span>,<span class="cm-variable">np</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 生成各个功效和效应值对应的样本数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nr</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span>(<span class="cm-variable">j</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">np</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">result</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">pwr.r.test</span>(<span class="cm-variable">r</span><span class="cm-operator">=</span><span class="cm-variable">r</span>[<span class="cm-variable">i</span>],<span class="cm-variable">sig.level</span><span class="cm-operator">=</span><span class="cm-number">0.05</span>,<span class="cm-variable">power</span><span class="cm-operator">=</span><span class="cm-variable">p</span>[<span class="cm-variable">j</span>],<span class="cm-variable">al</span><span class="cm-operator">=</span><span class="cm-string">"two.sided"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">samsize</span>[<span class="cm-variable">i</span>,<span class="cm-variable">j</span>] <span class="cm-operator">=</span> <span class="cm-variable">result</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">n</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取极值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xrange</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">range</span>(<span class="cm-variable">r</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">yrange</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">round</span>(<span class="cm-variable">range</span>(<span class="cm-variable">samsize</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制空坐标轴</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">xrange</span>,<span class="cm-variable">yrange</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"n"</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"相关系数"</span>,<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"样本数"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制各功效曲线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cols</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rainbow</span>(<span class="cm-variable">np</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">np</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lines</span>(<span class="cm-variable">r</span>,<span class="cm-variable">samsize</span>[,<span class="cm-variable">i</span>],<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"l"</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">cols</span>[<span class="cm-variable">i</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制网格线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span><span class="cm-variable">seq</span>(<span class="cm-number">0</span>,<span class="cm-variable">yrange</span>[<span class="cm-number">2</span>],<span class="cm-number">50</span>),<span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"gray89"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">abline</span>(<span class="cm-variable">v</span><span class="cm-operator">=</span><span class="cm-variable">seq</span>(<span class="cm-variable">xrange</span>[<span class="cm-number">1</span>],<span class="cm-variable">xrange</span>[<span class="cm-number">2</span>],<span class="cm-number">0.02</span>), <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"gray89"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">title</span>(<span class="cm-string">"Sample Size Estimation for Correlation Studies</span><span class="cm-string-2">\n</span><span class="cm-string">Sig=0.05 (Two-tailed)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">legend</span>(<span class="cm-string">"topright"</span>, <span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Power"</span>, <span class="cm-variable">as.character</span>(<span class="cm-variable">p</span>),<span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-variable">cols</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 832px;"></div><div class="CodeMirror-gutters" style="display: none; height: 832px;"></div></div></div></pre><p><img src="img\019_R语言实战\第10章\第10章 012.png" alt="第10章 012" style="zoom: 67%;" /></p><h4 id='其他软甲包'><span>其他软甲包</span></h4><p><img src="img\019_R语言实战\第10章\第10章 013.png" referrerpolicy="no-referrer" alt="第10章 013"><img src="img\019_R语言实战\第10章\第10章 014.png" referrerpolicy="no-referrer" alt="第10章 014"></p><h3 id='第11章-中级绘图'><span>第11章 中级绘图</span></h3><h4 id='散点图'><span>散点图</span></h4><ul><li><span>使用</span><strong><span>plot()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"mpg和wt的散点图"</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"车重"</span>,<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"每加仑英里数"</span>,<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">19</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">abline</span>(<span class="cm-variable">lm</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span>),<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># lowess()进行局部加权回归分析，不然会形成首尾相连的折线图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lines</span>(<span class="cm-variable">lowess</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>),<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 001.png" alt="第11章 001" style="zoom:50%;" /></p><ul><li><strong><span>lowess()</span></strong><span>函数则用来添加一条平滑曲线，该平滑曲线拟合是一种基于局部加权多项式回归的非参数方法。</span></li></ul><p><img src="img\019_R语言实战\第11章\第11章 002.png" referrerpolicy="no-referrer" alt="第11章 002"></p><ul><li><span>增强的散点图：</span><strong><span>car</span></strong><span>包里的</span><strong><span>scatterplot()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">scatterplot</span>(<span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">wt</span> <span class="cm-operator">|</span> <span class="cm-variable">cyl</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"MPG 和 wt通过cyl分组"</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"wt"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"mpg"</span>,<span class="cm-variable">legend</span><span class="cm-operator">=</span><span class="cm-variable">T</span>,<span class="cm-variable">boxplot</span><span class="cm-operator">=</span><span class="cm-string">"xy"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 003.png" alt="第11章 003" style="zoom:67%;" /></p><ul><li><span>各子集会通过颜色和图形符号加以区分，并同时绘制线性拟合和平滑拟合曲线。</span></li></ul><h5 id='散点图矩阵'><span>散点图矩阵</span></h5><ul><li><span>散点图可以一次对两个定量变量间的关系进行可视化。但是如果想观察下汽车里程、车重、排量(立方英寸)和后轴比间的二元关系，该怎么做呢?一种途径就是将六幅散点图绘制到一个矩阵中（散点图矩阵）。</span></li><li><strong><span>pairs()</span></strong><span>可以创建基本的散点图矩阵。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># mpg油耗、disp排量、drat后轴比、wt车重</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pairs</span>(<span class="cm-operator">~</span><span class="cm-variable">mpg</span><span class="cm-operator">+</span><span class="cm-variable">disp</span><span class="cm-operator">+</span><span class="cm-variable">drat</span><span class="cm-operator">+</span><span class="cm-variable">wt</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"基本的散点图矩阵"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 004.png" alt="第11章 004" style="zoom:67%;" /></p><ul><li><span>由于图像沿对角线对此，因此可以添加参数，只显示上三角（lower.panel = NULL）或下三角（upper.panel = NULL）</span></li><li><strong><span>car</span></strong><span>包下的</span><strong><span>scatterplotMatrix()</span></strong><span>也可以绘制散点图矩阵，并添加拟合曲线，主对角线有轴须图、和密度曲线。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">scatterplotMatrix</span>(<span class="cm-operator">~</span><span class="cm-variable">mpg</span><span class="cm-operator">+</span><span class="cm-variable">disp</span><span class="cm-operator">+</span><span class="cm-variable">drat</span><span class="cm-operator">+</span><span class="cm-variable">wt</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"car包的散点图矩阵"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 005.png" alt="第11章 005" style="zoom:67%;" /></p><ul><li><span>R提供了许多其他的方式来创建散点图矩阵。你可能想探索</span><strong><span>glus</span></strong><span>包中的</span><strong><span>cpars()</span></strong><span>函数</span><strong><span>TeachingDemos</span></strong><span>包中的</span><strong><span>pairs2()</span></strong><span>函数，</span><strong><span>HH</span></strong><span>包中的</span><strong><span>xysplom()</span></strong><span>函数，</span><strong><span>ResourceSelection</span></strong><span>包中的</span><strong><span>kepairs()</span></strong><span>函数和</span><strong><span>SMPracticals</span></strong><span>包中的</span><strong><span>pairs.mod()</span></strong><span>函数。每个包都加人了自已独特的曲线。</span></li></ul><h5 id='高密度散点图'><span>高密度散点图</span></h5><ul><li><span>当数据点重叠很严重时，用散点图来观察变量关系就显得“力不从心”了。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">10000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">c1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">rnorm</span>(<span class="cm-variable">n</span>, <span class="cm-variable">mean</span><span class="cm-operator">=</span><span class="cm-number">0</span>, <span class="cm-variable">sd</span><span class="cm-operator">=</span><span class="cm-number">.5</span>), <span class="cm-variable">ncol</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">c2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">rnorm</span>(<span class="cm-variable">n</span>, <span class="cm-variable">mean</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">sd</span><span class="cm-operator">=</span><span class="cm-number">2</span>), <span class="cm-variable">ncol</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rbind</span>(<span class="cm-variable">c1</span>, <span class="cm-variable">c2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">mydata</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">mydata</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"x"</span>, <span class="cm-string">"y"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mydata</span>,<span class="cm-variable">plot</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">19</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Scatter Plot with 10,000 Observations"</span>)) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 006.png" alt="第11章 006" style="zoom:67%;" /></p><ul><li><span>针对这种情况，R提供了一些解决办法。你可以使用封箱、颜色和透明度来指明图中任意点上重看点的数目。</span></li><li><strong><span>smoothScatter()</span></strong><span>函数可利用</span><strong><span>核密度估计</span></strong><span>生成用颜色密度来表示点分布的散点图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mydata</span>,<span class="cm-variable">smoothScatter</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"平滑密度的散点图"</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 007.png" alt="第11章 007" style="zoom:67%;" /></p><ul><li><strong><span>hexbin</span></strong><span>包中的</span><strong><span>hexbin()</span></strong><span>函数将二元变量的</span><strong><span>封箱</span></strong><span>放到六边形单元格中( 图形比名称更直观 )。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"hexbin"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">hexbin</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">png</span>(<span class="cm-string">"d:/1.png"</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">1000</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">1000</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mydata</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">bin</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">hexbin</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">xbins</span><span class="cm-operator">=</span><span class="cm-number">50</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-variable">bin</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Hexagonal Binning with 10,000 Observations"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 008.png" alt="第11章 008" style="zoom:33%;" /></p><h5 id='三维散点图'><span>三维散点图</span></h5><ul><li><p><span>散点图和散点图矩阵展示的都是二元变量关系，想一次对三个定量变量的交互关系进行可视化可以使用三维散点图。</span></p></li><li><p><span>使用</span><strong><span>scatterplot3d</span></strong><span>包里的</span><strong><span>scatterplot3d()</span></strong><span>进行绘制。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">scatterplot3d</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">z</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>x被绘制在水平轴上，y被绘制在竖直轴上，z被绘制在透视轴上。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">scatterplot3d</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">scatterplot3d</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">disp</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Basic 3D Scatter Plot"</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 009.png" alt="第11章 009" style="zoom: 67%;" /></p><ul><li><span>添加其他参数：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">scatterplot3d</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">disp</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">16</span>,<span class="cm-variable">highlight.3d</span><span class="cm-operator">=</span><span class="cm-variable">T</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"h"</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"3D Scatter Plot with Vertical Lines"</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 010.png" alt="第11章 010" style="zoom: 67%;" /></p><ul><li><span>添加回归平面：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">s3d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scatterplot3d</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">disp</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">16</span>,<span class="cm-variable">highlight.3d</span><span class="cm-operator">=</span><span class="cm-variable">T</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"h"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"3D Scatter Plot with Vertical Lines and Regression Plane"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">wt</span><span class="cm-operator">+</span><span class="cm-variable">disp</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">s3d</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">plane3d</span>(<span class="cm-variable">fit</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 011.png" alt="第11章 011" style="zoom: 67%;" /></p><h5 id='旋转三维散点图'><span>旋转三维散点图</span></h5><ul><li><p><strong><span>rgl</span></strong><span>包的</span><strong><span>plot3d()</span></strong><span>可以创建交互式的三维散点图。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot3d</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">z</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">rgl</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">plot3d</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">disp</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>,<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">5</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 012.png" alt="第11章 012" style="zoom: 33%;" /></p><ul><li><span>也可以使用</span><strong><span>car</span></strong><span>包里的</span><strong><span>scatter3d()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">scatter3d</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">disp</span>,<span class="cm-variable">mpg</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 013.png" alt="第11章 013" style="zoom:33%;" /></p><h5 id='气泡图'><span>气泡图</span></h5><ul><li><p><span>气泡图：先创建一个二维散点图，然后用点的大小来代表第三个变量的值。</span></p></li><li><p><span>可以使用</span><strong><span>symbols()</span></strong><span>函数创建气泡图。该函数可以在指定的(x, y)坐标上绘制圆圈图、方形星形图、温度计图和箱线图。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">symbols</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">circle</span><span class="cm-operator">=</span><span class="cm-variable">radius</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><span>如果想将第三个变量变为面积而不是半径，可以将第三个参数变为</span><strong><span>sqrt(z/pi)</span></strong><span>，inches是比例因子，控制着圆圈大小(默认最大圆圈为1英寸)。</span></li></ul></li><li><p><span>应用到mtcars数据集上，x轴代表车重，y轴代表每加仑英里数，气泡大小代表发动机排量。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">mtcars</span>,{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">r</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sqrt</span>(<span class="cm-variable">disp</span><span class="cm-operator">/</span><span class="cm-variable">pi</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">symbols</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">circles</span><span class="cm-operator">=</span><span class="cm-variable">r</span>,<span class="cm-variable">inches</span><span class="cm-operator">=</span><span class="cm-number">0.3</span>,<span class="cm-variable">fg</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">bg</span><span class="cm-operator">=</span><span class="cm-string">"green"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"气泡图，大小代表排量"</span>,<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"mpg"</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"wt"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">text</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">row.names</span>(<span class="cm-variable">mtcars</span>),<span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">0.6</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 014.png" alt="第11章 014" style="zoom:33%;" /></p><h4 id='折线图'><span>折线图</span></h4><ul><li><span>如果将散点图上的点从左往右连接起来，就会得到一个折线图。</span></li><li><span>数据集：</span><strong><span>Orange</span></strong><span>包含五种橘树的树龄和年轮数据。</span></li><li><span>第一种橘树的散点图和折线图：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">subset</span>(<span class="cm-variable">Orange</span>,<span class="cm-variable">Tree</span><span class="cm-operator">==</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">t1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span>,<span class="cm-variable">t1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">circumference</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"年龄(天)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"年轮(毫米)"</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"第一种橘树"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">t1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span>,<span class="cm-variable">t1</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">circumference</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"年龄(天)"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"年轮(毫米)"</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"第一种橘树"</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 015.png" alt="第11章 015" style="zoom: 67%;" /></p><ul><li><p><span>折线图一般有两种绘制形式：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lines</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第11章\第11章 016.png" referrerpolicy="no-referrer" alt="第11章 016"></p><ul><li><span>各种曲线展示：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">png</span>(<span class="cm-string">"d:/1.png"</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">1080</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">560</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">4</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">types</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"p"</span>,<span class="cm-string">"l"</span>,<span class="cm-string">"o"</span>,<span class="cm-string">"b"</span>,<span class="cm-string">"c"</span>,<span class="cm-string">"s"</span>,<span class="cm-string">"S"</span>,<span class="cm-string">"h"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-variable">t</span> <span class="cm-keyword">in</span> <span class="cm-variable">types</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>,<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-variable">t</span>,<span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev.off</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 017.png" alt="第11章 017" style="zoom: 50%;" /></p><ul><li><span>绘制五种橘树随时间推移的生长状况：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">or</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">Orange</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将因子变为向量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">or</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Tree</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.numeric</span>(<span class="cm-variable">or</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Tree</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">max</span>(<span class="cm-variable">or</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Tree</span>) <span class="cm-comment"># 树的种类</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xrange</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">range</span>(<span class="cm-variable">or</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">yrange</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">range</span>(<span class="cm-variable">or</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">circumference</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制空坐标轴</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">xrange</span>,<span class="cm-variable">yrange</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"n"</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"年龄(天)"</span>,<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"年轮(毫米)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cols</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rainbow</span>(<span class="cm-variable">nt</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">linetypes</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nt</span> <span class="cm-comment">#线条类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plotchars</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">seq</span>(<span class="cm-number">18</span>,<span class="cm-number">18</span><span class="cm-operator">+</span><span class="cm-variable">nt</span>,<span class="cm-number">1</span>) <span class="cm-comment"># 点的类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 绘制折线图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nt</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">tree</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">subset</span>(<span class="cm-variable">Orange</span>,<span class="cm-variable">Tree</span> <span class="cm-operator">==</span> <span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">lines</span>(<span class="cm-variable">tree</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">age</span>,<span class="cm-variable">tree</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">circumference</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-variable">linetypes</span>[<span class="cm-variable">i</span>],<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">plotchars</span>[<span class="cm-variable">i</span>],<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">cols</span>[<span class="cm-variable">i</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">title</span>(<span class="cm-string">"树木生长"</span>,<span class="cm-string">"折线图样例"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">legend</span>(<span class="cm-variable">xrange</span>[<span class="cm-number">1</span>],<span class="cm-variable">yrange</span>[<span class="cm-number">2</span>],<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nt</span>,<span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">0.8</span>,<span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"tree"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">cols</span>,<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">plotchars</span>,<span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-variable">linetypes</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 018.png" alt="第11章 018" style="zoom: 67%;" /></p><h4 id='关系图'><span>关系图</span></h4><ul><li><p><span>相关系数矩阵是多元统计分析的一个基本方面。哪些被考察的变量与其他变量相关性很强，而哪些并不强?相关变量是否以某种特定的方式聚集在一起?随着变量数的增加，这类问题将变得更难回答。</span><strong><span>相关图</span></strong><span>作为一种相对现代的方法，可以通过对</span><strong><span>相关系数矩阵的可视化</span></strong><span>来回答这些问题。</span></p></li><li><p><span>使用</span><strong><span>corrgram</span></strong><span>包里的</span><strong><span>corrgram()</span></strong><span>绘制关系图。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">corrgram</span>(<span class="cm-variable">x</span>, <span class="cm-variable">order</span><span class="cm-operator">=</span>, <span class="cm-variable">panel</span><span class="cm-operator">=</span>, <span class="cm-variable">text.panel</span><span class="cm-operator">=</span>, <span class="cm-variable">diag.panel</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>x是一行一个观测的数据框。当</span><strong><span>order=TRUE</span></strong><span>时，相关矩阵将使用主成分分析法对变量</span><strong><span>重排序</span></strong><span>，这将使得二元变量的关系模式更为明显。</span></p><p><strong><span>panel</span></strong><span>设定</span><strong><span>非对角线</span></strong><span>面板使用的元素类型。</span><strong><span>lower.panel</span></strong><span>和</span><strong><span>upper.panel</span></strong><span>来分别设置</span><strong><span>主对角线下方</span></strong><span>和</span><strong><span>上方</span></strong><span>的元素类型。而</span><strong><span>text.panel</span></strong><span>和</span><strong><span>diag.panel</span></strong><span>选项控制着主对角线元素类型。</span></p></li></ul><p><img src="img\019_R语言实战\第11章\第11章 019.png" referrerpolicy="no-referrer" alt="第11章 019"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">corrgram</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">corrgram</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">order</span><span class="cm-operator">=</span><span class="cm-variable">T</span>,<span class="cm-variable">lower.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.shade</span>,<span class="cm-variable">upper.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.pie</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Corrgram of mtcars intercorrelations"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 020.png" alt="第11章 020" style="zoom: 67%;" /></p><ul><li><strong><span>下三角</span></strong><span>单元格(在主对角线下方的单元格)开始解释这幅图形。默认地，</span><strong><span>蓝色</span></strong><span>和</span><strong><span>从左下指向右上的斜杠</span></strong><span>表示单元格中的两个变量呈</span><strong><span>正相关</span></strong><span>。反过来，</span><strong><span>红色</span></strong><span>和从</span><strong><span>左上指向右下的斜杠</span></strong><span>表示变量呈</span><strong><span>负相关</span></strong><span>。</span><strong><span>色彩越深</span></strong><span>，饱和度越高，说明变量</span><strong><span>相关性越大</span></strong><span>。相关性接近于0的单元格基本无色。本图为了将有相似相关模式的变量聚集在一起，对矩阵的行和列都</span><strong><span>重新进行了排序</span></strong><span>(使用主成分法)。</span></li><li><strong><span>上三角</span></strong><span>单元格用饼图展示了相同的信息。</span><strong><span>颜色的功能同上</span></strong><span>，但相关性大小由被填充的饼图块的大小来展示。</span><strong><span>正相关性</span></strong><span>将从</span><strong><span>12点</span></strong><span>钟处开始</span><strong><span>顺时针</span></strong><span>填充饼图。而</span><strong><span>负相关性</span></strong><span>则</span><strong><span>逆时针</span></strong><span>方向填充饼图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">corrgram</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">order</span><span class="cm-operator">=</span><span class="cm-variable">T</span>,<span class="cm-variable">lower.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.ellipse</span>,<span class="cm-variable">upper.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.pts</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">text.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.txt</span>,<span class="cm-variable">diag.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.minmax</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"使用拟合曲线、置信椭圆</span><span class="cm-string-2">\n</span><span class="cm-string">和散点图绘制mtcars"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 021.png" alt="第11章 021" style="zoom: 67%;" /></p><ul><li><span>不排序和自定义颜色：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 图1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">corrgram</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">corrgram</span>(<span class="cm-variable">mtcars</span>, <span class="cm-variable">lower.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.shade</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">upper.panel</span><span class="cm-operator">=</span><span class="cm-atom">NULL</span>, <span class="cm-variable">text.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.txt</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Car Mileage Data (unsorted)"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 图2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cols</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">colorRampPalette</span>(<span class="cm-variable">c</span>(<span class="cm-string">"darkgoldenrod4"</span>, <span class="cm-string">"burlywood1"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"darkkhaki"</span>, <span class="cm-string">"darkgreen"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">corrgram</span>(<span class="cm-variable">mtcars</span>, <span class="cm-variable">order</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">col.regions</span><span class="cm-operator">=</span><span class="cm-variable">cols</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">lower.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.shade</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">upper.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.conf</span>,<span class="cm-variable">text.panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.txt</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"A Corrgram (or Horse) of a Different Color"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第11章\第11章 022.png" referrerpolicy="no-referrer" alt="第11章 022"></th><th><img src="img\019_R语言实战\第11章\第11章 023.png" referrerpolicy="no-referrer" alt="第11章 023"></th></tr></thead><tbody></tbody></table></figure><h4 id='马赛克图'><span>马赛克图</span></h4><ul><li><p><span>如果变量是类别型的，若只观察单个类别型变量，可以使用柱状图或者饼图；若存在两个类别型变量，可以使用三维柱状图(不过，这在R中不太容易做到），但若有两个以上的类别型变量，该怎么办呢?</span></p></li><li><p><span>种办法是绘制</span><strong><span>马赛克图</span></strong><span>(mosaic plot )。在马赛克图中，嵌套矩形面积正比于单元格频率其中该频率即多维列联表中的频率。颜色和/或阴影可表示拟合模型的残差值。</span></p></li><li><p><strong><span>vcd</span></strong><span>包的</span><strong><span>mosaic()</span></strong><span>可以绘制马赛克图。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mosaic</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>添加选项</span><strong><span>shade=TRUE</span></strong><span>将根据拟合模型的皮尔逊残差值对图形上色，添加选项</span><strong><span>legend=TRUE</span></strong><span>将展示残差的图例。</span></p></li><li><p><span>数据集：</span><strong><span>Titanic</span></strong><span>，它包含存活或者死亡的乘客数、乘客的船舱等级(一等、二等、三等和船员 )、性别(男性女性 )，以及年龄层(儿童、成人 )。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ftable</span>(<span class="cm-variable">Titanic</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Survived</span> &nbsp;<span class="cm-variable">No</span> <span class="cm-variable">Yes</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Class</span> <span class="cm-variable">Sex</span> &nbsp; &nbsp;<span class="cm-variable">Age</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span><span class="cm-variable">st</span> &nbsp; <span class="cm-variable">Male</span> &nbsp; <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">118</span> &nbsp;<span class="cm-number">57</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Female</span> <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> <span class="cm-number">140</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span><span class="cm-variable">nd</span> &nbsp; <span class="cm-variable">Male</span> &nbsp; <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">11</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">154</span> &nbsp;<span class="cm-number">14</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Female</span> <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">13</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">13</span> &nbsp;<span class="cm-number">80</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span><span class="cm-variable">rd</span> &nbsp; <span class="cm-variable">Male</span> &nbsp; <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">35</span> &nbsp;<span class="cm-number">13</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">387</span> &nbsp;<span class="cm-number">75</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Female</span> <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">17</span> &nbsp;<span class="cm-number">14</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">89</span> &nbsp;<span class="cm-number">76</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Crew</span> &nbsp;<span class="cm-variable">Male</span> &nbsp; <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">670</span> <span class="cm-number">192</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Female</span> <span class="cm-variable">Child</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Adult</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">20</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 494px;"></div><div class="CodeMirror-gutters" style="display: none; height: 494px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">vcd</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># mosaic(Titanic,shade = T)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mosaic</span>(<span class="cm-operator">~</span><span class="cm-variable">Class</span><span class="cm-operator">+</span><span class="cm-variable">Sex</span><span class="cm-operator">+</span><span class="cm-variable">Age</span><span class="cm-operator">+</span><span class="cm-variable">Survived</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">Titanic</span>,<span class="cm-variable">shade</span><span class="cm-operator">=</span><span class="cm-variable">T</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第11章\第11章 024.png" alt="第11章 024" style="zoom: 50%;" /></p><ul><li><span>马赛克图隐含着大量的数据信息。例如:(1) 从船员到头等舱，存活率陡然提高；(2) 大部分孩子都处在三等舱和二等舱中；(3) 在头等舱中的大部分女性都存活了下来，而三等舱中仅有-半女性存活；(4) 船员中女性很少，导致该组的Survived标签重叠(图底部的No和Yes) 。</span></li><li><span>在本例中，蓝色阴影表明，在假定生存率与船舱等级、性别和年龄层无关的条件下，该类别下的生存率通常超过预期值。红色阴影则含义相反。图形表明在模型的独立条件下，头等舱女性存活数和男性船员死亡数超过模型预期值。如果存活数与船舱等级、性别和年龄层独立，三等舱男性的存活数比模型预期值低。</span></li></ul><h3 id='第12章-重抽样与自助法'><span>第12章 重抽样与自助法</span></h3><ul><li><span>两种应用广泛的依据随机化思想的统计方法：置换检验和自助法。</span></li></ul><h4 id='置换检验'><span>置换检验</span></h4><ul><li><strong><span>置换检验</span></strong><span>，也称随机化检验或重随机化检验。</span></li><li><span>步骤：</span></li></ul><p><img src="img\019_R语言实战\第12章\第12章 001.png" referrerpolicy="no-referrer" alt="第12章 001"></p><ul><li><span>如果经验分布依据的是数据所有可能的排列组合，此时的置换检验称作“精确”检验。随着样本量的增加，获取所有可能排列的时间开销会非常大。这种情况下，你可以使用蒙特卡洛模拟，从所有可能的排列中进行抽样，获得一个近似的检验。</span></li><li><span>软件包：</span><strong><span>coin</span></strong><span>包对于独立性问题提供了一个非常全面的置换检验的框架，而</span><strong><span>lmPerm</span></strong><span>包则专门用来做方差分析和回归分析的置换检验。</span></li></ul><h4 id='用coin包做置换检验'><span>用coin包做置换检验</span></h4><p><img src="img\019_R语言实战\第12章\第12章 002.png" referrerpolicy="no-referrer" alt="第12章 002"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">function_name</span>( <span class="cm-variable">formula</span>, <span class="cm-variable">data</span>, <span class="cm-variable">distribution</span><span class="cm-operator">=</span> )</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><p><strong><span>distribution</span></strong><span>指定经验分布在零假设条件下的形式，可能值有exact、asympototic、approximate</span></p></li><li><p><span>若</span><strong><span>distribution=&quot;exact&quot;</span></strong><span>，那么在零假设条件下，分布的计算是精确的 ( 即依据所有可能的排列组合)。当然，也可以根据它的渐进分布 (</span><strong><span>distribution=&quot;asymptotic&quot;</span></strong><span>) 或蒙特卡洛重抽样(</span><strong><span>distribution=&quot;approxiamate(B=#)&quot;</span></strong><span>)来做近似计算，其中#指所需重复的次数。distribution=&quot;exact&quot;当前仅可用于两样本问题。</span></p></li><li><p><span>类别型变量必须是因子。</span></p></li><li><p><span>问题：</span></p><figure><table><thead><tr><th><span>A</span></th><th><span>B</span></th></tr></thead><tbody><tr><td><span>40</span></td><td><span>57</span></td></tr><tr><td><span>57</span></td><td><span>64</span></td></tr><tr><td><span>45</span></td><td><span>55</span></td></tr><tr><td><span>55</span></td><td><span>62</span></td></tr><tr><td><span>58</span></td><td><span>65</span></td></tr></tbody></table></figure></li></ul><h5 id='独立两样本和k样本检验'><span>独立两样本和K样本检验</span></h5><ul><li><span>独立样本t检验和</span><strong><span>单因素精确置换检验</span></strong><span>：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">coin</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">score</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">40</span>, <span class="cm-number">57</span>, <span class="cm-number">45</span>, <span class="cm-number">55</span>, <span class="cm-number">58</span>, <span class="cm-number">57</span>, <span class="cm-number">64</span>, <span class="cm-number">55</span>, <span class="cm-number">62</span>, <span class="cm-number">65</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">trt</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">c</span>(<span class="cm-variable">rep</span>(<span class="cm-string">"A"</span>,<span class="cm-number">5</span>),<span class="cm-variable">rep</span>(<span class="cm-string">"B"</span>,<span class="cm-number">5</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">mydata</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">trt</span>,<span class="cm-variable">score</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># t检验</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">t.test</span>(<span class="cm-variable">score</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mydata</span>,<span class="cm-variable">var.equal</span><span class="cm-operator">=</span><span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Two</span> <span class="cm-variable">Sample</span> <span class="cm-variable">t</span><span class="cm-operator">-</span><span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">score</span> <span class="cm-variable">by</span> <span class="cm-variable">trt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">2.345</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">8</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.04705</span> <span class="cm-comment"># 显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">difference</span> <span class="cm-keyword">in</span> <span class="cm-variable">means</span> <span class="cm-variable">between</span> <span class="cm-variable">group</span> <span class="cm-variable">A</span> <span class="cm-variable">and</span> <span class="cm-variable">group</span> <span class="cm-variable">B</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span> <span class="cm-variable">percent</span> <span class="cm-variable">confidence</span> <span class="cm-variable">interval</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-operator">-</span><span class="cm-number">19.0405455</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.1594545</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sample</span> <span class="cm-variable">estimates</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mean</span> <span class="cm-keyword">in</span> <span class="cm-variable">group</span> <span class="cm-variable">A</span> <span class="cm-variable">mean</span> <span class="cm-keyword">in</span> <span class="cm-variable">group</span> <span class="cm-variable">B</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">51.0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">60.6</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 单因素精确置换检验</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">oneway_test</span>(<span class="cm-variable">score</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mydata</span>,<span class="cm-variable">distribution</span><span class="cm-operator">=</span><span class="cm-string">"exact"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Exact</span> <span class="cm-variable">Two</span><span class="cm-operator">-</span><span class="cm-variable">Sample</span> <span class="cm-variable">Fisher</span><span class="cm-operator">-</span><span class="cm-variable">Pitman</span> <span class="cm-variable">Permutation</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">score</span> <span class="cm-variable">by</span> <span class="cm-variable">trt</span> (<span class="cm-variable">A</span>, <span class="cm-variable">B</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Z</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1.9147</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.07143</span> <span class="cm-comment"># 不显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">mu</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 547px;"></div><div class="CodeMirror-gutters" style="display: none; height: 547px;"></div></div></div></pre><ul><li><strong><span>Wilcoxon-Mann-Whitney U检验</span></strong><span>：美国南部监禁概率与非南部间的差异（第七章）。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">MASS</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 将类别变量转为因子</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">usc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">transform</span>(<span class="cm-variable">UScrime</span>,<span class="cm-variable">So</span><span class="cm-operator">=</span><span class="cm-variable">factor</span>(<span class="cm-variable">So</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">wilcox_test</span>(<span class="cm-variable">Prob</span> <span class="cm-operator">~</span> <span class="cm-variable">So</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">usc</span>,<span class="cm-variable">distribution</span><span class="cm-operator">=</span><span class="cm-string">"exact"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Exact</span> <span class="cm-variable">Wilcoxon</span><span class="cm-operator">-</span><span class="cm-variable">Mann</span><span class="cm-operator">-</span><span class="cm-variable">Whitney</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">Prob</span> <span class="cm-variable">by</span> <span class="cm-variable">So</span> (<span class="cm-number">0</span>, <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Z</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">3.7493</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">8.488e-05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">mu</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 209px;"></div><div class="CodeMirror-gutters" style="display: none; height: 209px;"></div></div></div></pre><ul><li><strong><span>K样本检验问题</span></strong><span>：在第9章，对于50个患者的样本，我们使用了单因素方差分析来评价五种药物疗法对降低胆固醇的效果。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">multcomp</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">oneway_test</span>(<span class="cm-variable">response</span> <span class="cm-operator">~</span> <span class="cm-variable">trt</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">cholesterol</span>,<span class="cm-variable">distribution</span><span class="cm-operator">=</span><span class="cm-variable">approximate</span>(<span class="cm-variable">B</span><span class="cm-operator">=</span><span class="cm-number">9999</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Approximative</span> <span class="cm-variable">K</span><span class="cm-operator">-</span><span class="cm-variable">Sample</span> <span class="cm-variable">Fisher</span><span class="cm-operator">-</span><span class="cm-variable">Pitman</span> <span class="cm-variable">Permutation</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">response</span> <span class="cm-variable">by</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-variable">trt</span> (<span class="cm-number">1</span><span class="cm-variable">time</span>, <span class="cm-number">2</span><span class="cm-variable">times</span>, <span class="cm-number">4</span><span class="cm-variable">times</span>, <span class="cm-variable">drugD</span>, <span class="cm-variable">drugE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chi</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">36.381</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">&lt;</span> <span class="cm-number">1e-04</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 183px;"></div><div class="CodeMirror-gutters" style="display: none; height: 183px;"></div></div></div></pre><ul><li><span>参考分布得自于数据9999次的置换。设定随机数种子可让结果重现。</span></li></ul><h5 id='列联表中的独立性'><span>列联表中的独立性</span></h5><ul><li><span>通过</span><strong><span>chisq_test()</span></strong><span>或</span><strong><span>cmh_test ()</span></strong><span>函数，我们可用置换检验判断</span><strong><span>两类别型变量的独立性</span></strong><span>。</span></li><li><span>第7章中，我们用卡方检验评价了关节炎的治疗(treatment) 与效果(improvement) 间的关系。治疗有两个水平(安慰剂、治疗 )，效果有三个水平(无、部分、显著 )，变量Improved以有序因子形式编码。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">coin</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">vcd</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 将有序因子转为分类因子</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">art</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">transform</span>(<span class="cm-variable">Arthritis</span>,<span class="cm-variable">Improved</span> <span class="cm-operator">=</span> <span class="cm-variable">as.factor</span>(<span class="cm-variable">as.numeric</span>(<span class="cm-variable">Improved</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">chisq_test</span>(<span class="cm-variable">Treatment</span> <span class="cm-operator">~</span> <span class="cm-variable">Improved</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">art</span>,<span class="cm-variable">distribution</span><span class="cm-operator">=</span><span class="cm-variable">approximate</span>(<span class="cm-variable">B</span><span class="cm-operator">=</span><span class="cm-number">9999</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Approximative</span> <span class="cm-variable">Pearson</span> <span class="cm-variable">Chi</span><span class="cm-operator">-</span><span class="cm-variable">Squared</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">Treatment</span> <span class="cm-variable">by</span> <span class="cm-variable">Improved</span> (<span class="cm-number">1</span>, <span class="cm-number">2</span>, <span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chi</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">13.055</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.0013</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 209px;"></div><div class="CodeMirror-gutters" style="display: none; height: 209px;"></div></div></div></pre><ul><li><span>如果用有序因子，将会生成一个线性与线性趋势检验，而不是卡方检验。</span></li></ul><h5 id='数值变量间的独立性'><span>数值变量间的独立性</span></h5><ul><li><strong><span>spearman_test()</span></strong><span>函数提供了两数值变量的独立性置换检验。</span></li><li><span>第7章中，我们检验了美国文盲率与谋杀率间的相关性。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">spearman_test</span>(<span class="cm-variable">Illiteracy</span> <span class="cm-operator">~</span> <span class="cm-variable">Murder</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">states</span>,<span class="cm-variable">distribution</span><span class="cm-operator">=</span><span class="cm-variable">approximate</span>(<span class="cm-variable">B</span><span class="cm-operator">=</span><span class="cm-number">9999</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Approximative</span> <span class="cm-variable">Spearman</span> <span class="cm-variable">Correlation</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">Illiteracy</span> <span class="cm-variable">by</span> <span class="cm-variable">Murder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Z</span> <span class="cm-operator">=</span> <span class="cm-number">4.7065</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">&lt;</span> <span class="cm-number">1e-04</span> <span class="cm-comment"># 不独立</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">rho</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 183px;"></div><div class="CodeMirror-gutters" style="display: none; height: 183px;"></div></div></div></pre><h5 id='两样本和k样本相关性检验'><span>两样本和K样本相关性检验</span></h5><ul><li><span>对于两配对组的置换检验，可使用</span><strong><span>wilcoxsign_test()</span></strong><span>函数；多于两组时，使用</span><strong><span>friedman_test()</span></strong><span>函数。</span></li><li><span>第7章中，我们比较了城市男性中14 ~ 24年龄段 (u1 ) 与35 ~39年龄段(u2 ) 间的失业率差异。由于两个变量对于美国50个州都有记录，你便有了一个两依赖组设计(state是匹配变量 )，可使用精确Wilcoxon符号秩检验来判断两个年龄段间的失业率是否相等：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">coin</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">MASS</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">wilcoxsign_test</span>(<span class="cm-variable">U1</span> <span class="cm-operator">~</span> <span class="cm-variable">U2</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">UScrime</span>,<span class="cm-variable">distribution</span><span class="cm-operator">=</span><span class="cm-string">"exact"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Exact</span> <span class="cm-variable">Wilcoxon</span><span class="cm-operator">-</span><span class="cm-variable">Pratt</span> <span class="cm-variable">Signed</span><span class="cm-operator">-</span><span class="cm-variable">Rank</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">y</span> <span class="cm-variable">by</span> <span class="cm-variable">x</span> (<span class="cm-variable">pos</span>, <span class="cm-variable">neg</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-variable">stratified</span> <span class="cm-variable">by</span> <span class="cm-variable">block</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Z</span> <span class="cm-operator">=</span> <span class="cm-number">5.9691</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">1.421e-14</span> <span class="cm-comment"># 差异显著，即失业率不同</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">true</span> <span class="cm-variable">mu</span> <span class="cm-variable">is</span> <span class="cm-variable">not</span> <span class="cm-variable">equal</span> <span class="cm-variable">to</span> <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 209px;"></div><div class="CodeMirror-gutters" style="display: none; height: 209px;"></div></div></div></pre><h4 id='lmperm包的置换检验'><span>lmPerm包的置换检验</span></h4><ul><li><strong><span>ImPerm</span></strong><span>包可做</span><strong><span>线性模型的置换检验</span></strong><span>。比如</span><strong><span>lmp()</span></strong><span>和</span><strong><span>aovp()</span></strong><span>函数即</span><strong><span>lm()</span></strong><span>和</span><strong><span>aov()</span></strong><span>函数的修改版，能够进行置换检验，而非正态理论检验。</span></li><li><span>与原来的函数相比，多了</span><strong><span>perm=</span></strong><span>参数，选项的可选值有</span><strong><span>Exact</span></strong><span>、</span><strong><span>Prob</span></strong><span>或</span><strong><span>SPR</span></strong><span>。</span><strong><span>Exact</span></strong><span>根据所有可能的排列组合生成精确检验。</span><strong><span>Prob</span></strong><span>从所有可能的排列中不断抽样，直至估计的标准差在估计的p值0.1之下，判停准则由可选的Ca参数控制。</span><strong><span>SPR</span></strong><span>使用贯序概率比检验来判断何时停止抽样。注意，若观测数大于10，perm=&quot;Exact&quot; 将自动默认转为perm=&quot;Prob&quot;，因为精确检验只适用于小样本问题。</span></li></ul><h5 id='简单回归和多项式回归'><span>简单回归和多项式回归</span></h5><ul><li><span>第8章中，我们使用线性回归研究了15名女性的身高和体重间的关系。</span></li><li><span>使用</span><strong><span>lmp()</span></strong><span>替代</span><strong><span>lm()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">lmPerm</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lmp</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>,<span class="cm-variable">perm</span> <span class="cm-operator">=</span> <span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Settings:  unique SS : numeric variables centered"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lmp</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>, <span class="cm-variable">perm</span> <span class="cm-operator">=</span> <span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp;<span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; <span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">1.7333</span> <span class="cm-operator">-</span><span class="cm-number">1.1333</span> <span class="cm-operator">-</span><span class="cm-number">0.3833</span> &nbsp;<span class="cm-number">0.7417</span> &nbsp;<span class="cm-number">3.1167</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Estimate</span> <span class="cm-variable">Iter</span> <span class="cm-variable">Pr</span>(<span class="cm-variable">Prob</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; <span class="cm-number">3.45</span> <span class="cm-number">5000</span> &nbsp; <span class="cm-operator">&lt;</span><span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">1.525</span> <span class="cm-variable">on</span> <span class="cm-number">13</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">Squared</span><span class="cm-operator">:</span> <span class="cm-number">0.991</span>,<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> <span class="cm-number">0.9903</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">1433</span> <span class="cm-variable">on</span> <span class="cm-number">1</span> <span class="cm-variable">and</span> <span class="cm-number">13</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">1.091e-14</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 495px;"></div><div class="CodeMirror-gutters" style="display: none; height: 495px;"></div></div></div></pre><ul><li><span>拟合二次方程：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lmp</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span> <span class="cm-operator">+</span> <span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>),<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>,<span class="cm-variable">perm</span> <span class="cm-operator">=</span> <span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Settings:  unique SS : numeric variables centered"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lmp</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span> <span class="cm-operator">+</span> <span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">women</span>, <span class="cm-variable">perm</span> <span class="cm-operator">=</span> <span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; &nbsp;<span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">0.509405</span> <span class="cm-operator">-</span><span class="cm-number">0.296105</span> <span class="cm-operator">-</span><span class="cm-number">0.009405</span> &nbsp;<span class="cm-number">0.286151</span> &nbsp;<span class="cm-number">0.597059</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Iter</span> <span class="cm-variable">Pr</span>(<span class="cm-variable">Prob</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">7.34832</span> <span class="cm-number">5000</span> &nbsp; <span class="cm-operator">&lt;</span><span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">I</span>(<span class="cm-variable">height</span><span class="cm-operator">^</span><span class="cm-number">2</span>) &nbsp;<span class="cm-number">0.08306</span> <span class="cm-number">5000</span> &nbsp; <span class="cm-operator">&lt;</span><span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">0.3841</span> <span class="cm-variable">on</span> <span class="cm-number">12</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">Squared</span><span class="cm-operator">:</span> <span class="cm-number">0.9995</span>,<span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> <span class="cm-number">0.9994</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> <span class="cm-number">1.139e+04</span> <span class="cm-variable">on</span> <span class="cm-number">2</span> <span class="cm-variable">and</span> <span class="cm-number">12</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-operator">&lt;</span> <span class="cm-number">2.2e-16</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 521px;"></div><div class="CodeMirror-gutters" style="display: none; height: 521px;"></div></div></div></pre><ul><li><span>增添的</span><strong><span>Iter</span></strong><span>栏列出了要达到判停准则所需的迭代次数。</span></li></ul><h5 id='多元回归'><span>多元回归</span></h5><ul><li><span>在第8章，多元回归被用来通过美国50个州的人口数、文盲率、收人水平和结霜天数预测犯罪率。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">lmPerm</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">states</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">state.x77</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lmp</span>(<span class="cm-variable">Murder</span><span class="cm-operator">~</span><span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span><span class="cm-operator">+</span><span class="cm-variable">Income</span><span class="cm-operator">+</span><span class="cm-variable">Frost</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>,<span class="cm-variable">perm</span> <span class="cm-operator">=</span> <span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Settings:  unique SS : numeric variables centered"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lmp</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">Murder</span> <span class="cm-operator">~</span> <span class="cm-variable">Population</span> <span class="cm-operator">+</span> <span class="cm-variable">Illiteracy</span> <span class="cm-operator">+</span> <span class="cm-variable">Income</span> <span class="cm-operator">+</span> <span class="cm-variable">Frost</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">states</span>, <span class="cm-variable">perm</span> <span class="cm-operator">=</span> <span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">4.79597</span> <span class="cm-operator">-</span><span class="cm-number">1.64946</span> <span class="cm-operator">-</span><span class="cm-number">0.08112</span> &nbsp;<span class="cm-number">1.48150</span> &nbsp;<span class="cm-number">7.62104</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Iter</span> <span class="cm-variable">Pr</span>(<span class="cm-variable">Prob</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Population</span> <span class="cm-number">2.237e-04</span> &nbsp; <span class="cm-number">51</span> &nbsp; <span class="cm-number">1.0000</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Illiteracy</span> <span class="cm-number">4.143e+00</span> <span class="cm-number">5000</span> &nbsp; <span class="cm-number">0.0004</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Income</span> &nbsp; &nbsp; <span class="cm-number">6.442e-05</span> &nbsp; <span class="cm-number">51</span> &nbsp; <span class="cm-number">1.0000</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Frost</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">5.813e-04</span> &nbsp; <span class="cm-number">51</span> &nbsp; <span class="cm-number">0.8627</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">standard</span> <span class="cm-variable">error</span><span class="cm-operator">:</span> <span class="cm-number">2.535</span> <span class="cm-variable">on</span> <span class="cm-number">45</span> <span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">Squared</span><span class="cm-operator">:</span> <span class="cm-number">0.567</span>,<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable">Adjusted</span> <span class="cm-variable">R</span><span class="cm-operator">-</span><span class="cm-variable">squared</span><span class="cm-operator">:</span> <span class="cm-number">0.5285</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">F</span><span class="cm-operator">-</span><span class="cm-variable">statistic</span><span class="cm-operator">:</span> <span class="cm-number">14.73</span> <span class="cm-variable">on</span> <span class="cm-number">4</span> <span class="cm-variable">and</span> <span class="cm-number">45</span> <span class="cm-variable">DF</span>, &nbsp;<span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span><span class="cm-operator">:</span> <span class="cm-number">9.133e-08</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 677px;"></div><div class="CodeMirror-gutters" style="display: none; height: 677px;"></div></div></div></pre><ul><li><span>回顾第8章，正态理论中Population和Illiteracy均显著(p&lt;0.05)。而该置换检验中,Population不再显著。当两种方法所得结果不一致时，你需要更加谨慎地审视数据，这很可能是因为违反了正态性假设或者存在离群点。</span></li></ul><h5 id='单因素方差分析与协方差分析'><span>单因素方差分析与协方差分析</span></h5><ul><li><span>9.1节中的</span><strong><span>单因素方差分析</span></strong><span>问题——各种疗法对降低胆固醇的影响。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">lmPerm</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">multcomp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aovp</span>(<span class="cm-variable">response</span><span class="cm-operator">~</span><span class="cm-variable">trt</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">cholesterol</span>, <span class="cm-variable">perm</span><span class="cm-operator">=</span><span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Settings:  unique SS "</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">anova</span>(<span class="cm-variable">fit</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Analysis</span> <span class="cm-variable">of</span> <span class="cm-variable">Variance</span> <span class="cm-variable">Table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Response</span><span class="cm-operator">:</span> <span class="cm-variable">response</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">R</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">R</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Iter</span> &nbsp;<span class="cm-variable">Pr</span>(<span class="cm-variable">Prob</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trt</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">1351.37</span> &nbsp; &nbsp;<span class="cm-number">337.84</span> <span class="cm-number">5000</span> <span class="cm-operator">&lt;</span> <span class="cm-number">2.2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> <span class="cm-number">45</span> &nbsp; <span class="cm-number">468.75</span> &nbsp; &nbsp; <span class="cm-number">10.42</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># summary.aovp(fit)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># summary(fit)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># summary.aov(fit)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 416px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><ul><li><strong><span>协方差分析</span></strong><span>的置换检验取自第9章的问题，当控制妊娠期时间相同时，观测四种药物剂量对鼠崽体重的影响。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">lmPerm</span>) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aovp</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">gesttime</span> <span class="cm-operator">+</span> <span class="cm-variable">dose</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">litter</span>, <span class="cm-variable">perm</span><span class="cm-operator">=</span><span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Settings:  unique SS : numeric variables centered"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">anova</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Analysis</span> <span class="cm-variable">of</span> <span class="cm-variable">Variance</span> <span class="cm-variable">Table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Response</span><span class="cm-operator">:</span> <span class="cm-variable">weight</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">R</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">R</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Iter</span> <span class="cm-variable">Pr</span>(<span class="cm-variable">Prob</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gesttime</span> &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">161.49</span> &nbsp; <span class="cm-number">161.493</span> <span class="cm-number">5000</span> &nbsp; <span class="cm-number">0.0006</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">137.12</span> &nbsp; &nbsp;<span class="cm-number">45.708</span> <span class="cm-number">5000</span> &nbsp; <span class="cm-number">0.0392</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> <span class="cm-number">69</span> &nbsp;<span class="cm-number">1151.27</span> &nbsp; &nbsp;<span class="cm-number">16.685</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><ul><li><span>依据p值可知，当控制妊娠期时间相同时，四种药物剂量对鼠崽的体重影响不相同。</span></li></ul><h5 id='双因素方差分析-2'><span>双因素方差分析</span></h5><ul><li><span>以第9章中的维生素C对豚鼠牙齿生长的影响为例，该实验两个可操作的因子是剂量(三水平) 和喂食方式( 两水平 。10只豚鼠分别被分配到每种处理组合中，形成一个3x2的析因实验设计。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">lmPerm</span>) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">aovp</span>(<span class="cm-variable">len</span><span class="cm-operator">~</span><span class="cm-variable">supp</span><span class="cm-operator">*</span><span class="cm-variable">dose</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">ToothGrowth</span>, <span class="cm-variable">perm</span><span class="cm-operator">=</span><span class="cm-string">"Prob"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Settings:  unique SS : numeric variables centered"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">anova</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Analysis</span> <span class="cm-variable">of</span> <span class="cm-variable">Variance</span> <span class="cm-variable">Table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Response</span><span class="cm-operator">:</span> <span class="cm-variable">len</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Df</span> <span class="cm-variable">R</span> <span class="cm-variable">Sum</span> <span class="cm-variable">Sq</span> <span class="cm-variable">R</span> <span class="cm-variable">Mean</span> <span class="cm-variable">Sq</span> <span class="cm-variable">Iter</span> <span class="cm-variable">Pr</span>(<span class="cm-variable">Prob</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">supp</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">205.35</span> &nbsp; &nbsp;<span class="cm-number">205.35</span> <span class="cm-number">5000</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dose</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">2224.30</span> &nbsp; <span class="cm-number">2224.30</span> <span class="cm-number">5000</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">supp</span><span class="cm-operator">:</span><span class="cm-variable">dose</span> &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">88.92</span> &nbsp; &nbsp; <span class="cm-number">88.92</span> <span class="cm-number">2032</span> &nbsp;<span class="cm-number">0.04724</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residuals</span> <span class="cm-number">56</span> &nbsp; <span class="cm-number">933.63</span> &nbsp; &nbsp; <span class="cm-number">16.67</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><h4 id='置换检验点评'><span>置换检验点评</span></h4><ul><li><span>除coin和lmPerm包外，R还提供了其他可做置换检验的包。perm包能实现coin包中的部分功能,因此可作为coin包所得结果的验证。corrperm包提供了有重复测量的相关性的置换检验logregperm包提供了Logistic回归的置换检验。另外一个非常重要的包是glmperm，它涵盖了广义线性模型的置换检验。</span></li></ul><h4 id='自助法'><span>自助法</span></h4><ul><li><strong><span>自助法</span></strong><span>：从初始样本重复随机替换抽样，生成一个或一系列待检验统计量的经验分布。无需假设一个特定的理论分布，便可生成统计量的置信区间，并能检验统计假设。</span></li></ul><p><img src="img\019_R语言实战\第12章\第12章 003.png" referrerpolicy="no-referrer" alt="第12章 003"></p><h4 id='boot包的自助法'><span>boot包的自助法</span></h4><ul><li><p><span>boot包扩展了自助法和重抽样的相关用途。你可以对一个统计量( 如中位数)或一个统计量向量(如一列回归系数 ) 使用自助法。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"boot"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>步骤：</span></p></li></ul><p><img src="img\019_R语言实战\第12章\第12章 004.png" referrerpolicy="no-referrer" alt="第12章 004"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bootobject</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">boot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span>, <span class="cm-variable">statistic</span><span class="cm-operator">=</span>, <span class="cm-variable">R</span><span class="cm-operator">=</span>, <span class="cm-keyword">...</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第12章\第12章 005.png" referrerpolicy="no-referrer" alt="第12章 005"></p><ul><li><span>boot () 函数调用统计量函数R次，每次都从整数1:nrow(data) 中生成一列有放回的随机指标，这些指标被统计量函数用来选择样本。</span></li></ul><p><img src="img\019_R语言实战\第12章\第12章 006.png" referrerpolicy="no-referrer" alt="第12章 006"></p><ul><li><p><span>使用</span><strong><span>boot.ci()</span></strong><span>函数获取统计量的置信区间。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boot.ci</span>(<span class="cm-variable">bootobject</span>, <span class="cm-variable">conf</span><span class="cm-operator">=</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span> ) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第12章\第12章 007.png" referrerpolicy="no-referrer" alt="第12章 007"></p><ul><li><strong><span>type</span></strong><span>参数设定了获取置信区间的方法。</span><strong><span>perc</span></strong><span>方法(分位数)展示的是样本均值，</span><strong><span>bca</span></strong><span>将根据偏差对区间做简单调整。</span></li></ul><h5 id='对单个统计量使用自助法'><span>对单个统计量使用自助法</span></h5><ul><li><span>多元回归：使用车重和发动机排量预测汽车每加仑行驶的英里数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取R^2</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">rsq</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">formula</span>,<span class="cm-variable">data</span>,<span class="cm-variable">indices</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data</span>[<span class="cm-variable">indices</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">formula</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">d</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-builtin">return</span>(<span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">r.square</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">boot</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">results</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">boot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">statistic</span> <span class="cm-operator">=</span> <span class="cm-variable">rsq</span>,<span class="cm-variable">R</span><span class="cm-operator">=</span><span class="cm-number">1000</span>,<span class="cm-variable">formula</span><span class="cm-operator">=</span><span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">+</span><span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">print</span>(<span class="cm-variable">results</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ORDINARY</span> <span class="cm-variable">NONPARAMETRIC</span> <span class="cm-variable">BOOTSTRAP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boot</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>, <span class="cm-variable">statistic</span> <span class="cm-operator">=</span> <span class="cm-variable">rsq</span>, <span class="cm-variable">R</span> <span class="cm-operator">=</span> <span class="cm-number">1000</span>, <span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">wt</span> <span class="cm-operator">+</span> <span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Bootstrap</span> <span class="cm-variable">Statistics</span> <span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">original</span> &nbsp; &nbsp; <span class="cm-variable">bias</span> &nbsp; &nbsp;<span class="cm-variable">std.</span> <span class="cm-variable">error</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t1</span><span class="cm-operator">*</span> <span class="cm-number">0.7809306</span> <span class="cm-number">0.01379126</span> &nbsp;<span class="cm-number">0.05113904</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">results</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 442px;"></div></div></div></pre><p><img src="img\019_R语言实战\第12章\第12章 008.png" alt="第12章 008" style="zoom:67%;" /></p><ul><li><span>可以看到，自助的R平方值不呈正态分布。</span></li><li><span>95%的置信区间：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">boot.ci</span>(<span class="cm-variable">results</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"perc"</span>, <span class="cm-string">"bca"</span>)) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BOOTSTRAP</span> <span class="cm-variable">CONFIDENCE</span> <span class="cm-variable">INTERVAL</span> <span class="cm-variable">CALCULATIONS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Based</span> <span class="cm-variable">on</span> <span class="cm-number">1000</span> <span class="cm-variable">bootstrap</span> <span class="cm-variable">replicates</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CALL</span> <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boot.ci</span>(<span class="cm-variable">boot.out</span> <span class="cm-operator">=</span> <span class="cm-variable">results</span>, <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"perc"</span>, <span class="cm-string">"bca"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Intervals</span> <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Level</span> &nbsp; &nbsp; <span class="cm-variable">Percentile</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BCa</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span><span class="cm-operator cm-variable-2">%</span> &nbsp; ( <span class="cm-number">0.6753</span>, &nbsp;<span class="cm-number">0.8835</span> ) &nbsp; ( <span class="cm-number">0.6344</span>, &nbsp;<span class="cm-number">0.8561</span> ) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Calculations</span> <span class="cm-variable">and</span> <span class="cm-variable">Intervals</span> <span class="cm-variable">on</span> <span class="cm-variable">Original</span> <span class="cm-variable">Scale</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Some</span> <span class="cm-variable">BCa</span> <span class="cm-variable">intervals</span> <span class="cm-variable">may</span> <span class="cm-variable">be</span> <span class="cm-variable">unstable</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><ul><li><span>两种生成置信区间的方法中，均不包含0，因此拒绝R^2=0的原假设。</span></li></ul><h5 id='多个统计量的自助法'><span>多个统计量的自助法</span></h5><ul><li><span>获取一个统计量向量——三个回归系数(截距项、车重和发动机排量)——95%的置信区间。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 返回回归系数的函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">bs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span>, <span class="cm-variable">indices</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data</span>[<span class="cm-variable">indices</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">formula</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">d</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-builtin">return</span>(<span class="cm-variable">coef</span>(<span class="cm-variable">fit</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">boot</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">results</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">boot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">statistic</span><span class="cm-operator">=</span><span class="cm-variable">bs</span>,<span class="cm-variable">R</span><span class="cm-operator">=</span><span class="cm-number">1000</span>,<span class="cm-variable">formula</span><span class="cm-operator">=</span><span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">+</span><span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">print</span>(<span class="cm-variable">results</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ORDINARY</span> <span class="cm-variable">NONPARAMETRIC</span> <span class="cm-variable">BOOTSTRAP</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boot</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>, <span class="cm-variable">statistic</span> <span class="cm-operator">=</span> <span class="cm-variable">bs</span>, <span class="cm-variable">R</span> <span class="cm-operator">=</span> <span class="cm-number">1000</span>, <span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">mpg</span> <span class="cm-operator">~</span> <span class="cm-variable">wt</span> <span class="cm-operator">+</span> <span class="cm-variable">disp</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Bootstrap</span> <span class="cm-variable">Statistics</span> <span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">original</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">bias</span> &nbsp; &nbsp;<span class="cm-variable">std.</span> <span class="cm-variable">error</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t1</span><span class="cm-operator">*</span> <span class="cm-number">34.96055404</span> &nbsp;<span class="cm-number">4.715497e-02</span> <span class="cm-number">2.546106756</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t2</span><span class="cm-operator">*</span> <span class="cm-operator">-</span><span class="cm-number">3.35082533</span> <span class="cm-operator">-</span><span class="cm-number">4.908125e-02</span> <span class="cm-number">1.154800744</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">t3</span><span class="cm-operator">*</span> <span class="cm-operator">-</span><span class="cm-number">0.01772474</span> &nbsp;<span class="cm-number">6.230927e-05</span> <span class="cm-number">0.008518022</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取车重的结果</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">results</span>,<span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><ul><li><span>当对多个统计量自助抽样时，添加一个索引参数，指明plot 和boot.ci()函数所分析bootobjectSt的列。在本例中，索引1指截距项，索引2指车重，索引3指发动机排量。</span></li></ul><p><img src="img\019_R语言实战\第12章\第12章 009.png" alt="第12章 009" style="zoom:67%;" /></p><ul><li><span>95%的置信区间：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 95% 置信区间（车重）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">boot.ci</span>(<span class="cm-variable">results</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"bca"</span>, <span class="cm-variable">index</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BOOTSTRAP</span> <span class="cm-variable">CONFIDENCE</span> <span class="cm-variable">INTERVAL</span> <span class="cm-variable">CALCULATIONS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Based</span> <span class="cm-variable">on</span> <span class="cm-number">1000</span> <span class="cm-variable">bootstrap</span> <span class="cm-variable">replicates</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CALL</span> <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boot.ci</span>(<span class="cm-variable">boot.out</span> <span class="cm-operator">=</span> <span class="cm-variable">results</span>, <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"bca"</span>, <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Intervals</span> <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Level</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">BCa</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span><span class="cm-operator cm-variable-2">%</span> &nbsp; (<span class="cm-operator">-</span><span class="cm-number">5.477</span>, <span class="cm-operator">-</span><span class="cm-number">0.937</span> ) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Calculations</span> <span class="cm-variable">and</span> <span class="cm-variable">Intervals</span> <span class="cm-variable">on</span> <span class="cm-variable">Original</span> <span class="cm-variable">Scale</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 发动机</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">boot.ci</span>(<span class="cm-variable">results</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"bca"</span>, <span class="cm-variable">index</span><span class="cm-operator">=</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BOOTSTRAP</span> <span class="cm-variable">CONFIDENCE</span> <span class="cm-variable">INTERVAL</span> <span class="cm-variable">CALCULATIONS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Based</span> <span class="cm-variable">on</span> <span class="cm-number">1000</span> <span class="cm-variable">bootstrap</span> <span class="cm-variable">replicates</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CALL</span> <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">boot.ci</span>(<span class="cm-variable">boot.out</span> <span class="cm-operator">=</span> <span class="cm-variable">results</span>, <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"bca"</span>, <span class="cm-variable">index</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Intervals</span> <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Level</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">BCa</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">95</span><span class="cm-operator cm-variable-2">%</span> &nbsp; (<span class="cm-operator">-</span><span class="cm-number">0.0334</span>, <span class="cm-operator">-</span><span class="cm-number">0.0011</span> ) &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Calculations</span> <span class="cm-variable">and</span> <span class="cm-variable">Intervals</span> <span class="cm-variable">on</span> <span class="cm-variable">Original</span> <span class="cm-variable">Scale</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><h2 id='第四部分-高级方法'><span>第四部分 高级方法</span></h2><h3 id='第13章-广义线性模型'><span>第13章 广义线性模型</span></h3><ul><li><p><strong><span>广义线性模型</span></strong><span>扩展了线性模型的框架，它包含了非正态因变量的分析。</span></p></li><li><p><span>使用</span><strong><span>glm()</span></strong><span>函数来进行估计。</span></p></li><li><p><span>两种模型：Logistic回归（因变量为类别型）、泊松回归（因变量为计数型）</span></p></li><li><p><span>标准线性模型无法容易解决的问题：</span></p><ul><li><span>问题1：什么样的个人信息、人口统计信息和人际关系信息可以作为变量，用来预测婚姻出轨问顿?此时，结果变量为二值型(出轨/未出轨 )。</span><strong><span>（Logistic回归）</span></strong></li><li><span>问题2：药物治疗对于八周中所发生的癫病次数有何影响?此时，结果变量为计数型(癫病次数 )。</span><strong><span>（泊松回归）</span></strong></li></ul></li></ul><h4 id='广义线性模型和glm函数'><span>广义线性模型和glm()函数</span></h4><ul><li><p><span>广义线性模型拟合的形式为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2659" cid="n2659" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.155ex" height="6.658ex" role="img" focusable="false" viewBox="0 -1610.7 9792.4 2942.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -3.014ex;"><defs><path id="MJX-6-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-6-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-6-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-6-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-6-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-6-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-6-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-6-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-6-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-6-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-6-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path><path id="MJX-6-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-6-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-6-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-6-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(477,0)"><use data-c="28" xlink:href="#MJX-6-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(866,0)"><g data-mml-node="mi"><use data-c="1D707" xlink:href="#MJX-6-TEX-I-1D707"></use></g><g data-mml-node="mi" transform="translate(636,-150) scale(0.707)"><use data-c="1D44C" xlink:href="#MJX-6-TEX-I-1D44C"></use></g></g><g data-mml-node="mo" transform="translate(2091.5,0)"><use data-c="29" xlink:href="#MJX-6-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(2758.3,0)"><use data-c="3D" xlink:href="#MJX-6-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(3814.1,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-6-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-6-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(5038.9,0)"><use data-c="2B" xlink:href="#MJX-6-TEX-N-2B"></use></g><g data-mml-node="munderover" transform="translate(6039.1,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-6-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(124.5,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-6-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(412,0)"><use data-c="3D" xlink:href="#MJX-6-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1190,0)"><use data-c="31" xlink:href="#MJX-6-TEX-N-31"></use></g></g><g data-mml-node="mi" transform="translate(544.2,1198.2) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-6-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(7649.7,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-6-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-6-TEX-I-1D457"></use></g></g><g data-mml-node="msub" transform="translate(8590.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-6-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-6-TEX-I-1D457"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>g</mi><mo stretchy="false">(</mo><msub><mi>μ</mi><mi>Y</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>p</mi></munderover><msub><mi>β</mi><mi>j</mi></msub><msub><mi>X</mi><mi>j</mi></msub></math></mjx-assistive-mml></mjx-container></div></div><p><span>其中g(μy)是条件均值的函数(称为连接函数)。另外，你可放松Y为正态分布的假设，改为Y服从指数分布族中的一种分布即可。设定好连接函数和概率分布后，便可以通过最大似然估计的多次迭代推导出各参数值。</span></p></li></ul><h5 id='glm函数'><span>glm()函数</span></h5><ul><li><p><span>拟合广义线性模型，与lm()使用类似。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">family</span>(<span class="cm-variable">link</span><span class="cm-operator">=</span><span class="cm-keyword">function</span>), <span class="cm-variable">data</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第13章\第13章 001.png" referrerpolicy="no-referrer" alt="第13章 001"></p><ul><li><p><span>假设你有一个响应变量 (</span><strong><span>y</span></strong><span>)、三个预测变量(</span><strong><span>X1</span></strong><span>、</span><strong><span>X2</span></strong><span>、</span><strong><span>X3</span></strong><span>和一个包含数据的数据框(</span><strong><span>mydata</span></strong><span>)。</span></p></li><li><p><strong><span>Logistic回归</span></strong><span>适用于</span><strong><span>二值响应变量(0和1)</span></strong><span>。模型假设服从二项分布，线性模型的拟合形式为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2672" cid="n2672" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="30.216ex" height="6.658ex" role="img" focusable="false" viewBox="0 -1610.7 13355.5 2942.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -3.014ex;"><defs><path id="MJX-7-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-7-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-7-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-7-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-7-TEX-S3-28" d="M701 -940Q701 -943 695 -949H664Q662 -947 636 -922T591 -879T537 -818T475 -737T412 -636T350 -511T295 -362T250 -186T221 17T209 251Q209 962 573 1361Q596 1386 616 1405T649 1437T664 1450H695Q701 1444 701 1441Q701 1436 681 1415T629 1356T557 1261T476 1118T400 927T340 675T308 359Q306 321 306 250Q306 -139 400 -430T690 -924Q701 -936 701 -940Z"></path><path id="MJX-7-TEX-I-1D70B" d="M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z"></path><path id="MJX-7-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-7-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-7-TEX-S3-29" d="M34 1438Q34 1446 37 1448T50 1450H56H71Q73 1448 99 1423T144 1380T198 1319T260 1238T323 1137T385 1013T440 864T485 688T514 485T526 251Q526 134 519 53Q472 -519 162 -860Q139 -885 119 -904T86 -936T71 -949H56Q43 -949 39 -947T34 -937Q88 -883 140 -813Q428 -430 428 251Q428 453 402 628T338 922T245 1146T145 1309T46 1425Q44 1427 42 1429T39 1433T36 1436L34 1438Z"></path><path id="MJX-7-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-7-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-7-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-7-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-7-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-7-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path><path id="MJX-7-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-7-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-7-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(298,0)"><use data-c="1D45C" xlink:href="#MJX-7-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(783,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-7-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(510,-150) scale(0.707)"><use data-c="1D452" xlink:href="#MJX-7-TEX-I-1D452"></use></g></g><g data-mml-node="mrow" transform="translate(1839.2,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="28" xlink:href="#MJX-7-TEX-S3-28"></use></g><g data-mml-node="mfrac" transform="translate(736,0)"><g data-mml-node="mi" transform="translate(1081.2,676)"><use data-c="1D70B" xlink:href="#MJX-7-TEX-I-1D70B"></use></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-7-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(722.2,0)"><use data-c="2212" xlink:href="#MJX-7-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1722.4,0)"><use data-c="1D70B" xlink:href="#MJX-7-TEX-I-1D70B"></use></g></g><rect width="2492.4" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(3468.4,0) translate(0 -0.5)"><use data-c="29" xlink:href="#MJX-7-TEX-S3-29"></use></g></g><g data-mml-node="mo" transform="translate(6321.4,0)"><use data-c="3D" xlink:href="#MJX-7-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(7377.2,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-7-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-7-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(8602,0)"><use data-c="2B" xlink:href="#MJX-7-TEX-N-2B"></use></g><g data-mml-node="munderover" transform="translate(9602.2,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-7-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(124.5,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-7-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(412,0)"><use data-c="3D" xlink:href="#MJX-7-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1190,0)"><use data-c="31" xlink:href="#MJX-7-TEX-N-31"></use></g></g><g data-mml-node="mi" transform="translate(544.2,1198.2) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-7-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(11212.8,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-7-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-7-TEX-I-1D457"></use></g></g><g data-mml-node="msub" transform="translate(12153.2,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-7-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-7-TEX-I-1D457"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>e</mi></msub><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mfrac><mi>π</mi><mrow><mn>1</mn><mo>−</mo><mi>π</mi></mrow></mfrac><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>p</mi></munderover><msub><mi>β</mi><mi>j</mi></msub><msub><mi>X</mi><mi>j</mi></msub></math></mjx-assistive-mml></mjx-container></div></div><p><span>其中π = μy是y的条件均值(即给定一系列X的值时Y=1的概率），（π/1-π）为Y=1时的优势比，log(π/1-π)为对数优势比，或logit。本例中，</span><strong><span>log(π/1-π)</span></strong><span>为连接函数，概率分布为二项分布。</span></p></li><li><p><span>拟合Logistic回归模型：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">Y</span> <span class="cm-operator">~</span> <span class="cm-variable">X1</span><span class="cm-operator">+</span><span class="cm-variable">X2</span><span class="cm-operator">+</span><span class="cm-variable">X3</span>, <span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">binomial</span>(<span class="cm-variable">link</span><span class="cm-operator">=</span><span class="cm-string">"logit"</span>), <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mydata</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>泊松回归</span></strong><span>适用于在给定时间内响应变量为事件发生数目的情形。它假设Y服从泊松分布，线性模型的拟合形式为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2679" cid="n2679" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="23.406ex" height="6.658ex" role="img" focusable="false" viewBox="0 -1610.7 10345.4 2942.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -3.014ex;"><defs><path id="MJX-8-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-8-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-8-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-8-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-8-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-8-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path id="MJX-8-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-8-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-8-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-8-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-8-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-8-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-8-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path><path id="MJX-8-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-8-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-8-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-8-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(298,0)"><use data-c="1D45C" xlink:href="#MJX-8-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(783,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-8-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(510,-150) scale(0.707)"><use data-c="1D452" xlink:href="#MJX-8-TEX-I-1D452"></use></g></g><g data-mml-node="mo" transform="translate(1672.5,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(2061.5,0)"><use data-c="1D706" xlink:href="#MJX-8-TEX-I-1D706"></use></g><g data-mml-node="mo" transform="translate(2644.5,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3311.3,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(4367.1,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-8-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-8-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(5591.8,0)"><use data-c="2B" xlink:href="#MJX-8-TEX-N-2B"></use></g><g data-mml-node="munderover" transform="translate(6592.1,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-8-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(124.5,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-8-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(412,0)"><use data-c="3D" xlink:href="#MJX-8-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1190,0)"><use data-c="31" xlink:href="#MJX-8-TEX-N-31"></use></g></g><g data-mml-node="mi" transform="translate(544.2,1198.2) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-8-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(8202.7,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-8-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-8-TEX-I-1D457"></use></g></g><g data-mml-node="msub" transform="translate(9143.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-8-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-8-TEX-I-1D457"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>e</mi></msub><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>p</mi></munderover><msub><mi>β</mi><mi>j</mi></msub><msub><mi>X</mi><mi>j</mi></msub></math></mjx-assistive-mml></mjx-container></div></div><p><span>其中λ是Y的均值( 也等于方差 )。此时，连接函数为</span><strong><span>log(λ)</span></strong><span>，概率分布为泊松分布，</span></p></li><li><p><span>拟合泊松回归模型：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">Y</span><span class="cm-operator">~</span><span class="cm-variable">X1</span><span class="cm-operator">+</span><span class="cm-variable">X2</span><span class="cm-operator">+</span><span class="cm-variable">X3</span>, <span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">poisson</span>(<span class="cm-variable">link</span><span class="cm-operator">=</span><span class="cm-string">"log"</span>), <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mydata</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>标准线性模型</span></strong><span>为广义线性模型的一个特例，令连接函数</span><strong><span>g(μy) = μy</span></strong><span>或恒等函数，并设定概率分布为</span><strong><span>正态(高斯) 分布</span></strong><span>：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">Y</span><span class="cm-operator">~</span><span class="cm-variable">X1</span><span class="cm-operator">+</span><span class="cm-variable">X2</span><span class="cm-operator">+</span><span class="cm-variable">X3</span>, <span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">gaussian</span>(<span class="cm-variable">link</span><span class="cm-operator">=</span><span class="cm-string">"identity"</span>), <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mydata</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 等价</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lm</span>(<span class="cm-variable">Y</span><span class="cm-operator">~</span><span class="cm-variable">X1</span><span class="cm-operator">+</span><span class="cm-variable">X2</span><span class="cm-operator">+</span><span class="cm-variable">X3</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mydata</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>广义线性模型通过拟合响应变量的</span><strong><span>条件均值的一个函数</span></strong><span>(不是响应变量的条件均值)，假设响应变量服从</span><strong><span>指数分布族</span></strong><span>中的某个分布(并不仅限于正态分布)，极大地扩展了标准线性模型。模型参数估计的推导依据的是</span><strong><span>极大似然估计</span></strong><span>，而非最小二乘法。</span></p></li></ul><h5 id='连用的函数'><span>连用的函数</span></h5><p><img src="img\019_R语言实战\第13章\第13章 002.png" referrerpolicy="no-referrer" alt="第13章 002"><img src="img\019_R语言实战\第13章\第13章 003.png" referrerpolicy="no-referrer" alt="第13章 003"></p><h5 id='模型拟合和回归诊断'><span>模型拟合和回归诊断</span></h5><ul><li><p><span>当评价模型的适用性时，你可以绘制初始响应变量的预测值与残差的图形。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">predict</span>(<span class="cm-variable">model</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"response"</span>),<span class="cm-variable">residuals</span>(<span class="cm-variable">model</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span> <span class="cm-string">"deviance"</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>其中，model为</span><strong><span>glm()</span></strong><span>函数返回的对象。</span></p></li><li><p><span>R将列出帽子值( hat value )、学生化残差值和Cook距离统计量的近似值。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">hatvalues</span>(<span class="cm-variable">model</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">rstudent</span>(<span class="cm-variable">model</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">cooks.distance</span>(<span class="cm-variable">model</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">car</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">influencePlot</span>(<span class="cm-variable">model</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre></li></ul><h4 id='logistic回归'><span>Logistic回归</span></h4><ul><li><span>当通过一系列连续型和/或类别型预测变量来预测二值型结果变量时。</span></li><li><span>数据集：</span><strong><span>AER</span></strong><span>包的</span><strong><span>Affairs</span></strong><span>，该数据从601个参与者身上收集了9个变量，包括一年来婚外私通的频率以及参与者性别、年龄、婚龄、是否有小孩、宗教信仰程度(5分制，1分表示反对，5分表示非常信仰 )、学历、职业(逆向编号的戈登7种分类 ，还有对婚姻的自我评分(5分制，1表示非常不幸福，5表示非常幸福 )。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">Affairs</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">affairs</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">gender</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">age</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">yearsmarried</span> &nbsp; &nbsp;<span class="cm-variable">children</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">0.000</span> &nbsp; <span class="cm-variable">female</span><span class="cm-operator">:</span><span class="cm-number">315</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">17.50</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">0.125</span> &nbsp; <span class="cm-variable">no</span> <span class="cm-operator">:</span><span class="cm-number">171</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">0.000</span> &nbsp; <span class="cm-variable">male</span> &nbsp;<span class="cm-operator">:</span><span class="cm-number">286</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">27.00</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">4.000</span> &nbsp; <span class="cm-variable">yes</span><span class="cm-operator">:</span><span class="cm-number">430</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Median</span> <span class="cm-operator">:</span> <span class="cm-number">0.000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">32.00</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span> <span class="cm-number">7.000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">1.456</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">32.49</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">8.178</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">0.000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">37.00</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">15.000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">12.000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">57.00</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">15.000</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">religiousness</span> &nbsp; &nbsp; <span class="cm-variable">education</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">occupation</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rating</span> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">1.000</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">9.00</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">1.000</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">1.000</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">2.000</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">14.00</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">3.000</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">3.000</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">3.000</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">16.00</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">5.000</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">4.000</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">3.116</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">16.17</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">4.195</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">3.932</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">4.000</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">18.00</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">6.000</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">5.000</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">5.000</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">20.00</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">7.000</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">5.000</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">affairs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">2</span> &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">7</span> &nbsp;<span class="cm-number">12</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">451</span> &nbsp;<span class="cm-number">34</span> &nbsp;<span class="cm-number">17</span> &nbsp;<span class="cm-number">19</span> &nbsp;<span class="cm-number">42</span> &nbsp;<span class="cm-number">38</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><ul><li><span>将affairs转为二值变量ynaffair：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">ynaffair</span>[<span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">affairs</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">ynaffair</span>[<span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">affairs</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">ynaffair</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">ynaffair</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"No"</span>,<span class="cm-string">"Yes"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">Affairs</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">ynaffair</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">No</span> <span class="cm-variable">Yes</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">451</span> <span class="cm-number">150</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>该二值型因子现可作为Logistic回归的结果变量：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.full</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">gender</span> <span class="cm-operator">+</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">children</span> <span class="cm-operator">+</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span> <span class="cm-variable">education</span> <span class="cm-operator">+</span> <span class="cm-variable">occupation</span> <span class="cm-operator">+</span> <span class="cm-variable">rating</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Affairs</span>,<span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit.full</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">gender</span> <span class="cm-operator">+</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">children</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">religiousness</span> <span class="cm-operator">+</span> <span class="cm-variable">education</span> <span class="cm-operator">+</span> <span class="cm-variable">occupation</span> <span class="cm-operator">+</span> <span class="cm-variable">rating</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>(), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Affairs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Deviance</span> <span class="cm-variable">Residuals</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">1.5713</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.7499</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.5690</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.2539</span> &nbsp; <span class="cm-number">2.5191</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">z</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">z</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; &nbsp;<span class="cm-number">1.37726</span> &nbsp; &nbsp;<span class="cm-number">0.88776</span> &nbsp; <span class="cm-number">1.551</span> <span class="cm-number">0.120807</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gendermale</span> &nbsp; &nbsp; <span class="cm-number">0.28029</span> &nbsp; &nbsp;<span class="cm-number">0.23909</span> &nbsp; <span class="cm-number">1.172</span> <span class="cm-number">0.241083</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">age</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.04426</span> &nbsp; &nbsp;<span class="cm-number">0.01825</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">2.425</span> <span class="cm-number">0.015301</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">yearsmarried</span> &nbsp; <span class="cm-number">0.09477</span> &nbsp; &nbsp;<span class="cm-number">0.03221</span> &nbsp; <span class="cm-number">2.942</span> <span class="cm-number">0.003262</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">childrenyes</span> &nbsp; &nbsp;<span class="cm-number">0.39767</span> &nbsp; &nbsp;<span class="cm-number">0.29151</span> &nbsp; <span class="cm-number">1.364</span> <span class="cm-number">0.172508</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">religiousness</span> <span class="cm-operator">-</span><span class="cm-number">0.32472</span> &nbsp; &nbsp;<span class="cm-number">0.08975</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">3.618</span> <span class="cm-number">0.000297</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">education</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.02105</span> &nbsp; &nbsp;<span class="cm-number">0.05051</span> &nbsp; <span class="cm-number">0.417</span> <span class="cm-number">0.676851</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">occupation</span> &nbsp; &nbsp; <span class="cm-number">0.03092</span> &nbsp; &nbsp;<span class="cm-number">0.07178</span> &nbsp; <span class="cm-number">0.431</span> <span class="cm-number">0.666630</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rating</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.46845</span> &nbsp; &nbsp;<span class="cm-number">0.09091</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">5.153</span> <span class="cm-number">2.56e-07</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Dispersion</span> <span class="cm-variable">parameter</span> <span class="cm-keyword">for</span> <span class="cm-variable">binomial</span> <span class="cm-variable">family</span> <span class="cm-variable">taken</span> <span class="cm-variable">to</span> <span class="cm-variable">be</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Null</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">675.38</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">600</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">609.51</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">592</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AIC</span><span class="cm-operator">:</span> <span class="cm-number">627.51</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">Fisher</span> <span class="cm-variable">Scoring</span> <span class="cm-variable">iterations</span><span class="cm-operator">:</span> <span class="cm-number">4</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 754px;"></div><div class="CodeMirror-gutters" style="display: none; height: 754px;"></div></div></div></pre><ul><li><span>去掉不显著的变量：性别、是否有孩子、学历和职业</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.reduced</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span> <span class="cm-variable">rating</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Affairs</span>,<span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit.full</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">rating</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>(), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Affairs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Deviance</span> <span class="cm-variable">Residuals</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">1.6278</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.7550</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.5701</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.2624</span> &nbsp; <span class="cm-number">2.3998</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">z</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">z</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; &nbsp;<span class="cm-number">1.93083</span> &nbsp; &nbsp;<span class="cm-number">0.61032</span> &nbsp; <span class="cm-number">3.164</span> <span class="cm-number">0.001558</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">age</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.03527</span> &nbsp; &nbsp;<span class="cm-number">0.01736</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">2.032</span> <span class="cm-number">0.042127</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">yearsmarried</span> &nbsp; <span class="cm-number">0.10062</span> &nbsp; &nbsp;<span class="cm-number">0.02921</span> &nbsp; <span class="cm-number">3.445</span> <span class="cm-number">0.000571</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">religiousness</span> <span class="cm-operator">-</span><span class="cm-number">0.32902</span> &nbsp; &nbsp;<span class="cm-number">0.08945</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">3.678</span> <span class="cm-number">0.000235</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">rating</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.46136</span> &nbsp; &nbsp;<span class="cm-number">0.08884</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">5.193</span> <span class="cm-number">2.06e-07</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Dispersion</span> <span class="cm-variable">parameter</span> <span class="cm-keyword">for</span> <span class="cm-variable">binomial</span> <span class="cm-variable">family</span> <span class="cm-variable">taken</span> <span class="cm-variable">to</span> <span class="cm-variable">be</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Null</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">675.38</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">600</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">615.36</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">596</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AIC</span><span class="cm-operator">:</span> <span class="cm-number">625.36</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">Fisher</span> <span class="cm-variable">Scoring</span> <span class="cm-variable">iterations</span><span class="cm-operator">:</span> <span class="cm-number">4</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 624px;"></div><div class="CodeMirror-gutters" style="display: none; height: 624px;"></div></div></div></pre><ul><li><span>两个模型为嵌套关系：</span><strong><span>fit.reduced</span></strong><span>是</span><strong><span>fit.full</span></strong><span>的一个子集。使用</span><strong><span>anova()</span></strong><span>函数对它们进行比较，对于广义线性回归，可用卡方检验。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">anova</span>(<span class="cm-variable">fit.reduced</span>,<span class="cm-variable">fit.full</span>,<span class="cm-variable">test</span> <span class="cm-operator">=</span> <span class="cm-string">"Chisq"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Analysis</span> <span class="cm-variable">of</span> <span class="cm-variable">Deviance</span> <span class="cm-variable">Table</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Model</span> <span class="cm-number">1</span><span class="cm-operator">:</span> <span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span> <span class="cm-variable">rating</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Model</span> <span class="cm-number">2</span><span class="cm-operator">:</span> <span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">gender</span> <span class="cm-operator">+</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">children</span> <span class="cm-operator">+</span> <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">education</span> <span class="cm-operator">+</span> <span class="cm-variable">occupation</span> <span class="cm-operator">+</span> <span class="cm-variable">rating</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Resid.</span> <span class="cm-variable">Df</span> <span class="cm-variable">Resid.</span> <span class="cm-variable">Dev</span> <span class="cm-variable">Df</span> <span class="cm-variable">Deviance</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;</span><span class="cm-variable">Chi</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">596</span> &nbsp; &nbsp; <span class="cm-number">615.36</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">592</span> &nbsp; &nbsp; <span class="cm-number">609.51</span> &nbsp;<span class="cm-number">4</span> &nbsp; <span class="cm-number">5.8474</span> &nbsp; <span class="cm-number">0.2108</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><ul><li><span>结果的卡方值不显著(p=0.21 )，表明四个预测变量的新模型与九个完整预测变量的模型拟合程度一样好。</span></li></ul><h5 id='解释模型参数-1'><span>解释模型参数</span></h5><ul><li><p><span>回归系数：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">coef</span>(<span class="cm-variable">fit.reduced</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  (<span class="cm-variable">Intercept</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">age</span> &nbsp;<span class="cm-variable">yearsmarried</span> <span class="cm-variable">religiousness</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rating</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">1.93083017</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.03527112</span> &nbsp; &nbsp;<span class="cm-number">0.10062274</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.32902386</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.46136144</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 或coefficients(fit.reduced)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li><li><p><span>在Logistic回归中，响应变量是Y=1的对数优势比 (log)。回归系数的含义是当其他预测变量不变时，一单位预测变量的变化可引起的响应变量对数优势比的变化。</span></p></li><li><p><span>将对数结果进行指数化：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">exp</span>(<span class="cm-variable">coef</span>(<span class="cm-variable">fit.reduced</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  (<span class="cm-variable">Intercept</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">age</span> &nbsp;<span class="cm-variable">yearsmarried</span> <span class="cm-variable">religiousness</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rating</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-number">6.8952321</span> &nbsp; &nbsp; <span class="cm-number">0.9653437</span> &nbsp; &nbsp; <span class="cm-number">1.1058594</span> &nbsp; &nbsp; <span class="cm-number">0.7196258</span> &nbsp; &nbsp; <span class="cm-number">0.6304248</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>可以看到婚龄增加一年，婚外情的优势比将乘以1.106( 保持年龄、宗教信仰和婚姻评定不变 ); 相反，年龄增加一岁，婚外情的的优势比则乘以0.965。因此，随着婚龄的增加和年龄、宗教信仰与婚姻评分的降低，婚外情优势比将上升。因为预测变量不能等于0，截距项在此处没有什么特定含义。</span></p></li><li><p><span>获得置信区间：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">exp</span>(<span class="cm-variable">confint</span>(<span class="cm-variable">fit.reduced</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><h5 id='预测变量对结果概率的影响'><span>预测变量对结果概率的影响</span></h5><ul><li><span>看婚姻评分的对出轨的影响：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 除了婚姻评分，其他变量取均值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">testData</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">Affairs</span>,<span class="cm-variable">data.frame</span>(<span class="cm-variable">rating</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span>,<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">age</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">yearsmarried</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">yearsmarried</span>),<span class="cm-variable">religiousness</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">religiousness</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测出轨的概率</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">testData</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Prob</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.reduced</span>,<span class="cm-variable">newdata</span> <span class="cm-operator">=</span> <span class="cm-variable">testData</span>,<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"response"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">testData</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">rating</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">age</span> <span class="cm-variable">yearsmarried</span> <span class="cm-variable">religiousness</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Prob</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> <span class="cm-number">32.48752</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.5302296</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> <span class="cm-number">32.48752</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.4157377</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> <span class="cm-number">32.48752</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.3096712</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> <span class="cm-number">32.48752</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.2204547</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">5</span> <span class="cm-number">32.48752</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.1513079</span> <span class="cm-comment"># 评分增加，出轨率降低</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><ul><li><span>看年龄：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 看年龄</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">testData</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">Affairs</span>,<span class="cm-variable">data.frame</span>(<span class="cm-variable">rating</span> <span class="cm-operator">=</span> <span class="cm-variable">mean</span>(<span class="cm-variable">rating</span>),<span class="cm-variable">age</span> <span class="cm-operator">=</span> <span class="cm-variable">seq</span>(<span class="cm-number">17</span>, <span class="cm-number">57</span>, <span class="cm-number">10</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">yearsmarried</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">yearsmarried</span>),<span class="cm-variable">religiousness</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">religiousness</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测出轨的概率</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">testData</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Prob</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.reduced</span>,<span class="cm-variable">newdata</span> <span class="cm-operator">=</span> <span class="cm-variable">testData</span>,<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-string">"response"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">testData</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">rating</span> <span class="cm-variable">age</span> <span class="cm-variable">yearsmarried</span> <span class="cm-variable">religiousness</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Prob</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">3.93178</span> &nbsp;<span class="cm-number">17</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.3350834</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">3.93178</span> &nbsp;<span class="cm-number">27</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.2615373</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">3.93178</span> &nbsp;<span class="cm-number">37</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.1992953</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> <span class="cm-number">3.93178</span> &nbsp;<span class="cm-number">47</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.1488796</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-number">3.93178</span> &nbsp;<span class="cm-number">57</span> &nbsp; &nbsp; <span class="cm-number">8.177696</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3.116473</span> <span class="cm-number">0.1094738</span> <span class="cm-comment"># 年龄增加，出轨率降低</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><h5 id='过度离势-1'><span>过度离势</span></h5><ul><li><p><strong><span>过度离势</span></strong><span>，即观测到的响应变量的方差大于期望的二项分布的方差。过度离势会导致奇异的标准误检验和不精确的显著性检验。</span></p></li><li><p><span>当出现过度离势时，仍可使用</span><strong><span>glm()</span></strong><span>函数拟合Logistic回归，但此时需要将二项分布改为</span><strong><span>类二项分布</span></strong><span>。</span></p></li><li><p><span>检测过度离势：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2759" cid="n2759" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="15ex" height="5.285ex" role="img" focusable="false" viewBox="0 -1426 6629.9 2336" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.059ex;"><defs><path id="MJX-9-TEX-I-1D719" d="M409 688Q413 694 421 694H429H442Q448 688 448 686Q448 679 418 563Q411 535 404 504T392 458L388 442Q388 441 397 441T429 435T477 418Q521 397 550 357T579 260T548 151T471 65T374 11T279 -10H275L251 -105Q245 -128 238 -160Q230 -192 227 -198T215 -205H209Q189 -205 189 -198Q189 -193 211 -103L234 -11Q234 -10 226 -10Q221 -10 206 -8T161 6T107 36T62 89T43 171Q43 231 76 284T157 370T254 422T342 441Q347 441 348 445L378 567Q409 686 409 688ZM122 150Q122 116 134 91T167 53T203 35T237 27H244L337 404Q333 404 326 403T297 395T255 379T211 350T170 304Q152 276 137 237Q122 191 122 150ZM500 282Q500 320 484 347T444 385T405 400T381 404H378L332 217L284 29Q284 27 285 27Q293 27 317 33T357 47Q400 66 431 100T475 170T494 234T500 282Z"></path><path id="MJX-9-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D719" xlink:href="#MJX-9-TEX-I-1D719"></use></g><g data-mml-node="mo" transform="translate(873.8,0)"><use data-c="3D" xlink:href="#MJX-9-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(1929.6,0)"><g data-mml-node="mrow" transform="translate(646,676)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">残</text></g><g data-mml-node="mtext" transform="translate(852.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">差</text></g><g data-mml-node="mtext" transform="translate(1704.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">偏</text></g><g data-mml-node="mtext" transform="translate(2556.2,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">差</text></g></g><g data-mml-node="mrow" transform="translate(220,-710)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">残</text></g><g data-mml-node="mtext" transform="translate(852.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">差</text></g><g data-mml-node="mtext" transform="translate(1704.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">自</text></g><g data-mml-node="mtext" transform="translate(2556.2,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">由</text></g><g data-mml-node="mtext" transform="translate(3408.3,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">度</text></g></g><rect width="4460.3" height="60" x="120" y="220"></rect></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>ϕ</mi><mo>=</mo><mfrac><mrow><mtext>残</mtext><mtext>差</mtext><mtext>偏</mtext><mtext>差</mtext></mrow><mrow><mtext>残</mtext><mtext>差</mtext><mtext>自</mtext><mtext>由</mtext><mtext>度</mtext></mrow></mfrac></math></mjx-assistive-mml></mjx-container></div></div><p><span>比1大很多，你便可认为存在过度离势。</span></p></li><li><p><span>前面的例子：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">deviance</span>(<span class="cm-variable">fit.reduced</span>)<span class="cm-operator">/</span><span class="cm-variable">df.residual</span>(<span class="cm-variable">fit.reduced</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">1.03248</span> <span class="cm-comment"># 接近1，不存在过度离势</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>过度离势的检验：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rating</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>(), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Affairs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 类二项分布</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.od</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">ynaffair</span> <span class="cm-operator">~</span> <span class="cm-variable">age</span> <span class="cm-operator">+</span> <span class="cm-variable">yearsmarried</span> <span class="cm-operator">+</span> <span class="cm-variable">religiousness</span> <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">rating</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">quasibinomial</span>(), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">Affairs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pchisq</span>(<span class="cm-variable">summary</span>(<span class="cm-variable">fit.od</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">dispersion</span> <span class="cm-operator">*</span> <span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">df.residual</span>,<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">df.residual</span>, <span class="cm-variable">lower</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.340122</span> <span class="cm-comment"># 两个模型不显著，预测认为不存在过度离势</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li></ul><h5 id='扩展-1'><span>扩展</span></h5><ul><li><strong><span>稳健Logistic回归</span></strong><span>：robust包中的glmRob() 函数可用来拟合稳健的广义线性模型，包括稳健Logistic回归。当拟合Logistic回归模型数据出现离群点和强影响点时，稳健Logistic可归便可派上用场。</span></li><li><strong><span>多项分布回归</span></strong><span>：若响应变量包含两个以上的无序类别(比如，已婚/寡居/离婚)，便可使用mlogit包中的mlogit()函数拟合多项Logistic回归。</span></li><li><strong><span>序数Logistic回归</span></strong><span>：若响应变量是一组有序的类别(比如，信用风险为差/良/好 )，便可使用rms包中的lrm() 函数拟合序数Logistic回归。</span></li></ul><h4 id='泊松分布'><span>泊松分布</span></h4><ul><li><span>当通过一系列</span><strong><span>连续型和/或类别型</span></strong><span>预测变量来预测计数型结果变量时。</span></li><li><span>数据集：使用</span><strong><span>robust</span></strong><span>包中的</span><strong><span>Breslow</span></strong><span>癫病数据。病人的年龄和癫病发病数收集了数据,包含病人被随机分配到药物组或者安慰剂组前八周和随机分配后八周两种情况。响应变量为sumy( 随机化后八周内癫病发病数 )，预测变量为治疗条件( Trt )、年(Age) 和前八周内的基础病发病数(Base)。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span>(<span class="cm-string">"breslow.dat"</span>,<span class="cm-variable">package</span> <span class="cm-operator">=</span> <span class="cm-string">"robust"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">names</span>(<span class="cm-variable">breslow.dat</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-string">"ID"</span> &nbsp; &nbsp;<span class="cm-string">"Y1"</span> &nbsp; &nbsp;<span class="cm-string">"Y2"</span> &nbsp; &nbsp;<span class="cm-string">"Y3"</span> &nbsp; &nbsp;<span class="cm-string">"Y4"</span> &nbsp; &nbsp;<span class="cm-string">"Base"</span> &nbsp;<span class="cm-string">"Age"</span> &nbsp; <span class="cm-string">"Trt"</span> &nbsp; <span class="cm-string">"Ysum"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">10</span>] <span class="cm-string">"sumY"</span> &nbsp;<span class="cm-string">"Age10"</span> <span class="cm-string">"Base4"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">breslow.dat</span>[<span class="cm-variable">c</span>(<span class="cm-number">6</span>,<span class="cm-number">7</span>,<span class="cm-number">8</span>,<span class="cm-number">10</span>)])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Base</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Age</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Trt</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">sumY</span> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span> &nbsp;<span class="cm-number">6.00</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">18.00</span> &nbsp; <span class="cm-variable">placebo</span> &nbsp;<span class="cm-operator">:</span><span class="cm-number">28</span> &nbsp; <span class="cm-variable">Min.</span> &nbsp; <span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.00</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">12.00</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">23.00</span> &nbsp; <span class="cm-variable">progabide</span><span class="cm-operator">:</span><span class="cm-number">31</span> &nbsp; <span class="cm-number">1</span><span class="cm-variable">st</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">11.50</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Median</span> <span class="cm-operator">:</span> <span class="cm-number">22.00</span> &nbsp; <span class="cm-variable">Median</span> <span class="cm-operator">:</span><span class="cm-number">28.00</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Median</span> <span class="cm-operator">:</span> <span class="cm-number">16.00</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">31.22</span> &nbsp; <span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">28.34</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Mean</span> &nbsp; <span class="cm-operator">:</span> <span class="cm-number">33.05</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">41.00</span> &nbsp; <span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span><span class="cm-number">32.00</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">rd</span> <span class="cm-variable">Qu.</span><span class="cm-operator">:</span> <span class="cm-number">36.00</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">151.00</span> &nbsp; <span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">42.00</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max.</span> &nbsp; <span class="cm-operator">:</span><span class="cm-number">302.00</span> &nbsp;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">with</span>(<span class="cm-variable">breslow.dat</span>,{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hist</span>(<span class="cm-variable">sumY</span>, <span class="cm-variable">breaks</span><span class="cm-operator">=</span><span class="cm-number">20</span>, <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"发作次数"</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"发作次数的分布"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">boxplot</span>(<span class="cm-variable">sumY</span> <span class="cm-operator">~</span> <span class="cm-variable">Trt</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"处理"</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"比较"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第13章\第13章 004.png" alt="第13章 004" style="zoom:50%;" /></p><ul><li><span>拟合泊松回归：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">sumY</span> <span class="cm-operator">~</span> <span class="cm-variable">Base</span> <span class="cm-operator">+</span> <span class="cm-variable">Age</span> <span class="cm-operator">+</span> <span class="cm-variable">Trt</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">breslow.dat</span>, <span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">poisson</span>())</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">sumY</span> <span class="cm-operator">~</span> <span class="cm-variable">Base</span> <span class="cm-operator">+</span> <span class="cm-variable">Age</span> <span class="cm-operator">+</span> <span class="cm-variable">Trt</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">poisson</span>(), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">breslow.dat</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Deviance</span> <span class="cm-variable">Residuals</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">6.0569</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">2.0433</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.9397</span> &nbsp; <span class="cm-number">0.7929</span> &nbsp;<span class="cm-number">11.0061</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">z</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">z</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; <span class="cm-number">1.9488259</span> &nbsp;<span class="cm-number">0.1356191</span> &nbsp;<span class="cm-number">14.370</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Base</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.0226517</span> &nbsp;<span class="cm-number">0.0005093</span> &nbsp;<span class="cm-number">44.476</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Age</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.0227401</span> &nbsp;<span class="cm-number">0.0040240</span> &nbsp; <span class="cm-number">5.651</span> <span class="cm-number">1.59e-08</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Trtprogabide</span> <span class="cm-operator">-</span><span class="cm-number">0.1527009</span> &nbsp;<span class="cm-number">0.0478051</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">3.194</span> &nbsp; <span class="cm-number">0.0014</span> <span class="cm-operator">**</span> &nbsp;<span class="cm-comment"># 都显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Dispersion</span> <span class="cm-variable">parameter</span> <span class="cm-keyword">for</span> <span class="cm-variable">poisson</span> <span class="cm-variable">family</span> <span class="cm-variable">taken</span> <span class="cm-variable">to</span> <span class="cm-variable">be</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Null</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">2122.73</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">58</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">559.44</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">55</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AIC</span><span class="cm-operator">:</span> <span class="cm-number">850.71</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">Fisher</span> <span class="cm-variable">Scoring</span> <span class="cm-variable">iterations</span><span class="cm-operator">:</span> <span class="cm-number">5</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><h5 id='解释模型参数-2'><span>解释模型参数</span></h5><ul><li><p><span>回归参数：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">coef</span>(<span class="cm-variable">fit</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> (<span class="cm-variable">Intercept</span>) &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Base</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Age</span> <span class="cm-variable">Trtprogabide</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1.94882593</span> &nbsp; <span class="cm-number">0.02265174</span> &nbsp; <span class="cm-number">0.02274013</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.15270095</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>在泊松回归中，因变量以条件均值的对数形式</span><strong><span>log(λ)</span></strong><span>来建模。年龄的回归参数为0.0227，表明保持其他预测变量不变，年龄增加一岁，癫病发病数的对数均值将相应增加0.03。截距项即当预测变量都为0时，癫痛发病数的对数均值。由于不可能为0岁，且调查对象的基础癫病发病数均不为0，因此本例中截距项没有意义。</span></p></li><li><p><span>指数化回归系数（获得原始的回归系数）：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">exp</span>(<span class="cm-variable">coef</span>(<span class="cm-variable">fit</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> (<span class="cm-variable">Intercept</span>) &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Base</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Age</span> <span class="cm-variable">Trtprogabide</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">7.0204403</span> &nbsp; &nbsp;<span class="cm-number">1.0229102</span> &nbsp; &nbsp;<span class="cm-number">1.0230007</span> &nbsp; &nbsp;<span class="cm-number">0.8583864</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>现在可以看到，保持其他变量不变，年龄增加一岁，期望的癫病发病数将乘以1.023。这意味着年龄的增加与较高的癫病发病数相关联。更为重要的是，一单位Trt的变化(即从安慰剂到治疗组 )，期望的癫病发病数将乘以0.86，也就是说，保持基础癫病发病数和年龄不变，服药组相对于安慰剂组癫痴发病数降低了20%。</span></p></li></ul><h5 id='过度离势-2'><span>过度离势</span></h5><ul><li><p><span>松分布的方差和均值相等。当响应变量观测的方差比依据泊松分布预测的方差大时，泊松回归可能发生过度离势。</span></p></li><li><p><span>与Logistic回归类似，此处如果残差偏差与残差自由度的比例远远大于1，那么表明存在过度离势。</span></p></li><li><p><span>前面的数据：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">deviance</span>(<span class="cm-variable">fit</span>)<span class="cm-operator">/</span><span class="cm-variable">df.residual</span>(<span class="cm-variable">fit</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">10.1717</span> <span class="cm-comment"># 存在过度离势</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><strong><span>qcc</span></strong><span>包有一个对泊松模型过度离势的检验方法：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">qcc.overdispersion.test</span>(<span class="cm-variable">breslow.dat</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">sumY</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"poisson"</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Overdispersion</span> <span class="cm-variable">test</span> <span class="cm-variable">Obs.Var</span><span class="cm-operator">/</span><span class="cm-variable">Theor.Var</span> <span class="cm-variable">Statistic</span> <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">poisson</span> <span class="cm-variable">data</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">62.87013</span> &nbsp;<span class="cm-number">3646.468</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><span>显著性检验的p值果然小于0.05，进一步表明确实存在过度离势。</span></p></li><li><p><span>存在过度离势，使用</span><strong><span>类泊松分布</span></strong><span>替换泊松分布。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.od</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">sumY</span> <span class="cm-operator">~</span> <span class="cm-variable">Base</span> <span class="cm-operator">+</span> <span class="cm-variable">Age</span> <span class="cm-operator">+</span> <span class="cm-variable">Trt</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">breslow.dat</span>,<span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">quasipoisson</span>())</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit.od</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">sumY</span> <span class="cm-operator">~</span> <span class="cm-variable">Base</span> <span class="cm-operator">+</span> <span class="cm-variable">Age</span> <span class="cm-operator">+</span> <span class="cm-variable">Trt</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">quasipoisson</span>(), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">breslow.dat</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Deviance</span> <span class="cm-variable">Residuals</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; <span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Max</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">6.0569</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">2.0433</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.9397</span> &nbsp; <span class="cm-number">0.7929</span> &nbsp;<span class="cm-number">11.0061</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">t</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">t</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; <span class="cm-number">1.948826</span> &nbsp; <span class="cm-number">0.465091</span> &nbsp; <span class="cm-number">4.190</span> <span class="cm-number">0.000102</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Base</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.022652</span> &nbsp; <span class="cm-number">0.001747</span> &nbsp;<span class="cm-number">12.969</span> &nbsp;<span class="cm-operator">&lt;</span> <span class="cm-number">2e-16</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Age</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.022740</span> &nbsp; <span class="cm-number">0.013800</span> &nbsp; <span class="cm-number">1.648</span> <span class="cm-number">0.105085</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Trtprogabide</span> <span class="cm-operator">-</span><span class="cm-number">0.152701</span> &nbsp; <span class="cm-number">0.163943</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.931</span> <span class="cm-number">0.355702</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Dispersion</span> <span class="cm-variable">parameter</span> <span class="cm-keyword">for</span> <span class="cm-variable">quasipoisson</span> <span class="cm-variable">family</span> <span class="cm-variable">taken</span> <span class="cm-variable">to</span> <span class="cm-variable">be</span> <span class="cm-number">11.76075</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Null</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">2122.73</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">58</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">559.44</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">55</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AIC</span><span class="cm-operator">:</span> <span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">Fisher</span> <span class="cm-variable">Scoring</span> <span class="cm-variable">iterations</span><span class="cm-operator">:</span> <span class="cm-number">5</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 546px;"></div><div class="CodeMirror-gutters" style="display: none; height: 546px;"></div></div></div></pre><h5 id='扩展-2'><span>扩展</span></h5><ul><li><p><span>R提供了基本泊松回归模型的一些有用扩展，包括允许时间段变化、存在过多0时会自动修正的模型，以及当数据存在离群点和强影响点时有用的稳健模型。</span></p></li><li><p><strong><span>允许时间段变换的泊松回归</span></strong><span>，模型修改为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2822" cid="n2822" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="40.209ex" height="14.448ex" role="img" focusable="false" viewBox="0 -3442.9 17772.5 6385.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -6.658ex;"><defs><path id="MJX-10-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-10-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-10-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-10-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-10-TEX-S3-28" d="M701 -940Q701 -943 695 -949H664Q662 -947 636 -922T591 -879T537 -818T475 -737T412 -636T350 -511T295 -362T250 -186T221 17T209 251Q209 962 573 1361Q596 1386 616 1405T649 1437T664 1450H695Q701 1444 701 1441Q701 1436 681 1415T629 1356T557 1261T476 1118T400 927T340 675T308 359Q306 321 306 250Q306 -139 400 -430T690 -924Q701 -936 701 -940Z"></path><path id="MJX-10-TEX-I-1D706" d="M166 673Q166 685 183 694H202Q292 691 316 644Q322 629 373 486T474 207T524 67Q531 47 537 34T546 15T551 6T555 2T556 -2T550 -11H482Q457 3 450 18T399 152L354 277L340 262Q327 246 293 207T236 141Q211 112 174 69Q123 9 111 -1T83 -12Q47 -12 47 20Q47 37 61 52T199 187Q229 216 266 252T321 306L338 322Q338 323 288 462T234 612Q214 657 183 657Q166 657 166 673Z"></path><path id="MJX-10-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-10-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-10-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-10-TEX-S3-29" d="M34 1438Q34 1446 37 1448T50 1450H56H71Q73 1448 99 1423T144 1380T198 1319T260 1238T323 1137T385 1013T440 864T485 688T514 485T526 251Q526 134 519 53Q472 -519 162 -860Q139 -885 119 -904T86 -936T71 -949H56Q43 -949 39 -947T34 -937Q88 -883 140 -813Q428 -430 428 251Q428 453 402 628T338 922T245 1146T145 1309T46 1425Q44 1427 42 1429T39 1433T36 1436L34 1438Z"></path><path id="MJX-10-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-10-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-10-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-10-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-10-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-10-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path><path id="MJX-10-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-10-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-10-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-10-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-10-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,1832.2)"><g data-mml-node="mtd" transform="translate(2329.7,0)"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-10-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(298,0)"><use data-c="1D45C" xlink:href="#MJX-10-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(783,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-10-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(510,-150) scale(0.707)"><use data-c="1D452" xlink:href="#MJX-10-TEX-I-1D452"></use></g></g><g data-mml-node="mrow" transform="translate(1839.2,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="28" xlink:href="#MJX-10-TEX-S3-28"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(736,0)"><g data-mml-node="mfrac"><g data-mml-node="mi" transform="translate(953.5,676)"><use data-c="1D706" xlink:href="#MJX-10-TEX-I-1D706"></use></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-10-TEX-I-1D461"></use></g><g data-mml-node="mi" transform="translate(361,0)"><use data-c="1D456" xlink:href="#MJX-10-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(706,0)"><use data-c="1D45A" xlink:href="#MJX-10-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(1584,0)"><use data-c="1D452" xlink:href="#MJX-10-TEX-I-1D452"></use></g></g><rect width="2250" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mo" transform="translate(3226,0) translate(0 -0.5)"><use data-c="29" xlink:href="#MJX-10-TEX-S3-29"></use></g></g><g data-mml-node="mo" transform="translate(6079,0)"><use data-c="3D" xlink:href="#MJX-10-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(7134.7,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-10-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-10-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(8359.5,0)"><use data-c="2B" xlink:href="#MJX-10-TEX-N-2B"></use></g><g data-mml-node="munderover" transform="translate(9359.7,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-10-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(124.5,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-10-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(412,0)"><use data-c="3D" xlink:href="#MJX-10-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1190,0)"><use data-c="31" xlink:href="#MJX-10-TEX-N-31"></use></g></g><g data-mml-node="TeXAtom" transform="translate(544.2,1198.2) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-10-TEX-I-1D45D"></use></g></g></g><g data-mml-node="msub" transform="translate(10970.4,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-10-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-10-TEX-I-1D457"></use></g></g><g data-mml-node="msub" transform="translate(11910.7,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-10-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-10-TEX-I-1D457"></use></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-1610.7)"><g data-mml-node="mtd"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">或</text></g><g data-mml-node="mi" transform="translate(852.1,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="852px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(1704.1,0)"><use data-c="1D459" xlink:href="#MJX-10-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2002.1,0)"><use data-c="1D45C" xlink:href="#MJX-10-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(2487.1,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-10-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(510,-150) scale(0.707)"><use data-c="1D452" xlink:href="#MJX-10-TEX-I-1D452"></use></g></g><g data-mml-node="mo" transform="translate(3376.6,0)"><use data-c="28" xlink:href="#MJX-10-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(3765.6,0)"><use data-c="1D706" xlink:href="#MJX-10-TEX-I-1D706"></use></g><g data-mml-node="mo" transform="translate(4348.6,0)"><use data-c="29" xlink:href="#MJX-10-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(5015.4,0)"><use data-c="3D" xlink:href="#MJX-10-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(6071.2,0)"><use data-c="1D459" xlink:href="#MJX-10-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(6369.2,0)"><use data-c="1D45C" xlink:href="#MJX-10-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(6854.2,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-10-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(510,-150) scale(0.707)"><use data-c="1D452" xlink:href="#MJX-10-TEX-I-1D452"></use></g></g><g data-mml-node="mo" transform="translate(7743.7,0)"><use data-c="28" xlink:href="#MJX-10-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(8132.7,0)"><use data-c="1D461" xlink:href="#MJX-10-TEX-I-1D461"></use></g><g data-mml-node="mi" transform="translate(8493.7,0)"><use data-c="1D456" xlink:href="#MJX-10-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(8838.7,0)"><use data-c="1D45A" xlink:href="#MJX-10-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(9716.7,0)"><use data-c="1D452" xlink:href="#MJX-10-TEX-I-1D452"></use></g><g data-mml-node="mo" transform="translate(10182.7,0)"><use data-c="29" xlink:href="#MJX-10-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(10793.9,0)"><use data-c="2B" xlink:href="#MJX-10-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(11794.2,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-10-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="30" xlink:href="#MJX-10-TEX-N-30"></use></g></g><g data-mml-node="mo" transform="translate(13018.9,0)"><use data-c="2B" xlink:href="#MJX-10-TEX-N-2B"></use></g><g data-mml-node="munderover" transform="translate(14019.2,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-10-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(124.5,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-10-TEX-I-1D457"></use></g><g data-mml-node="mo" transform="translate(412,0)"><use data-c="3D" xlink:href="#MJX-10-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1190,0)"><use data-c="30" xlink:href="#MJX-10-TEX-N-30"></use></g></g><g data-mml-node="mi" transform="translate(544.2,1198.2) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-10-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(15629.8,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-10-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-10-TEX-I-1D457"></use></g></g><g data-mml-node="msub" transform="translate(16570.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-10-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D457" xlink:href="#MJX-10-TEX-I-1D457"></use></g></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable rowspacing=".5em" columnspacing="1em" displaystyle="true"><mtr><mtd><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>e</mi></msub><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mfrac><mi>λ</mi><mrow><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow></mfrac></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>p</mi></mrow></munderover><msub><mi>β</mi><mi>j</mi></msub><msub><mi>X</mi><mi>j</mi></msub></mtd></mtr><mtr><mtd><mtext>或</mtext><mi>：</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>e</mi></msub><mo stretchy="false">(</mo><mi>λ</mi><mo stretchy="false">)</mo><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>e</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mi>p</mi></munderover><msub><mi>β</mi><mi>j</mi></msub><msub><mi>X</mi><mi>j</mi></msub></mtd></mtr></mtable></math></mjx-assistive-mml></mjx-container></div></div></li><li><p><span>为拟合新模型，你需要使用glm()函数中的</span><strong><span>offset</span></strong><span>选项。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">sumY</span> <span class="cm-operator">~</span> <span class="cm-variable">Base</span> <span class="cm-operator">+</span> <span class="cm-variable">Age</span> <span class="cm-operator">+</span> <span class="cm-variable">Trt</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">breslow.dat</span>,<span class="cm-variable">offset</span><span class="cm-operator">=</span> <span class="cm-variable">log</span>(<span class="cm-variable">time</span>), <span class="cm-variable">family</span><span class="cm-operator">=</span><span class="cm-variable">poisson</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>零膨胀的泊松回归</span></strong><span>，在一个数据集中，0计数的数目时常比用泊松模型预测的数目多。可以使用</span><strong><span>pscl</span></strong><span>包里的</span><strong><span>zeroinfl()</span></strong><span>函数。</span></p></li><li><p><strong><span>稳健的泊松回归</span></strong><span>，</span><strong><span>robust</span></strong><span>包中的</span><strong><span>glmRob()</span></strong><span> 函数可以拟合稳健广义线性模型，包含稳健泊松回归。</span></p></li></ul><h3 id='第14章-主成分分析和因子分析'><span>第14章 主成分分析和因子分析</span></h3><ul><li><strong><span>主成分分析(PCA)</span></strong><span>是一种数据降维技巧，它能将大量相关变量转化为一组很少的不相关变量，这些无关变量称为</span><strong><span>主成分</span></strong><span>。</span></li><li><strong><span>探索性因子分析(EFA)</span></strong><span> 是一系列用来发现一组变量的潜在结构的方法。它通过寻找一组更小的、潜在的或隐藏的结构来解释已观测到的、显式的变量间的关系。</span></li></ul><p><img src="img\019_R语言实战\第14章\第14章 001.png" referrerpolicy="no-referrer" alt="第14章 001"></p><ul><li><span>主成分(PC1和PC2)是观测变量(X1到X5)的线性组合。形成线性组合的权重都是通过最大化各主成分所解释的方差来获得，同时还要保证各主成分间不相关。</span></li><li><span>相反，因子(F1和F2 ) 被当作观测变量的结构基础或“原因”，而不是它们的线性组合。代表观测变量方差的误差(e1到e5)无法用因子来解释图中的圆圈表示因子和误差无法直接观测但是可通过变量间的相互关系推导得到。在本例中，因子间带曲线的箭头表示它们之间有相关性在EFA模型中，相关因子是常见的，但并不是必害的。</span></li></ul><h4 id='主成分和因子分析'><span>主成分和因子分析</span></h4><ul><li><span>R的基础安装包提供了PCA和EFA的函数，分别为</span><strong><span>princomp()</span></strong><span>和</span><strong><span>factanal()</span></strong><span>。</span></li><li><strong><span>psych</span></strong><span>包提供的函数。</span></li></ul><p><img src="img\019_R语言实战\第14章\第14章 002.png" referrerpolicy="no-referrer" alt="第14章 002"></p><ul><li><p><span>步骤：</span></p><ul><li><strong><span>数据预处理</span></strong><span>：PCA和EFA都根据观测变量间的相关性来推导结果。用户可以输人原始数据矩阵或者相关系数矩阵到</span><strong><span>principal()</span></strong><span>和</span><strong><span>fa()</span></strong><span>函数中。若输人初始数据，相关系数矩阵将会被自动计算，在计算前请确保数据中</span><strong><span>没有缺失值</span></strong><span>。</span></li><li><strong><span>选择因子模型</span></strong><span>：判断是PCA (数据降维 ) 还是EFA(发现潜在结构) 更符合你的研究目标。如果选择EFA方法，你还需要选择一种估计因子模型的方法( 如最大似然估计 )。</span></li><li><span>判断要选择的主成分/因子数目。</span></li><li><span>选择主成分/因子。</span></li><li><span>旋转主成分/因子。</span></li><li><span>解释结果。</span></li><li><span>计算主成分或因子得分。</span></li></ul></li></ul><h4 id='主成分分析'><span>主成分分析</span></h4><ul><li><p><span>PCA的目标是用一组较少的不相关变量代替大量相关变量，同时尽可能保留初始变量的信息，这些推导所得的变量称为主成分，它们是观测变量的线性组合。如</span><strong><span>第一主成分为</span></strong><span>：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2871" cid="n2871" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="33.474ex" height="1.952ex" role="img" focusable="false" viewBox="0 -705 14795.5 862.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-11-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path><path id="MJX-11-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-11-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-11-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-11-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-11-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-11-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-11-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-11-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-11-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D443" xlink:href="#MJX-11-TEX-I-1D443"></use></g><g data-mml-node="msub" transform="translate(751,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-11-TEX-I-1D436"></use></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-11-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(2180.3,0)"><use data-c="3D" xlink:href="#MJX-11-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(3236.1,0)"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-11-TEX-I-1D44E"></use></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-11-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(4201.7,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-11-TEX-I-1D44B"></use></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-11-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(5688.4,0)"><use data-c="2B" xlink:href="#MJX-11-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(6688.7,0)"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-11-TEX-I-1D44E"></use></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-11-TEX-N-32"></use></g></g><g data-mml-node="msub" transform="translate(7654.2,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-11-TEX-I-1D44B"></use></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-11-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(9141,0)"><use data-c="2B" xlink:href="#MJX-11-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(10141.2,0)"><use data-c="22EF" xlink:href="#MJX-11-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(11535.4,0)"><use data-c="2B" xlink:href="#MJX-11-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(12535.7,0)"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-11-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(562,-150) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-11-TEX-I-1D458"></use></g></g><g data-mml-node="msub" transform="translate(13516.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-11-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-11-TEX-I-1D458"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><msub><mi>C</mi><mn>1</mn></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><msub><mi>X</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>X</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>k</mi></msub><msub><mi>X</mi><mi>k</mi></msub></math></mjx-assistive-mml></mjx-container></div></div><p><span>它是k个观测变量的加权组合，对初始变量集的方差解释性最大。</span></p></li><li><p><span>第二主成分也是初始变量的线性组合，对方差的解释性排第二，同时与第一主成分</span><strong><span>正交(不相关)</span></strong><span>。后面每一个主成分都最大化它对方差的解释程度，同时与之前所有的主成分都正交。</span></p></li><li><p><span>数据集：</span><strong><span>USJudgeRatings</span></strong><span>包含了律师对美国高等法院法官的评分。</span></p></li></ul><p><img src="img\019_R语言实战\第14章\第14章 003.png" referrerpolicy="no-referrer" alt="第14章 003"></p><h5 id='判断主成分的个数'><span>判断主成分的个数</span></h5><ul><li><p><span>准则：</span></p><ul><li><span>根据先验经验和理论知识判断主成分数；</span></li><li><span>根据要解释变量方差的积累值的闽值来判断需要的主成分数；</span></li><li><span>通过检查变量间k*k的相关系数矩阵来判断保留的主成分数。</span></li></ul></li><li><p><span>最常见的是</span><strong><span>基于特征值</span></strong><span>的方法。每个主成分都与相关系数矩阵的特征值相关联，第一主成与最大的特征值相关联，第二主成分与第二大的特征值相关联。</span></p></li><li><p><strong><span>Kaiser-Harris准则</span></strong><span>建议保留特征值大于1的主成分，特征值小于1的成分所解释的方差比包含在单个变量中的方差更少。</span></p></li><li><p><strong><span>Cattel碎石检验</span></strong><span>则绘制了特征值与主成分数的图形。这类图形可以清晰地展示图形弯曲状况在图形变化最大处之上的主成分都可保留。</span></p></li><li><p><strong><span>平行分析</span></strong><span>：若基于真实数据的某个特征值大于一组随机数据矩阵相应的平均特征值，那么该主成分可以保留。</span></p></li><li><p><span>利用</span><strong><span>fa.parallel()</span></strong><span>函数，你可以同时对三种特征值判别准则进行评价。对于11种评分(删去了CONT变量)</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 碎石检验</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment">#  fa="pc"表示计算主成分分析中的因子数，而"fa"表示因子分析中的因子数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa.parallel</span>(<span class="cm-variable">USJudgeRatings</span>[,<span class="cm-operator">-</span><span class="cm-number">1</span>],<span class="cm-variable">fa</span><span class="cm-operator">=</span><span class="cm-string">"pc"</span>,<span class="cm-variable">n.iter</span><span class="cm-operator">=</span><span class="cm-number">100</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">show.legend</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>,<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Scree plot with parallel analysis"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Parallel</span> <span class="cm-variable">analysis</span> <span class="cm-variable">suggests</span> <span class="cm-variable">that</span> <span class="cm-variable">the</span> <span class="cm-variable">number</span> <span class="cm-variable">of</span> <span class="cm-variable">factors</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-atom">NA</span> &nbsp;<span class="cm-variable">and</span> <span class="cm-variable">the</span> <span class="cm-variable">number</span> <span class="cm-variable">of</span> <span class="cm-variable">components</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第14章\第14章 004.png" alt="第14章 004" style="zoom:67%;" /></p><ul><li><span>基于观测特征值的碎石检验(由线段和x符号组成)、根据100个随机数据矩阵推导出来的特征值均值( 虚线 ，以及大于1的特征值准则(1的水平线 )。</span></li><li><span>碎石图(直线与x符号)、特征值大于1准则(水平线)和100次模拟的平行分析(虚线)都表明保留</span><strong><span>一个主成分</span></strong><span>即可。</span></li></ul><h5 id='提取主成分'><span>提取主成分</span></h5><ul><li><p><span>使用</span><strong><span>principal()</span></strong><span>选出相应的主成分。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">principal</span>(<span class="cm-variable">r</span>, <span class="cm-variable">nfactors</span><span class="cm-operator">=</span>, <span class="cm-variable">rotate</span><span class="cm-operator">=</span>, <span class="cm-variable">scores</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>r是</span><strong><span>相关系数矩阵</span></strong><span>或</span><strong><span>原始数据矩阵</span></strong><span>，nfactors设定主成分数(默认为1)，rotate指定旋转的方法(默认最大方差旋转(varimax))，scores设定是否需要计算主成分得分(默认不需要)。</span></p></li><li><p><span>获取第一主成分：</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">principal</span>(<span class="cm-variable">USJudgeRatings</span>[,<span class="cm-operator">-</span><span class="cm-number">1</span>],<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pc</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Principal</span> <span class="cm-variable">Components</span> <span class="cm-variable">Analysis</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span> <span class="cm-variable">principal</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">USJudgeRatings</span>[, <span class="cm-operator">-</span><span class="cm-number">1</span>], <span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Standardized</span> <span class="cm-variable">loadings</span> (<span class="cm-variable">pattern</span> <span class="cm-variable">matrix</span>) <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">correlation</span> <span class="cm-variable">matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">PC1</span> &nbsp; <span class="cm-variable">h2</span> &nbsp; &nbsp; <span class="cm-variable">u2</span> <span class="cm-variable">com</span> &nbsp;<span class="cm-comment"># 成分载荷 成分公因子方差 1-h2 </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">INTG</span> <span class="cm-number">0.92</span> <span class="cm-number">0.84</span> <span class="cm-number">0.1565</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">DMNR</span> <span class="cm-number">0.91</span> <span class="cm-number">0.83</span> <span class="cm-number">0.1663</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">DILG</span> <span class="cm-number">0.97</span> <span class="cm-number">0.94</span> <span class="cm-number">0.0613</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CFMG</span> <span class="cm-number">0.96</span> <span class="cm-number">0.93</span> <span class="cm-number">0.0720</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">DECI</span> <span class="cm-number">0.96</span> <span class="cm-number">0.92</span> <span class="cm-number">0.0763</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PREP</span> <span class="cm-number">0.98</span> <span class="cm-number">0.97</span> <span class="cm-number">0.0299</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">FAMI</span> <span class="cm-number">0.98</span> <span class="cm-number">0.95</span> <span class="cm-number">0.0469</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ORAL</span> <span class="cm-number">1.00</span> <span class="cm-number">0.99</span> <span class="cm-number">0.0091</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">WRIT</span> <span class="cm-number">0.99</span> <span class="cm-number">0.98</span> <span class="cm-number">0.0196</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PHYS</span> <span class="cm-number">0.89</span> <span class="cm-number">0.80</span> <span class="cm-number">0.2013</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">RTEN</span> <span class="cm-number">0.99</span> <span class="cm-number">0.97</span> <span class="cm-number">0.0275</span> &nbsp; <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PC1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SS</span> <span class="cm-variable">loadings</span> &nbsp; &nbsp;<span class="cm-number">10.13</span> <span class="cm-comment"># 与主成分相关联的特征值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Var</span> &nbsp;<span class="cm-number">0.92</span> <span class="cm-comment"># 表示的是每个主成分对整个数据集的解释程度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mean</span> <span class="cm-variable">item</span> <span class="cm-variable">complexity</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Test</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">hypothesis</span> <span class="cm-variable">that</span> <span class="cm-number">1</span> <span class="cm-variable">component</span> <span class="cm-variable">is</span> <span class="cm-variable">sufficient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> (<span class="cm-variable">RMSR</span>) <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.04</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">with</span> <span class="cm-variable">the</span> <span class="cm-variable">empirical</span> <span class="cm-variable">chi</span> <span class="cm-variable">square</span> &nbsp;<span class="cm-number">6.21</span> &nbsp;<span class="cm-variable">with</span> <span class="cm-variable">prob</span> <span class="cm-operator">&lt;</span> &nbsp;<span class="cm-number">1</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span> <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">off</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 754px;"></div><div class="CodeMirror-gutters" style="display: none; height: 754px;"></div></div></div></pre><ul><li><span>成分载荷，指观测变量与主成分的相关系数。</span></li><li><span>成分公因子方差，即主成分对每个变量的方差解释度。</span></li><li><span>ss loadings行包含了与主成分相关联的特征值，指的是与特定主成分相关联的标准化后的方差值(本例中，第一主成分的值为10)。</span></li><li><span>相关系数矩阵：</span><strong><span>Harman23.cor</span></strong><span>数据集包含305个女孩的8个身体测量指标。</span></li></ul><p><img src="img\019_R语言实战\第14章\第14章 005.png" referrerpolicy="no-referrer" alt="第14章 005"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># n.obs指定样本的大小</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fa.parallel</span>(<span class="cm-variable">Harman23.cor</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span>,<span class="cm-variable">n.obs</span> <span class="cm-operator">=</span> <span class="cm-number">302</span>,<span class="cm-variable">fa</span> <span class="cm-operator">=</span> <span class="cm-string">"pc"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">show.legend</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Scree plot with parallel analysis"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第14章\第14章 006.png" alt="第14章 006" style="zoom:67%;" /></p><ul><li><span>平行分析建议保留两个主成分。</span></li><li><span>提取前两个主成分：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">principal</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">Harman23.cor</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span>,<span class="cm-variable">nfactors</span><span class="cm-operator">=</span><span class="cm-number">2</span>,<span class="cm-variable">rotate</span><span class="cm-operator">=</span><span class="cm-string">"none"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pc</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Principal</span> <span class="cm-variable">Components</span> <span class="cm-variable">Analysis</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span> <span class="cm-variable">principal</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">Harman23.cor</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span>, <span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"none"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Standardized</span> <span class="cm-variable">loadings</span> (<span class="cm-variable">pattern</span> <span class="cm-variable">matrix</span>) <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">correlation</span> <span class="cm-variable">matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PC1</span> &nbsp; <span class="cm-variable">PC2</span> &nbsp; <span class="cm-variable">h2</span> &nbsp; &nbsp;<span class="cm-variable">u2</span> <span class="cm-variable">com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.86</span> <span class="cm-operator">-</span><span class="cm-number">0.37</span> <span class="cm-number">0.88</span> <span class="cm-number">0.123</span> <span class="cm-number">1.4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arm.span</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.84</span> <span class="cm-operator">-</span><span class="cm-number">0.44</span> <span class="cm-number">0.90</span> <span class="cm-number">0.097</span> <span class="cm-number">1.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">forearm</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.81</span> <span class="cm-operator">-</span><span class="cm-number">0.46</span> <span class="cm-number">0.87</span> <span class="cm-number">0.128</span> <span class="cm-number">1.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lower.leg</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.84</span> <span class="cm-operator">-</span><span class="cm-number">0.40</span> <span class="cm-number">0.86</span> <span class="cm-number">0.139</span> <span class="cm-number">1.4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">weight</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.76</span> &nbsp;<span class="cm-number">0.52</span> <span class="cm-number">0.85</span> <span class="cm-number">0.150</span> <span class="cm-number">1.8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bitro.diameter</span> <span class="cm-number">0.67</span> &nbsp;<span class="cm-number">0.53</span> <span class="cm-number">0.74</span> <span class="cm-number">0.261</span> <span class="cm-number">1.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chest.girth</span> &nbsp; &nbsp;<span class="cm-number">0.62</span> &nbsp;<span class="cm-number">0.58</span> <span class="cm-number">0.72</span> <span class="cm-number">0.283</span> <span class="cm-number">2.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chest.width</span> &nbsp; &nbsp;<span class="cm-number">0.67</span> &nbsp;<span class="cm-number">0.42</span> <span class="cm-number">0.62</span> <span class="cm-number">0.375</span> <span class="cm-number">1.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PC1</span> &nbsp;<span class="cm-variable">PC2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SS</span> <span class="cm-variable">loadings</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">4.67</span> <span class="cm-number">1.77</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.58</span> <span class="cm-number">0.22</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.58</span> <span class="cm-number">0.81</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Explained</span> &nbsp;<span class="cm-number">0.73</span> <span class="cm-number">0.27</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Proportion</span> <span class="cm-number">0.73</span> <span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mean</span> <span class="cm-variable">item</span> <span class="cm-variable">complexity</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Test</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">hypothesis</span> <span class="cm-variable">that</span> <span class="cm-number">2</span> <span class="cm-variable">components</span> <span class="cm-variable">are</span> <span class="cm-variable">sufficient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> (<span class="cm-variable">RMSR</span>) <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.05</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span> <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">off</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 676px;"></div><div class="CodeMirror-gutters" style="display: none; height: 676px;"></div></div></div></pre><ul><li><span>第一主成分解释了身体测量指标58%的方差，而第二主成分解释了22%，两者总共解释了81%的方差。对于高度变量，两者则共解释了其88%的方差。</span></li><li><span>载荷阵解释了成分和因子的含义。第一主成分与每个身体测量指标都正相关，看起来似乎是.个一般性的衡量因子；第二主成分与前四个变量负相关，与后四个变量正相关因此它看起来似乎是一个长度-容量因子。</span></li></ul><h5 id='主成分旋转'><span>主成分旋转</span></h5><ul><li><strong><span>旋转</span></strong><span>是一系列将成分载荷阵变得更容易解释的数学方法，它们尽可能地对成分去噪。</span></li><li><span>两种方法：使选择的成分保持不相关( </span><strong><span>正交旋转</span></strong><span> )，和让它们变得相关( </span><strong><span>斜交旋转</span></strong><span> )。</span></li><li><span>最流行的正交旋转是</span><strong><span>方差极大旋转</span></strong><span>，它试图对载荷阵的列进行去噪，使得每个成分只由一组有限的变量来解释(即载荷阵每列只有少数几个很大的载荷，其他都是很小的载荷 )。</span></li><li><span>对身体测量数据使用方差极大旋转：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">rc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">principal</span>(<span class="cm-variable">Harman23.cor</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span>,<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"varimax"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">rc</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Principal</span> <span class="cm-variable">Components</span> <span class="cm-variable">Analysis</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span> <span class="cm-variable">principal</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">Harman23.cor</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span>, <span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"varimax"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Standardized</span> <span class="cm-variable">loadings</span> (<span class="cm-variable">pattern</span> <span class="cm-variable">matrix</span>) <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">correlation</span> <span class="cm-variable">matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">RC1</span> &nbsp;<span class="cm-variable">RC2</span> &nbsp; <span class="cm-variable">h2</span> &nbsp; &nbsp;<span class="cm-variable">u2</span> <span class="cm-variable">com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.90</span> <span class="cm-number">0.25</span> <span class="cm-number">0.88</span> <span class="cm-number">0.123</span> <span class="cm-number">1.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arm.span</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.93</span> <span class="cm-number">0.19</span> <span class="cm-number">0.90</span> <span class="cm-number">0.097</span> <span class="cm-number">1.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">forearm</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.92</span> <span class="cm-number">0.16</span> <span class="cm-number">0.87</span> <span class="cm-number">0.128</span> <span class="cm-number">1.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lower.leg</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.90</span> <span class="cm-number">0.22</span> <span class="cm-number">0.86</span> <span class="cm-number">0.139</span> <span class="cm-number">1.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">weight</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.26</span> <span class="cm-number">0.88</span> <span class="cm-number">0.85</span> <span class="cm-number">0.150</span> <span class="cm-number">1.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bitro.diameter</span> <span class="cm-number">0.19</span> <span class="cm-number">0.84</span> <span class="cm-number">0.74</span> <span class="cm-number">0.261</span> <span class="cm-number">1.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chest.girth</span> &nbsp; &nbsp;<span class="cm-number">0.11</span> <span class="cm-number">0.84</span> <span class="cm-number">0.72</span> <span class="cm-number">0.283</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chest.width</span> &nbsp; &nbsp;<span class="cm-number">0.26</span> <span class="cm-number">0.75</span> <span class="cm-number">0.62</span> <span class="cm-number">0.375</span> <span class="cm-number">1.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">RC1</span> &nbsp;<span class="cm-variable">RC2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SS</span> <span class="cm-variable">loadings</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3.52</span> <span class="cm-number">2.92</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.44</span> <span class="cm-number">0.37</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.44</span> <span class="cm-number">0.81</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Explained</span> &nbsp;<span class="cm-number">0.55</span> <span class="cm-number">0.45</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Proportion</span> <span class="cm-number">0.55</span> <span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mean</span> <span class="cm-variable">item</span> <span class="cm-variable">complexity</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Test</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">hypothesis</span> <span class="cm-variable">that</span> <span class="cm-number">2</span> <span class="cm-variable">components</span> <span class="cm-variable">are</span> <span class="cm-variable">sufficient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> (<span class="cm-variable">RMSR</span>) <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.05</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span> <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">off</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 702px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><ul><li><span>列的名字都从PC变成了RC，以表示成分被旋转。观察RC1栏的载荷，你可以发现第一主成分主要由前四个变量来解释(长度变量 )。RC2栏的载荷表示第二主成分主要由变量5到变量8来解释(容量变量 )。注意两个主成分仍不相关，对变量的解释性不变，这是因为变量的群组没有发生变化。另外，两个主成分旋转后的累积方差解释性没有变化(81% ，变的只是各个主成分对方差的解释度(成分1从58%变为44%，成分2从22%变为37% 。各成分的方差解释度趋同，准确来说，此时应该称它们为成分而不是主成分(因为单个主成分方差最大化性质没有保留 )。</span></li></ul><h5 id='获取主成分得分'><span>获取主成分得分</span></h5><ul><li><span>获取每个调查对象在主成分上的得分：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># scores = T 获取得分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">principal</span>(<span class="cm-variable">USJudgeRatings</span>[,<span class="cm-operator">-</span><span class="cm-number">1</span>],<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>,<span class="cm-variable">scores</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">pc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">scores</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PC1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AARONSON</span>,<span class="cm-variable">L.H.</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.1857981</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ALEXANDER</span>,<span class="cm-variable">J.M.</span> &nbsp;<span class="cm-number">0.7469865</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ARMENTANO</span>,<span class="cm-variable">A.J.</span> &nbsp;<span class="cm-number">0.0704772</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BERDON</span>,<span class="cm-variable">R.I.</span> &nbsp; &nbsp; <span class="cm-number">1.1358765</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BRACKEN</span>,<span class="cm-variable">J.J.</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">2.1586211</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BURNS</span>,<span class="cm-variable">E.B.</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.7669406</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><ul><li><span>获得律师与法官的接触频数与法官评分间的相关系数：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor</span>(<span class="cm-variable">USJudgeRatings</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">CONT</span>,<span class="cm-variable">pc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">scores</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PC1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>,] <span class="cm-operator">-</span><span class="cm-number">0.008815895</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>显然，律师与法官的熟稔度与律师的评分毫无关联。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">rc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">principal</span>(<span class="cm-variable">Harman23.cor</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span>,<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"varimax"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># unclass()：去除class属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">round</span>(<span class="cm-variable">unclass</span>(<span class="cm-variable">rc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weights</span>), <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">RC1</span> &nbsp; <span class="cm-variable">RC2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">height</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.28</span> <span class="cm-operator">-</span><span class="cm-number">0.05</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arm.span</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.30</span> <span class="cm-operator">-</span><span class="cm-number">0.08</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">forearm</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.30</span> <span class="cm-operator">-</span><span class="cm-number">0.09</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lower.leg</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.28</span> <span class="cm-operator">-</span><span class="cm-number">0.06</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">weight</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.06</span> &nbsp;<span class="cm-number">0.33</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bitro.diameter</span> <span class="cm-operator">-</span><span class="cm-number">0.08</span> &nbsp;<span class="cm-number">0.32</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chest.girth</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.10</span> &nbsp;<span class="cm-number">0.34</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chest.width</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.04</span> &nbsp;<span class="cm-number">0.27</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><ul><li><span>可以得到如下主成分：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.7539px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PC1</span> <span class="cm-operator">=</span> <span class="cm-number">0.28</span><span class="cm-operator">*</span><span class="cm-variable">height</span> <span class="cm-operator">+</span> <span class="cm-number">0.30</span><span class="cm-operator">*</span><span class="cm-variable">arm.span</span> <span class="cm-operator">+</span> <span class="cm-number">0.30</span><span class="cm-operator">*</span><span class="cm-variable">forearm</span> <span class="cm-operator">+</span> <span class="cm-number">0.29</span><span class="cm-operator">*</span><span class="cm-variable">lower.leg</span> <span class="cm-operator">-</span> <span class="cm-number">0.06</span><span class="cm-operator">*</span><span class="cm-variable">weight</span> <span class="cm-operator">-</span> <span class="cm-number">0.08</span><span class="cm-operator">*</span><span class="cm-variable">bitro.diameter</span> <span class="cm-operator">-</span> <span class="cm-number">0.10</span><span class="cm-operator">*</span><span class="cm-variable">chest.girth</span> <span class="cm-operator">-</span> <span class="cm-number">0.04</span><span class="cm-operator">*</span><span class="cm-variable">chest.width</span> </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PC2</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">0.05</span><span class="cm-operator">*</span><span class="cm-variable">height</span> <span class="cm-operator">-</span> <span class="cm-number">0.08</span><span class="cm-operator">*</span><span class="cm-variable">arm.span</span> <span class="cm-operator">-</span> <span class="cm-number">0.09</span><span class="cm-operator">*</span><span class="cm-variable">forearm</span> <span class="cm-operator">-</span> <span class="cm-number">0.06</span><span class="cm-operator">*</span><span class="cm-variable">lower.leg</span> <span class="cm-operator">+</span> <span class="cm-number">0.33</span><span class="cm-operator">*</span><span class="cm-variable">weight</span> <span class="cm-operator">+</span> <span class="cm-number">0.32</span><span class="cm-operator">*</span><span class="cm-variable">bitro.diameter</span> <span class="cm-operator">+</span> <span class="cm-number">0.34</span><span class="cm-operator">*</span><span class="cm-variable">chest.girth</span> <span class="cm-operator">+</span> <span class="cm-number">0.27</span><span class="cm-operator">*</span><span class="cm-variable">chest.width</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>两个等式都假定身体测量指标都已标准化( mean=0，sd=1)。可以进一步简化方法，将第一主成分看作前四个变量标准化得分的均值；类似地，将第二主成分看作后四个变量标准化得分的均值。</span></li></ul><h4 id='探索性因子分析'><span>探索性因子分析</span></h4><ul><li><p><span>EFA的目标是通过发掘隐藏在数据下的一组较少的、更为基本的无法观测的变量，来解释组可观测变量的相关性。这些虚拟的、无法观测的变量称作因子。( 每个因子被认为可解释多人观测变量间共有的方差，因此准确来说，它们应该称作公共因子。)</span></p></li><li><p><span>模型的形式为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2978" cid="n2978" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="35.52ex" height="2.195ex" role="img" focusable="false" viewBox="0 -683 15699.8 970.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.65ex;"><defs><path id="MJX-12-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-12-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-12-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-12-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-12-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-12-TEX-I-1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path><path id="MJX-12-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-12-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-12-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-12-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-12-TEX-I-1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-12-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-12-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(1432.7,0)"><use data-c="3D" xlink:href="#MJX-12-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(2488.5,0)"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-12-TEX-I-1D44E"></use></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-12-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(3454.1,0)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-12-TEX-I-1D439"></use></g><g data-mml-node="mn" transform="translate(676,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-12-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(4755.8,0)"><use data-c="2B" xlink:href="#MJX-12-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(5756.1,0)"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-12-TEX-I-1D44E"></use></g><g data-mml-node="mn" transform="translate(562,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use></g></g><g data-mml-node="msub" transform="translate(6721.6,0)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-12-TEX-I-1D439"></use></g><g data-mml-node="mn" transform="translate(676,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-12-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(8023.4,0)"><use data-c="2B" xlink:href="#MJX-12-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(9023.6,0)"><use data-c="22EF" xlink:href="#MJX-12-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(10417.8,0)"><use data-c="2B" xlink:href="#MJX-12-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(11418.1,0)"><g data-mml-node="mi"><use data-c="1D44E" xlink:href="#MJX-12-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(562,-150) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-12-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(12385.7,0)"><g data-mml-node="mi"><use data-c="1D439" xlink:href="#MJX-12-TEX-I-1D439"></use></g><g data-mml-node="mi" transform="translate(676,-150) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-12-TEX-I-1D45D"></use></g></g><g data-mml-node="mo" transform="translate(13689.6,0)"><use data-c="2B" xlink:href="#MJX-12-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(14689.8,0)"><g data-mml-node="mi"><use data-c="1D448" xlink:href="#MJX-12-TEX-I-1D448"></use></g><g data-mml-node="mi" transform="translate(716,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-12-TEX-I-1D456"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>X</mi><mi>i</mi></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><msub><mi>F</mi><mn>1</mn></msub><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msub><mi>F</mi><mn>2</mn></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>p</mi></msub><msub><mi>F</mi><mi>p</mi></msub><mo>+</mo><msub><mi>U</mi><mi>i</mi></msub></math></mjx-assistive-mml></mjx-container></div></div><p><span>其中X是第i个可观测变量 (i1···k)，F是公共因子(=l·.p )，并且p&lt;k。U是X变量独有的部分(无法被公共因子解释 )。a;可认为是每个因子对复合而成的可观测变量的贡献值。</span></p></li><li><p><span>回到本章开头的</span><strong><span>Harman74.cor</span></strong><span>的例子，我们认为每个个体在24个心理学测验上的观测得分，是根据四个潜在心理学因素的加权能力值组合而成。</span></p></li><li><p><span>112个人参与了六个测验，包括非语言的普通智力测验(general )、画图测验 (picture )、积木图案测验(blocks )、迷宫测验(maze )、阅读测验(reading)和词汇测验 (vocab )。我们如何用一组较少的、潜在的心理学因素来解释参与者的测验得分呢?</span></p></li><li><p><span>数据集</span><strong><span>ability.cov</span></strong><span>提供了变量的协方差矩阵，你可用</span><strong><span>cov2cor()</span></strong><span> 函数将其转化为相关系数矩阵。数据集没有缺失值。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取数据集的相关系数矩阵</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">options</span>(<span class="cm-variable">digits</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">covs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ability.cov</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cors</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cov2cor</span>(<span class="cm-variable">covs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cors</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">general</span> <span class="cm-variable">picture</span> <span class="cm-variable">blocks</span> <span class="cm-variable">maze</span> <span class="cm-variable">reading</span> <span class="cm-variable">vocab</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">general</span> &nbsp; &nbsp;<span class="cm-number">1.00</span> &nbsp; &nbsp;<span class="cm-number">0.47</span> &nbsp; <span class="cm-number">0.55</span> <span class="cm-number">0.34</span> &nbsp; &nbsp;<span class="cm-number">0.58</span> &nbsp;<span class="cm-number">0.51</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">picture</span> &nbsp; &nbsp;<span class="cm-number">0.47</span> &nbsp; &nbsp;<span class="cm-number">1.00</span> &nbsp; <span class="cm-number">0.57</span> <span class="cm-number">0.19</span> &nbsp; &nbsp;<span class="cm-number">0.26</span> &nbsp;<span class="cm-number">0.24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blocks</span> &nbsp; &nbsp; <span class="cm-number">0.55</span> &nbsp; &nbsp;<span class="cm-number">0.57</span> &nbsp; <span class="cm-number">1.00</span> <span class="cm-number">0.45</span> &nbsp; &nbsp;<span class="cm-number">0.35</span> &nbsp;<span class="cm-number">0.36</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maze</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.34</span> &nbsp; &nbsp;<span class="cm-number">0.19</span> &nbsp; <span class="cm-number">0.45</span> <span class="cm-number">1.00</span> &nbsp; &nbsp;<span class="cm-number">0.18</span> &nbsp;<span class="cm-number">0.22</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">reading</span> &nbsp; &nbsp;<span class="cm-number">0.58</span> &nbsp; &nbsp;<span class="cm-number">0.26</span> &nbsp; <span class="cm-number">0.35</span> <span class="cm-number">0.18</span> &nbsp; &nbsp;<span class="cm-number">1.00</span> &nbsp;<span class="cm-number">0.79</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vocab</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.51</span> &nbsp; &nbsp;<span class="cm-number">0.24</span> &nbsp; <span class="cm-number">0.36</span> <span class="cm-number">0.22</span> &nbsp; &nbsp;<span class="cm-number">0.79</span> &nbsp;<span class="cm-number">1.00</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><h5 id='判断需要提取的公共因子数'><span>判断需要提取的公共因子数</span></h5><ul><li><span>使用</span><strong><span>fa.parallel()</span></strong><span>函数</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">covs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ability.cov</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cov</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cors</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cov2cor</span>(<span class="cm-variable">covs</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 样本数112，</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># fa="both"同时显示主成分分析和因子分析</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># n.iter=100表示100次模拟</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fa.parallel</span>(<span class="cm-variable">cors</span>,<span class="cm-variable">n.obs</span> <span class="cm-operator">=</span> <span class="cm-number">112</span>,<span class="cm-variable">n.iter</span> <span class="cm-operator">=</span> <span class="cm-number">100</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Scree plots with parallel analysis(碎石图)"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第14章\第14章 007.png" alt="第14章 007" style="zoom: 67%;" /></p><ul><li><span>PCA结果建议提取一个或者两个成分，EFA建议提取两个因子。</span></li><li><span>对于EFA，Kaiser-Harris准则的特征值数大于0，而不是1。</span></li></ul><h5 id='提取公共因子'><span>提取公共因子</span></h5><ul><li><p><span>提取因子，使用</span><strong><span>fa()</span></strong><span>函数获取相应结果。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fa</span>(<span class="cm-variable">r</span>, <span class="cm-variable">nfactors</span><span class="cm-operator">=</span>, <span class="cm-variable">n.obs</span><span class="cm-operator">=</span>, <span class="cm-variable">rotate</span><span class="cm-operator">=</span>, <span class="cm-variable">scores</span><span class="cm-operator">=</span>, <span class="cm-variable">fm</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>r</span></strong><span>是相关系数矩阵或者原始数据矩阵；</span><strong><span>nfactors</span></strong><span>设定提取的因子数(默认为1)；</span><strong><span>n.obs</span></strong><span>是观测数(输入相关系数矩阵时需要填写 )；</span><strong><span>rotate</span></strong><span>设定旋转的方法 (默认互变异数最小法)；</span><strong><span>scores</span></strong><span>设定是否计算因子得分(默认不计算)；fm设定因子化方法(默认极小残差法)。</span></p></li><li><p><span>与PCA不同，提取公共因子的方法很多，包括</span><strong><span>最大似然法</span></strong><span>(ml)、</span><strong><span>主轴迭代法</span></strong><span>(pa)、</span><strong><span>加权最小二乘法</span></strong><span>(wls)、</span><strong><span>广义加权最小二乘法</span></strong><span>(gls) 和</span><strong><span>最小残差法</span></strong><span>(minres)。</span></p></li><li><p><span>有时候最大似然法不会收敛，此时使用主轴迭代法效果更好。</span></p></li><li><p><span>使用主轴迭代法提取未旋转的因子：</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">fa</span>(<span class="cm-variable">cors</span>,<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"none"</span>,<span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-string">"pa"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Factor</span> <span class="cm-variable">Analysis</span> <span class="cm-variable">using</span> <span class="cm-variable">method</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-variable">pa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span> <span class="cm-variable">fa</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">cors</span>, <span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"none"</span>, <span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-string">"pa"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Standardized</span> <span class="cm-variable">loadings</span> (<span class="cm-variable">pattern</span> <span class="cm-variable">matrix</span>) <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">correlation</span> <span class="cm-variable">matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp; <span class="cm-variable">PA2</span> &nbsp; <span class="cm-variable">h2</span> &nbsp; &nbsp;<span class="cm-variable">u2</span> <span class="cm-variable">com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">general</span> <span class="cm-number">0.75</span> &nbsp;<span class="cm-number">0.07</span> <span class="cm-number">0.57</span> <span class="cm-number">0.432</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">picture</span> <span class="cm-number">0.52</span> &nbsp;<span class="cm-number">0.32</span> <span class="cm-number">0.38</span> <span class="cm-number">0.623</span> <span class="cm-number">1.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blocks</span> &nbsp;<span class="cm-number">0.75</span> &nbsp;<span class="cm-number">0.52</span> <span class="cm-number">0.83</span> <span class="cm-number">0.166</span> <span class="cm-number">1.8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maze</span> &nbsp; &nbsp;<span class="cm-number">0.39</span> &nbsp;<span class="cm-number">0.22</span> <span class="cm-number">0.20</span> <span class="cm-number">0.798</span> <span class="cm-number">1.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">reading</span> <span class="cm-number">0.81</span> <span class="cm-operator">-</span><span class="cm-number">0.51</span> <span class="cm-number">0.91</span> <span class="cm-number">0.089</span> <span class="cm-number">1.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vocab</span> &nbsp; <span class="cm-number">0.73</span> <span class="cm-operator">-</span><span class="cm-number">0.39</span> <span class="cm-number">0.69</span> <span class="cm-number">0.313</span> <span class="cm-number">1.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SS</span> <span class="cm-variable">loadings</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2.75</span> <span class="cm-number">0.83</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.46</span> <span class="cm-number">0.14</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.46</span> <span class="cm-number">0.60</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Explained</span> &nbsp;<span class="cm-number">0.77</span> <span class="cm-number">0.23</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Proportion</span> <span class="cm-number">0.77</span> <span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mean</span> <span class="cm-variable">item</span> <span class="cm-variable">complexity</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Test</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">hypothesis</span> <span class="cm-variable">that</span> <span class="cm-number">2</span> <span class="cm-variable">factors</span> <span class="cm-variable">are</span> <span class="cm-variable">sufficient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-variable">null</span> <span class="cm-variable">model</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">15</span> &nbsp;<span class="cm-variable">with</span> <span class="cm-variable">the</span> <span class="cm-variable">objective</span> <span class="cm-keyword">function</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">2.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-variable">of</span> &nbsp;<span class="cm-variable">the</span> <span class="cm-variable">model</span> <span class="cm-variable">are</span> <span class="cm-number">4</span> &nbsp;<span class="cm-variable">and</span> <span class="cm-variable">the</span> <span class="cm-variable">objective</span> <span class="cm-keyword">function</span> <span class="cm-variable">was</span> &nbsp;<span class="cm-number">0.07</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> (<span class="cm-variable">RMSR</span>) <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.03</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">df</span> <span class="cm-variable">corrected</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.06</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span> <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">off</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Measures</span> <span class="cm-variable">of</span> <span class="cm-variable">factor</span> <span class="cm-variable">score</span> <span class="cm-variable">adequacy</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Correlation</span> <span class="cm-variable">of</span> (<span class="cm-variable">regression</span>) <span class="cm-variable">scores</span> <span class="cm-variable">with</span> <span class="cm-variable">factors</span> &nbsp; <span class="cm-number">0.96</span> <span class="cm-number">0.92</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">scores</span> <span class="cm-variable">with</span> <span class="cm-variable">factors</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.93</span> <span class="cm-number">0.84</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Minimum</span> <span class="cm-variable">correlation</span> <span class="cm-variable">of</span> <span class="cm-variable">possible</span> <span class="cm-variable">factor</span> <span class="cm-variable">scores</span> &nbsp; &nbsp; <span class="cm-number">0.86</span> <span class="cm-number">0.68</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><ul><li><span>可以看到，两个因子解释了六个心理学测验60%的方差。</span></li></ul><h5 id='因子旋转'><span>因子旋转</span></h5><ul><li><span>正交旋转和斜交旋转。</span></li><li><span>使用正交旋转提取因子：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">psych</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa.varimax</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">fa</span>(<span class="cm-variable">cors</span>,<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"varimax"</span>,<span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-string">"pa"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa.varimax</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Factor</span> <span class="cm-variable">Analysis</span> <span class="cm-variable">using</span> <span class="cm-variable">method</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-variable">pa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span> <span class="cm-variable">fa</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">cors</span>, <span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"varimax"</span>, <span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-string">"pa"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Standardized</span> <span class="cm-variable">loadings</span> (<span class="cm-variable">pattern</span> <span class="cm-variable">matrix</span>) <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">correlation</span> <span class="cm-variable">matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span> &nbsp; <span class="cm-variable">h2</span> &nbsp; &nbsp;<span class="cm-variable">u2</span> <span class="cm-variable">com</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">general</span> <span class="cm-number">0.49</span> <span class="cm-number">0.57</span> <span class="cm-number">0.57</span> <span class="cm-number">0.432</span> <span class="cm-number">2.0</span> <span class="cm-comment"># 均衡</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">picture</span> <span class="cm-number">0.16</span> <span class="cm-number">0.59</span> <span class="cm-number">0.38</span> <span class="cm-number">0.623</span> <span class="cm-number">1.1</span> <span class="cm-comment"># 2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blocks</span> &nbsp;<span class="cm-number">0.18</span> <span class="cm-number">0.89</span> <span class="cm-number">0.83</span> <span class="cm-number">0.166</span> <span class="cm-number">1.1</span> <span class="cm-comment"># 2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maze</span> &nbsp; &nbsp;<span class="cm-number">0.13</span> <span class="cm-number">0.43</span> <span class="cm-number">0.20</span> <span class="cm-number">0.798</span> <span class="cm-number">1.2</span> <span class="cm-comment"># 2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">reading</span> <span class="cm-number">0.93</span> <span class="cm-number">0.20</span> <span class="cm-number">0.91</span> <span class="cm-number">0.089</span> <span class="cm-number">1.1</span> <span class="cm-comment"># 1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vocab</span> &nbsp; <span class="cm-number">0.80</span> <span class="cm-number">0.23</span> <span class="cm-number">0.69</span> <span class="cm-number">0.313</span> <span class="cm-number">1.2</span> <span class="cm-comment"># 1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SS</span> <span class="cm-variable">loadings</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.83</span> <span class="cm-number">1.75</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.30</span> <span class="cm-number">0.29</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.30</span> <span class="cm-number">0.60</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Explained</span> &nbsp;<span class="cm-number">0.51</span> <span class="cm-number">0.49</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Proportion</span> <span class="cm-number">0.51</span> <span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mean</span> <span class="cm-variable">item</span> <span class="cm-variable">complexity</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1.3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Test</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">hypothesis</span> <span class="cm-variable">that</span> <span class="cm-number">2</span> <span class="cm-variable">factors</span> <span class="cm-variable">are</span> <span class="cm-variable">sufficient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-variable">null</span> <span class="cm-variable">model</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">15</span> &nbsp;<span class="cm-variable">with</span> <span class="cm-variable">the</span> <span class="cm-variable">objective</span> <span class="cm-keyword">function</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">2.48</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-variable">of</span> &nbsp;<span class="cm-variable">the</span> <span class="cm-variable">model</span> <span class="cm-variable">are</span> <span class="cm-number">4</span> &nbsp;<span class="cm-variable">and</span> <span class="cm-variable">the</span> <span class="cm-variable">objective</span> <span class="cm-keyword">function</span> <span class="cm-variable">was</span> &nbsp;<span class="cm-number">0.07</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> (<span class="cm-variable">RMSR</span>) <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.03</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">df</span> <span class="cm-variable">corrected</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.06</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span> <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">off</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Measures</span> <span class="cm-variable">of</span> <span class="cm-variable">factor</span> <span class="cm-variable">score</span> <span class="cm-variable">adequacy</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Correlation</span> <span class="cm-variable">of</span> (<span class="cm-variable">regression</span>) <span class="cm-variable">scores</span> <span class="cm-variable">with</span> <span class="cm-variable">factors</span> &nbsp; <span class="cm-number">0.96</span> <span class="cm-number">0.92</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">scores</span> <span class="cm-variable">with</span> <span class="cm-variable">factors</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.91</span> <span class="cm-number">0.85</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Minimum</span> <span class="cm-variable">correlation</span> <span class="cm-variable">of</span> <span class="cm-variable">possible</span> <span class="cm-variable">factor</span> <span class="cm-variable">scores</span> &nbsp; &nbsp; <span class="cm-number">0.82</span> <span class="cm-number">0.71</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><ul><li><span>阅读和词汇在第一因子上载荷较大，画图、积木图案和迷宫在第二因子上载荷较大，非语言的普通智力测量在两个因子上载荷较为平均，这表明存在一个语言智力因子和一个非语言智力因子。使用</span><strong><span>正交旋转</span></strong><span>将人为地强制</span><strong><span>两个因子不相关</span></strong><span>。</span></li><li><span>斜交转轴法（promax），两因子</span><strong><span>相关</span></strong><span>：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa.promax</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">fa</span>(<span class="cm-variable">cors</span>,<span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"promax"</span>,<span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-string">"pa"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa.promax</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Factor</span> <span class="cm-variable">Analysis</span> <span class="cm-variable">using</span> <span class="cm-variable">method</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-variable">pa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span> <span class="cm-variable">fa</span>(<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">cors</span>, <span class="cm-variable">nfactors</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">rotate</span> <span class="cm-operator">=</span> <span class="cm-string">"promax"</span>, <span class="cm-variable">fm</span> <span class="cm-operator">=</span> <span class="cm-string">"pa"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Standardized</span> <span class="cm-variable">loadings</span> (<span class="cm-variable">pattern</span> <span class="cm-variable">matrix</span>) <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">correlation</span> <span class="cm-variable">matrix</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PA1</span> &nbsp; <span class="cm-variable">PA2</span> &nbsp; <span class="cm-variable">h2</span> &nbsp; &nbsp;<span class="cm-variable">u2</span> <span class="cm-variable">com</span> <span class="cm-comment"># 因子模式矩阵（回归系数矩阵）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">general</span> &nbsp;<span class="cm-number">0.37</span> &nbsp;<span class="cm-number">0.48</span> <span class="cm-number">0.57</span> <span class="cm-number">0.432</span> <span class="cm-number">1.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">picture</span> <span class="cm-operator">-</span><span class="cm-number">0.03</span> &nbsp;<span class="cm-number">0.63</span> <span class="cm-number">0.38</span> <span class="cm-number">0.623</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blocks</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.10</span> &nbsp;<span class="cm-number">0.97</span> <span class="cm-number">0.83</span> <span class="cm-number">0.166</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maze</span> &nbsp; &nbsp; <span class="cm-number">0.00</span> &nbsp;<span class="cm-number">0.45</span> <span class="cm-number">0.20</span> <span class="cm-number">0.798</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">reading</span> &nbsp;<span class="cm-number">1.00</span> <span class="cm-operator">-</span><span class="cm-number">0.09</span> <span class="cm-number">0.91</span> <span class="cm-number">0.089</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vocab</span> &nbsp; &nbsp;<span class="cm-number">0.84</span> <span class="cm-operator">-</span><span class="cm-number">0.01</span> <span class="cm-number">0.69</span> <span class="cm-number">0.313</span> <span class="cm-number">1.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SS</span> <span class="cm-variable">loadings</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1.83</span> <span class="cm-number">1.75</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.30</span> <span class="cm-number">0.29</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Var</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.30</span> <span class="cm-number">0.60</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Proportion</span> <span class="cm-variable">Explained</span> &nbsp;<span class="cm-number">0.51</span> <span class="cm-number">0.49</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Cumulative</span> <span class="cm-variable">Proportion</span> <span class="cm-number">0.51</span> <span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">With</span> <span class="cm-variable">factor</span> <span class="cm-variable">correlations</span> <span class="cm-variable">of</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment"># 因子关联矩阵</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PA1</span> <span class="cm-number">1.00</span> <span class="cm-number">0.55</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PA2</span> <span class="cm-number">0.55</span> <span class="cm-number">1.00</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mean</span> <span class="cm-variable">item</span> <span class="cm-variable">complexity</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">1.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Test</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">hypothesis</span> <span class="cm-variable">that</span> <span class="cm-number">2</span> <span class="cm-variable">factors</span> <span class="cm-variable">are</span> <span class="cm-variable">sufficient.</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-variable">null</span> <span class="cm-variable">model</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">15</span> &nbsp;<span class="cm-variable">with</span> <span class="cm-variable">the</span> <span class="cm-variable">objective</span> <span class="cm-keyword">function</span> <span class="cm-operator">=</span> &nbsp;<span class="cm-number">2.48</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-variable">of</span> &nbsp;<span class="cm-variable">the</span> <span class="cm-variable">model</span> <span class="cm-variable">are</span> <span class="cm-number">4</span> &nbsp;<span class="cm-variable">and</span> <span class="cm-variable">the</span> <span class="cm-variable">objective</span> <span class="cm-keyword">function</span> <span class="cm-variable">was</span> &nbsp;<span class="cm-number">0.07</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> (<span class="cm-variable">RMSR</span>) <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.03</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">The</span> <span class="cm-variable">df</span> <span class="cm-variable">corrected</span> <span class="cm-variable">root</span> <span class="cm-variable">mean</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">the</span> <span class="cm-variable">residuals</span> <span class="cm-variable">is</span> &nbsp;<span class="cm-number">0.06</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fit</span> <span class="cm-variable">based</span> <span class="cm-variable">upon</span> <span class="cm-variable">off</span> <span class="cm-variable">diagonal</span> <span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Measures</span> <span class="cm-variable">of</span> <span class="cm-variable">factor</span> <span class="cm-variable">score</span> <span class="cm-variable">adequacy</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Correlation</span> <span class="cm-variable">of</span> (<span class="cm-variable">regression</span>) <span class="cm-variable">scores</span> <span class="cm-variable">with</span> <span class="cm-variable">factors</span> &nbsp; <span class="cm-number">0.97</span> <span class="cm-number">0.94</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Multiple</span> <span class="cm-variable">R</span> <span class="cm-variable">square</span> <span class="cm-variable">of</span> <span class="cm-variable">scores</span> <span class="cm-variable">with</span> <span class="cm-variable">factors</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.93</span> <span class="cm-number">0.88</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Minimum</span> <span class="cm-variable">correlation</span> <span class="cm-variable">of</span> <span class="cm-variable">possible</span> <span class="cm-variable">factor</span> <span class="cm-variable">scores</span> &nbsp; &nbsp; <span class="cm-number">0.86</span> <span class="cm-number">0.77</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 989px;"></div><div class="CodeMirror-gutters" style="display: none; height: 989px;"></div></div></div></pre><ul><li><span>对于</span><strong><span>正交旋转</span></strong><span>，因子分析的重点在于</span><strong><span>因子结构矩阵</span></strong><span>(变量与因子的相关系数 )，而对于斜交旋转，因子分析会考虑三个矩阵，因子结构矩阵、因子模式矩阵和因子关联矩阵。</span></li><li><strong><span>因子模式矩阵</span></strong><span>即标准化的</span><strong><span>回归系数矩阵</span></strong><span>，它列出了因子预测变量的权重。</span></li><li><strong><span>因子关联矩阵</span></strong><span>即因子</span><strong><span>相关系数矩阵</span></strong><span>。</span></li><li><strong><span>因子结构矩阵</span></strong><span>(或称因子载荷阵 ) 没有被列出来，但你可以使用公式</span><strong><span>F = P*Phi</span></strong><span>很轻松地得到它，其中F是因子载荷阵，P为因子模式矩阵，Phi为因子关联矩阵。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fsm</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">oblique</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">class</span>(<span class="cm-variable">oblique</span>)[<span class="cm-number">2</span>]<span class="cm-operator">==</span><span class="cm-string">"fa"</span> <span class="cm-operator">&amp;</span> <span class="cm-variable">is.null</span>(<span class="cm-variable">oblique</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Phi</span>)) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">warning</span>(<span class="cm-string">"Object doesn't look like oblique EFA"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">P</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">unclass</span>(<span class="cm-variable">oblique</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">loading</span>) <span class="cm-comment"># 模式矩阵（回归系数）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">F_</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">P</span> <span class="cm-operator cm-variable-2">%*%</span> <span class="cm-variable">oblique</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Phi</span> <span class="cm-comment"># 关联矩阵（相关系数）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">colnames</span>(<span class="cm-variable">F_</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"PA1"</span>, <span class="cm-string">"PA2"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">return</span>(<span class="cm-variable">F_</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fsm</span>(<span class="cm-variable">fa.promax</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PA1</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">general</span> <span class="cm-number">0.6362443</span> <span class="cm-number">0.6879280</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">picture</span> <span class="cm-number">0.3203301</span> <span class="cm-number">0.6137902</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blocks</span> &nbsp;<span class="cm-number">0.4293252</span> <span class="cm-number">0.9089946</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maze</span> &nbsp; &nbsp;<span class="cm-number">0.2491789</span> <span class="cm-number">0.4496446</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">reading</span> <span class="cm-number">0.9510795</span> <span class="cm-number">0.4587468</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vocab</span> &nbsp; <span class="cm-number">0.8287066</span> <span class="cm-number">0.4476297</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>现在可以看到变量与因子间的相关系数。将它们与正交旋转所得因子载荷阵相比，你会发现该载荷阵列的噪音比较大，这是因为之前你允许潜在因子相关。虽然斜交方法更为复杂，但模型将更符合真实数据。</span></li><li><span>绘制正交和斜交的结果图像，使用</span><strong><span>factor.plot()</span></strong><span>和</span><strong><span>fa.diagram()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">factor.plot</span>(<span class="cm-variable">fa.promax</span>,<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">rownames</span>(<span class="cm-variable">fa.promax</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">loadings</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第14章\第14章 008.png" alt="第14章 008" style="zoom: 67%;" /></p><ul><li><span>数据集ability.cov中心理学测验的两因子图形。词汇和阅读在第一个因子( PA1) 上载荷较大，而积木图案、画图和迷宫在第二个因子 ( PA2 ) 上载荷较大。普通智力测验在两个因子上较为平均。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fa.diagram</span>(<span class="cm-variable">fa.promax</span>, <span class="cm-variable">simple</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第14章\第14章 009.png" alt="第14章 009" style="zoom:67%;" /></p><ul><li><span>若使</span><strong><span>simple = TRUE</span></strong><span>，那么将仅显示每个因子下最大的载荷，以及因子间的相关系数。这类图形在有多个因子时十分实用。</span></li></ul><h5 id='因子得分'><span>因子得分</span></h5><ul><li><span>相比PCA，EFA并不那么关注计算因子得分。在fa()函数中添加score = TRUE选项(原始数据可得时 ) 便可很轻松地获得因子得分。另外还可以得到得分系数(标准化的回归权重 )，它在返回对象的weights元素中。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fa.promax</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">weights</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">PA1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PA2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">general</span> <span class="cm-number">0.07836571</span> <span class="cm-number">0.21091463</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">picture</span> <span class="cm-number">0.02000694</span> <span class="cm-number">0.09038071</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blocks</span> &nbsp;<span class="cm-number">0.03662858</span> <span class="cm-number">0.70209400</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maze</span> &nbsp; &nbsp;<span class="cm-number">0.02700266</span> <span class="cm-number">0.03453381</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">reading</span> <span class="cm-number">0.74276722</span> <span class="cm-number">0.03012597</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vocab</span> &nbsp; <span class="cm-number">0.17683183</span> <span class="cm-number">0.03583324</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>与可精确计算的主成分得分不同，因子得分只是估计得到的。</span></li></ul><h5 id='其他与efa相关的包'><span>其他与EFA相关的包</span></h5><ul><li><strong><span>FactoMineR</span></strong><span>包：不仅提供了PCA和EFA方法，还包含潜变量模型。</span></li><li><strong><span>FAiR</span></strong><span>包：使用遗传算法来估计因子分析模型，它增强了模型参数估计能力，能够处理不等式的约束条件。</span></li><li><strong><span>GPArotation</span></strong><span>包：提供了许多因子旋转方法。</span></li><li><strong><span>nFactors</span></strong><span>包：它提供了用来判断因子数目的许多复杂方法。</span></li></ul><h4 id='其他潜变量模型'><span>其他潜变量模型</span></h4><ul><li><strong><span>验证性因子分析( CFA )</span></strong><span>：在EFA中，你可以用数据来判断需要提取的因子数以及它们的含义。但是你也可以先从一些先验知识开始，比如变量背后有几个因子、变量在因子上的载荷是怎样的、因子间的相关性如何.然后通过收集数据检验这些先验知识。</span></li><li><span>CFA是</span><strong><span>结构方程模型 (SEM)</span></strong><span>中的一种方法。SEM不仅可以假定潜在因子的数目以及组成还能假定因子间的影响方式。你可以将SEM看做是验证性因子分析(对变量)和回归分析(对因子)的组合，它的结果输出包含统计检验和拟合度的指标。R中有几个可做CFA和SEM的非常优秀的软件包，如</span><strong><span>sem</span></strong><span>、</span><strong><span>openMx</span></strong><span>和</span><strong><span>lavaan</span></strong><span>。</span></li><li><strong><span>潜类别模型</span></strong><span>(潜在的因子被认为是类别型而非连续型)可通过</span><strong><span>FlexMix</span></strong><span>、</span><strong><span>lcmm</span></strong><span>、</span><strong><span>randomLCA</span></strong><span>和</span><strong><span>poLCA</span></strong><span>包进行拟合。</span><strong><span>lcda</span></strong><span>包可做潜类别判别分析，而</span><strong><span>lsa</span></strong><span>可做潜在语义分析--一种自然语言处理中的方法。</span></li><li><strong><span>ca</span></strong><span>包提供了可做</span><strong><span>简单和多重对应分析</span></strong><span>的函数。利用这些函数，可以分别在二维列联表和多维列联表中探索类别型变量的结构。</span></li><li><strong><span>多维标度法(MDS)</span></strong><span>。所谓MDS，即可用来发现解释相似性和可测对象(如国家)间距离的潜在维度。基础安装中的</span><strong><span>cmdscale()</span></strong><span> 函数可做经典的MDS。而</span><strong><span>MASs</span></strong><span>包中的</span><strong><span>isoMDs()</span></strong><span>函数可做非线性MDS。</span><strong><span>vagan</span></strong><span>包则包含了可做两种MDS的函数。</span></li></ul><p><img src="img\019_R语言实战\第14章\第14章 010.png" alt="第14章 010" style="zoom:50%;" /></p><h3 id='第15章-时间序列'><span>第15章 时间序列</span></h3><ul><li><span>对时序数据的研究包括两个基本问题:对数据的描述(这段时间内发生了什么)以及预测( 接下来将会发生什么)。</span></li></ul><p><img src="img\019_R语言实战\第15章\第15章 001.png" referrerpolicy="no-referrer" alt="第15章 001"><img src="img\019_R语言实战\第15章\第15章 002.png" referrerpolicy="no-referrer" alt="第15章 002"></p><p><img src="img\019_R语言实战\第15章\第15章 003.png" referrerpolicy="no-referrer" alt="第15章 003"></p><h4 id='时间序列对象'><span>时间序列对象</span></h4><ul><li><p><span>时间序列对象(time-series object)，句括观测值、起始时间、终止时间以及周期(如月、季度或年 ) 的结构。使用</span><strong><span>ts()</span></strong><span>函数生成。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myseries</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ts</span>(<span class="cm-variable">data</span>, <span class="cm-variable">start</span><span class="cm-operator">=</span>, <span class="cm-variable">end</span><span class="cm-operator">=</span>, <span class="cm-variable">frequency</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>frequency</span></strong><span>为每个单位时间所包含的观测值数量(如frequency=1对应年度数据，frequency=12对应月度数据，frequency=4对应季度数据 )。</span></p></li><li><p><span>数据中包含从2003年1月开始，两年内的月度销量数据：</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">sales</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">18</span>, <span class="cm-number">33</span>, <span class="cm-number">41</span>, <span class="cm-number">7</span>, <span class="cm-number">34</span>, <span class="cm-number">35</span>, <span class="cm-number">24</span>, <span class="cm-number">25</span>, <span class="cm-number">24</span>, <span class="cm-number">21</span>, <span class="cm-number">25</span>, <span class="cm-number">20</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">22</span>, <span class="cm-number">31</span>, <span class="cm-number">40</span>, <span class="cm-number">29</span>, <span class="cm-number">25</span>, <span class="cm-number">21</span>, <span class="cm-number">22</span>, <span class="cm-number">54</span>, <span class="cm-number">31</span>, <span class="cm-number">25</span>, <span class="cm-number">26</span>, <span class="cm-number">35</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tsales</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ts</span>(<span class="cm-variable">sales</span>,<span class="cm-variable">start</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2023</span>,<span class="cm-number">1</span>),<span class="cm-variable">frequency</span> <span class="cm-operator">=</span> <span class="cm-number">12</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tsales</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Jan</span> <span class="cm-variable">Feb</span> <span class="cm-variable">Mar</span> <span class="cm-variable">Apr</span> <span class="cm-variable">May</span> <span class="cm-variable">Jun</span> <span class="cm-variable">Jul</span> <span class="cm-variable">Aug</span> <span class="cm-variable">Sep</span> <span class="cm-variable">Oct</span> <span class="cm-variable">Nov</span> <span class="cm-variable">Dec</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2023</span> &nbsp;<span class="cm-number">18</span> &nbsp;<span class="cm-number">33</span> &nbsp;<span class="cm-number">41</span> &nbsp; <span class="cm-number">7</span> &nbsp;<span class="cm-number">34</span> &nbsp;<span class="cm-number">35</span> &nbsp;<span class="cm-number">24</span> &nbsp;<span class="cm-number">25</span> &nbsp;<span class="cm-number">24</span> &nbsp;<span class="cm-number">21</span> &nbsp;<span class="cm-number">25</span> &nbsp;<span class="cm-number">20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2024</span> &nbsp;<span class="cm-number">22</span> &nbsp;<span class="cm-number">31</span> &nbsp;<span class="cm-number">40</span> &nbsp;<span class="cm-number">29</span> &nbsp;<span class="cm-number">25</span> &nbsp;<span class="cm-number">21</span> &nbsp;<span class="cm-number">22</span> &nbsp;<span class="cm-number">54</span> &nbsp;<span class="cm-number">31</span> &nbsp;<span class="cm-number">25</span> &nbsp;<span class="cm-number">26</span> &nbsp;<span class="cm-number">35</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 绘图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">tsales</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 开始时间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">start</span>(<span class="cm-variable">tsales</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2023</span> &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 结束时间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">end</span>(<span class="cm-variable">tsales</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2024</span> &nbsp; <span class="cm-number">12</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 频率</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">frequency</span>(<span class="cm-variable">tsales</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">12</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 取子集</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tsales.sub</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">window</span>(<span class="cm-variable">tsales</span>,<span class="cm-variable">start</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2023</span>,<span class="cm-number">10</span>),<span class="cm-variable">end</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2024</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tsales.sub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Jan</span> <span class="cm-variable">Feb</span> <span class="cm-variable">Mar</span> <span class="cm-variable">Apr</span> <span class="cm-variable">May</span> <span class="cm-variable">Jun</span> <span class="cm-variable">Jul</span> <span class="cm-variable">Aug</span> <span class="cm-variable">Sep</span> <span class="cm-variable">Oct</span> <span class="cm-variable">Nov</span> <span class="cm-variable">Dec</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2023</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">21</span> &nbsp;<span class="cm-number">25</span> &nbsp;<span class="cm-number">20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2024</span> &nbsp;<span class="cm-number">22</span> &nbsp;<span class="cm-number">31</span> &nbsp;<span class="cm-number">40</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 624px;"></div><div class="CodeMirror-gutters" style="display: none; height: 624px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 004.png" alt="第15章 004" style="zoom:67%;" /></p><h5 id='时间序列的平滑和季节性分解'><span>时间序列的平滑和季节性分解</span></h5><ul><li><span>时序数据集中通常有很显著的随机或误差成分。为了辨明数据中的规律，我们总是希望能够撇开这些波动，画出一条平滑曲线。画出平滑曲线的最简单办法是简单移动平均。比如每个数据点都可用这一点和其前后两个点的平均值来表示，这就是</span><strong><span>居中移动平均</span></strong><span>。</span></li><li><span>可以使用</span><strong><span>TTR</span></strong><span>包中的</span><strong><span>SMA()</span></strong><span>、</span><strong><span>zoo</span></strong><span>包中的</span><strong><span>rollmean()</span></strong><span>、</span><strong><span>forecast</span></strong><span>包中的</span><strong><span>ma()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">forecast</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">opar</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">par</span>(<span class="cm-variable">no.readonly</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ylim</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-variable">min</span>(<span class="cm-variable">Nile</span>), <span class="cm-variable">max</span>(<span class="cm-variable">Nile</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">Nile</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"原始数据"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">ma</span>(<span class="cm-variable">Nile</span>,<span class="cm-number">3</span>),<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"使用3个点平滑"</span>,<span class="cm-variable">ylim</span> <span class="cm-operator">=</span> <span class="cm-variable">ylim</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">ma</span>(<span class="cm-variable">Nile</span>,<span class="cm-number">5</span>),<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"使用5个点平滑"</span>,<span class="cm-variable">ylim</span> <span class="cm-operator">=</span> <span class="cm-variable">ylim</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">ma</span>(<span class="cm-variable">Nile</span>,<span class="cm-number">7</span>),<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"使用7个点平滑"</span>,<span class="cm-variable">ylim</span> <span class="cm-operator">=</span> <span class="cm-variable">ylim</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">opar</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 005.png" alt="第15章 005" style="zoom:67%;" /></p><ul><li><span>存在季节性因素的时间序列数据(如月度数据、季度数据等)可以被分解为趋势因子、季节性因子和随机因子。</span></li><li><strong><span>趋势因子</span></strong><span>能捕捉到长期变化</span></li><li><strong><span>季节性因子</span></strong><span> 能捕捉到一年内的周期性变化</span></li><li><strong><span>随机(误差)因子</span></strong><span>则能捕捉到那些不能被趋势或季节效应解释的变化</span></li></ul><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n3117" cid="n3117" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="47.301ex" height="5.656ex" role="img" focusable="false" viewBox="0 -1500 20906.8 2500" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.262ex;"><defs><path id="MJX-13-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-13-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-13-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-13-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-13-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-13-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-13-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-13-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-13-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-13-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-13-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-13-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-13-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-13-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-13-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-13-TEX-I-1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path><path id="MJX-13-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-13-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-13-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,750)"><g data-mml-node="mtd"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">相</text></g><g data-mml-node="mtext" transform="translate(852.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">加</text></g><g data-mml-node="mtext" transform="translate(1704.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">模</text></g><g data-mml-node="mtext" transform="translate(2563.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">型</text></g><g data-mml-node="mi" transform="translate(3415.2,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="852px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="msub" transform="translate(4267.3,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-13-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-13-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(5464.3,0)"><use data-c="3D" xlink:href="#MJX-13-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(6520.1,0)"><use data-c="1D447" xlink:href="#MJX-13-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(7224.1,0)"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(7675.1,0)"><use data-c="1D452" xlink:href="#MJX-13-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(8141.1,0)"><use data-c="1D45B" xlink:href="#MJX-13-TEX-I-1D45B"></use></g><g data-mml-node="msub" transform="translate(8741.1,0)"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-13-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(553,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-13-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(9810.3,0)"><use data-c="2B" xlink:href="#MJX-13-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(10810.5,0)"><use data-c="1D446" xlink:href="#MJX-13-TEX-I-1D446"></use></g><g data-mml-node="mi" transform="translate(11455.5,0)"><use data-c="1D452" xlink:href="#MJX-13-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(11921.5,0)"><use data-c="1D44E" xlink:href="#MJX-13-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(12450.5,0)"><use data-c="1D460" xlink:href="#MJX-13-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(12919.5,0)"><use data-c="1D45C" xlink:href="#MJX-13-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(13404.5,0)"><use data-c="1D45B" xlink:href="#MJX-13-TEX-I-1D45B"></use></g><g data-mml-node="mi" transform="translate(14004.5,0)"><use data-c="1D44E" xlink:href="#MJX-13-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(14533.5,0)"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-13-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(331,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-13-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(15380.7,0)"><use data-c="2B" xlink:href="#MJX-13-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(16380.9,0)"><use data-c="1D43C" xlink:href="#MJX-13-TEX-I-1D43C"></use></g><g data-mml-node="mi" transform="translate(16884.9,0)"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(17335.9,0)"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(17786.9,0)"><use data-c="1D452" xlink:href="#MJX-13-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(18252.9,0)"><use data-c="1D454" xlink:href="#MJX-13-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(18729.9,0)"><use data-c="1D462" xlink:href="#MJX-13-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(19301.9,0)"><use data-c="1D459" xlink:href="#MJX-13-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(19599.9,0)"><use data-c="1D44E" xlink:href="#MJX-13-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(20128.9,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-13-TEX-I-1D456"></use></g></g></g></g><g data-mml-node="mtr" transform="translate(0,-750)"><g data-mml-node="mtd"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">相</text></g><g data-mml-node="mtext" transform="translate(852.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">乘</text></g><g data-mml-node="mtext" transform="translate(1704.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">模</text></g><g data-mml-node="mtext" transform="translate(2563.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="852px" font-family="serif">型</text></g><g data-mml-node="mi" transform="translate(3415.2,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="852px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="msub" transform="translate(4267.3,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-13-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-13-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(5464.3,0)"><use data-c="3D" xlink:href="#MJX-13-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(6520.1,0)"><use data-c="1D447" xlink:href="#MJX-13-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(7224.1,0)"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(7675.1,0)"><use data-c="1D452" xlink:href="#MJX-13-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(8141.1,0)"><use data-c="1D45B" xlink:href="#MJX-13-TEX-I-1D45B"></use></g><g data-mml-node="msub" transform="translate(8741.1,0)"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-13-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(553,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-13-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(9810.3,0)"><use data-c="D7" xlink:href="#MJX-13-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(10810.5,0)"><use data-c="1D446" xlink:href="#MJX-13-TEX-I-1D446"></use></g><g data-mml-node="mi" transform="translate(11455.5,0)"><use data-c="1D452" xlink:href="#MJX-13-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(11921.5,0)"><use data-c="1D44E" xlink:href="#MJX-13-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(12450.5,0)"><use data-c="1D460" xlink:href="#MJX-13-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(12919.5,0)"><use data-c="1D45C" xlink:href="#MJX-13-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(13404.5,0)"><use data-c="1D45B" xlink:href="#MJX-13-TEX-I-1D45B"></use></g><g data-mml-node="mi" transform="translate(14004.5,0)"><use data-c="1D44E" xlink:href="#MJX-13-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(14533.5,0)"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-13-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(331,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-13-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(15380.7,0)"><use data-c="D7" xlink:href="#MJX-13-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(16380.9,0)"><use data-c="1D43C" xlink:href="#MJX-13-TEX-I-1D43C"></use></g><g data-mml-node="mi" transform="translate(16884.9,0)"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(17335.9,0)"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(17786.9,0)"><use data-c="1D452" xlink:href="#MJX-13-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(18252.9,0)"><use data-c="1D454" xlink:href="#MJX-13-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(18729.9,0)"><use data-c="1D462" xlink:href="#MJX-13-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(19301.9,0)"><use data-c="1D459" xlink:href="#MJX-13-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(19599.9,0)"><use data-c="1D44E" xlink:href="#MJX-13-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(20128.9,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-13-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-13-TEX-I-1D456"></use></g></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable rowspacing=".5em" columnspacing="1em" displaystyle="true"><mtr><mtd><mtext>相</mtext><mtext>加</mtext><mtext>模</mtext><mtext>型</mtext><mi>：</mi><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>T</mi><mi>r</mi><mi>e</mi><mi>n</mi><msub><mi>d</mi><mi>i</mi></msub><mo>+</mo><mi>S</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>a</mi><msub><mi>l</mi><mi>i</mi></msub><mo>+</mo><mi>I</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>i</mi></msub></mtd></mtr><mtr><mtd><mtext>相</mtext><mtext>乘</mtext><mtext>模</mtext><mtext>型</mtext><mi>：</mi><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>T</mi><mi>r</mi><mi>e</mi><mi>n</mi><msub><mi>d</mi><mi>i</mi></msub><mo>×</mo><mi>S</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>a</mi><msub><mi>l</mi><mi>i</mi></msub><mo>×</mo><mi>I</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>i</mi></msub></mtd></mtr></mtable></math></mjx-assistive-mml></mjx-container></div></div><ul><li><p><span>将时序分解为</span><strong><span>趋势项</span></strong><span>、</span><strong><span>季节项</span></strong><span>和</span><strong><span>随机项</span></strong><span>的常用方法是用</span><strong><span>LOESS光滑</span></strong><span>做季节性分解，使用</span><strong><span>stl()</span></strong><span>函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stl</span>(<span class="cm-variable">ts</span>, <span class="cm-variable">s.window</span><span class="cm-operator">=</span>, <span class="cm-variable">t.window</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>其中</span><strong><span>ts</span></strong><span>是将要分解的时序，参数</span><strong><span>s.window</span></strong><span>控制季节效应变化的速度，</span><strong><span>t.window</span></strong><span>控制趋势项变化的速度。较小的值意味着更快的变化速度。令</span><strong><span>s.windows=&quot;periodic&quot;</span></strong><span>可使得季节效应在年间都一样。</span></p></li><li><p><strong><span>stl()</span></strong><span>函数只能处理相加模型，要处理相乘模型，需要进行</span><strong><span>log变换</span></strong><span>。</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n3125" cid="n3125" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="48.847ex" height="5.656ex" role="img" focusable="false" viewBox="0 -1500 21590.5 2500" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.262ex;"><defs><path id="MJX-14-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-14-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-14-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-14-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-14-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-14-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-14-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-14-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-14-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-14-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-14-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-14-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-14-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-14-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-14-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-14-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-14-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-14-TEX-I-1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path><path id="MJX-14-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-14-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,750)"><g data-mml-node="mtd" transform="translate(420.5,0)"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(298,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(783,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(1260,0)"><use data-c="28" xlink:href="#MJX-14-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(1649,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-14-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(2568.3,0)"><use data-c="29" xlink:href="#MJX-14-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3235,0)"><use data-c="3D" xlink:href="#MJX-14-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(4290.8,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(4588.8,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(5073.8,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(5550.8,0)"><use data-c="28" xlink:href="#MJX-14-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(5939.8,0)"><use data-c="1D447" xlink:href="#MJX-14-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(6643.8,0)"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(7094.8,0)"><use data-c="1D452" xlink:href="#MJX-14-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(7560.8,0)"><use data-c="1D45B" xlink:href="#MJX-14-TEX-I-1D45B"></use></g><g data-mml-node="msub" transform="translate(8160.8,0)"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-14-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(553,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(9241.3,0)"><use data-c="D7" xlink:href="#MJX-14-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(10241.5,0)"><use data-c="1D446" xlink:href="#MJX-14-TEX-I-1D446"></use></g><g data-mml-node="mi" transform="translate(10886.5,0)"><use data-c="1D452" xlink:href="#MJX-14-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(11352.5,0)"><use data-c="1D44E" xlink:href="#MJX-14-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(11881.5,0)"><use data-c="1D460" xlink:href="#MJX-14-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(12350.5,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(12835.5,0)"><use data-c="1D45B" xlink:href="#MJX-14-TEX-I-1D45B"></use></g><g data-mml-node="mi" transform="translate(13435.5,0)"><use data-c="1D44E" xlink:href="#MJX-14-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(13964.5,0)"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(331,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(14823,0)"><use data-c="D7" xlink:href="#MJX-14-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(15823.2,0)"><use data-c="1D43C" xlink:href="#MJX-14-TEX-I-1D43C"></use></g><g data-mml-node="mi" transform="translate(16327.2,0)"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(16778.2,0)"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(17229.2,0)"><use data-c="1D452" xlink:href="#MJX-14-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(17695.2,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(18172.2,0)"><use data-c="1D462" xlink:href="#MJX-14-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(18744.2,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(19042.2,0)"><use data-c="1D44E" xlink:href="#MJX-14-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(19571.2,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(20360.5,0)"><use data-c="29" xlink:href="#MJX-14-TEX-N-29"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,-750)"><g data-mml-node="mtd"><g data-mml-node="mo"><use data-c="3D" xlink:href="#MJX-14-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(1055.8,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(1353.8,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(1838.8,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(2315.8,0)"><use data-c="28" xlink:href="#MJX-14-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(2704.8,0)"><use data-c="1D447" xlink:href="#MJX-14-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(3408.8,0)"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(3859.8,0)"><use data-c="1D452" xlink:href="#MJX-14-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(4325.8,0)"><use data-c="1D45B" xlink:href="#MJX-14-TEX-I-1D45B"></use></g><g data-mml-node="msub" transform="translate(4925.8,0)"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-14-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(553,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(5784,0)"><use data-c="29" xlink:href="#MJX-14-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(6395.3,0)"><use data-c="2B" xlink:href="#MJX-14-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(7395.5,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(7693.5,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(8178.5,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(8655.5,0)"><use data-c="28" xlink:href="#MJX-14-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(9044.5,0)"><use data-c="1D446" xlink:href="#MJX-14-TEX-I-1D446"></use></g><g data-mml-node="mi" transform="translate(9689.5,0)"><use data-c="1D452" xlink:href="#MJX-14-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(10155.5,0)"><use data-c="1D44E" xlink:href="#MJX-14-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(10684.5,0)"><use data-c="1D460" xlink:href="#MJX-14-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(11153.5,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(11638.5,0)"><use data-c="1D45B" xlink:href="#MJX-14-TEX-I-1D45B"></use></g><g data-mml-node="mi" transform="translate(12238.5,0)"><use data-c="1D44E" xlink:href="#MJX-14-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(12767.5,0)"><g data-mml-node="mi"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(331,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(13403.8,0)"><use data-c="29" xlink:href="#MJX-14-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(14015,0)"><use data-c="2B" xlink:href="#MJX-14-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(15015.2,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(15313.2,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(15798.2,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(16275.2,0)"><use data-c="28" xlink:href="#MJX-14-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(16664.2,0)"><use data-c="1D43C" xlink:href="#MJX-14-TEX-I-1D43C"></use></g><g data-mml-node="mi" transform="translate(17168.2,0)"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(17619.2,0)"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(18070.2,0)"><use data-c="1D452" xlink:href="#MJX-14-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(18536.2,0)"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(19013.2,0)"><use data-c="1D462" xlink:href="#MJX-14-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(19585.2,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(19883.2,0)"><use data-c="1D44E" xlink:href="#MJX-14-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(20412.2,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-14-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-14-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(21201.5,0)"><use data-c="29" xlink:href="#MJX-14-TEX-N-29"></use></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable rowspacing=".5em" columnspacing="1em" displaystyle="true"><mtr><mtd><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>Y</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>T</mi><mi>r</mi><mi>e</mi><mi>n</mi><msub><mi>d</mi><mi>t</mi></msub><mo>×</mo><mi>S</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>a</mi><msub><mi>l</mi><mi>t</mi></msub><mo>×</mo><mi>I</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mtd></mtr><mtr><mtd><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>T</mi><mi>r</mi><mi>e</mi><mi>n</mi><msub><mi>d</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>S</mi><mi>e</mi><mi>a</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>a</mi><msub><mi>l</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><mi>I</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mtd></mtr></mtable></math></mjx-assistive-mml></mjx-container></div></div></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">AirPassengers</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">lair</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">log</span>(<span class="cm-variable">AirPassengers</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">lair</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"log()"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">stl</span>(<span class="cm-variable">lair</span>,<span class="cm-variable">s.window</span> <span class="cm-operator">=</span> <span class="cm-string">"periodic"</span>) <span class="cm-comment"># 季节效应设置每年相同</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 各个分解项</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">time.series</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">seasonal</span> &nbsp; &nbsp;<span class="cm-variable">trend</span> &nbsp; <span class="cm-variable">remainder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jan</span> <span class="cm-number">1949</span> <span class="cm-operator">-</span><span class="cm-number">0.09164042</span> <span class="cm-number">4.829389</span> <span class="cm-operator">-</span><span class="cm-number">0.01924936</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Feb</span> <span class="cm-number">1949</span> <span class="cm-operator">-</span><span class="cm-number">0.11402828</span> <span class="cm-number">4.830368</span> &nbsp;<span class="cm-number">0.05434477</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mar</span> <span class="cm-number">1949</span> &nbsp;<span class="cm-number">0.01586585</span> <span class="cm-number">4.831348</span> &nbsp;<span class="cm-number">0.03558845</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Apr</span> <span class="cm-number">1949</span> <span class="cm-operator">-</span><span class="cm-number">0.01402759</span> <span class="cm-number">4.833377</span> &nbsp;<span class="cm-number">0.04046325</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">May</span> <span class="cm-number">1949</span> <span class="cm-operator">-</span><span class="cm-number">0.01502478</span> <span class="cm-number">4.835406</span> <span class="cm-operator">-</span><span class="cm-number">0.02459053</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jun</span> <span class="cm-number">1949</span> &nbsp;<span class="cm-number">0.10978976</span> <span class="cm-number">4.838166</span> <span class="cm-operator">-</span><span class="cm-number">0.04268143</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 原始数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">exp</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">time.series</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">seasonal</span> &nbsp; &nbsp;<span class="cm-variable">trend</span> <span class="cm-variable">remainder</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jan</span> <span class="cm-number">1949</span> <span class="cm-number">0.9124332</span> <span class="cm-number">125.1344</span> <span class="cm-number">0.9809347</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Feb</span> <span class="cm-number">1949</span> <span class="cm-number">0.8922327</span> <span class="cm-number">125.2571</span> <span class="cm-number">1.0558486</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mar</span> <span class="cm-number">1949</span> <span class="cm-number">1.0159924</span> <span class="cm-number">125.3798</span> <span class="cm-number">1.0362293</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Apr</span> <span class="cm-number">1949</span> <span class="cm-number">0.9860703</span> <span class="cm-number">125.6345</span> <span class="cm-number">1.0412930</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">May</span> <span class="cm-number">1949</span> <span class="cm-number">0.9850875</span> <span class="cm-number">125.8897</span> <span class="cm-number">0.9757094</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jun</span> <span class="cm-number">1949</span> <span class="cm-number">1.1160434</span> <span class="cm-number">126.2377</span> <span class="cm-number">0.9582166</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第15章\第15章 006.png" alt="第15章 006" style="zoom:67%;" /></th><th><img src="img\019_R语言实战\第15章\第15章 007.png" alt="第15章 007" style="zoom:67%;" /></th></tr></thead><tbody></tbody></table></figure><p><img src="img\019_R语言实战\第15章\第15章 008.png" alt="第15章 008" style="zoom:67%;" /></p><ul><li><span>从图像来看，序列的波动随着整体水平的增长而增长，即</span><strong><span>相乘模型</span></strong><span>更适合这个序列。</span></li><li><span>对季节分解的可视化，使用R自带的</span><strong><span>monthplot()</span></strong><span>和</span><strong><span>forecast</span></strong><span>包中的</span><strong><span>seasonplot()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">forecast</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">monthplot</span>(<span class="cm-variable">AirPassengers</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">seasonplot</span>(<span class="cm-variable">AirPassengers</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>,<span class="cm-variable">year.labels</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 009.png" alt="第15章 009" style="zoom: 50%;" /></p><h4 id='指数预测模型'><span>指数预测模型</span></h4><ul><li><p><span>指数模型是用来预测时序未来值的最常用模型。</span></p></li><li><p><span>单指数模型( simple/singleexponential model) 拟合的是只有常数水平项和时间点必随机项的时间序列，这时认为时间序列不存在趋势项和季节效应。</span></p></li><li><p><span>双指数模型 ( double exponential model; 也叫Holt指数平滑，Holtexponentialsmoothing)拟合的是有水平项和趋势项的时序。</span></p></li><li><p><span>三指数模型( triple exponentialmodel:也叫Holt-Winters指数平滑，Holt-Winters exponentialsmoothing)拟合的是有水平项、趋势项以及季节效应的时序。</span></p></li><li><p><span>使用R语言自带的</span><strong><span>HoltWinters()</span></strong><span>或</span><strong><span>forecast</span></strong><span>包的</span><strong><span>ets()</span></strong><span>拟合指数函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ets</span>(<span class="cm-variable">ts</span>, <span class="cm-variable">model</span><span class="cm-operator">=</span><span class="cm-string">"ZZZ"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>其中ts是要分析的时序，限定模型的字母有三个。第一个字母代表误差项，第二个字母代表趋势项，第三个字母则代表季节项。可选的字母包括：相加模型(A)、相乘模型(M)、无(n)、自动选择(z )。</span></p></li></ul><p><img src="img\019_R语言实战\第15章\第15章 010.png" referrerpolicy="no-referrer" alt="第15章 010"></p><ul><li><strong><span>ses()</span></strong><span>、</span><strong><span>holt()</span></strong><span>、</span><strong><span>hw()</span></strong><span>是ets()的便捷包装。</span></li></ul><h5 id='单指数平滑'><span>单指数平滑</span></h5><ul><li><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.322ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 9866.5 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-17-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-17-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-17-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-17-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-17-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-17-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path><path id="MJX-17-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-17-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-17-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-17-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-17-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-17-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-17-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-17-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(1197,0)"><use data-c="3D" xlink:href="#MJX-17-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(2252.8,0)"><use data-c="1D459" xlink:href="#MJX-17-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2550.8,0)"><use data-c="1D452" xlink:href="#MJX-17-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(3016.8,0)"><use data-c="1D463" xlink:href="#MJX-17-TEX-I-1D463"></use></g><g data-mml-node="mi" transform="translate(3501.8,0)"><use data-c="1D452" xlink:href="#MJX-17-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(3967.8,0)"><use data-c="1D459" xlink:href="#MJX-17-TEX-I-1D459"></use></g><g data-mml-node="mo" transform="translate(4488,0)"><use data-c="2B" xlink:href="#MJX-17-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(5488.3,0)"><use data-c="1D456" xlink:href="#MJX-17-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(5833.3,0)"><use data-c="1D45F" xlink:href="#MJX-17-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(6284.3,0)"><use data-c="1D45F" xlink:href="#MJX-17-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(6735.3,0)"><use data-c="1D452" xlink:href="#MJX-17-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(7201.3,0)"><use data-c="1D454" xlink:href="#MJX-17-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(7678.3,0)"><use data-c="1D462" xlink:href="#MJX-17-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(8250.3,0)"><use data-c="1D459" xlink:href="#MJX-17-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(8548.3,0)"><use data-c="1D44E" xlink:href="#MJX-17-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(9077.3,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-17-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-17-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>+</mo><mi>i</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_t = level + irregular_t</script></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">forecast</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ets</span>(<span class="cm-variable">nhtemp</span>,<span class="cm-variable">model</span> <span class="cm-operator">=</span> <span class="cm-string">"ANN"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ETS</span>(<span class="cm-variable">A</span>,<span class="cm-variable">N</span>,<span class="cm-variable">N</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">ets</span>(<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">nhtemp</span>, <span class="cm-variable">model</span> <span class="cm-operator">=</span> <span class="cm-string">"ANN"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Smoothing</span> <span class="cm-variable">parameters</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alpha</span> <span class="cm-operator">=</span> <span class="cm-number">0.1819</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Initial</span> <span class="cm-variable">states</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-number">50.2762</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">sigma</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">1.1455</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">AIC</span> &nbsp; &nbsp; <span class="cm-variable">AICc</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">BIC</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">265.9298</span> <span class="cm-number">266.3584</span> <span class="cm-number">272.2129</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 向前预测一步</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>,<span class="cm-number">1</span>) <span class="cm-comment"># 80%和95%的置信区间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Point</span> <span class="cm-variable">Forecast</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">95</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">95</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1972</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">51.87031</span> <span class="cm-number">50.40226</span> <span class="cm-number">53.33835</span> <span class="cm-number">49.62512</span> <span class="cm-number">54.11549</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>,<span class="cm-number">1</span>),<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"年"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">expression</span>(<span class="cm-variable">paste</span>(<span class="cm-string">"Temperature ("</span>, <span class="cm-variable">degree</span><span class="cm-operator">*</span><span class="cm-variable">F</span>,<span class="cm-string">")"</span>,)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"New Haven Annual Mean Temperature"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取精确率</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">accuracy</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ME</span> &nbsp; &nbsp; <span class="cm-variable">RMSE</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">MAE</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">MPE</span> &nbsp; <span class="cm-variable">MAPE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">MASE</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">ACF1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Training</span> <span class="cm-variable">set</span> <span class="cm-number">0.1460657</span> <span class="cm-number">1.126268</span> <span class="cm-number">0.8951225</span> <span class="cm-number">0.2419373</span> <span class="cm-number">1.7489</span> <span class="cm-number">0.7512408</span> <span class="cm-operator">-</span><span class="cm-number">0.006441923</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 624px;"></div><div class="CodeMirror-gutters" style="display: none; height: 624px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 011.png" alt="第15章 011" style="zoom:67%;" /></p><p><img src="img\019_R语言实战\第15章\第15章 012.png" referrerpolicy="no-referrer" alt="第15章 012"></p><h5 id='holt指数平滑和holt-winters指数平滑'><span>Holt指数平滑和Holt-Winters指数平滑</span></h5><ul><li><strong><span>Holt指数</span></strong><span>平滑可以对有</span><strong><span>水平项</span></strong><span>和</span><strong><span>趋势项</span></strong><span>(斜率)的时序进行拟合，</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="30.113ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 13310 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-18-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-18-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-18-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-18-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-18-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-18-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path><path id="MJX-18-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-18-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-18-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-18-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-18-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-18-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-18-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-18-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-18-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-18-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-18-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-18-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(1197,0)"><use data-c="3D" xlink:href="#MJX-18-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(2252.8,0)"><use data-c="1D459" xlink:href="#MJX-18-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2550.8,0)"><use data-c="1D452" xlink:href="#MJX-18-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(3016.8,0)"><use data-c="1D463" xlink:href="#MJX-18-TEX-I-1D463"></use></g><g data-mml-node="mi" transform="translate(3501.8,0)"><use data-c="1D452" xlink:href="#MJX-18-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(3967.8,0)"><use data-c="1D459" xlink:href="#MJX-18-TEX-I-1D459"></use></g><g data-mml-node="mo" transform="translate(4488,0)"><use data-c="2B" xlink:href="#MJX-18-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(5488.3,0)"><use data-c="1D460" xlink:href="#MJX-18-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(5957.3,0)"><use data-c="1D459" xlink:href="#MJX-18-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(6255.3,0)"><use data-c="1D45C" xlink:href="#MJX-18-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(6740.3,0)"><use data-c="1D45D" xlink:href="#MJX-18-TEX-I-1D45D"></use></g><g data-mml-node="mi" transform="translate(7243.3,0)"><use data-c="1D452" xlink:href="#MJX-18-TEX-I-1D452"></use></g><g data-mml-node="mo" transform="translate(7931.5,0)"><use data-c="D7" xlink:href="#MJX-18-TEX-N-D7"></use></g><g data-mml-node="mi" transform="translate(8931.7,0)"><use data-c="1D456" xlink:href="#MJX-18-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(9276.7,0)"><use data-c="1D45F" xlink:href="#MJX-18-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(9727.7,0)"><use data-c="1D45F" xlink:href="#MJX-18-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(10178.7,0)"><use data-c="1D452" xlink:href="#MJX-18-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(10644.7,0)"><use data-c="1D454" xlink:href="#MJX-18-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(11121.7,0)"><use data-c="1D462" xlink:href="#MJX-18-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(11693.7,0)"><use data-c="1D459" xlink:href="#MJX-18-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(11991.7,0)"><use data-c="1D44E" xlink:href="#MJX-18-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(12520.7,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-18-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-18-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>+</mo><mi>s</mi><mi>l</mi><mi>o</mi><mi>p</mi><mi>e</mi><mo>×</mo><mi>i</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_t = level+slope\times irregular_t </script></li><li><span>平滑参数α(alpha)控制水平项的指数型下降，beta控制斜率的指数型下降。两个参数的有效范围都是[0,1]，参数取值越大意味着越近的观测值的权重越大。</span></li><li><strong><span>Holt-Winters指数</span></strong><span>光滑可用来拟合有</span><strong><span>水平项</span></strong><span>、</span><strong><span>趋势项</span></strong><span>以及</span><strong><span>季节项</span></strong><span>的时间序列，</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="36.465ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 16117.7 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-19-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-19-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-19-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-19-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-19-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-19-TEX-I-1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path><path id="MJX-19-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-19-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-19-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-19-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-19-TEX-N-D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path><path id="MJX-19-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-19-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-19-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-19-TEX-I-1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-19-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-19-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-19-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(1197,0)"><use data-c="3D" xlink:href="#MJX-19-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(2252.8,0)"><use data-c="1D459" xlink:href="#MJX-19-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2550.8,0)"><use data-c="1D452" xlink:href="#MJX-19-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(3016.8,0)"><use data-c="1D463" xlink:href="#MJX-19-TEX-I-1D463"></use></g><g data-mml-node="mi" transform="translate(3501.8,0)"><use data-c="1D452" xlink:href="#MJX-19-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(3967.8,0)"><use data-c="1D459" xlink:href="#MJX-19-TEX-I-1D459"></use></g><g data-mml-node="mo" transform="translate(4488,0)"><use data-c="2B" xlink:href="#MJX-19-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(5488.3,0)"><use data-c="1D460" xlink:href="#MJX-19-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(5957.3,0)"><use data-c="1D459" xlink:href="#MJX-19-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(6255.3,0)"><use data-c="1D45C" xlink:href="#MJX-19-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(6740.3,0)"><use data-c="1D45D" xlink:href="#MJX-19-TEX-I-1D45D"></use></g><g data-mml-node="mi" transform="translate(7243.3,0)"><use data-c="1D452" xlink:href="#MJX-19-TEX-I-1D452"></use></g><g data-mml-node="mo" transform="translate(7931.5,0)"><use data-c="D7" xlink:href="#MJX-19-TEX-N-D7"></use></g><g data-mml-node="mo" transform="translate(8931.7,0)"><use data-c="2B" xlink:href="#MJX-19-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(9709.7,0)"><g data-mml-node="mi"><use data-c="1D460" xlink:href="#MJX-19-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(502,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-19-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(10739.2,0)"><use data-c="2B" xlink:href="#MJX-19-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(11739.4,0)"><use data-c="1D456" xlink:href="#MJX-19-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(12084.4,0)"><use data-c="1D45F" xlink:href="#MJX-19-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(12535.4,0)"><use data-c="1D45F" xlink:href="#MJX-19-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(12986.4,0)"><use data-c="1D452" xlink:href="#MJX-19-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(13452.4,0)"><use data-c="1D454" xlink:href="#MJX-19-TEX-I-1D454"></use></g><g data-mml-node="mi" transform="translate(13929.4,0)"><use data-c="1D462" xlink:href="#MJX-19-TEX-I-1D462"></use></g><g data-mml-node="mi" transform="translate(14501.4,0)"><use data-c="1D459" xlink:href="#MJX-19-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(14799.4,0)"><use data-c="1D44E" xlink:href="#MJX-19-TEX-I-1D44E"></use></g><g data-mml-node="msub" transform="translate(15328.4,0)"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-19-TEX-I-1D45F"></use></g><g data-mml-node="mi" transform="translate(484,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-19-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>l</mi><mo>+</mo><mi>s</mi><mi>l</mi><mi>o</mi><mi>p</mi><mi>e</mi><mo>×</mo><mo>+</mo><msub><mi>s</mi><mi>t</mi></msub><mo>+</mo><mi>i</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><msub><mi>r</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_t = level+slope\times + s_t + irregular_t</script><span> </span></li><li><span>其中</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.826ex" height="1.357ex" role="img" focusable="false" viewBox="0 -442 807.3 599.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-20-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJX-20-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D460" xlink:href="#MJX-20-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(502,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-20-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">s_t</script><span>代表时刻t的季节效应。除alpha和beta参数外，gamma光滑参数控制季节项的指数下降。gamma参数的取值范围同样是[0,1]，gamma值越大，意味着越近的观测值的季节效应权重越大。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># Holt-Winters模型（三种效应）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">forecast</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ets</span>(<span class="cm-variable">log</span>(<span class="cm-variable">AirPassengers</span>),<span class="cm-variable">model</span> <span class="cm-operator">=</span> <span class="cm-string">"AAA"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ETS</span>(<span class="cm-variable">A</span>,<span class="cm-variable">A</span>,<span class="cm-variable">A</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">ets</span>(<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">log</span>(<span class="cm-variable">AirPassengers</span>), <span class="cm-variable">model</span> <span class="cm-operator">=</span> <span class="cm-string">"AAA"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Smoothing</span> <span class="cm-variable">parameters</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alpha</span> <span class="cm-operator">=</span> <span class="cm-number">0.6975</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">beta</span> &nbsp;<span class="cm-operator">=</span> <span class="cm-number">0.0031</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">gamma</span> <span class="cm-operator">=</span> <span class="cm-number">1e-04</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Initial</span> <span class="cm-variable">states</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-number">4.7925</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">b</span> <span class="cm-operator">=</span> <span class="cm-number">0.0111</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">s</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">0.1045</span> <span class="cm-operator">-</span><span class="cm-number">0.2206</span> <span class="cm-operator">-</span><span class="cm-number">0.0787</span> <span class="cm-number">0.0562</span> <span class="cm-number">0.2049</span> <span class="cm-number">0.2149</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.1146</span> <span class="cm-operator">-</span><span class="cm-number">0.0081</span> <span class="cm-operator">-</span><span class="cm-number">0.0059</span> <span class="cm-number">0.0225</span> <span class="cm-operator">-</span><span class="cm-number">0.1113</span> <span class="cm-operator">-</span><span class="cm-number">0.0841</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">sigma</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.0383</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">AIC</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">AICc</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">BIC</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">207.1694</span> <span class="cm-operator">-</span><span class="cm-number">202.3123</span> <span class="cm-operator">-</span><span class="cm-number">156.6826</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>,<span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pred</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Point</span> <span class="cm-variable">Forecast</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">95</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">95</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jan</span> <span class="cm-number">1961</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">6.109335</span> <span class="cm-number">6.060306</span> <span class="cm-number">6.158365</span> <span class="cm-number">6.034351</span> <span class="cm-number">6.184319</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Feb</span> <span class="cm-number">1961</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">6.092542</span> <span class="cm-number">6.032679</span> <span class="cm-number">6.152405</span> <span class="cm-number">6.000989</span> <span class="cm-number">6.184094</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mar</span> <span class="cm-number">1961</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">6.236626</span> <span class="cm-number">6.167535</span> <span class="cm-number">6.305718</span> <span class="cm-number">6.130960</span> <span class="cm-number">6.342292</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Apr</span> <span class="cm-number">1961</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">6.218531</span> <span class="cm-number">6.141239</span> <span class="cm-number">6.295823</span> <span class="cm-number">6.100323</span> <span class="cm-number">6.336738</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">May</span> <span class="cm-number">1961</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">6.226734</span> <span class="cm-number">6.141971</span> <span class="cm-number">6.311498</span> <span class="cm-number">6.097100</span> <span class="cm-number">6.356369</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">pred</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Forecast for Air Travel"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"log()"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Time"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 还原为原来大小</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mean</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">exp</span>(<span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">lower</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">exp</span>(<span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">lower</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">upper</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">exp</span>(<span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">upper</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">p</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cbind</span>(<span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">mean</span>, <span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">lower</span>, <span class="cm-variable">pred</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">upper</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 重命名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dimnames</span>(<span class="cm-variable">p</span>)[[<span class="cm-number">2</span>]] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"mean"</span>, <span class="cm-string">"Lo 80"</span>, <span class="cm-string">"Lo 95"</span>, <span class="cm-string">"Hi 80"</span>, <span class="cm-string">"Hi 95"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">p</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mean</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">95</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">95</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jan</span> <span class="cm-number">1961</span> <span class="cm-number">450.0395</span> <span class="cm-number">428.5065</span> <span class="cm-number">417.5279</span> <span class="cm-number">472.6544</span> <span class="cm-number">485.0826</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Feb</span> <span class="cm-number">1961</span> <span class="cm-number">442.5448</span> <span class="cm-number">416.8301</span> <span class="cm-number">403.8280</span> <span class="cm-number">469.8459</span> <span class="cm-number">484.9735</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mar</span> <span class="cm-number">1961</span> <span class="cm-number">511.1312</span> <span class="cm-number">477.0088</span> <span class="cm-number">459.8775</span> <span class="cm-number">547.6945</span> <span class="cm-number">568.0971</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Apr</span> <span class="cm-number">1961</span> <span class="cm-number">501.9652</span> <span class="cm-number">464.6289</span> <span class="cm-number">446.0019</span> <span class="cm-number">542.3017</span> <span class="cm-number">564.9506</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">May</span> <span class="cm-number">1961</span> <span class="cm-number">506.1001</span> <span class="cm-number">464.9691</span> <span class="cm-number">444.5667</span> <span class="cm-number">550.8694</span> <span class="cm-number">576.1504</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1118px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1118px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 013.png" alt="第15章 013" style="zoom:67%;" /></p><ul><li><span>通过</span><strong><span>ets()</span></strong><span>函数自动选取对原始数据拟合优度最高的模型。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ets</span>(<span class="cm-variable">JohnsonJohnson</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ETS</span>(<span class="cm-variable">M</span>,<span class="cm-variable">A</span>,<span class="cm-variable">A</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">ets</span>(<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">JohnsonJohnson</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Smoothing</span> <span class="cm-variable">parameters</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">alpha</span> <span class="cm-operator">=</span> <span class="cm-number">0.2776</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">beta</span> &nbsp;<span class="cm-operator">=</span> <span class="cm-number">0.0636</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">gamma</span> <span class="cm-operator">=</span> <span class="cm-number">0.5867</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Initial</span> <span class="cm-variable">states</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-number">0.6276</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">b</span> <span class="cm-operator">=</span> <span class="cm-number">0.0165</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">s</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">0.2293</span> <span class="cm-number">0.1913</span> <span class="cm-operator">-</span><span class="cm-number">0.0074</span> <span class="cm-number">0.0454</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">sigma</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0.0921</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">AIC</span> &nbsp; &nbsp; <span class="cm-variable">AICc</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">BIC</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">163.6392</span> <span class="cm-number">166.0716</span> <span class="cm-number">185.5165</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># flty参数指定了图中预测值折线的类型(虚线)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>),<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Johnson &amp; Johnson 预测"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"季度收益"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"时间"</span>,<span class="cm-variable">flty</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 494px;"></div><div class="CodeMirror-gutters" style="display: none; height: 494px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 014.png" alt="第15章 014" style="zoom:67%;" /></p><h4 id='arima预测模型'><span>ARIMA预测模型</span></h4><ul><li><span>在ARIMA预测模型中，预测值表示为由最近的真实值和最近的预测误差组成的</span><strong><span>线性函数</span></strong><span>。</span></li></ul><h5 id='概念'><span>概念</span></h5><ul><li><span>时序的</span><strong><span>滞后阶数</span></strong><span>即我们向后追溯的观测值的数量，使用</span><strong><span>lag(ts, k)</span></strong><span>。</span></li></ul><p><img src="img\019_R语言实战\第15章\第15章 015.png" referrerpolicy="no-referrer" alt="第15章 015"></p><ul><li><strong><span>自相关</span></strong><span>度量时序中各个观测值之间的相关性。</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.336ex" height="1.977ex" role="img" focusable="false" viewBox="0 -716 1916.4 873.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-21-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-21-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-21-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D434" xlink:href="#MJX-21-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(750,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-21-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-21-TEX-I-1D458"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><msub><mi>C</mi><mi>k</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">AC_k</script><span>即一系列观测值(</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.08ex" height="1.902ex" role="img" focusable="false" viewBox="0 -683 919.3 840.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-29-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-29-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-29-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-29-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_t</script><span>) 和时期之前的观测值(</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.158ex" height="2.016ex" role="img" focusable="false" viewBox="0 -683 1837.8 891" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.471ex;"><defs><path id="MJX-27-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-27-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-27-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-27-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-27-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-27-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-27-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D458" xlink:href="#MJX-27-TEX-I-1D458"></use></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>k</mi></mrow></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_{t-k}</script><span>)之间的相关性。</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.302ex" height="1.959ex" role="img" focusable="false" viewBox="0 -716 1901.6 866" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.339ex;"><defs><path id="MJX-24-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-24-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-24-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D434" xlink:href="#MJX-24-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(750,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-24-TEX-I-1D436"></use></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-24-TEX-N-31"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><msub><mi>C</mi><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">AC_1</script><span>就是一阶滞后序列和0阶滞后序列间的相关性。</span></li><li><span>这些相关性(</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="18.975ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 8386.8 950" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.452ex;"><defs><path id="MJX-25-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-25-TEX-I-1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path><path id="MJX-25-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-25-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-25-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-25-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-25-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D434" xlink:href="#MJX-25-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(750,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-25-TEX-I-1D436"></use></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-25-TEX-N-31"></use></g></g><g data-mml-node="mi" transform="translate(1901.6,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mi" transform="translate(2785.6,0)"><use data-c="1D434" xlink:href="#MJX-25-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(3535.6,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-25-TEX-I-1D436"></use></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-25-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(4687.1,0)"><use data-c="2C" xlink:href="#MJX-25-TEX-N-2C"></use></g><g data-mml-node="mo" transform="translate(5131.8,0)"><use data-c="22EF" xlink:href="#MJX-25-TEX-N-22EF"></use></g><g data-mml-node="mi" transform="translate(6470.4,0)"><use data-c="1D434" xlink:href="#MJX-25-TEX-I-1D434"></use></g><g data-mml-node="msub" transform="translate(7220.4,0)"><g data-mml-node="mi"><use data-c="1D436" xlink:href="#MJX-25-TEX-I-1D436"></use></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><use data-c="1D458" xlink:href="#MJX-25-TEX-I-1D458"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><msub><mi>C</mi><mn>1</mn></msub><mi>，</mi><mi>A</mi><msub><mi>C</mi><mn>2</mn></msub><mo>,</mo><mo>⋯</mo><mi>A</mi><msub><mi>C</mi><mi>k</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">AC_1，AC_2,\cdots AC_k</script><span>) 构成的图即</span><strong><span>自相关函数图</span></strong><span>(AutoCorrelation Function plot，ACF图)。ACF图可用于为ARIMA模型选择合适的参数，并评估最终模型的拟合效果。</span></li><li><strong><span>stats</span></strong><span>包中的</span><strong><span>acf()</span></strong><span>或</span><strong><span>forecast</span></strong><span>包中的</span><strong><span>Acf()</span></strong><span>都可以生成ACF图。</span></li><li><strong><span>偏自相关</span></strong><span>即当序列 </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.08ex" height="1.902ex" role="img" focusable="false" viewBox="0 -683 919.3 840.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-29-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-29-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-29-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-29-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_t</script><span> 和 </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="4.158ex" height="2.016ex" role="img" focusable="false" viewBox="0 -683 1837.8 891" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.471ex;"><defs><path id="MJX-27-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-27-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-27-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-27-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-27-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-27-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-27-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D458" xlink:href="#MJX-27-TEX-I-1D458"></use></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>k</mi></mrow></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_{t-k}</script><span> 之间的所有值( </span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="19.492ex" height="2.016ex" role="img" focusable="false" viewBox="0 -683 8615.4 891" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.471ex;"><defs><path id="MJX-28-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-28-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-28-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-28-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-28-TEX-N-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path id="MJX-28-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-28-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-28-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-28-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-28-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-28-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-28-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="31" xlink:href="#MJX-28-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(1822.9,0)"><use data-c="2C" xlink:href="#MJX-28-TEX-N-2C"></use></g><g data-mml-node="msub" transform="translate(2267.6,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-28-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-28-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-28-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="32" xlink:href="#MJX-28-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(4090.6,0)"><use data-c="2C" xlink:href="#MJX-28-TEX-N-2C"></use></g><g data-mml-node="mo" transform="translate(4535.2,0)"><use data-c="22EF" xlink:href="#MJX-28-TEX-N-22EF"></use></g><g data-mml-node="msub" transform="translate(5873.9,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-28-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-28-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-28-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D458" xlink:href="#MJX-28-TEX-I-1D458"></use></g><g data-mml-node="mo" transform="translate(1660,0)"><use data-c="2B" xlink:href="#MJX-28-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(2438,0)"><use data-c="31" xlink:href="#MJX-28-TEX-N-31"></use></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>,</mo><mo>⋯</mo><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_{t-1},Y_{t-2},\cdots Y_{t-k+1}</script><span> )带来的效应都被移除后，两个序列间的相关性。</span></li><li><strong><span>stats</span></strong><span>包中的</span><strong><span>pacf()</span></strong><span>或</span><strong><span>forecast</span></strong><span>包中的</span><strong><span>Pacf()</span></strong><span>都可以生成PACF图。PACF图也可以用来找到ARIMA模型中最适宜的参数。</span></li><li><span>ARIMA模型主要用于拟合具有</span><strong><span>平稳性</span></strong><span>(或可以被转换为平稳序列) 的时间序列。</span></li><li><span>由于一般假定平稳性时序有常数均值，这样的序列中肯定不含有趋势项。非平稳的时序可以通过差分来转换为平稳性序列。具体来说，</span><strong><span>差分</span></strong><span>就是将时序中的每一个观测值</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.08ex" height="1.902ex" role="img" focusable="false" viewBox="0 -683 919.3 840.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.357ex;"><defs><path id="MJX-29-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-29-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-29-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-29-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_t</script><span>都替换为</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="8.97ex" height="2.016ex" role="img" focusable="false" viewBox="0 -683 3964.7 891" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.471ex;"><defs><path id="MJX-30-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-30-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-30-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-30-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-30-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-30-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-30-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="31" xlink:href="#MJX-30-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(2045.2,0)"><use data-c="2212" xlink:href="#MJX-30-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(3045.4,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-30-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-30-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>Y</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">Y_{t-1}-Y_t</script><span>。</span><strong><span>diff(ts, differences=d)</span></strong><span>，d即为差分的次数。</span><strong><span>forecast</span></strong><span>包</span><strong><span>ndiffs()</span></strong><span>可以找到最优的d。</span></li><li><strong><span>平稳性</span></strong><span>一般可以通过时序图直观判断。如果方差不是常数，则需要对数据做变换，如果数据中存在趋势项，则需要对其进行差分。也可以通过</span><strong><span>ADF</span></strong><span>统计检验来验证平稳性假定。</span><strong><span>tseries</span></strong><span>包的</span><strong><span>adf.test()</span></strong><span>可以用来做ADF检验。</span></li><li><span>拟合出有自回归 (AutoRegressive，</span><strong><span>AR</span></strong><span>) 项、移动平均 (Moving Averages，MA) 项或者两者都有(ARMA ) 的模型了。最后，我们将检验有ARMA项的ARIMA模型，并对其进行差分以保证平稳性( </span><strong><span>Integration</span></strong><span> ）。</span></li></ul><h5 id='arma和arima模型'><span>ARMA和ARIMA模型</span></h5><ul><li><span>p阶自回归：</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="52.146ex" height="2.347ex" role="img" focusable="false" viewBox="0 -750 23048.6 1037.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.65ex;"><defs><path id="MJX-31-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-31-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJX-31-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-31-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-31-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-31-TEX-N-3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-31-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-31-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-31-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-31-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-31-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-31-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-31-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-31-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-31-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-31-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-31-TEX-I-1D700" d="M190 -22Q124 -22 76 11T27 107Q27 174 97 232L107 239L99 248Q76 273 76 304Q76 364 144 408T290 452H302Q360 452 405 421Q428 405 428 392Q428 381 417 369T391 356Q382 356 371 365T338 383T283 392Q217 392 167 368T116 308Q116 289 133 272Q142 263 145 262T157 264Q188 278 238 278H243Q308 278 308 247Q308 206 223 206Q177 206 142 219L132 212Q68 169 68 112Q68 39 201 39Q253 39 286 49T328 72T345 94T362 105Q376 103 376 88Q376 79 365 62T334 26T275 -8T190 -22Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D434" xlink:href="#MJX-31-TEX-I-1D434"></use></g><g data-mml-node="mi" transform="translate(750,0)"><use data-c="1D445" xlink:href="#MJX-31-TEX-I-1D445"></use></g><g data-mml-node="mo" transform="translate(1509,0)"><use data-c="28" xlink:href="#MJX-31-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(1898,0)"><use data-c="1D45D" xlink:href="#MJX-31-TEX-I-1D45D"></use></g><g data-mml-node="mo" transform="translate(2401,0)"><use data-c="29" xlink:href="#MJX-31-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3067.8,0)"><use data-c="3A" xlink:href="#MJX-31-TEX-N-3A"></use></g><g data-mml-node="msub" transform="translate(3623.6,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-31-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-31-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(4820.6,0)"><use data-c="3D" xlink:href="#MJX-31-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(5876.4,0)"><use data-c="1D707" xlink:href="#MJX-31-TEX-I-1D707"></use></g><g data-mml-node="mo" transform="translate(6701.6,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(7701.8,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-31-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(8704.4,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-31-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-31-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-31-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(10749.5,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(11749.8,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-31-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-31-TEX-N-32"></use></g></g><g data-mml-node="msub" transform="translate(12752.3,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-31-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-31-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-31-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="32" xlink:href="#MJX-31-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(14797.5,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(15797.7,0)"><use data-c="22EF" xlink:href="#MJX-31-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(17191.9,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(18192.2,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-31-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-31-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(19196.8,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-31-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-31-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-31-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D45D" xlink:href="#MJX-31-TEX-I-1D45D"></use></g></g></g><g data-mml-node="mo" transform="translate(21244.1,0)"><use data-c="2B" xlink:href="#MJX-31-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(22244.3,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-31-TEX-I-1D700"></use></g><g data-mml-node="mi" transform="translate(499,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-31-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mi>R</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>μ</mi><mo>+</mo><msub><mi>β</mi><mn>1</mn></msub><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>β</mi><mi>p</mi></msub><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>p</mi></mrow></msub><mo>+</mo><msub><mi>ε</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">AR(p):Y_t = \mu + \beta_1Y_{t-1}+\beta_2Y_{t-2}+\cdots+\beta_pY_{t-p}+\varepsilon_t</script><span> </span></li><li><span>q阶一段平均：</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="48.744ex" height="2.347ex" role="img" focusable="false" viewBox="0 -750 21545 1037.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.65ex;"><defs><path id="MJX-32-TEX-I-1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path><path id="MJX-32-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path><path id="MJX-32-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-32-TEX-I-1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-32-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-32-TEX-N-3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-32-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-32-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-32-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-32-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-32-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-32-TEX-I-1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"></path><path id="MJX-32-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-32-TEX-I-1D700" d="M190 -22Q124 -22 76 11T27 107Q27 174 97 232L107 239L99 248Q76 273 76 304Q76 364 144 408T290 452H302Q360 452 405 421Q428 405 428 392Q428 381 417 369T391 356Q382 356 371 365T338 383T283 392Q217 392 167 368T116 308Q116 289 133 272Q142 263 145 262T157 264Q188 278 238 278H243Q308 278 308 247Q308 206 223 206Q177 206 142 219L132 212Q68 169 68 112Q68 39 201 39Q253 39 286 49T328 72T345 94T362 105Q376 103 376 88Q376 79 365 62T334 26T275 -8T190 -22Z"></path><path id="MJX-32-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-32-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-32-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D440" xlink:href="#MJX-32-TEX-I-1D440"></use></g><g data-mml-node="mi" transform="translate(1051,0)"><use data-c="1D434" xlink:href="#MJX-32-TEX-I-1D434"></use></g><g data-mml-node="mo" transform="translate(1801,0)"><use data-c="28" xlink:href="#MJX-32-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(2190,0)"><use data-c="1D45E" xlink:href="#MJX-32-TEX-I-1D45E"></use></g><g data-mml-node="mo" transform="translate(2650,0)"><use data-c="29" xlink:href="#MJX-32-TEX-N-29"></use></g><g data-mml-node="mo" transform="translate(3316.8,0)"><use data-c="3A" xlink:href="#MJX-32-TEX-N-3A"></use></g><g data-mml-node="msub" transform="translate(3872.6,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-32-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-32-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(5069.6,0)"><use data-c="3D" xlink:href="#MJX-32-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(6125.4,0)"><use data-c="1D707" xlink:href="#MJX-32-TEX-I-1D707"></use></g><g data-mml-node="mo" transform="translate(6950.6,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(7950.8,0)"><g data-mml-node="mi"><use data-c="1D703" xlink:href="#MJX-32-TEX-I-1D703"></use></g><g data-mml-node="mn" transform="translate(502,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-32-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(8856.4,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-32-TEX-I-1D700"></use></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-32-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="31" xlink:href="#MJX-32-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(10786.5,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(11786.8,0)"><g data-mml-node="mi"><use data-c="1D703" xlink:href="#MJX-32-TEX-I-1D703"></use></g><g data-mml-node="mn" transform="translate(502,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-32-TEX-N-32"></use></g></g><g data-mml-node="msub" transform="translate(12692.3,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-32-TEX-I-1D700"></use></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-32-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="32" xlink:href="#MJX-32-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(14566.9,0)"><use data-c="22EF" xlink:href="#MJX-32-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(15961.2,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(16961.4,0)"><g data-mml-node="mi"><use data-c="1D703" xlink:href="#MJX-32-TEX-I-1D703"></use></g><g data-mml-node="mi" transform="translate(502,-150) scale(0.707)"><use data-c="1D45E" xlink:href="#MJX-32-TEX-I-1D45E"></use></g></g><g data-mml-node="msub" transform="translate(17838.6,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-32-TEX-I-1D700"></use></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-32-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D45E" xlink:href="#MJX-32-TEX-I-1D45E"></use></g></g></g><g data-mml-node="mo" transform="translate(19740.5,0)"><use data-c="2B" xlink:href="#MJX-32-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(20740.8,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-32-TEX-I-1D700"></use></g><g data-mml-node="mi" transform="translate(499,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-32-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi><mi>A</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>μ</mi><mo>−</mo><msub><mi>θ</mi><mn>1</mn></msub><msub><mi>ε</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>θ</mi><mn>2</mn></msub><msub><mi>ε</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>⋯</mo><mo>−</mo><msub><mi>θ</mi><mi>q</mi></msub><msub><mi>ε</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>q</mi></mrow></msub><mo>+</mo><msub><mi>ε</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">MA(q):Y_t = \mu - \theta_1\varepsilon_{t-1} - \theta_2\varepsilon_{t-2} \cdots - \theta_q\varepsilon_{t-q} + \varepsilon_t</script><span> </span></li><li><span>二者混合的ARMA(p,q)模型：</span></li></ul><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n3217" cid="n3217" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="72.885ex" height="2.245ex" role="img" focusable="false" viewBox="0 -705 32215 992.2" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.65ex;"><defs><path id="MJX-15-TEX-I-1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path><path id="MJX-15-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-15-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-15-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-15-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-15-TEX-I-1D6FD" d="M29 -194Q23 -188 23 -186Q23 -183 102 134T186 465Q208 533 243 584T309 658Q365 705 429 705H431Q493 705 533 667T573 570Q573 465 469 396L482 383Q533 332 533 252Q533 139 448 65T257 -10Q227 -10 203 -2T165 17T143 40T131 59T126 65L62 -188Q60 -194 42 -194H29ZM353 431Q392 431 427 419L432 422Q436 426 439 429T449 439T461 453T472 471T484 495T493 524T501 560Q503 569 503 593Q503 611 502 616Q487 667 426 667Q384 667 347 643T286 582T247 514T224 455Q219 439 186 308T152 168Q151 163 151 147Q151 99 173 68Q204 26 260 26Q302 26 349 51T425 137Q441 171 449 214T457 279Q457 337 422 372Q380 358 347 358H337Q258 358 258 389Q258 396 261 403Q275 431 353 431Z"></path><path id="MJX-15-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-15-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-15-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-15-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-15-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-15-TEX-I-1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"></path><path id="MJX-15-TEX-I-1D700" d="M190 -22Q124 -22 76 11T27 107Q27 174 97 232L107 239L99 248Q76 273 76 304Q76 364 144 408T290 452H302Q360 452 405 421Q428 405 428 392Q428 381 417 369T391 356Q382 356 371 365T338 383T283 392Q217 392 167 368T116 308Q116 289 133 272Q142 263 145 262T157 264Q188 278 238 278H243Q308 278 308 247Q308 206 223 206Q177 206 142 219L132 212Q68 169 68 112Q68 39 201 39Q253 39 286 49T328 72T345 94T362 105Q376 103 376 88Q376 79 365 62T334 26T275 -8T190 -22Z"></path><path id="MJX-15-TEX-I-1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-15-TEX-I-1D44C"></use></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g></g><g data-mml-node="mo" transform="translate(1197,0)"><use data-c="3D" xlink:href="#MJX-15-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(2252.8,0)"><use data-c="1D707" xlink:href="#MJX-15-TEX-I-1D707"></use></g><g data-mml-node="mo" transform="translate(3078,0)"><use data-c="2B" xlink:href="#MJX-15-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(4078.3,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-15-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-15-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(5080.8,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-15-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="31" xlink:href="#MJX-15-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(7126,0)"><use data-c="2B" xlink:href="#MJX-15-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(8126.2,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-15-TEX-I-1D6FD"></use></g><g data-mml-node="mn" transform="translate(599,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-15-TEX-N-32"></use></g></g><g data-mml-node="msub" transform="translate(9128.8,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-15-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="32" xlink:href="#MJX-15-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(11173.9,0)"><use data-c="2B" xlink:href="#MJX-15-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(12174.2,0)"><use data-c="22EF" xlink:href="#MJX-15-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(13568.4,0)"><use data-c="2B" xlink:href="#MJX-15-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(14568.6,0)"><g data-mml-node="mi"><use data-c="1D6FD" xlink:href="#MJX-15-TEX-I-1D6FD"></use></g><g data-mml-node="mi" transform="translate(599,-150) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-15-TEX-I-1D45D"></use></g></g><g data-mml-node="msub" transform="translate(15573.3,0)"><g data-mml-node="mi"><use data-c="1D44C" xlink:href="#MJX-15-TEX-I-1D44C"></use></g><g data-mml-node="TeXAtom" transform="translate(614,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D45D" xlink:href="#MJX-15-TEX-I-1D45D"></use></g></g></g><g data-mml-node="mo" transform="translate(17620.6,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(18620.8,0)"><g data-mml-node="mi"><use data-c="1D703" xlink:href="#MJX-15-TEX-I-1D703"></use></g><g data-mml-node="mn" transform="translate(502,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-15-TEX-N-31"></use></g></g><g data-mml-node="msub" transform="translate(19526.3,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-15-TEX-I-1D700"></use></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="31" xlink:href="#MJX-15-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(21456.5,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(22456.7,0)"><g data-mml-node="mi"><use data-c="1D703" xlink:href="#MJX-15-TEX-I-1D703"></use></g><g data-mml-node="mn" transform="translate(502,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-15-TEX-N-32"></use></g></g><g data-mml-node="msub" transform="translate(23362.3,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-15-TEX-I-1D700"></use></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1139,0)"><use data-c="32" xlink:href="#MJX-15-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(25236.9,0)"><use data-c="22EF" xlink:href="#MJX-15-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(26631.1,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(27631.3,0)"><g data-mml-node="mi"><use data-c="1D703" xlink:href="#MJX-15-TEX-I-1D703"></use></g><g data-mml-node="mi" transform="translate(502,-150) scale(0.707)"><use data-c="1D45E" xlink:href="#MJX-15-TEX-I-1D45E"></use></g></g><g data-mml-node="msub" transform="translate(28508.6,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-15-TEX-I-1D700"></use></g><g data-mml-node="TeXAtom" transform="translate(499,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(361,0)"><use data-c="2212" xlink:href="#MJX-15-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1139,0)"><use data-c="1D45E" xlink:href="#MJX-15-TEX-I-1D45E"></use></g></g></g><g data-mml-node="mo" transform="translate(30410.5,0)"><use data-c="2B" xlink:href="#MJX-15-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(31410.7,0)"><g data-mml-node="mi"><use data-c="1D700" xlink:href="#MJX-15-TEX-I-1D700"></use></g><g data-mml-node="mi" transform="translate(499,-150) scale(0.707)"><use data-c="1D461" xlink:href="#MJX-15-TEX-I-1D461"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Y</mi><mi>t</mi></msub><mo>=</mo><mi>μ</mi><mo>+</mo><msub><mi>β</mi><mn>1</mn></msub><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>β</mi><mi>p</mi></msub><msub><mi>Y</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>p</mi></mrow></msub><mo>−</mo><msub><mi>θ</mi><mn>1</mn></msub><msub><mi>ε</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>θ</mi><mn>2</mn></msub><msub><mi>ε</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>⋯</mo><mo>−</mo><msub><mi>θ</mi><mi>q</mi></msub><msub><mi>ε</mi><mrow data-mjx-texclass="ORD"><mi>t</mi><mo>−</mo><mi>q</mi></mrow></msub><mo>+</mo><msub><mi>ε</mi><mi>t</mi></msub></math></mjx-assistive-mml></mjx-container></div></div><ul><li><p><strong><span>ARIMA(p,d,q)</span></strong><span>模型意味着时序被差分了d次。</span></p></li><li><p><span>建立ARIMA模型的步骤包括：</span></p><ul><li><span>确保时序是平稳的</span></li><li><span>找到一个(或几个)合理的模型( 即选定可能的p值和值 )</span></li><li><span>拟合模型</span></li><li><span>从统计假设和预测准确性等角度评估模型</span></li><li><span>预测</span></li></ul></li><li><p><span>验证模型的</span><strong><span>平稳性</span></strong><span>：画出序列的折线图并判别其平稳性</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">forecast</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">tseries</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">Nile</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ndiffs</span>(<span class="cm-variable">Nile</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dNile</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">diff</span>(<span class="cm-variable">Nile</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">dNile</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># adf验证平稳性，显著表示平稳</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">adf.test</span>(<span class="cm-variable">dNile</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Augmented</span> <span class="cm-variable">Dickey</span><span class="cm-operator">-</span><span class="cm-variable">Fuller</span> <span class="cm-variable">Test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">dNile</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Dickey</span><span class="cm-operator">-</span><span class="cm-variable">Fuller</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">6.5924</span>, <span class="cm-variable">Lag</span> <span class="cm-variable">order</span> <span class="cm-operator">=</span> <span class="cm-number">4</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.01</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">alternative</span> <span class="cm-variable">hypothesis</span><span class="cm-operator">:</span> <span class="cm-variable">stationary</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 339px;"></div><div class="CodeMirror-gutters" style="display: none; height: 339px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第15章\第15章 016.png" referrerpolicy="no-referrer" alt="第15章 016"></th><th><img src="img\019_R语言实战\第15章\第15章 017.png" referrerpolicy="no-referrer" alt="第15章 017"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>ACF图和PACF图：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Acf</span>(<span class="cm-variable">dNile</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Pacf</span>(<span class="cm-variable">dNile</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第15章\第15章 018.png" referrerpolicy="no-referrer" alt="第15章 018"></th><th><img src="img\019_R语言实战\第15章\第15章 019.png" referrerpolicy="no-referrer" alt="第15章 019"></th></tr></thead><tbody></tbody></table></figure><p><img src="img\019_R语言实战\第15章\第15章 020.png" referrerpolicy="no-referrer" alt="第15章 020"></p><ul><li><p><span>考虑：ARIMA(0,1,1)</span></p></li><li><p><span>使用</span><strong><span>arima()</span></strong><span>拟合模型：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arima</span>(<span class="cm-variable">ts</span>,<span class="cm-variable">order</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-variable">q</span>,<span class="cm-variable">d</span>,<span class="cm-variable">q</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">forecast</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">arima</span>(<span class="cm-variable">Nile</span>,<span class="cm-variable">order</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">arima</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">Nile</span>, <span class="cm-variable">order</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ma1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.7329</span> <span class="cm-comment"># 移动平均项系数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">s.e.</span> &nbsp; <span class="cm-number">0.1143</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sigma</span><span class="cm-operator">^</span><span class="cm-number">2</span> <span class="cm-variable">estimated</span> <span class="cm-variable">as</span> <span class="cm-number">20600</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">log</span> <span class="cm-variable">likelihood</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">632.55</span>, &nbsp;<span class="cm-variable">aic</span> <span class="cm-operator">=</span> <span class="cm-number">1269.09</span> <span class="cm-comment"># AIC越小越好</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">accuracy</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">ME</span> &nbsp; &nbsp; <span class="cm-variable">RMSE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">MAE</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">MPE</span> &nbsp; &nbsp; <span class="cm-variable">MAPE</span> &nbsp; &nbsp; <span class="cm-variable">MASE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ACF1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Training</span> <span class="cm-variable">set</span> <span class="cm-operator">-</span><span class="cm-number">11.9358</span> <span class="cm-number">142.8071</span> <span class="cm-number">112.1752</span> <span class="cm-operator">-</span><span class="cm-number">3.574702</span> <span class="cm-number">12.93594</span> <span class="cm-number">0.841824</span> <span class="cm-number">0.1153593</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><ul><li><span>模型评价：一个模型如果合适，那模型的残差应该满足均值为0的正态分布，并且对于任意的滞后阶数，残差自相关系数都应该为零。</span></li><li><strong><span>Box.test()</span></strong><span>函数可以检验残差的自相关系数是否都为零。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">qqnorm</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">residuals</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">qqline</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">residuals</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">Box.test</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">residuals</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Box</span><span class="cm-operator">-</span><span class="cm-variable">Pierce</span> <span class="cm-variable">test</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">residuals</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">X</span><span class="cm-operator">-</span><span class="cm-variable">squared</span> <span class="cm-operator">=</span> <span class="cm-number">1.3308</span>, <span class="cm-variable">df</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-variable">p</span><span class="cm-operator">-</span><span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-number">0.2487</span> <span class="cm-comment"># 残差没有显著性差异</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre><ul><li><span>预测：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测接下来3年</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>,<span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Point</span> <span class="cm-variable">Forecast</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">95</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">95</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1971</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">798.3673</span> <span class="cm-number">614.4307</span> <span class="cm-number">982.3040</span> <span class="cm-number">517.0605</span> <span class="cm-number">1079.674</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1972</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">798.3673</span> <span class="cm-number">607.9845</span> <span class="cm-number">988.7502</span> <span class="cm-number">507.2019</span> <span class="cm-number">1089.533</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1973</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">798.3673</span> <span class="cm-number">601.7495</span> <span class="cm-number">994.9851</span> <span class="cm-number">497.6663</span> <span class="cm-number">1099.068</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>,<span class="cm-number">3</span>),<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"年"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"年流量"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第15章\第15章 021.png" alt="第15章 021" style="zoom: 67%;" /></p><ul><li><span>自动预测：使用</span><strong><span>auto.arima()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">auto.arima</span>(<span class="cm-variable">sunspots</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Series</span><span class="cm-operator">:</span> <span class="cm-variable">sunspots</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ARIMA</span>(<span class="cm-number">2</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">ar1</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ar2</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ma1</span> &nbsp; &nbsp; <span class="cm-variable">ma2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">1.3467</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.3963</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.7710</span> &nbsp;<span class="cm-number">0.8103</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">s.e.</span> &nbsp;<span class="cm-number">0.0303</span> &nbsp; <span class="cm-number">0.0287</span> &nbsp; <span class="cm-number">0.0205</span> &nbsp;<span class="cm-number">0.0194</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sigma</span><span class="cm-operator">^</span><span class="cm-number">2</span> <span class="cm-operator">=</span> <span class="cm-number">243.8</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">log</span> <span class="cm-variable">likelihood</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">11745.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">23500.99</span> &nbsp; <span class="cm-variable">AICc</span><span class="cm-operator">=</span><span class="cm-number">23501.01</span> &nbsp; <span class="cm-variable">BIC</span><span class="cm-operator">=</span><span class="cm-number">23530.71</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">forecast</span>(<span class="cm-variable">fit</span>,<span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Point</span> <span class="cm-variable">Forecast</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-variable">Lo</span> <span class="cm-number">95</span> &nbsp; &nbsp;<span class="cm-variable">Hi</span> <span class="cm-number">95</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Jan</span> <span class="cm-number">1984</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">40.43784</span> <span class="cm-number">20.42717</span> <span class="cm-number">60.44850</span> <span class="cm-number">9.834167</span> <span class="cm-number">71.04150</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Feb</span> <span class="cm-number">1984</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">41.35311</span> <span class="cm-number">18.26341</span> <span class="cm-number">64.44281</span> <span class="cm-number">6.040458</span> <span class="cm-number">76.66576</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Mar</span> <span class="cm-number">1984</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">39.79670</span> <span class="cm-number">15.23663</span> <span class="cm-number">64.35677</span> <span class="cm-number">2.235319</span> <span class="cm-number">77.35808</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">accuracy</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ME</span> &nbsp; &nbsp; <span class="cm-variable">RMSE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">MAE</span> <span class="cm-variable">MPE</span> <span class="cm-variable">MAPE</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">MASE</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ACF1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Training</span> <span class="cm-variable">set</span> <span class="cm-operator">-</span><span class="cm-number">0.02672716</span> <span class="cm-number">15.60055</span> <span class="cm-number">11.02575</span> <span class="cm-atom">NaN</span> &nbsp;<span class="cm-atom">Inf</span> <span class="cm-number">0.4775401</span> <span class="cm-operator">-</span><span class="cm-number">0.01055012</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><h3 id='第16章-聚类分析'><span>第16章 聚类分析</span></h3><ul><li><strong><span>聚类分析</span></strong><span>是一种数据归约技术，旨在揭露一个数据集中观测值的子集。它可以把大量的观测值归约为若干个类。这里的类被定义为若干个观测值组成的群组，群组内观测值的相似度比群间相似度高。</span></li><li><span>最常用的两种聚类方法是</span><strong><span>层次聚类</span></strong><span> ( hierarchical agglomerative clustering ) 和</span><strong><span>划分聚类</span></strong><span>(partitioning clustering )。在层次聚类中，每一个观测值自成一类，这些类每次两两合并，直到所有的类被聚成一类为止。在划分聚类中，首先指定类的个数K，然后观测值被随机分成K类，再重新形成聚合的类。</span></li><li><span>对于层次聚类来说，最常用的算法是单联动( single linkage )、全联动 (complete linkage )、平均联动 (average linkage )、质心 ( centroid ) 和Ward方法。对于划分聚类来说，最常用的算法是K均值(K-means )和围绕中心点的划分(PAM)。</span></li><li><span>数据集：</span><strong><span>flexclust</span></strong><span>包中的</span><strong><span>nutrient</span></strong><span>(营养数据集)和</span><strong><span>rattle</span></strong><span>包中的</span><strong><span>wine</span></strong><span>(178种意大利葡萄酒样品的13种化学成分)</span></li></ul><h4 id='聚类分析的一般步骤'><span>聚类分析的一般步骤</span></h4><ol start='' ><li><p><span>选择合适的变量</span></p></li><li><p><span>缩放数据</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">apply</span>(<span class="cm-variable">mydata</span>, <span class="cm-number">2</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>){(<span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-variable">mean</span>(<span class="cm-variable">x</span>))<span class="cm-operator">/</span><span class="cm-variable">sd</span>(<span class="cm-variable">x</span>)})</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">apply</span>(<span class="cm-variable">mydata</span>, <span class="cm-number">2</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>){<span class="cm-variable">x</span><span class="cm-operator">/</span><span class="cm-variable">max</span>(<span class="cm-variable">x</span>)})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">apply</span>(<span class="cm-variable">mydata</span>, <span class="cm-number">2</span>, <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>){(<span class="cm-variable">x</span> <span class="cm-operator">-</span> <span class="cm-variable">mean</span>(<span class="cm-variable">x</span>))<span class="cm-operator">/</span><span class="cm-variable">mad</span>(<span class="cm-variable">x</span>)}) <span class="cm-comment"># mad(x)平均绝对偏差</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>寻找异常值点，可以使用</span><strong><span>outliers</span></strong><span>包或</span><strong><span>mvoutlier</span></strong><span>包</span></p></li><li><p><span>计算距离，两个观测值之间最常用的距离量度是欧几里得距离，其他可选的量度包括曼哈顿距离、兰氏距离、非对称二元距离、最大距离和闵可夫斯基距离。</span></p></li><li><p><span>选择聚类算法，层次聚类对于小样本来说，划分的方法能处理更大的数据量。</span></p></li><li><p><span>确定类的数目，可以使用</span><strong><span>NbClust</span></strong><span>包的</span><strong><span>NbClust()</span></strong><span>帮助选择</span></p></li><li><p><span>获得最终的聚类解决方案</span></p></li><li><p><span>结果可视化</span></p></li><li><p><span>解读类</span></p></li><li><p><span>验证结果，</span><strong><span>fpc</span></strong><span>、</span><strong><span>clv</span></strong><span>和</span><strong><span>clValid</span></strong><span>包包含了评估聚类解的稳定性的函数。</span></p></li></ol><h4 id='计算距离'><span>计算距离</span></h4><ul><li><p><span>欧氏距离：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n3309" cid="n3309" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="23.705ex" height="8.281ex" role="img" focusable="false" viewBox="0 -2118.1 10477.5 3660" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -3.489ex;"><defs><path id="MJX-16-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-16-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-16-TEX-I-1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"></path><path id="MJX-16-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-16-TEX-S4-E001" d="M702 589Q706 601 718 605H1061Q1076 597 1076 585Q1076 572 1061 565H742V0Q734 -14 724 -14H722H720Q708 -14 702 0V589Z"></path><path id="MJX-16-TEX-S4-23B7" d="M742 -871Q740 -873 737 -876T733 -880T730 -882T724 -884T714 -885H702L222 569L180 484Q138 399 137 399Q131 404 124 412L111 425L265 736L702 -586V168L703 922Q713 935 722 935Q734 935 742 920V-871Z"></path><path id="MJX-16-TEX-S4-E000" d="M722 -14H720Q708 -14 702 0V306L703 612Q713 625 722 625Q734 625 742 610V0Q734 -14 724 -14H722Z"></path><path id="MJX-16-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-16-TEX-I-1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path id="MJX-16-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-16-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-16-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-16-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-16-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-16-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-16-TEX-I-1D451"></use></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-16-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(345,0)"><use data-c="1D457" xlink:href="#MJX-16-TEX-I-1D457"></use></g></g></g><g data-mml-node="mo" transform="translate(1416.1,0)"><use data-c="3D" xlink:href="#MJX-16-TEX-N-3D"></use></g><g data-mml-node="msqrt" transform="translate(2471.8,0)"><g transform="translate(1056,0)"><g data-mml-node="munderover"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-16-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(92.3,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45D" xlink:href="#MJX-16-TEX-I-1D45D"></use></g><g data-mml-node="mo" transform="translate(503,0)"><use data-c="3D" xlink:href="#MJX-16-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1281,0)"><use data-c="31" xlink:href="#MJX-16-TEX-N-31"></use></g></g><g data-mml-node="mi" transform="translate(544.2,1198.2) scale(0.707)"><use data-c="1D45D" xlink:href="#MJX-16-TEX-I-1D45D"></use></g></g><g data-mml-node="mo" transform="translate(1444,0)"><use data-c="28" xlink:href="#MJX-16-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(1833,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-16-TEX-I-1D44B"></use></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-16-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(345,0)"><use data-c="1D45D" xlink:href="#MJX-16-TEX-I-1D45D"></use></g></g></g><g data-mml-node="mo" transform="translate(3565.8,0)"><use data-c="2212" xlink:href="#MJX-16-TEX-N-2212"></use></g><g data-mml-node="msub" transform="translate(4566.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-16-TEX-I-1D44B"></use></g><g data-mml-node="TeXAtom" transform="translate(861,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D457" xlink:href="#MJX-16-TEX-I-1D457"></use></g><g data-mml-node="mi" transform="translate(412,0)"><use data-c="1D45D" xlink:href="#MJX-16-TEX-I-1D45D"></use></g></g></g><g data-mml-node="msup" transform="translate(6124.1,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-16-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-16-TEX-N-32"></use></g></g></g><g data-mml-node="mo" transform="translate(0,-491.9)"><use data-c="E001" xlink:href="#MJX-16-TEX-S4-E001" transform="translate(0,1945)"></use><use data-c="23B7" xlink:href="#MJX-16-TEX-S4-23B7" transform="translate(0,-165)"></use><svg width="1056" height="1361" y="670" x="0" viewBox="0 295.5 1056 1361"><use data-c="E000" xlink:href="#MJX-16-TEX-S4-E000" transform="scale(1,3.195)"></use></svg></g><rect width="6949.6" height="60" x="1056" y="1998.1"></rect></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>d</mi><mrow data-mjx-texclass="ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msqrt><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>p</mi><mo>=</mo><mn>1</mn></mrow><mi>p</mi></munderover><mo stretchy="false">(</mo><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mi>i</mi><mi>p</mi></mrow></msub><mo>−</mo><msub><mi>X</mi><mrow data-mjx-texclass="ORD"><mi>j</mi><mi>p</mi></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></msqrt></math></mjx-assistive-mml></mjx-container></div></div></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># nutrient 数据集</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span>(<span class="cm-variable">nutrient</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"flexclust"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">nutrient</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">energy</span> <span class="cm-variable">protein</span> <span class="cm-variable">fat</span> <span class="cm-variable">calcium</span> <span class="cm-variable">iron</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">BRAISED</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">340</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">20</span> &nbsp;<span class="cm-number">28</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">9</span> &nbsp;<span class="cm-number">2.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HAMBURGER</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">245</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">21</span> &nbsp;<span class="cm-number">17</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">9</span> &nbsp;<span class="cm-number">2.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">ROAST</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">420</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">15</span> &nbsp;<span class="cm-number">39</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">7</span> &nbsp;<span class="cm-number">2.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">STEAK</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">375</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">19</span> &nbsp;<span class="cm-number">32</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">9</span> &nbsp;<span class="cm-number">2.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">CANNED</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">180</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">22</span> &nbsp;<span class="cm-number">10</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">17</span> &nbsp;<span class="cm-number">3.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CHICKEN</span> <span class="cm-variable">BROILED</span> &nbsp; &nbsp;<span class="cm-number">115</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">20</span> &nbsp; <span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">8</span> &nbsp;<span class="cm-number">1.4</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><ul><li><p><span>可以使用</span><strong><span>dist()</span></strong><span>计算距离，默认为欧氏距离，返回一个下三角</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dist</span>(<span class="cm-variable">x</span>, <span class="cm-variable">method</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">as.matrix</span>(<span class="cm-variable">dist</span>(<span class="cm-variable">nutrient</span>))[<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>,<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">4</span>]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">BEEF</span> <span class="cm-variable">BRAISED</span> <span class="cm-variable">HAMBURGER</span> <span class="cm-variable">BEEF</span> <span class="cm-variable">ROAST</span> <span class="cm-variable">BEEF</span> <span class="cm-variable">STEAK</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">BRAISED</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.00000</span> &nbsp; <span class="cm-number">95.6400</span> &nbsp; <span class="cm-number">80.93429</span> &nbsp; <span class="cm-number">35.24202</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HAMBURGER</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">95.64000</span> &nbsp; &nbsp;<span class="cm-number">0.0000</span> &nbsp;<span class="cm-number">176.49218</span> &nbsp;<span class="cm-number">130.87784</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">ROAST</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">80.93429</span> &nbsp;<span class="cm-number">176.4922</span> &nbsp; &nbsp;<span class="cm-number">0.00000</span> &nbsp; <span class="cm-number">45.76418</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BEEF</span> <span class="cm-variable">STEAK</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">35.24202</span> &nbsp;<span class="cm-number">130.8778</span> &nbsp; <span class="cm-number">45.76418</span> &nbsp; &nbsp;<span class="cm-number">0.00000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>欧几里得距离通常作为</span><strong><span>连续型</span></strong><span>数据的距离度量。但是如果存在其他类型的数据，则需要相异的替代措施，你可以使用</span><strong><span>cluster</span></strong><span>包中的daisy()函数来获得包含任意二元(binary )、名义nominal)、有序(ordinal)、连续( continuous)属性组合的相异矩阵。cluster包中的其他函数可以使用这些异质性来进行聚类分析。例如agnes ()函数提供了层次聚类，pam()函数提供了围绕中心点的划分的方法。</span></li></ul><h4 id='层次聚类'><span>层次聚类</span></h4><ol start='' ><li><span>定义每个观测值(行或单元)为一类</span></li><li><span>计算每类和其他各类的距离</span></li><li><span>把距离最短的两类合并成一类，这样类的个数就减少一个</span></li><li><span>重复步骤(2)和步骤(3)，直到包含所有观测值的类合并成单个的类为止</span></li></ol><p><img src="img\019_R语言实战\第16章\第16章 001.png" referrerpolicy="no-referrer" alt="第16章 001"></p><ul><li><p><span>可以使用</span><strong><span>hclust()</span></strong><span>函数。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hclust</span>(<span class="cm-variable">d</span>, <span class="cm-variable">method</span><span class="cm-operator">=</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>d为dist()产生的，包括&quot;single&quot;、&quot;complete&quot;、&quot;average&quot;、 &quot;centroid&quot;和&quot;ward&quot;。</span></p></li><li><p><span>平均联动聚类：</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span>(<span class="cm-variable">nutrient</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"flexclust"</span>) </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将名字全部转为小写</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">row.names</span>(<span class="cm-variable">nutrient</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tolower</span>(<span class="cm-variable">row.names</span>(<span class="cm-variable">nutrient</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nutrient.scale</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">scale</span>(<span class="cm-variable">nutrient</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">d</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">dist</span>(<span class="cm-variable">nutrient.scale</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit.avg</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">hclust</span>(<span class="cm-variable">d</span>,<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"average"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># hang设置标签的对其方式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">fit.avg</span>, <span class="cm-variable">hang</span><span class="cm-operator">=-</span><span class="cm-number">1</span>, <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">.8</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"平均"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第16章\第16章 002.png" alt="第16章 002" style="zoom:67%;" /></p><ul><li><span>NbClust包提供了众多的指数来确定在一个聚类分析里类的最佳数目。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 选择聚类个数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">NbClust</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 绘图的时候，询问是否回车后绘图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># devAskNewPage(ask = TRUE)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">nc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">NbClust</span>(<span class="cm-variable">nutrient.scale</span>,<span class="cm-variable">distance</span> <span class="cm-operator">=</span> <span class="cm-string">"euclidean"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">min.nc</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">max.nc</span><span class="cm-operator">=</span><span class="cm-number">15</span>, <span class="cm-variable">method</span><span class="cm-operator">=</span><span class="cm-string">"average"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">.......</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">nc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Best.n</span>[<span class="cm-number">1</span>,]) <span class="cm-comment"># 聚类个数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">0</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">9</span> <span class="cm-number">10</span> <span class="cm-number">13</span> <span class="cm-number">14</span> <span class="cm-number">15</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">4</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">barplot</span>(<span class="cm-variable">table</span>(<span class="cm-variable">nc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Best.n</span>[<span class="cm-number">1</span>,]),<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"聚类数目"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"标准数量"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"根据26个标准选择的集群数量"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><p><img src="img\019_R语言实战\第16章\第16章 003.png" alt="第16章 003" style="zoom: 67%;" /></p><ul><li><span>由上图可知，可以分为2、3、5、15类。</span></li><li><span>分为5类的方案：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 分为5类</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取各个元素的分类标签</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">clusters</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cutree</span>(<span class="cm-variable">fit.avg</span>,<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">clusters</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">beef</span> <span class="cm-variable">braised</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">hamburger</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">beef</span> <span class="cm-variable">roast</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">beef</span> <span class="cm-variable">steak</span> &nbsp; &nbsp; <span class="cm-variable">beef</span> <span class="cm-variable">canned</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">chicken</span> <span class="cm-variable">broiled</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 各个分类都有多少个元素</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">clusters</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">clusters</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">5</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">7</span> <span class="cm-number">16</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取各个分类的中位数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">nutrient</span>,<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">cluster</span> <span class="cm-operator">=</span> <span class="cm-variable">clusters</span>),<span class="cm-variable">median</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cluster</span> <span class="cm-variable">energy</span> <span class="cm-variable">protein</span> <span class="cm-variable">fat</span> <span class="cm-variable">calcium</span> <span class="cm-variable">iron</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">340.0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">19</span> &nbsp;<span class="cm-number">29</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">9</span> <span class="cm-number">2.50</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> &nbsp;<span class="cm-number">170.0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">20</span> &nbsp; <span class="cm-number">8</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">13</span> <span class="cm-number">1.45</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> &nbsp;<span class="cm-number">160.0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">26</span> &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">14</span> <span class="cm-number">5.90</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; <span class="cm-number">57.5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">9</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">78</span> <span class="cm-number">5.70</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">5</span> &nbsp;<span class="cm-number">180.0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">22</span> &nbsp; <span class="cm-number">9</span> &nbsp; &nbsp; <span class="cm-number">367</span> <span class="cm-number">2.50</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 标准化的分类的中位数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">as.data.frame</span>(<span class="cm-variable">nutrient.scale</span>),<span class="cm-variable">by</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">cluster</span> <span class="cm-operator">=</span> <span class="cm-variable">clusters</span>),<span class="cm-variable">median</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cluster</span> &nbsp; &nbsp; <span class="cm-variable">energy</span> &nbsp; &nbsp;<span class="cm-variable">protein</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">fat</span> &nbsp; &nbsp;<span class="cm-variable">calcium</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">iron</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">1.3101024</span> &nbsp;<span class="cm-number">0.0000000</span> &nbsp;<span class="cm-number">1.3785620</span> <span class="cm-operator">-</span><span class="cm-number">0.4480464</span> &nbsp;<span class="cm-number">0.08110456</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-operator">-</span><span class="cm-number">0.3696099</span> &nbsp;<span class="cm-number">0.2352002</span> <span class="cm-operator">-</span><span class="cm-number">0.4869384</span> <span class="cm-operator">-</span><span class="cm-number">0.3967868</span> <span class="cm-operator">-</span><span class="cm-number">0.63743114</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> <span class="cm-operator">-</span><span class="cm-number">0.4684165</span> &nbsp;<span class="cm-number">1.6464016</span> <span class="cm-operator">-</span><span class="cm-number">0.7534384</span> <span class="cm-operator">-</span><span class="cm-number">0.3839719</span> &nbsp;<span class="cm-number">2.40779157</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">4</span> <span class="cm-operator">-</span><span class="cm-number">1.4811842</span> <span class="cm-operator">-</span><span class="cm-number">2.3520023</span> <span class="cm-operator">-</span><span class="cm-number">1.1087718</span> &nbsp;<span class="cm-number">0.4361807</span> &nbsp;<span class="cm-number">2.27092763</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">5</span> <span class="cm-operator">-</span><span class="cm-number">0.2708033</span> &nbsp;<span class="cm-number">0.7056007</span> <span class="cm-operator">-</span><span class="cm-number">0.3981050</span> &nbsp;<span class="cm-number">4.1396825</span> &nbsp;<span class="cm-number">0.08110456</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">fit.avg</span>,<span class="cm-variable">hang</span> <span class="cm-operator">=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">cex</span> <span class="cm-operator">=</span> <span class="cm-number">0.8</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"5个分类的结果"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 绘制矩形框</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">rect.hclust</span>(<span class="cm-variable">fit.avg</span>,<span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 832px;"></div><div class="CodeMirror-gutters" style="display: none; height: 832px;"></div></div></div></pre><p><img src="img\019_R语言实战\第16章\第16章 004.png" alt="第16章 004" style="zoom: 67%;" /></p><h4 id='划分聚类分析'><span>划分聚类分析</span></h4><ul><li><span>K均值和基于中心点的划分(PAM)。</span></li></ul><h5 id='k均值'><span>K均值</span></h5><ol start='' ><li><span>选择K个中心点(随机选择K行)</span></li><li><span>把每个数据点分配到离它最近的中心点</span></li><li><span>重新计算每类中的点到该类中心点距离的平均值</span></li><li><span>分配每个数据到它最近的中心点</span></li><li><span>重复步骤3和步骤4直到所有的观测值不再被分配或是达到最大的迭代次数（R默认为10次）</span></li></ol><ul><li><p><span>K均值的函数：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kmeans</span>(<span class="cm-variable">x</span>,<span class="cm-variable">centers</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>x</span></strong><span>表示数值数据集(矩阵或数据框)，</span><strong><span>centers</span></strong><span>是要提取的聚类数目。函数返回类的成员、类中心、平方和(类内平方和、类间平方和、总平方和 ) 和类大小。</span></p><p><span>kmeans()函数有一个</span><strong><span>nstart</span></strong><span>选项尝试多种初始配置并输出最好的一个。例如，加上</span><strong><span>nstart=25</span></strong><span>会生成25个初始配置。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wssplot</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">data</span>, <span class="cm-variable">nc</span><span class="cm-operator">=</span><span class="cm-number">15</span>, <span class="cm-variable">seed</span><span class="cm-operator">=</span><span class="cm-number">1234</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">wss</span> <span class="cm-operator cm-arrow">&lt;-</span> (<span class="cm-variable">nrow</span>(<span class="cm-variable">data</span>)<span class="cm-operator">-</span><span class="cm-number">1</span>)<span class="cm-operator">*</span><span class="cm-variable">sum</span>(<span class="cm-variable">apply</span>(<span class="cm-variable">data</span>,<span class="cm-number">2</span>,<span class="cm-variable">var</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">2</span><span class="cm-operator">:</span><span class="cm-variable">nc</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">set.seed</span>(<span class="cm-variable">seed</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">wss</span>[<span class="cm-variable">i</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sum</span>(<span class="cm-variable">kmeans</span>(<span class="cm-variable">data</span>, <span class="cm-variable">centers</span><span class="cm-operator">=</span><span class="cm-variable">i</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">withinss</span>)} <span class="cm-comment"># 越小越好</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">plot</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nc</span>, <span class="cm-variable">wss</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"b"</span>, <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Number of Clusters"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Within groups sum of squares"</span>)}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>data参数是用来分析的数值数据，nc是要考虑的最大聚类个数，而seed是一个随机数种子。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span>(<span class="cm-variable">wine</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"rattle"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Warning</span> <span class="cm-variable">message</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">In</span> <span class="cm-variable">doTryCatch</span>(<span class="cm-builtin">return</span>(<span class="cm-variable">expr</span>), <span class="cm-variable">name</span>, <span class="cm-variable">parentenv</span>, <span class="cm-variable">handler</span>) <span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">display</span> <span class="cm-builtin">list</span> <span class="cm-variable">redraw</span> <span class="cm-variable">incomplete</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">wine</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Type</span> <span class="cm-variable">Alcohol</span> <span class="cm-variable">Malic</span> &nbsp;<span class="cm-variable">Ash</span> <span class="cm-variable">Alcalinity</span> <span class="cm-variable">Magnesium</span> <span class="cm-variable">Phenols</span> <span class="cm-variable">Flavanoids</span> <span class="cm-variable">Nonflavanoids</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">14.23</span> &nbsp;<span class="cm-number">1.71</span> <span class="cm-number">2.43</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">15.6</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">127</span> &nbsp; &nbsp;<span class="cm-number">2.80</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3.06</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.28</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">13.20</span> &nbsp;<span class="cm-number">1.78</span> <span class="cm-number">2.14</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">11.2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">100</span> &nbsp; &nbsp;<span class="cm-number">2.65</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2.76</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.26</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">13.16</span> &nbsp;<span class="cm-number">2.36</span> <span class="cm-number">2.67</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">18.6</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">101</span> &nbsp; &nbsp;<span class="cm-number">2.80</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3.24</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">14.37</span> &nbsp;<span class="cm-number">1.95</span> <span class="cm-number">2.50</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">16.8</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">113</span> &nbsp; &nbsp;<span class="cm-number">3.85</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3.49</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.24</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">13.24</span> &nbsp;<span class="cm-number">2.59</span> <span class="cm-number">2.87</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">21.0</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">118</span> &nbsp; &nbsp;<span class="cm-number">2.80</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2.69</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.39</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">14.20</span> &nbsp;<span class="cm-number">1.76</span> <span class="cm-number">2.45</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">15.2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">112</span> &nbsp; &nbsp;<span class="cm-number">3.27</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3.39</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.34</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Proanthocyanins</span> <span class="cm-variable">Color</span> &nbsp;<span class="cm-variable">Hue</span> <span class="cm-variable">Dilution</span> <span class="cm-variable">Proline</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2.29</span> &nbsp;<span class="cm-number">5.64</span> <span class="cm-number">1.04</span> &nbsp; &nbsp; <span class="cm-number">3.92</span> &nbsp; &nbsp;<span class="cm-number">1065</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.28</span> &nbsp;<span class="cm-number">4.38</span> <span class="cm-number">1.05</span> &nbsp; &nbsp; <span class="cm-number">3.40</span> &nbsp; &nbsp;<span class="cm-number">1050</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2.81</span> &nbsp;<span class="cm-number">5.68</span> <span class="cm-number">1.03</span> &nbsp; &nbsp; <span class="cm-number">3.17</span> &nbsp; &nbsp;<span class="cm-number">1185</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">2.18</span> &nbsp;<span class="cm-number">7.80</span> <span class="cm-number">0.86</span> &nbsp; &nbsp; <span class="cm-number">3.45</span> &nbsp; &nbsp;<span class="cm-number">1480</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.82</span> &nbsp;<span class="cm-number">4.32</span> <span class="cm-number">1.04</span> &nbsp; &nbsp; <span class="cm-number">2.93</span> &nbsp; &nbsp; <span class="cm-number">735</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.97</span> &nbsp;<span class="cm-number">6.75</span> <span class="cm-number">1.05</span> &nbsp; &nbsp; <span class="cm-number">2.85</span> &nbsp; &nbsp;<span class="cm-number">1450</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">scale</span>(<span class="cm-variable">wine</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">wssplot</span>(<span class="cm-variable">df</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">NbClust</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">nc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">NbClust</span>(<span class="cm-variable">df</span>, <span class="cm-variable">min.nc</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">max.nc</span><span class="cm-operator">=</span><span class="cm-number">15</span>, <span class="cm-variable">method</span><span class="cm-operator">=</span><span class="cm-string">"kmeans"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">nc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Best.n</span>[<span class="cm-number">1</span>,])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">0</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span> <span class="cm-number">14</span> <span class="cm-number">15</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-number">2</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> <span class="cm-number">19</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">1</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">barplot</span>(<span class="cm-variable">table</span>(<span class="cm-variable">nc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Best.n</span>[<span class="cm-number">1</span>,]),<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"聚类的数量"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"标准数量"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"根据26个标准选择的聚类数量"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 三个分类</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.km</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">kmeans</span>(<span class="cm-variable">df</span>,<span class="cm-number">3</span>,<span class="cm-variable">nstart</span> <span class="cm-operator">=</span> <span class="cm-number">25</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 聚类中心的坐标(每个变量都分为三个类)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.km</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">centers</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Alcohol</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Malic</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Ash</span> <span class="cm-variable">Alcalinity</span> &nbsp; <span class="cm-variable">Magnesium</span> &nbsp; &nbsp; <span class="cm-variable">Phenols</span> &nbsp;<span class="cm-variable">Flavanoids</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">0.8328826</span> <span class="cm-operator">-</span><span class="cm-number">0.3029551</span> &nbsp;<span class="cm-number">0.3636801</span> <span class="cm-operator">-</span><span class="cm-number">0.6084749</span> &nbsp;<span class="cm-number">0.57596208</span> &nbsp;<span class="cm-number">0.88274724</span> &nbsp;<span class="cm-number">0.97506900</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-operator">-</span><span class="cm-number">0.9234669</span> <span class="cm-operator">-</span><span class="cm-number">0.3929331</span> <span class="cm-operator">-</span><span class="cm-number">0.4931257</span> &nbsp;<span class="cm-number">0.1701220</span> <span class="cm-operator">-</span><span class="cm-number">0.49032869</span> <span class="cm-operator">-</span><span class="cm-number">0.07576891</span> &nbsp;<span class="cm-number">0.02075402</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-number">0.1644436</span> &nbsp;<span class="cm-number">0.8690954</span> &nbsp;<span class="cm-number">0.1863726</span> &nbsp;<span class="cm-number">0.5228924</span> <span class="cm-operator">-</span><span class="cm-number">0.07526047</span> <span class="cm-operator">-</span><span class="cm-number">0.97657548</span> <span class="cm-operator">-</span><span class="cm-number">1.21182921</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Nonflavanoids</span> <span class="cm-variable">Proanthocyanins</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Color</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Hue</span> &nbsp; <span class="cm-variable">Dilution</span> &nbsp; &nbsp;<span class="cm-variable">Proline</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.56050853</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.57865427</span> &nbsp;<span class="cm-number">0.1705823</span> &nbsp;<span class="cm-number">0.4726504</span> &nbsp;<span class="cm-number">0.7770551</span> &nbsp;<span class="cm-number">1.1220202</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.03343924</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.05810161</span> <span class="cm-operator">-</span><span class="cm-number">0.8993770</span> &nbsp;<span class="cm-number">0.4605046</span> &nbsp;<span class="cm-number">0.2700025</span> <span class="cm-operator">-</span><span class="cm-number">0.7517257</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">0.72402116</span> &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-number">0.77751312</span> &nbsp;<span class="cm-number">0.9388902</span> <span class="cm-operator">-</span><span class="cm-number">1.1615122</span> <span class="cm-operator">-</span><span class="cm-number">1.2887761</span> <span class="cm-operator">-</span><span class="cm-number">0.4059428</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># fit.km$cluster：预测的类标号</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 求每个变量的各个类的均值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">aggregate</span>(<span class="cm-variable">wine</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>],<span class="cm-variable">by</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">cluster</span><span class="cm-operator">=</span><span class="cm-variable">fit.km</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cluster</span>),<span class="cm-variable">mean</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cluster</span> &nbsp;<span class="cm-variable">Alcohol</span> &nbsp; &nbsp;<span class="cm-variable">Malic</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Ash</span> <span class="cm-variable">Alcalinity</span> <span class="cm-variable">Magnesium</span> &nbsp;<span class="cm-variable">Phenols</span> <span class="cm-variable">Flavanoids</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> <span class="cm-number">13.67677</span> <span class="cm-number">1.997903</span> <span class="cm-number">2.466290</span> &nbsp; <span class="cm-number">17.46290</span> <span class="cm-number">107.96774</span> <span class="cm-number">2.847581</span> &nbsp;<span class="cm-number">3.0032258</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2</span> <span class="cm-number">12.25092</span> <span class="cm-number">1.897385</span> <span class="cm-number">2.231231</span> &nbsp; <span class="cm-number">20.06308</span> &nbsp;<span class="cm-number">92.73846</span> <span class="cm-number">2.247692</span> &nbsp;<span class="cm-number">2.0500000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">3</span> <span class="cm-number">13.13412</span> <span class="cm-number">3.307255</span> <span class="cm-number">2.417647</span> &nbsp; <span class="cm-number">21.24118</span> &nbsp;<span class="cm-number">98.66667</span> <span class="cm-number">1.683922</span> &nbsp;<span class="cm-number">0.8188235</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Nonflavanoids</span> <span class="cm-variable">Proanthocyanins</span> &nbsp; &nbsp;<span class="cm-variable">Color</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Hue</span> <span class="cm-variable">Dilution</span> &nbsp; <span class="cm-variable">Proline</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0.2920968</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.922097</span> <span class="cm-number">5.453548</span> <span class="cm-number">1.0654839</span> <span class="cm-number">3.163387</span> <span class="cm-number">1100.2258</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">0.3576923</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.624154</span> <span class="cm-number">2.973077</span> <span class="cm-number">1.0627077</span> <span class="cm-number">2.803385</span> &nbsp;<span class="cm-number">510.1692</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">0.4519608</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.145882</span> <span class="cm-number">7.234706</span> <span class="cm-number">0.6919608</span> <span class="cm-number">1.696667</span> &nbsp;<span class="cm-number">619.0588</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1404px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1404px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第16章\第16章 005.png" referrerpolicy="no-referrer" alt="第16章 005"></th><th><img src="img\019_R语言实战\第16章\第16章 006.png" referrerpolicy="no-referrer" alt="第16章 006"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>从一类到三类变化时，组内的平方总和有一个明显的下降趋势。三类之后，下降的速度减弱，暗示着聚成三类可能对数据来说是一个很好的拟合。</span></li><li><strong><span>Nbclust</span></strong><span>包中的24种指标中有15种以上建议使用类别数为三的聚类方案。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 交叉列联表（混淆矩阵）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ct.km</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">wine</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Type</span>,<span class="cm-variable">fit.km</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cluster</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ct.km</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1</span> <span class="cm-number">59</span> &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span> <span class="cm-number">65</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">0</span> <span class="cm-number">48</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>可以用</span><strong><span>flexclust</span></strong><span>包中的</span><strong><span>兰德指数</span></strong><span>( Rand index ) 来量化类型变量和类之间的协议：调整的兰德指数为两种划分提供了一种衡量两个分区之间的协定，即调整后机会的量度。它的变化范围是从-1(不同意)到1 (完全同意) 。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 兰德指数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">flexclust</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">randIndex</span>(<span class="cm-variable">ct.km</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">ARI</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.897495</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><h5 id='围绕中心的的划分'><span>围绕中心的的划分</span></h5><ul><li><span>因为K均值聚类方法是基于均值的，所以它对异常值是敏感的。一个更稳健的方法是围绕</span><strong><span>中心点的划分</span></strong><span>(</span><strong><span>PAM</span></strong><span>)。</span></li><li><span>PAM可以容纳混合数据类型，并且不仅限于连续变量。</span></li></ul><ol start='' ><li><span>随机选择K个观测值(每个都称为中心点)</span></li><li><span>计算观测值到各个中心的距离/相异性</span></li><li><span>把每个观测值分配到最近的中心点</span></li><li><span>计算每个中心点到每个观测值的距离的总和(总成本)</span></li><li><span>选择一个该类中不是中心的点，并和中心点互换</span></li><li><span>重新把每个点分配到距它最近的中心点</span></li><li><span>再次计算总成本</span></li><li><span>如果总成本比步骤4计算的总成本少，把新的点作为中心点</span></li><li><span>重复步骤5~8直到中心点不再改变</span></li></ol><ul><li><p><span>可以使用</span><strong><span>cluster</span></strong><span>包里的</span><strong><span>pam()</span></strong></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pam</span>(<span class="cm-variable">x</span>, <span class="cm-variable">k</span>,<span class="cm-variable">metric</span><span class="cm-operator">=</span><span class="cm-string">"euclidean"</span>, <span class="cm-variable">stand</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>x</span></strong><span>表示数据矩阵或数据框，</span><strong><span>k</span></strong><span>表示聚类的个数，</span><strong><span>metric</span></strong><span>表示使用的相似性/相异性的度量，</span><strong><span>stand</span></strong><span>是一个逻辑值，表示是否有变量应该在计算该指标之前被标准化。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">cluster</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.pam</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">pam</span>(<span class="cm-variable">wine</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>],<span class="cm-variable">k</span><span class="cm-operator">=</span><span class="cm-number">3</span>,<span class="cm-variable">stand</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 中心点</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.pam</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">medoids</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Alcohol</span> <span class="cm-variable">Malic</span> &nbsp;<span class="cm-variable">Ash</span> <span class="cm-variable">Alcalinity</span> <span class="cm-variable">Magnesium</span> <span class="cm-variable">Phenols</span> <span class="cm-variable">Flavanoids</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>,] &nbsp; <span class="cm-number">13.48</span> &nbsp;<span class="cm-number">1.81</span> <span class="cm-number">2.41</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">20.5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">100</span> &nbsp; &nbsp;<span class="cm-number">2.70</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2.98</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">2</span>,] &nbsp; <span class="cm-number">12.25</span> &nbsp;<span class="cm-number">1.73</span> <span class="cm-number">2.12</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">19.0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">80</span> &nbsp; &nbsp;<span class="cm-number">1.65</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">2.03</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">3</span>,] &nbsp; <span class="cm-number">13.40</span> &nbsp;<span class="cm-number">3.91</span> <span class="cm-number">2.48</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">23.0</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">102</span> &nbsp; &nbsp;<span class="cm-number">1.80</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.75</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Nonflavanoids</span> <span class="cm-variable">Proanthocyanins</span> <span class="cm-variable">Color</span> &nbsp;<span class="cm-variable">Hue</span> <span class="cm-variable">Dilution</span> <span class="cm-variable">Proline</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>,] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.26</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.86</span> &nbsp; <span class="cm-number">5.1</span> <span class="cm-number">1.04</span> &nbsp; &nbsp; <span class="cm-number">3.47</span> &nbsp; &nbsp; <span class="cm-number">920</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">2</span>,] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.37</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.63</span> &nbsp; <span class="cm-number">3.4</span> <span class="cm-number">1.00</span> &nbsp; &nbsp; <span class="cm-number">3.17</span> &nbsp; &nbsp; <span class="cm-number">510</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">3</span>,] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.43</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.41</span> &nbsp; <span class="cm-number">7.3</span> <span class="cm-number">0.70</span> &nbsp; &nbsp; <span class="cm-number">1.56</span> &nbsp; &nbsp; <span class="cm-number">750</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ct.pam</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">wine</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Type</span>, <span class="cm-variable">fit.pam</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">clustering</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ct.pam</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1</span> <span class="cm-number">59</span> &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">2</span> <span class="cm-number">16</span> <span class="cm-number">53</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">1</span> <span class="cm-number">47</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">randIndex</span>(<span class="cm-variable">ct.pam</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ARI</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.6994957</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><h4 id='避免不存在的类'><span>避免不存在的类</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 不存在的类</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">fMultivar</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 二元正态分布的随机数矩阵</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rnorm2d</span>(<span class="cm-number">1000</span>, <span class="cm-variable">rho</span><span class="cm-operator">=</span><span class="cm-number">.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">df</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">df</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"二元正态分布 相关系数=0.5"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">wssplot</span>(<span class="cm-variable">df</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">NbClust</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">nc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">NbClust</span>(<span class="cm-variable">df</span>, <span class="cm-variable">min.nc</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">max.nc</span><span class="cm-operator">=</span><span class="cm-number">15</span>, <span class="cm-variable">method</span><span class="cm-operator">=</span><span class="cm-string">"kmeans"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">par</span>(<span class="cm-variable">mfrow</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">barplot</span>(<span class="cm-variable">table</span>(<span class="cm-variable">nc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Best.n</span>[<span class="cm-number">1</span>,]),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Number of Clusters"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Number of Criteria"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Number of Clusters Chosen by 26 Criteria"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第16章\第16章 007.png" referrerpolicy="no-referrer" alt="第16章 007"></th><th><img src="img\019_R语言实战\第16章\第16章 008.png" referrerpolicy="no-referrer" alt="第16章 008"></th></tr></thead><tbody></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">cluster</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">pam</span>(<span class="cm-variable">df</span>, <span class="cm-variable">k</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">clustering</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">fit</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">clustering</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">df</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">V1</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-variable">V2</span>, <span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-variable">clustering</span>, <span class="cm-variable">shape</span><span class="cm-operator">=</span><span class="cm-variable">clustering</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>() <span class="cm-operator">+</span> <span class="cm-variable">ggtitle</span>(<span class="cm-string">"Clustering of Bivariate Normal Data"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">nc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">All.index</span>[,<span class="cm-number">4</span>], <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"o"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"CCC"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Number of clusters"</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"blue"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第16章\第16章 009.png" referrerpolicy="no-referrer" alt="第16章 009"></th><th><img src="img\019_R语言实战\第16章\第16章 010.png" referrerpolicy="no-referrer" alt="第16章 010"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>很明显划分是人为的，Nbclust包中的</span><strong><span>立方聚类规则</span></strong><span> ( Cubic Cluster Criteria，</span><strong><span>CCC</span></strong><span>) 往往可以帮助我们揭示不存在的结构。</span></li><li><span>当CCC的值为负并且对于两类或是更多的类递减时，就是典型的单峰分布。</span></li></ul><h3 id='第17章-分类'><span>第17章 分类</span></h3><h4 id='数据准备'><span>数据准备</span></h4><ul><li><span>威斯康星州乳腺癌数据集是一个由逗号分隔的txt文件，本数据集包含699个细针抽吸活检的样本单元，其中458个(65.5%)为良性样本单元，241个(34.5%)为恶性样本单元。数据集中共有11个变量，表中未标明变量名。共有16个样本单元中有缺失数据并用问号 (?) 表示。后一个变量(类别) 即输出变量(编码为良性=2，恶性=4)。</span></li><li><span>对于每一个样本来说，另外九个变量是与判别恶性肿瘤相关的细胞特征，并且得到了记录这些细胞特征得分为1(最接近良性)至10(最接近病变)之间的整数。任一变量都不能单独作为判别良性或恶性的标准，建模的目的是找到九个细胞特征的某种组合，从而实现对恶性肿瘤的准确预测。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 数据准备</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">loc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"http://archive.ics.uci.edu/ml/machine-learning-databases/"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ds</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"breast-cancer-wisconsin/breast-cancer-wisconsin.data"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">url</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste</span>(<span class="cm-variable">loc</span>, <span class="cm-variable">ds</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">""</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">breast</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(<span class="cm-variable">url</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">","</span>, <span class="cm-variable">header</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>, <span class="cm-variable">na.strings</span><span class="cm-operator">=</span><span class="cm-string">"?"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span>(<span class="cm-variable">breast</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"ID"</span>, <span class="cm-string">"clumpThickness"</span>, <span class="cm-string">"sizeUniformity"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"shapeUniformity"</span>, <span class="cm-string">"maginalAdhesion"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"singleEpithelialCellSize"</span>, <span class="cm-string">"bareNuclei"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"blandChromatin"</span>, <span class="cm-string">"normalNucleoli"</span>, <span class="cm-string">"mitosis"</span>, <span class="cm-string">"class"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">breast</span>[<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">df</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">4</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"benign"</span>, <span class="cm-string">"malignant"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 随机划分训练集和测试集</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">train</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sample</span>(<span class="cm-variable">nrow</span>(<span class="cm-variable">df</span>), <span class="cm-number">0.7</span><span class="cm-operator">*</span><span class="cm-variable">nrow</span>(<span class="cm-variable">df</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 训练集</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df.train</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">df</span>[<span class="cm-variable">train</span>,]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 测试集</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">df.validate</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">df</span>[<span class="cm-operator">-</span><span class="cm-variable">train</span>,]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 494px;"></div><div class="CodeMirror-gutters" style="display: none; height: 494px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">df.train</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">benign</span> <span class="cm-variable">malignant</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">319</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">170</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">table</span>(<span class="cm-variable">df.validate</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">benign</span> <span class="cm-variable">malignant</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-number">139</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">71</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><h4 id='逻辑回归'><span>逻辑回归</span></h4><ul><li><span>逻辑回归(logistic regression ) 是广义线性模型的一种，可根据一组数值变量预测二元输出。</span></li><li><span>使用</span><strong><span>glm()</span></strong><span>函数</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 拟合逻辑回归</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.logit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">glm</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>,<span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">fit.logit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">glm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">.</span>, <span class="cm-variable">family</span> <span class="cm-operator">=</span> <span class="cm-variable">binomial</span>(), <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Deviance</span> <span class="cm-variable">Residuals</span><span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">Min</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span><span class="cm-variable">Q</span> &nbsp; &nbsp;<span class="cm-variable">Median</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span><span class="cm-variable">Q</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Max</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span><span class="cm-number">2.24605</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.08012</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.03110</span> &nbsp; <span class="cm-number">0.00266</span> &nbsp; <span class="cm-number">2.11576</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Coefficients</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Estimate</span> <span class="cm-variable">Std.</span> <span class="cm-variable">Error</span> <span class="cm-variable">z</span> <span class="cm-variable">value</span> <span class="cm-variable">Pr</span>(<span class="cm-operator">&gt;|</span><span class="cm-variable">z</span><span class="cm-operator">|</span>) &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Intercept</span>) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">12.4412</span> &nbsp; &nbsp; <span class="cm-number">2.0547</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">6.055</span> &nbsp;<span class="cm-number">1.4e-09</span> <span class="cm-operator">***</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">clumpThickness</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.7407</span> &nbsp; &nbsp; <span class="cm-number">0.2262</span> &nbsp; <span class="cm-number">3.275</span> &nbsp;<span class="cm-number">0.00106</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sizeUniformity</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.0320</span> &nbsp; &nbsp; <span class="cm-number">0.3399</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.094</span> &nbsp;<span class="cm-number">0.92500</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">shapeUniformity</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.2073</span> &nbsp; &nbsp; <span class="cm-number">0.3715</span> &nbsp; <span class="cm-number">0.558</span> &nbsp;<span class="cm-number">0.57680</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maginalAdhesion</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.5194</span> &nbsp; &nbsp; <span class="cm-number">0.1708</span> &nbsp; <span class="cm-number">3.041</span> &nbsp;<span class="cm-number">0.00236</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">singleEpithelialCellSize</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.3217</span> &nbsp; &nbsp; <span class="cm-number">0.2613</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">1.231</span> &nbsp;<span class="cm-number">0.21831</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bareNuclei</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.5851</span> &nbsp; &nbsp; <span class="cm-number">0.1881</span> &nbsp; <span class="cm-number">3.111</span> &nbsp;<span class="cm-number">0.00187</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">blandChromatin</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.8599</span> &nbsp; &nbsp; <span class="cm-number">0.2923</span> &nbsp; <span class="cm-number">2.942</span> &nbsp;<span class="cm-number">0.00326</span> <span class="cm-operator">**</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">normalNucleoli</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.4036</span> &nbsp; &nbsp; <span class="cm-number">0.1828</span> &nbsp; <span class="cm-number">2.208</span> &nbsp;<span class="cm-number">0.02725</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mitosis</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0.8923</span> &nbsp; &nbsp; <span class="cm-number">0.3552</span> &nbsp; <span class="cm-number">2.512</span> &nbsp;<span class="cm-number">0.01200</span> <span class="cm-operator">*</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Signif.</span> <span class="cm-variable">codes</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">0</span> ‘<span class="cm-operator">***</span>’ <span class="cm-number">0.001</span> ‘<span class="cm-operator">**</span>’ <span class="cm-number">0.01</span> ‘<span class="cm-operator">*</span>’ <span class="cm-number">0.05</span> ‘<span class="cm-variable">.</span>’ <span class="cm-number">0.1</span> ‘ ’ <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(<span class="cm-variable">Dispersion</span> <span class="cm-variable">parameter</span> <span class="cm-keyword">for</span> <span class="cm-variable">binomial</span> <span class="cm-variable">family</span> <span class="cm-variable">taken</span> <span class="cm-variable">to</span> <span class="cm-variable">be</span> <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Null</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> <span class="cm-number">621.04</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">477</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Residual</span> <span class="cm-variable">deviance</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">52.39</span> &nbsp;<span class="cm-variable">on</span> <span class="cm-number">468</span> &nbsp;<span class="cm-variable">degrees</span> <span class="cm-variable">of</span> <span class="cm-variable">freedom</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  (因为不存在，<span class="cm-number">11</span>个观察量被删除了)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">AIC</span><span class="cm-operator">:</span> <span class="cm-number">72.39</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">Fisher</span> <span class="cm-variable">Scoring</span> <span class="cm-variable">iterations</span><span class="cm-operator">:</span> <span class="cm-number">9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 输出肿瘤为恶性的对数概率</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">prob</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.logit</span>, <span class="cm-variable">df.validate</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"response"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 概率大于0.5的被分为恶性肿瘤类</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">logit.pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">prob</span> <span class="cm-operator">&gt;</span> <span class="cm-number">.5</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-variable">FALSE</span>, <span class="cm-variable">TRUE</span>),<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"benign"</span>, <span class="cm-string">"malignant"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">logit.perf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">df.validate</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>, <span class="cm-variable">logit.pred</span>,<span class="cm-variable">dnn</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Actual"</span>, <span class="cm-string">"Predicted"</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">logit.perf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Predicted</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Actual</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">129</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">69</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1014px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1014px;"></div></div></div></pre><ul><li><span>对比的</span><strong><span>交叉表</span></strong><span>(即混淆矩阵，confusion matrix )。</span></li><li><span>逐步逻辑回归：来得到一个精简的模型。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 逐步逻辑回归</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">logit.fit.reduced</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">step</span>(<span class="cm-variable">fit.logit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Start</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">72.39</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">clumpThickness</span> <span class="cm-operator">+</span> <span class="cm-variable">sizeUniformity</span> <span class="cm-operator">+</span> <span class="cm-variable">shapeUniformity</span> <span class="cm-operator">+</span> <span class="cm-variable">maginalAdhesion</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">singleEpithelialCellSize</span> <span class="cm-operator">+</span> <span class="cm-variable">bareNuclei</span> <span class="cm-operator">+</span> <span class="cm-variable">blandChromatin</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">normalNucleoli</span> <span class="cm-operator">+</span> <span class="cm-variable">mitosis</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Df</span> <span class="cm-variable">Deviance</span> &nbsp; &nbsp;<span class="cm-variable">AIC</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">sizeUniformity</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">52.399</span> <span class="cm-number">70.399</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">shapeUniformity</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">52.686</span> <span class="cm-number">70.686</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">singleEpithelialCellSize</span> &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">53.910</span> <span class="cm-number">71.910</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">none</span><span class="cm-operator">&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">52.390</span> <span class="cm-number">72.390</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">normalNucleoli</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">57.465</span> <span class="cm-number">75.465</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">mitosis</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">57.966</span> <span class="cm-number">75.966</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">blandChromatin</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">62.856</span> <span class="cm-number">80.856</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">maginalAdhesion</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">63.044</span> <span class="cm-number">81.044</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">bareNuclei</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">64.982</span> <span class="cm-number">82.982</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">clumpThickness</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">68.323</span> <span class="cm-number">86.323</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Step</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">70.4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">clumpThickness</span> <span class="cm-operator">+</span> <span class="cm-variable">shapeUniformity</span> <span class="cm-operator">+</span> <span class="cm-variable">maginalAdhesion</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">singleEpithelialCellSize</span> <span class="cm-operator">+</span> <span class="cm-variable">bareNuclei</span> <span class="cm-operator">+</span> <span class="cm-variable">blandChromatin</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">normalNucleoli</span> <span class="cm-operator">+</span> <span class="cm-variable">mitosis</span> <span class="cm-keyword">.......</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Step</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">68.88</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">clumpThickness</span> <span class="cm-operator">+</span> <span class="cm-variable">maginalAdhesion</span> <span class="cm-operator">+</span> <span class="cm-variable">singleEpithelialCellSize</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">bareNuclei</span> <span class="cm-operator">+</span> <span class="cm-variable">blandChromatin</span> <span class="cm-operator">+</span> <span class="cm-variable">normalNucleoli</span> <span class="cm-operator">+</span> <span class="cm-variable">mitosis</span> <span class="cm-keyword">.....</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Step</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">AIC</span><span class="cm-operator">=</span><span class="cm-number">68.15</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">clumpThickness</span> <span class="cm-operator">+</span> <span class="cm-variable">maginalAdhesion</span> <span class="cm-operator">+</span> <span class="cm-variable">bareNuclei</span> <span class="cm-operator">+</span> <span class="cm-variable">blandChromatin</span> <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">normalNucleoli</span> <span class="cm-operator">+</span> <span class="cm-variable">mitosis</span> <span class="cm-keyword">.......</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 702px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><h4 id='决策树'><span>决策树</span></h4><ul><li><span>决策树是数据挖掘领域中的常用模型。其基本思想是对预测变量进行</span><strong><span>二元分离</span></strong><span>，从而构造棵可用于预测新样本单元所属类别的树。两类决策树：</span><strong><span>经典树</span></strong><span>和</span><strong><span>条件推断树</span></strong><span>。</span></li></ul><h5 id='经典决策树'><span>经典决策树</span></h5><ul><li><span>经典决策树以一个二元输出变量(对应威斯康星州乳腺癌数据集中的良性/恶性 ) 和一组预测变量(对应九个细胞特征 ) 为基础。</span></li></ul><ol start='' ><li><span>选定一个最佳预测变量将全部样本单元分为两类，实现两类中的纯度最大化( 即一类中良性样本单元尽可能多，另一类中恶性样本单元尽可能多 )。</span></li><li><span>对每一个子类别继续执行步骤1</span></li><li><span>重复步骤1、2，直到子类别中所含的样本单元数过少，或者没有分类法能将不纯度下降到一个给定闽值以下。最终集中的子类别即终端节点( terminalnode )。根据每一个终端节点中样本单元的类别数众数来判别这一终端节点的所属类别。</span></li><li><span>对任一样本单元执行决策树，得到其终端节点，即可根据步骤3得到模型预测的所属类别。</span></li></ol><ul><li><span>可采用1</span><strong><span>0折交叉验证法</span></strong><span>选择预测误差最小的树，防止过拟合。</span></li><li><span>使用</span><strong><span>rpart</span></strong><span>包的</span><strong><span>rpart()</span></strong><span>构造决策树，</span><strong><span>prune()</span></strong><span>对决策树进行剪枝。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># rpart()创建决策树</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">rpart</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># parms=list(split="information")参数指定使用信息增益作为分割节点的准则，以划分左右子树</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># df.train$class为factor类型，需要指定method = "class"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dtree</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rpart</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>,<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"class"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">parms</span> <span class="cm-operator">=</span> <span class="cm-builtin">list</span>(<span class="cm-variable">split</span><span class="cm-operator">=</span><span class="cm-string">"information"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dtree</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cptable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">CP</span> <span class="cm-variable">nsplit</span> &nbsp;<span class="cm-variable">rel</span> <span class="cm-variable">error</span> &nbsp; &nbsp;<span class="cm-variable">xerror</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xstd</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">0.81764706</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> <span class="cm-number">1.00000000</span> <span class="cm-number">1.0000000</span> <span class="cm-number">0.06194645</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> <span class="cm-number">0.04117647</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> <span class="cm-number">0.18235294</span> <span class="cm-number">0.1823529</span> <span class="cm-number">0.03169642</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">0.01764706</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span> <span class="cm-number">0.10000000</span> <span class="cm-number">0.1588235</span> <span class="cm-number">0.02970979</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> <span class="cm-number">0.01000000</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> <span class="cm-number">0.08235294</span> <span class="cm-number">0.1235294</span> <span class="cm-number">0.02637116</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 剪枝</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plotcp</span>(<span class="cm-variable">dtree</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dtree.pruned</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">prune</span>(<span class="cm-variable">dtree</span>, <span class="cm-variable">cp</span><span class="cm-operator">=</span><span class="cm-number">.0125</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 画决策树</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">rpart.plot</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">prp</span>(<span class="cm-variable">dtree.pruned</span>, <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>, <span class="cm-variable">extra</span> <span class="cm-operator">=</span> <span class="cm-number">104</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; <span class="cm-variable">fallen.leaves</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Decision Tree"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dtree.pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">dtree.pruned</span>, <span class="cm-variable">df.validate</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"class"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dtree.perf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">df.validate</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>, <span class="cm-variable">dtree.pred</span>,<span class="cm-variable">dnn</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Actual"</span>, <span class="cm-string">"Predicted"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">dtree.perf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Predicted</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Actual</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">129</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">69</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 728px;"></div><div class="CodeMirror-gutters" style="display: none; height: 728px;"></div></div></div></pre><ul><li><span>复杂度参数(</span><strong><span>cp</span></strong><span>) 用于惩罚过大的树；树的大小即分支数 (</span><strong><span>nsplit</span></strong><span> )，有n个分支的树将有n+1个终端节点；</span><strong><span>rel error</span></strong><span>栏即训练集中各种树对应的误差；交叉验证误差（</span><strong><span>xerror</span></strong><span>) 即基于训练样本所得的10折交叉验证误差；</span><strong><span>xstd</span></strong><span>栏为交叉验证误差的标准差。</span></li><li><span>最小的交叉验证误差为0.18，标准误差为0.0326，则最优的树为交叉验证误差在0.18+0.0326 (0.15和0.21) 之间的树。y因此四个终端节点( 即三次分割)的树满足要求(交叉验证误差为0.20625 )。</span></li><li><strong><span>prp()</span></strong><span>，type=2可画出每个节点下分割的标签，extra=104可画出每一类的概率以及每个节点处的样本占比，fallen.leaves=TRUE可在图的底端显示终端节点（将所有叶子节点位于最后一行）。</span></li></ul><figure><table><thead><tr><th><img src="img\019_R语言实战\第17章\第17章 001.png" referrerpolicy="no-referrer" alt="第17章 001"></th><th><img src="img\019_R语言实战\第17章\第17章 002.png" referrerpolicy="no-referrer" alt="第17章 002"></th></tr></thead><tbody></tbody></table></figure><h5 id='调价推断决策树'><span>调价推断决策树</span></h5><ul><li><span>条件推断树与传统决策树类似，但变量和分割的选取是基于显著性检验的，而不是纯净度或同质性一类的度量。</span></li></ul><ol start='' ><li><span>对输出变量与每个预测变量间的关系计算p值。</span></li><li><span>选取p值最小的变量。</span></li><li><span>在因变量与被选中的变量间尝试所有可能的二元分割(通过排列检验 )，并选取最显著的分割。</span></li><li><span>将数据集分成两群，并对每个子群重复上述步骤</span></li><li><span>重复直至所有分割都不显著或已到达最小节点为止。</span></li></ol><ul><li><span>使用</span><strong><span>party</span></strong><span>包里的</span><strong><span>ctree()</span></strong></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 条件决策树</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">party</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.ctree</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ctree</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">plot</span>(<span class="cm-variable">fit.ctree</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Conditional Inference Tree"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ctree.pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.ctree</span>, <span class="cm-variable">df.validate</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"response"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ctree.perf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">df.validate</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>, <span class="cm-variable">ctree.pred</span>,<span class="cm-variable">dnn</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Actual"</span>, <span class="cm-string">"Predicted"</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ctree.perf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Predicted</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Actual</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">131</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">67</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><p><img src="img\019_R语言实战\第17章\第17章 003.png" alt="第17章 003" style="zoom:50%;" /></p><h4 id='随机森林'><span>随机森林</span></h4><ul><li><span>随机森林的算法涉及对样本单元和变量进行抽样，从而生成大量决策树。对每个样本单元来说，所有决策树依次对其进行分类。所有决策树预测类别中的众数类别即为随机森林所预测的这样本单元的类别。</span></li></ul><ol start='' ><li><span>从训练集中随机有放回地抽取N个样本单元，生成大量决策树。</span></li><li><span>在每一个节点随机抽取m&lt;M个变量，将其作为分割该节点的候选变量。每一个节点处的变量数应一致。</span></li><li><span>完整生成所有决策树，无需剪枝( 最小节点为1 )。</span></li><li><span>终端节点的所属类别由节点对应的众数类别决定。</span></li><li><span>对于新的观测点，用所有的树对其进行分类，其类别由多数决定原则生成。</span></li></ol><ul><li><span>生成树时没有用到的样本点所对应的类别可由生成的树估计,与其真实类别比较即可得到</span><strong><span>袋外预测(out-of-bag，OOB) 误差</span></strong><span>。</span></li><li><span>使用</span><strong><span>randomForest</span></strong><span>包里的</span><strong><span>randomForest()</span></strong><span>生成随机森林。默认生成500棵树，每个节点抽取sqrt(M)个变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 随机森林</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">randomForest</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 数值型缺失值替换为中位数，类别型替换为众数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.forest</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">randomForest</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">na.action</span> <span class="cm-operator">=</span> <span class="cm-variable">na.roughfix</span>,<span class="cm-variable">importance</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.forest</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">randomForest</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">.</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>, <span class="cm-variable">importance</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>, &nbsp; &nbsp; &nbsp;<span class="cm-variable">na.action</span> <span class="cm-operator">=</span> <span class="cm-variable">na.roughfix</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Type</span> <span class="cm-variable">of</span> <span class="cm-variable">random</span> <span class="cm-variable">forest</span><span class="cm-operator">:</span> <span class="cm-variable">classification</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">trees</span><span class="cm-operator">:</span> <span class="cm-number">500</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">No.</span> <span class="cm-variable">of</span> <span class="cm-variable">variables</span> <span class="cm-variable">tried</span> <span class="cm-variable">at</span> <span class="cm-variable">each</span> <span class="cm-variable">split</span><span class="cm-operator">:</span> <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">OOB</span> <span class="cm-variable">estimate</span> <span class="cm-variable">of</span> &nbsp;<span class="cm-variable">error</span> <span class="cm-variable">rate</span><span class="cm-operator">:</span> <span class="cm-number">2.66</span><span class="cm-operator cm-variable-2">%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Confusion</span> <span class="cm-variable">matrix</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span> <span class="cm-variable">class.error</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">313</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">6</span> &nbsp;<span class="cm-number">0.01880878</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">7</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">163</span> &nbsp;<span class="cm-number">0.04117647</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 每个变量的重要性 平均基尼系数的减少（type=2）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">importace</span>(<span class="cm-variable">fit.forest</span>,<span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span> <span class="cm-keyword">in</span> <span class="cm-variable">importace</span>(<span class="cm-variable">fit.forest</span>, <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>) <span class="cm-operator">:</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">could</span> <span class="cm-variable">not</span> <span class="cm-variable">find</span> <span class="cm-keyword">function</span> <span class="cm-string">"importace"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 预测</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">forest.pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.forest</span>,<span class="cm-variable">df.validate</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">forest.perf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">df.validate</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>, <span class="cm-variable">forest.pred</span>,<span class="cm-variable">dnn</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Actual"</span>, <span class="cm-string">"Predicted"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">forest.perf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Predicted</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Actual</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">128</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">68</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 780px;"></div><div class="CodeMirror-gutters" style="display: none; height: 780px;"></div></div></div></pre><ul><li><span>随机森林的一个明显缺点是分类方法( 此例中相当于500棵决策树 )较难理解和表达。</span></li></ul><h4 id='支持向量机'><span>支持向量机</span></h4><ul><li><strong><span>支持向量机(SVM)</span></strong><span>是一类可用于分类和回归的有监督机器学习模型。</span></li><li><span>SVM旨在在多维空间中找到一个能将全部样本单元分成两类的最优平面,这一平面应使两类中距离最近的点的间距(margin）尽可能大，在间距边界上的点被称为</span><strong><span>支持向量</span></strong><span>( support vector,它们决定间距 )，分割的超平面位于间距的中间。</span></li><li><span>对于一个N维空间(即N个变量)来说，最优超平面( 即线性决策面，linear decision surface为N-1维。</span></li><li><span>可以使用</span><strong><span>kernlab</span></strong><span>包里的</span><strong><span>ksvm()</span></strong><span>和</span><strong><span>e1071</span></strong><span>包里的</span><strong><span>svm()</span></strong><span>实现。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 支持向量机</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">e1071</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.svm</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">svm</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.svm</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Call</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">svm</span>(<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">class</span> <span class="cm-operator">~</span> <span class="cm-variable">.</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">df.train</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Parameters</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">SVM</span><span class="cm-operator">-</span><span class="cm-variable">Type</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">C</span><span class="cm-operator">-</span><span class="cm-variable">classification</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">SVM</span><span class="cm-operator">-</span><span class="cm-variable">Kernel</span><span class="cm-operator">:</span> &nbsp;<span class="cm-variable">radial</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">cost</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">1</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">Support</span> <span class="cm-variable">Vectors</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">74</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">svm.pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.svm</span>,<span class="cm-variable">na.omit</span>(<span class="cm-variable">df.validate</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">svm.perf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">na.omit</span>(<span class="cm-variable">df.validate</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>,<span class="cm-variable">svm.pred</span>, <span class="cm-variable">dnn</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Actual"</span>, <span class="cm-string">"Predicted"</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">svm.perf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Predicted</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Actual</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">126</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">70</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><ul><li><span>由于方差较大的预测变量通常对SVM的生成影响更大，svm()函数默认在生成模型前对每个变量标准化，使其均值为0、标准差为1。</span></li><li><span>svm()函数默认通过径</span><strong><span>向基函数 (Radial Basis Function，RBF )</span></strong><span>将样本单元投射到高维空间般来说RBF核是一个比较好的选择，因为它是一种</span><strong><span>非线性投影</span></strong><span>，可以应对类别标签与预测变量间的非线性关系。</span></li><li><span>在用带RBF核的SVM拟合样本时,两个参数可能影响最终结果：</span><strong><span>gamma</span></strong><span>和</span><strong><span>成本(cost)</span></strong><span>。gamma是核函数的参数，控制分割超平面的形状。gamma越大，通常导致支持向量越多。我们也可将gamma看作控制训练样本“到达范围”的参数，即gamma越大意味着训练样本到达范围越广，而越小则意味着到达范围越窄。gamma必须大于0。</span></li><li><span>svm() 函数默认设置gamma为预测变量个数的倒数，成本参数为1。</span></li><li><span>通过</span><strong><span>tune.svm()</span></strong><span>对每个参数设置一个候选范围，</span><strong><span>tune.svm()</span></strong><span>函数对每一个参数组合生成一个SVM模型，并输出在每一个参数组合上的表现。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 设置一系列核函数的参数，找出最好的参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">set.seed</span>(<span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tuned</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">tune.svm</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">df.train</span>,<span class="cm-variable">gamma</span><span class="cm-operator">=</span><span class="cm-number">10</span><span class="cm-operator">^</span>(<span class="cm-operator">-</span><span class="cm-number">6</span><span class="cm-operator">:</span><span class="cm-number">1</span>),<span class="cm-variable">cost</span><span class="cm-operator">=</span><span class="cm-number">10</span><span class="cm-operator">^</span>(<span class="cm-number">10</span><span class="cm-operator">:</span><span class="cm-number">10</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">tuned</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Parameter</span> <span class="cm-variable">tuning</span> <span class="cm-variable">of</span> ‘<span class="cm-variable">svm</span>’<span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">sampling</span> <span class="cm-variable">method</span><span class="cm-operator">:</span> <span class="cm-number">10</span><span class="cm-operator">-</span><span class="cm-variable">fold</span> <span class="cm-variable">cross</span> <span class="cm-variable">validation</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">best</span> <span class="cm-variable">parameters</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">gamma</span> &nbsp;<span class="cm-variable">cost</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">1</span> <span class="cm-number">1e+10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">-</span> <span class="cm-variable">best</span> <span class="cm-variable">performance</span><span class="cm-operator">:</span> <span class="cm-number">0.03574382</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit.svm</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">svm</span>(<span class="cm-variable">class</span><span class="cm-operator">~</span><span class="cm-variable">.</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">df.train</span>, <span class="cm-variable">gamma</span><span class="cm-operator">=</span><span class="cm-number">1</span>, <span class="cm-variable">cost</span><span class="cm-operator">=</span><span class="cm-number">1</span><span class="cm-variable">e10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">svm.pred</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">predict</span>(<span class="cm-variable">fit.svm</span>, <span class="cm-variable">na.omit</span>(<span class="cm-variable">df.validate</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">svm.perf</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">table</span>(<span class="cm-variable">na.omit</span>(<span class="cm-variable">df.validate</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span>,<span class="cm-variable">svm.pred</span>, <span class="cm-variable">dnn</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Actual"</span>, <span class="cm-string">"Predicted"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">svm.perf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">Predicted</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Actual</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">benign</span> <span class="cm-variable">malignant</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">benign</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">120</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">15</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">malignant</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">70</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><ul><li><span>与随机森林类似，SVM的一大缺点是分类准则比较难以理解和表述。</span></li></ul><h4 id='选择预测效果最好的解'><span>选择预测效果最好的解</span></h4><ul><li><span>敏感度（sensitivity）：预测为阳性的结果中（fn+tp），正确（tp）的比例。</span></li><li><span>特异性（sensitivity）：预测为阴性的结果中（tn+fp），正确（tn）的比例。</span></li><li><span>精确度（precision，ppp）：正确预测为阳性（tp），占实际全部阳性（tp+fp）的比例。</span></li></ul><p><img src="img\019_R语言实战\第17章\第17章 004.png" referrerpolicy="no-referrer" alt="第17章 004"></p><figure><table><thead><tr><th>&nbsp;</th><th><span>预测阴性</span></th><th><span>预测阳性</span></th></tr></thead><tbody><tr><td><span>阴性</span></td><td><span>true negative</span></td><td><span>false negative</span></td></tr><tr><td><span>阳性</span></td><td><span>false positive</span></td><td><span>true positive</span></td></tr></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 正确性度量</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">performance</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">table</span>,<span class="cm-variable">n</span><span class="cm-operator">=</span><span class="cm-number">2</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span>(<span class="cm-operator">!</span><span class="cm-variable">all</span>(<span class="cm-variable">dim</span>(<span class="cm-variable">table</span>) <span class="cm-operator">==</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>))){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">stop</span>(<span class="cm-string">"必须是二维的表格"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">tn</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>[<span class="cm-number">1</span>,<span class="cm-number">1</span>] <span class="cm-comment"># 真阴性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">fp</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>[<span class="cm-number">1</span>,<span class="cm-number">2</span>] <span class="cm-comment"># 假阳性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">fn</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>[<span class="cm-number">2</span>,<span class="cm-number">1</span>] <span class="cm-comment"># 假阳性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">tp</span> <span class="cm-operator">=</span> <span class="cm-variable">table</span>[<span class="cm-number">2</span>,<span class="cm-number">2</span>] <span class="cm-comment"># 真阳性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">sensitivity</span> <span class="cm-operator">=</span> <span class="cm-variable">tp</span><span class="cm-operator">/</span>(<span class="cm-variable">tp</span><span class="cm-operator">+</span><span class="cm-variable">fn</span>) <span class="cm-comment"># 敏感度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">specificity</span> <span class="cm-operator">=</span> <span class="cm-variable">tn</span><span class="cm-operator">/</span>(<span class="cm-variable">tn</span><span class="cm-operator">+</span><span class="cm-variable">fp</span>) <span class="cm-comment"># 特异性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ppp</span> <span class="cm-operator">=</span> <span class="cm-variable">tp</span><span class="cm-operator">/</span>(<span class="cm-variable">tp</span><span class="cm-operator">+</span><span class="cm-variable">fp</span>) <span class="cm-comment"># 精确度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">npp</span> <span class="cm-operator">=</span> <span class="cm-variable">tn</span><span class="cm-operator">/</span>(<span class="cm-variable">tn</span><span class="cm-operator">+</span><span class="cm-variable">fn</span>) <span class="cm-comment"># 阴性的精确度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">hitrate</span> <span class="cm-operator">=</span> (<span class="cm-variable">tp</span><span class="cm-operator">+</span><span class="cm-variable">tn</span>)<span class="cm-operator">/</span>(<span class="cm-variable">tp</span><span class="cm-operator">+</span><span class="cm-variable">tn</span><span class="cm-operator">+</span><span class="cm-variable">fp</span><span class="cm-operator">+</span><span class="cm-variable">fn</span>) <span class="cm-comment"># 正确率</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">result</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste</span>(<span class="cm-string">"Sensitivity = "</span>, <span class="cm-variable">round</span>(<span class="cm-variable">sensitivity</span>, <span class="cm-variable">n</span>) ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">Specificity = "</span>, <span class="cm-variable">round</span>(<span class="cm-variable">specificity</span>, <span class="cm-variable">n</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">Positive Predictive Value = "</span>, <span class="cm-variable">round</span>(<span class="cm-variable">ppp</span>, <span class="cm-variable">n</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">Negative Predictive Value = "</span>, <span class="cm-variable">round</span>(<span class="cm-variable">npp</span>, <span class="cm-variable">n</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">Accuracy = "</span>, <span class="cm-variable">round</span>(<span class="cm-variable">hitrate</span>, <span class="cm-variable">n</span>), <span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">""</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">cat</span>(<span class="cm-variable">result</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 546px;"></div><div class="CodeMirror-gutters" style="display: none; height: 546px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 逻辑回归</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">performance</span>(<span class="cm-variable">logit.perf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sensitivity</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Specificity</span> <span class="cm-operator">=</span> <span class="cm-number">0.96</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Positive</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.92</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Negative</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.99</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Accuracy</span> <span class="cm-operator">=</span> <span class="cm-number">0.97</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 决策树</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">performance</span>(<span class="cm-variable">dtree.perf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sensitivity</span> <span class="cm-operator">=</span> <span class="cm-number">0.97</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Specificity</span> <span class="cm-operator">=</span> <span class="cm-number">0.93</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Positive</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.87</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Negative</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.98</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Accuracy</span> <span class="cm-operator">=</span> <span class="cm-number">0.94</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 条件决策树</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">performance</span>(<span class="cm-variable">ctree.perf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sensitivity</span> <span class="cm-operator">=</span> <span class="cm-number">0.94</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Specificity</span> <span class="cm-operator">=</span> <span class="cm-number">0.94</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Positive</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.89</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Negative</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.97</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Accuracy</span> <span class="cm-operator">=</span> <span class="cm-number">0.94</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 随机森林</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">performance</span>(<span class="cm-variable">forest.perf</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sensitivity</span> <span class="cm-operator">=</span> <span class="cm-number">0.97</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Specificity</span> <span class="cm-operator">=</span> <span class="cm-number">0.95</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Positive</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.91</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Negative</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.98</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Accuracy</span> <span class="cm-operator">=</span> <span class="cm-number">0.96</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 支持向量机</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">performance</span>(<span class="cm-variable">svm.perf</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sensitivity</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Specificity</span> <span class="cm-operator">=</span> <span class="cm-number">0.89</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Positive</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">0.82</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Negative</span> <span class="cm-variable">Predictive</span> <span class="cm-variable">Value</span> <span class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Accuracy</span> <span class="cm-operator">=</span> <span class="cm-number">0.93</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><ul><li><span>变动闽值可能带来的影响可以通过ROC ( Receiver Operating Characteristic ) 曲线来进一步观察。ROC曲线可对一个区间内的门槛值画出特异性和敏感度之间的关系，然后我们就能针对特定问题选择特异性和敏感度的最佳组合。许多R包都可以画ROC曲线，如</span><strong><span>ROCR</span></strong><span>、</span><strong><span>pROC</span></strong><span>等。</span></li></ul><h3 id='第18章-处理缺失数据的高级方法'><span>第18章 处理缺失数据的高级方法</span></h3><ol start='' ><li><span>删除含有缺失数据的实例。</span></li><li><span>用合理的替代值替换缺失值。</span></li></ol><ul><li><p><span>使用的软件包</span><strong><span>VIM</span></strong><span>和</span><strong><span>mice</span></strong><span>：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-variable">c</span>(<span class="cm-string">"VIM"</span>,<span class="cm-string">"mice"</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">VIM</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">mice</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>数据集：</span><strong><span>VIM</span></strong><span>包里的</span><strong><span>sleep</span></strong><span>（哺乳动物睡眠数据），62种哺乳动物的睡眠、生态学变量和体质变量间的关系。睡眠数据是因变量，生态学变量和体质变量是自变量或预测变量。</span></p></li><li><p><span>睡眠变量包含睡眠中做梦时长 (Dream)、不做梦时长(NonD) 以及它们的和( seep )。体质变量包含体重 ( Bodywgt，单位为千克 )、脑重 (Brainwgt，单位为克)、寿命( Span，单位为年 )和妊娠期(Gest，单位为天 )。生态学变量包含物种被捕食的程度 ( Pred )、睡眠时的暴露程度( Exp ) 和面临的总危险度(Danger )。生态学变量以从1(低)到5(高)的5分制进行测量。</span></p></li></ul><h4 id='处理缺失值的步骤'><span>处理缺失值的步骤</span></h4><ol start='' ><li><span>识别缺失数据；</span></li><li><span>检查导致数据缺失的原因；</span></li><li><span>删除包含缺失值的实例或用合理的数值代替(插补)缺失值。</span></li></ol><ul><li><p><span>缺失数据的分类：</span></p><ul><li><strong><span>完全随机缺失（MCAR）</span></strong><span>：若某变量的缺失数据与其他任何观测或未观测变量都不相关，则数据为完全随机缺失。</span></li><li><strong><span>随机缺失（MAR）</span></strong><span>：若某变量上的缺失数据与其他观测变量相关，与它自己的未观测值不相关，则数据为随机缺失。</span></li><li><strong><span>非随机缺失（NMAR）</span></strong><span>：若缺失数据不属于MCAR和MAR，则数据为非随机缺失。</span></li></ul></li></ul><p><img src="img\019_R语言实战\第18章\第18章 001.png" alt="第18章 001" style="zoom:50%;" /></p><h4 id='识别缺失值'><span>识别缺失值</span></h4><p><img src="img\019_R语言实战\第18章\第18章 002.png" referrerpolicy="no-referrer" alt="第18章 002"></p><ul><li><strong><span>complete.cases()</span></strong><span>可以判断一</span><strong><span>行</span></strong><span>有没有缺失值。仅将NA和NaN识别为缺失值，无穷值(Inf和-Inf) 被当作有效值。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">a</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>),<span class="cm-variable">b</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>,<span class="cm-atom">NA</span>),<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">4</span>,<span class="cm-number">5</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">complete.cases</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] &nbsp;<span class="cm-variable">TRUE</span> &nbsp;<span class="cm-variable">TRUE</span> <span class="cm-variable">FALSE</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 未缺失数据的行</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sleep</span>[<span class="cm-variable">complete.cases</span>(<span class="cm-variable">sleep</span>),]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 缺失数据的行</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sleep</span>[<span class="cm-operator">!</span><span class="cm-variable">complete.cases</span>(<span class="cm-variable">sleep</span>),]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>统计某个变量缺失值的总数、百分比</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 缺失值个数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">sum</span>(<span class="cm-variable">is.na</span>(<span class="cm-variable">sleep</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Dream</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">12</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment">#缺失值百分比</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">mean</span>(<span class="cm-variable">is.na</span>(<span class="cm-variable">sleep</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Dream</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.1935484</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 缺失的行比例</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">mean</span>(<span class="cm-operator">!</span><span class="cm-variable">complete.cases</span>(<span class="cm-variable">sleep</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.3225806</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><ul><li><span>判断缺失值的时候不可以使用</span><strong><span>==</span></strong></li></ul><h4 id='缺失值模式'><span>缺失值模式</span></h4><h5 id='列表显示缺失值'><span>列表显示缺失值</span></h5><ul><li><span>使用</span><strong><span>mice</span></strong><span>包里的</span><strong><span>md.pattern()</span></strong><span>可生成一个以矩阵或数据框形式展示缺失值模式的表格。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">mice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">md.pattern</span>(<span class="cm-variable">sleep</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">BodyWgt</span> <span class="cm-variable">BrainWgt</span> <span class="cm-variable">Pred</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Danger</span> <span class="cm-variable">Sleep</span> <span class="cm-variable">Span</span> <span class="cm-variable">Gest</span> <span class="cm-variable">Dream</span> <span class="cm-variable">NonD</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">42</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">9</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">12</span> &nbsp; <span class="cm-number">14</span> <span class="cm-number">38</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p><img src="img\019_R语言实战\第18章\第18章 003.png" alt="第18章 003" style="zoom:67%;" /></p><ul><li><span>中的1和0显示了缺失值模式：0表示变量的列中有缺失值，1则表示没有缺失值。</span><strong><span>第一行</span></strong><span>表述了“无缺失值”的模式(所有元素都为1)。第二行表述了“除了span之外无缺失值”的模式。</span><strong><span>第一列</span></strong><span>表示各缺失值模式的实例个数，</span><strong><span>最后一列</span></strong><span>表示各模式中有缺失值的变量的个数。此处可以看到,有42个实例没有缺失值,仅2个实例缺失了span。9个实例同时缺失了NonD和Dream的值。数据集包含了总共(42x0)+(2x1)+···+(1x3)=38个缺失值。</span><strong><span>最后一行</span></strong><span>给出了每个变量中缺失值的数目。</span></li></ul><h5 id='图像探索缺失值'><span>图像探索缺失值</span></h5><ul><li><span>VIM里可视化缺失数据的函数</span><strong><span>aggr()</span></strong><span>、</span><strong><span>matrixplot()</span></strong><span>、</span><strong><span>scattMiss()</span></strong></li><li><strong><span>aggr()</span></strong><span>：绘制每个变量的缺失值数，同时绘制每个变量组合的缺失值数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">VIM</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 以缺失值的数量显示，同时标出缺失的数量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">aggr</span>(<span class="cm-variable">sleep</span>,<span class="cm-variable">prop</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>,<span class="cm-variable">numbers</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 以缺失的比例显示（默认），同时标出数量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">aggr</span>(<span class="cm-variable">sleep</span>,<span class="cm-variable">prop</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>,<span class="cm-variable">numbers</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第18章\第18章 004.png" referrerpolicy="no-referrer" alt="第18章 004"></th><th><img src="img\019_R语言实战\第18章\第18章 005.png" referrerpolicy="no-referrer" alt="第18章 005"></th></tr></thead><tbody></tbody></table></figure><ul><li><strong><span>matrixplot()</span></strong><span>：生成展示每个实例数据的图形。数值型数据被重新转换到[0,1]区间，并用灰度来表示大小: 浅色表示值小，深色表示值大。默认缺失值为红色。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">matrixplot</span>(<span class="cm-variable">sleep</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第18章\第18章 006.png" alt="第18章 006" style="zoom:67%;" /></p><ul><li><strong><span>marginplot()</span></strong><span>：可生成一幅散点图，在图形边界展示两个变量的缺失值信息。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 梦时长与哺乳动物妊娠期时长的关系</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">marginplot</span>(<span class="cm-variable">sleep</span>[<span class="cm-variable">c</span>(<span class="cm-string">"Gest"</span>,<span class="cm-string">"Dream"</span>)],<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">20</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"darkgray"</span>, <span class="cm-string">"red"</span>, <span class="cm-string">"blue"</span>)) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第18章\第18章 007.png" alt="第18章 007" style="zoom: 67%;" /></p><ul><li><span>图形的主体是Gest和Dream( 两变量数据都完整 )的散点图。左边界的箱线图展示的是包含(灰色) 与不包含(红色) Gest值的Dream变量分布。四个红色的点代表缺失了Gest得分的Dream值。在底部边界上，Gest和Dream间的关系反过来了。可以看到，妊娠期和做梦时长呈负相关，缺失妊娠期数据时动物的做梦时长一般更长。两个变量均有缺失值的观测个数在两边界交叉处用蓝色输出(左下角的0 )。</span></li></ul><h5 id='用相关性探索缺失值'><span>用相关性探索缺失值</span></h5><ul><li><span>在继续下文之前，还有些方法值得注意。你可用指示变量替代数据集中的数据(1表示缺失0表示存在 )，这样生成的矩阵有时被称作</span><strong><span>影子矩阵</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="R" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 缺失为1，不缺失为0</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">as.data.frame</span>(<span class="cm-variable">abs</span>(<span class="cm-variable">is.na</span>(<span class="cm-variable">sleep</span>)))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">BodyWgt</span> <span class="cm-variable">BrainWgt</span> <span class="cm-variable">NonD</span> <span class="cm-variable">Dream</span> <span class="cm-variable">Sleep</span> <span class="cm-variable">Span</span> <span class="cm-variable">Gest</span> <span class="cm-variable">Pred</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Danger</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 存在缺失的变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x</span>[<span class="cm-variable">apply</span>(<span class="cm-variable">x</span>, <span class="cm-number">2</span>, <span class="cm-variable">sum</span>) <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 缺失变量之间的相关性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">NonD</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Dream</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Sleep</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Span</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Gest</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NonD</span> &nbsp; <span class="cm-number">1.00000000</span> &nbsp;<span class="cm-number">0.90711474</span> &nbsp;<span class="cm-number">0.48626454</span> &nbsp;<span class="cm-number">0.01519577</span> <span class="cm-operator">-</span><span class="cm-number">0.14182716</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Dream</span> &nbsp;<span class="cm-number">0.90711474</span> &nbsp;<span class="cm-number">1.00000000</span> &nbsp;<span class="cm-number">0.20370138</span> &nbsp;<span class="cm-number">0.03752394</span> <span class="cm-operator">-</span><span class="cm-number">0.12865350</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sleep</span> &nbsp;<span class="cm-number">0.48626454</span> &nbsp;<span class="cm-number">0.20370138</span> &nbsp;<span class="cm-number">1.00000000</span> <span class="cm-operator">-</span><span class="cm-number">0.06896552</span> <span class="cm-operator">-</span><span class="cm-number">0.06896552</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Span</span> &nbsp; <span class="cm-number">0.01519577</span> &nbsp;<span class="cm-number">0.03752394</span> <span class="cm-operator">-</span><span class="cm-number">0.06896552</span> &nbsp;<span class="cm-number">1.00000000</span> &nbsp;<span class="cm-number">0.19827586</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Gest</span> &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.14182716</span> <span class="cm-operator">-</span><span class="cm-number">0.12865350</span> <span class="cm-operator">-</span><span class="cm-number">0.06896552</span> &nbsp;<span class="cm-number">0.19827586</span> &nbsp;<span class="cm-number">1.00000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 全部变量的相关性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># use="pairwise.complete.obs"：计算两个变量的数据时，只使用非缺失的数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">cor</span>(<span class="cm-variable">sleep</span>,<span class="cm-variable">y</span>,<span class="cm-variable">use</span><span class="cm-operator">=</span><span class="cm-string">"pairwise.complete.obs"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">NonD</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">Dream</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Sleep</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Span</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Gest</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BodyWgt</span> &nbsp; <span class="cm-number">0.22682614</span> &nbsp;<span class="cm-number">0.22259108</span> &nbsp;<span class="cm-number">0.001684992</span> <span class="cm-operator">-</span><span class="cm-number">0.05831706</span> <span class="cm-operator">-</span><span class="cm-number">0.05396818</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BrainWgt</span> &nbsp;<span class="cm-number">0.17945923</span> &nbsp;<span class="cm-number">0.16321105</span> &nbsp;<span class="cm-number">0.007859438</span> <span class="cm-operator">-</span><span class="cm-number">0.07921370</span> <span class="cm-operator">-</span><span class="cm-number">0.07332961</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NonD</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-atom">NA</span> <span class="cm-operator">-</span><span class="cm-number">0.04314514</span> <span class="cm-operator">-</span><span class="cm-number">0.04553485</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Dream</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.18895206</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span> <span class="cm-operator">-</span><span class="cm-number">0.188952059</span> &nbsp;<span class="cm-number">0.11699247</span> &nbsp;<span class="cm-number">0.22774685</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sleep</span> &nbsp; &nbsp;<span class="cm-operator">-</span><span class="cm-number">0.08023157</span> <span class="cm-operator">-</span><span class="cm-number">0.08023157</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-atom">NA</span> &nbsp;<span class="cm-number">0.09638044</span> &nbsp;<span class="cm-number">0.03976464</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Span</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.08336361</span> &nbsp;<span class="cm-number">0.05981377</span> &nbsp;<span class="cm-number">0.005238852</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span> <span class="cm-operator">-</span><span class="cm-number">0.06527277</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Gest</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.20239201</span> &nbsp;<span class="cm-number">0.05140232</span> &nbsp;<span class="cm-number">0.159701523</span> <span class="cm-operator">-</span><span class="cm-number">0.17495305</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-atom">NA</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Pred</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">0.04758438</span> <span class="cm-operator">-</span><span class="cm-number">0.06834378</span> &nbsp;<span class="cm-number">0.202462711</span> &nbsp;<span class="cm-number">0.02313860</span> <span class="cm-operator">-</span><span class="cm-number">0.20101655</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Exp</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">0.24546836</span> &nbsp;<span class="cm-number">0.12740768</span> &nbsp;<span class="cm-number">0.260772984</span> <span class="cm-operator">-</span><span class="cm-number">0.19291879</span> <span class="cm-operator">-</span><span class="cm-number">0.19291879</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Danger</span> &nbsp; &nbsp;<span class="cm-number">0.06528387</span> <span class="cm-operator">-</span><span class="cm-number">0.06724755</span> &nbsp;<span class="cm-number">0.208883617</span> <span class="cm-operator">-</span><span class="cm-number">0.06666498</span> <span class="cm-operator">-</span><span class="cm-number">0.20443928</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 884px;"></div><div class="CodeMirror-gutters" style="display: none; height: 884px;"></div></div></div></pre><h4 id='缺失数据的由来和影响'><span>缺失数据的由来和影响</span></h4><ol start='' ><li><span>分析生成缺失数据的潜在机制。</span></li><li><span>评价缺失数据对回答实质性问题的影响。</span></li></ol><h4 id='处理不完整数据'><span>处理不完整数据</span></h4><h4 id='完整实例分析行删除）'><span>完整实例分析（行删除）</span></h4><ul><li><span>在完整实例分析中，只有每个变量都包含了有效数据值的观测才会保留下来做进一步的分析。实际上，这样会导致包含一个或多个缺失值的任意一行都会被删除，因此常称作行删除法( listwise )、个案删除( case-wise) 或剔除。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 删除含有缺失数据的行</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">a</span> <span class="cm-arg-is">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">6</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">b</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"A"</span>,<span class="cm-atom">NA</span>,<span class="cm-string">"B"</span>,<span class="cm-string">"C"</span>,<span class="cm-string">"D"</span>,<span class="cm-string">"E"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-variable">c</span> <span class="cm-arg-is">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"a"</span>,<span class="cm-string">"b"</span>,<span class="cm-string">"c"</span>,<span class="cm-atom">NA</span>,<span class="cm-string">"d"</span>,<span class="cm-string">"e"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">new.df1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">na.omit</span>(<span class="cm-variable">data</span>)<span class="cm-semi">;</span><span class="cm-variable">new.df1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">a</span> <span class="cm-variable">b</span> <span class="cm-variable">c</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-variable">A</span> <span class="cm-variable">a</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">3</span> <span class="cm-variable">B</span> <span class="cm-variable">c</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-number">5</span> <span class="cm-variable">D</span> <span class="cm-variable">d</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> <span class="cm-number">6</span> <span class="cm-variable">E</span> <span class="cm-variable">e</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">new.df2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data</span>[<span class="cm-variable">complete.cases</span>(<span class="cm-variable">data</span>),]<span class="cm-semi">;</span><span class="cm-variable">new.df2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">a</span> <span class="cm-variable">b</span> <span class="cm-variable">c</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> <span class="cm-number">1</span> <span class="cm-variable">A</span> <span class="cm-variable">a</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> <span class="cm-number">3</span> <span class="cm-variable">B</span> <span class="cm-variable">c</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> <span class="cm-number">5</span> <span class="cm-variable">D</span> <span class="cm-variable">d</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">6</span> <span class="cm-number">6</span> <span class="cm-variable">E</span> <span class="cm-variable">e</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 442px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 睡眠研究中变量间的关系</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cor</span>(<span class="cm-variable">na.omit</span>(<span class="cm-variable">sleep</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 或</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cor</span>(<span class="cm-variable">sleep</span>,<span class="cm-variable">use</span> <span class="cm-operator">=</span> <span class="cm-string">"complete.obs"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>R语言许多函数只有用函数拟合的、含缺失值的变量对应的实例才会被删除。</span></li></ul><h4 id='多重插补'><span>多重插补</span></h4><ul><li><strong><span>多重插补(MI)</span></strong><span> 是一种基于重复模拟的处理缺失值的方法。在面对复杂的缺失值问题时MI是最常选用的方法，它将从一个包含缺失值的数据集中生成一组完整的数据集(通常是3到10个)。每个模拟数据集中，缺失数据将用蒙特卡洛方法来填补。</span></li><li><strong><span>Amelia</span></strong><span>、</span><strong><span>mice</span></strong><span>和</span><strong><span>mi</span></strong><span>包可以实现。</span></li></ul><p><img src="img\019_R语言实战\第18章\第18章 008.png" alt="第18章 008" style="zoom:50%;" /></p><ul><li><p><span>函数mice()首先从一个包含缺失数据的数据框开始，然后返回一个包含多个(默认为5个完整数据集的对象。每个完整数据集都是通过对原始数据框中的缺失数据进行插补而生成的。由于插补有随机的成分，因此每个完整数据集都略有不同。然后，with()函数可依次对每个完整数据集应用统计模型(如线性模型或广义线性模型 ，最后，pool()函数将这些单独的分析结果整合为一组结果。最终模型的标准误和p值都将准确地反映出由于缺失值和多重插补而产生的不确定性。</span></p></li><li><p><span>mice包的分析过程：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">mice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">imp</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mice</span>(<span class="cm-variable">data</span>, <span class="cm-variable">m</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">imp</span>, <span class="cm-variable">analysis</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pooled</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">pool</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summary</span>(<span class="cm-variable">pooled</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><strong><span>data</span></strong><span>是一个包含缺失值的矩阵或数据框。</span><strong><span>imp</span></strong><span>是一个包含m个插补数据集的列表对象，同时还含有完成插补过程的信息。默认m为5。</span><strong><span>analysis</span></strong><span>是一个表达式对象，用来设定应用于m个插补数据集的统计分析方法。方法包括做线性回归模型的lm() 函数、做广义线性模型的glm() 函数、做广义可加模型的gam()，以及做负二项模型的nbrm() 函数。表达式在函数的括号中，~的左边是响应变量右边是预测变量( 用+符号分隔开 )。</span><strong><span>fit</span></strong><span>是一个包含m个单独统计分析结果的列表对象。</span><strong><span>pooled</span></strong><span>是一个包含这m个统计分析亚均结果的列表对象。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 多重差值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">library</span>(<span class="cm-variable">mice</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">data</span>(<span class="cm-variable">sleep</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"VIM"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">imp</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mice</span>(<span class="cm-variable">sleep</span>,<span class="cm-variable">seed</span> <span class="cm-operator">=</span> <span class="cm-number">1234</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">iter</span> <span class="cm-variable">imp</span> <span class="cm-variable">variable</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp;<span class="cm-variable">NonD</span> &nbsp;<span class="cm-variable">Dream</span> &nbsp;<span class="cm-variable">Sleep</span> &nbsp;<span class="cm-variable">Span</span> &nbsp;<span class="cm-variable">Gest</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">2</span> &nbsp;<span class="cm-variable">NonD</span> &nbsp;<span class="cm-variable">Dream</span> &nbsp;<span class="cm-variable">Sleep</span> &nbsp;<span class="cm-variable">Span</span> &nbsp;<span class="cm-variable">Gest</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">.......</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">with</span>(<span class="cm-variable">imp</span>,<span class="cm-variable">lm</span>(<span class="cm-variable">Dream</span> <span class="cm-operator">~</span> <span class="cm-variable">Span</span><span class="cm-operator">+</span><span class="cm-variable">Gest</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">pooled</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">pool</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">pooled</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">term</span> &nbsp; &nbsp; <span class="cm-variable">estimate</span> &nbsp; <span class="cm-variable">std.error</span> &nbsp;<span class="cm-variable">statistic</span> &nbsp; &nbsp; &nbsp; <span class="cm-variable">df</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">p.value</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> (<span class="cm-variable">Intercept</span>) &nbsp;<span class="cm-number">2.596689698</span> <span class="cm-number">0.248607356</span> <span class="cm-number">10.4449431</span> <span class="cm-number">51.95123</span> <span class="cm-number">2.288224e-14</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Span</span> <span class="cm-operator">-</span><span class="cm-number">0.003994065</span> <span class="cm-number">0.011692201</span> <span class="cm-operator">-</span><span class="cm-number">0.3416008</span> <span class="cm-number">55.64216</span> <span class="cm-number">7.339381e-01</span> <span class="cm-comment"># 不显著</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Gest</span> <span class="cm-operator">-</span><span class="cm-number">0.004318559</span> <span class="cm-number">0.001458574</span> <span class="cm-operator">-</span><span class="cm-number">2.9608093</span> <span class="cm-number">55.15892</span> <span class="cm-number">4.517169e-03</span> <span class="cm-comment"># 显著</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">imp</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Class</span><span class="cm-operator">:</span> <span class="cm-variable">mids</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">multiple</span> <span class="cm-variable">imputations</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">5</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Imputation</span> <span class="cm-variable">methods</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">BodyWgt</span> <span class="cm-variable">BrainWgt</span> &nbsp; &nbsp; <span class="cm-variable">NonD</span> &nbsp; &nbsp;<span class="cm-variable">Dream</span> &nbsp; &nbsp;<span class="cm-variable">Sleep</span> &nbsp; &nbsp; <span class="cm-variable">Span</span> &nbsp; &nbsp; <span class="cm-variable">Gest</span> &nbsp; &nbsp; <span class="cm-variable">Pred</span> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Exp</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">""</span> &nbsp; &nbsp; &nbsp; <span class="cm-string">""</span> &nbsp; &nbsp;<span class="cm-string">"pmm"</span> &nbsp; &nbsp;<span class="cm-string">"pmm"</span> &nbsp; &nbsp;<span class="cm-string">"pmm"</span> &nbsp; &nbsp;<span class="cm-string">"pmm"</span> &nbsp; &nbsp;<span class="cm-string">"pmm"</span> &nbsp; &nbsp; &nbsp; <span class="cm-string">""</span> &nbsp; &nbsp; &nbsp; <span class="cm-string">""</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Danger</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">""</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">PredictorMatrix</span><span class="cm-operator">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">BodyWgt</span> <span class="cm-variable">BrainWgt</span> <span class="cm-variable">NonD</span> <span class="cm-variable">Dream</span> <span class="cm-variable">Sleep</span> <span class="cm-variable">Span</span> <span class="cm-variable">Gest</span> <span class="cm-variable">Pred</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Danger</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BodyWgt</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BrainWgt</span> &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">NonD</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Dream</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sleep</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Span</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Number</span> <span class="cm-variable">of</span> <span class="cm-variable">logged</span> <span class="cm-variable">events</span><span class="cm-operator">:</span> &nbsp;<span class="cm-number">5</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">it</span> <span class="cm-variable">im</span> &nbsp;<span class="cm-variable">dep</span> <span class="cm-variable">meth</span> &nbsp; <span class="cm-variable">out</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">2</span> <span class="cm-variable">Span</span> &nbsp;<span class="cm-variable">pmm</span> <span class="cm-variable">Sleep</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">2</span> <span class="cm-variable">Gest</span> &nbsp;<span class="cm-variable">pmm</span> <span class="cm-variable">Sleep</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">2</span> <span class="cm-variable">Span</span> &nbsp;<span class="cm-variable">pmm</span> <span class="cm-variable">Sleep</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">2</span> <span class="cm-variable">Gest</span> &nbsp;<span class="cm-variable">pmm</span> <span class="cm-variable">Sleep</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">5</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">4</span> <span class="cm-variable">Span</span> &nbsp;<span class="cm-variable">pmm</span> <span class="cm-variable">Sleep</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><ul><li><strong><span>预测变量矩阵(PredictorMatrix)</span></strong><span>展示了进行插补过程的含有缺失数据的变量，它们利用了数据集中其他变量的信息。(在矩阵中，行代表插补变量，列代表为插补提供信息的变量，1和0分别表示使用和未使用。)</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 展示了在Dream变量上有缺失值的12种动物的5次插补值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">imp</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">imp</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Dream</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">2</span> &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">4</span> &nbsp; <span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">0.0</span> <span class="cm-number">0.5</span> <span class="cm-number">0.5</span> <span class="cm-number">0.5</span> <span class="cm-number">0.3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp;<span class="cm-number">0.5</span> <span class="cm-number">1.4</span> <span class="cm-number">1.5</span> <span class="cm-number">1.5</span> <span class="cm-number">1.3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp;<span class="cm-number">3.6</span> <span class="cm-number">4.1</span> <span class="cm-number">3.1</span> <span class="cm-number">4.1</span> <span class="cm-number">2.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">14</span> <span class="cm-number">0.3</span> <span class="cm-number">1.0</span> <span class="cm-number">0.5</span> <span class="cm-number">0.0</span> <span class="cm-number">0.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">24</span> <span class="cm-number">3.6</span> <span class="cm-number">0.8</span> <span class="cm-number">1.4</span> <span class="cm-number">1.4</span> <span class="cm-number">0.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">26</span> <span class="cm-number">2.4</span> <span class="cm-number">0.5</span> <span class="cm-number">3.9</span> <span class="cm-number">3.4</span> <span class="cm-number">1.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">30</span> <span class="cm-number">2.6</span> <span class="cm-number">0.8</span> <span class="cm-number">2.4</span> <span class="cm-number">2.2</span> <span class="cm-number">3.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">31</span> <span class="cm-number">0.6</span> <span class="cm-number">1.3</span> <span class="cm-number">1.2</span> <span class="cm-number">1.8</span> <span class="cm-number">2.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">47</span> <span class="cm-number">1.3</span> <span class="cm-number">1.8</span> <span class="cm-number">1.8</span> <span class="cm-number">1.8</span> <span class="cm-number">3.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">53</span> <span class="cm-number">0.5</span> <span class="cm-number">0.5</span> <span class="cm-number">0.6</span> <span class="cm-number">0.5</span> <span class="cm-number">0.3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">55</span> <span class="cm-number">2.6</span> <span class="cm-number">3.6</span> <span class="cm-number">2.4</span> <span class="cm-number">1.8</span> <span class="cm-number">0.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">62</span> <span class="cm-number">1.5</span> <span class="cm-number">3.4</span> <span class="cm-number">3.9</span> <span class="cm-number">3.4</span> <span class="cm-number">2.2</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><ul><li><span>利用</span><strong><span>complete()</span></strong><span> 函数可以观察m个插补数据集中的任意一个。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 查看第n个插补数据集</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">complete</span>(<span class="cm-variable">imp</span>,<span class="cm-variable">action</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">BodyWgt</span> <span class="cm-variable">BrainWgt</span> <span class="cm-variable">NonD</span> <span class="cm-variable">Dream</span> <span class="cm-variable">Sleep</span> &nbsp;<span class="cm-variable">Span</span> &nbsp;<span class="cm-variable">Gest</span> <span class="cm-variable">Pred</span> <span class="cm-variable">Exp</span> <span class="cm-variable">Danger</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp;<span class="cm-number">6654.000</span> &nbsp;<span class="cm-number">5712.00</span> &nbsp;<span class="cm-number">3.2</span> &nbsp; <span class="cm-number">0.5</span> &nbsp; <span class="cm-number">3.3</span> &nbsp;<span class="cm-number">38.6</span> <span class="cm-number">645.0</span> &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp; <span class="cm-number">5</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; <span class="cm-number">1.000</span> &nbsp; &nbsp; <span class="cm-number">6.60</span> &nbsp;<span class="cm-number">6.3</span> &nbsp; <span class="cm-number">2.0</span> &nbsp; <span class="cm-number">8.3</span> &nbsp; <span class="cm-number">4.5</span> &nbsp;<span class="cm-number">42.0</span> &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; <span class="cm-number">3.385</span> &nbsp; &nbsp;<span class="cm-number">44.50</span> <span class="cm-number">11.0</span> &nbsp; <span class="cm-number">1.5</span> &nbsp;<span class="cm-number">12.5</span> &nbsp;<span class="cm-number">14.0</span> &nbsp;<span class="cm-number">60.0</span> &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; <span class="cm-number">1</span> &nbsp; &nbsp; &nbsp;<span class="cm-number">1</span> <span class="cm-keyword">....</span> <span class="cm-comment"># 62行</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><h4 id='处理缺失值的其他方法'><span>处理缺失值的其他方法</span></h4><p><img src="img\019_R语言实战\第18章\第18章 009.png" referrerpolicy="no-referrer" alt="第18章 009"></p><ul><li><span>以过失的方法：</span><strong><span>成对删除</span></strong><span>( pairwise deletion ) 和</span><strong><span>简单插补</span></strong><span> ( simple imputation )。</span></li></ul><h5 id='成对删除'><span>成对删除</span></h5><ul><li><span>对于成对删除，观测只是当它含缺失数据的变量涉及某个特定分析时才会被删除。例如分析多个变量之间的相关关系时，A和B计算时，使用AB完整的数据，A和C计算时，使用AC完整的数据，而不看其他变量。</span></li><li><span>虽然成对删除似乎利用了所有可用数据，但实际上每次计算都只用了不同的数据子集。这将会导致一些扭曲的、难以解释的结果。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cor</span>(<span class="cm-variable">sleep</span>, <span class="cm-variable">use</span><span class="cm-operator">=</span><span class="cm-string">"pairwise.complete.obs"</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><h5 id='简单非随机）差值'><span>简单（非随机）差值</span></h5><ul><li><span>所谓简单插补，即用某个值( 如均值、中位数或众数 )来替换变量中的缺失值。</span></li><li><span>若缺失数据的数目非常大，那么简单插补很可能会低估标准差、曲解变量间的相关性，并会生成不正确的统计检验的p值。</span></li></ul><h2 id='第五部分-技能拓展'><span>第五部分 技能拓展</span></h2><h3 id='第19章-使用ggplot2进行高级绘图'><span>第19章 使用ggplot2进行高级绘图</span></h3><p><img src="img\019_R语言实战\第19章\第19章 001.png" referrerpolicy="no-referrer" alt="第19章 001"></p><ul><li><span>数据集：</span><strong><span>lattice</span></strong><span>包里的</span><strong><span>singer</span></strong><span>数据集，包括纽约合唱团歌手的高度和语音变量。</span><strong><span>carData</span></strong><span>包</span><strong><span>Salaries</span></strong><span>数据集。数据框包含的信息是在2008~2009学年大学教授的薪水。</span></li></ul><h4 id='ggplot2包介绍'><span>ggplot2包介绍</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">wt</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">mpg</span>)) <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 17：三角形，12：大小</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">pch</span> <span class="cm-operator">=</span> <span class="cm-number">17</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"blue"</span>,<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># linetype = 2：虚线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"red"</span>,<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"汽车数据"</span>,<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-string">"重量"</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 002.png" alt="第19章 002" style="zoom:50%;" /></p><ul><li><span>ggplot2包提供了分组和小面化 ( faceting )的方法。分组指的是在一个图形中显示两组或多组观察结果。小面化指的是在单独、并排的图形上显示观察组。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 手动挡和自动挡</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Automatic"</span>, <span class="cm-string">"Manual"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 发动机</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">vs</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">vs</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"V-Engine"</span>, <span class="cm-string">"Straight Engine"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 气缸数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mtcars</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">hp</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">mpg</span>,<span class="cm-variable">shape</span> <span class="cm-operator">=</span> <span class="cm-variable">cyl</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">cyl</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>) <span class="cm-operator">+</span> <span class="cm-variable">facet_grid</span>(<span class="cm-variable">am</span> <span class="cm-operator">~</span> <span class="cm-variable">vs</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"发动机类型"</span>,<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-string">"马力"</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 003.png" alt="第19章 003" style="zoom:50%;" /></p><h4 id='用集合图形指定图的类型'><span>用集合图形指定图的类型</span></h4><p><img src="img\019_R语言实战\第19章\第19章 004.png" referrerpolicy="no-referrer" alt="第19章 004"></p><p><img src="img\019_R语言实战\第19章\第19章 005.png" referrerpolicy="no-referrer" alt="第19章 005"><img src="img\019_R语言实战\第19章\第19章 006.png" referrerpolicy="no-referrer" alt="第19章 006"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 线条类型</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">data.frame</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">sample</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">100</span>,<span class="cm-number">10</span>,<span class="cm-variable">replace</span> <span class="cm-operator">=</span> <span class="cm-variable">T</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>() <span class="cm-operator">+</span> <span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>),<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>,<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>),<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>,<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-number">2</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>),<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>,<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-number">3</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>),<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">4</span>,<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-number">4</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>),<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>,<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-string">"lm"</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">x</span><span class="cm-operator">-</span><span class="cm-number">5</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">data</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span>),<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-number">6</span>,<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 007.png" alt="第19章 007" style="zoom:67%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 图形结合，小提琴和箱线图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span>(<span class="cm-variable">singer</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"lattice"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">singer</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">voice.part</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-variable">height</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_violin</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"skyblue"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_boxplot</span>(<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"green"</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">0.2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 008.png" alt="第19章 008" style="zoom:50%;" /></p><h4 id='分组'><span>分组</span></h4><ul><li><span>数据集：</span><strong><span>Salaries</span></strong><span>数据集。数据框包含的信息是在2008~2009学年大学教授的薪水。变量包括rank( 助理教授、副教授、教授)、sex(女性、男性 )、yrs.since.phd (获得博士学位年数 )、yrs.service (工龄 )和salary ( 以美元计的九个月薪水) 。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 薪水与学术等级的关系</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">package</span> <span class="cm-operator">=</span> <span class="cm-string">"carData"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">salary</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">rank</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_density</span>(<span class="cm-variable">alpha</span> <span class="cm-operator">=</span> <span class="cm-number">0.3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 009.png" alt="第19章 009" style="zoom:67%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 学术等级和性别</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">yrs.since.phd</span>,<span class="cm-variable">salary</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rank</span>,<span class="cm-variable">shape</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_point</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 010.png" alt="第19章 010" style="zoom:67%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 条形图类型</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 按学术等级可视化人数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">rank</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_bar</span>(<span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-string">"stack"</span>) <span class="cm-operator">+</span> <span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"position='stack'"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">rank</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_bar</span>(<span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-string">"dodge"</span>) <span class="cm-operator">+</span> <span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"positions='dodge'"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">rank</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_bar</span>(<span class="cm-variable">position</span> <span class="cm-operator">=</span> <span class="cm-string">"fill"</span>) <span class="cm-operator">+</span> <span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"positions='fill'"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第19章\第19章 011.png" referrerpolicy="no-referrer" alt="第19章 011"></th><th><img src="img\019_R语言实战\第19章\第19章 012.png" referrerpolicy="no-referrer" alt="第19章 012"></th><th><img src="img\019_R语言实战\第19章\第19章 013.png" referrerpolicy="no-referrer" alt="第19章 013"></th></tr></thead><tbody></tbody></table></figure><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-variable">sex</span>))<span class="cm-operator">+</span> <span class="cm-variable">geom_bar</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_bar</span>(<span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_bar</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第19章\第19章 014.png" referrerpolicy="no-referrer" alt="第19章 014"></th><th><img src="img\019_R语言实战\第19章\第19章 015.png" referrerpolicy="no-referrer" alt="第19章 015"></th><th><img src="img\019_R语言实战\第19章\第19章 016.png" referrerpolicy="no-referrer" alt="第19章 016"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>在第一个例子中，sex变量通过条形图中的填充颜色来展示。在第二个例子中，每个条形图都用红色来填充。在第三个例子中,ggplot2假定&quot;red&quot;是变量的名字,并且你得到一个意想不到(不希望)的结果。通常来说，变量应该设在aes () 函数内，分配常数应该在aes () 函数外。</span></li></ul><h4 id='刻面'><span>刻面</span></h4><ul><li><span>刻面图：网格图形，使用</span><strong><span>facet_wrap()</span></strong><span>和</span><strong><span>facet_grid()</span></strong><span>创建。</span></li></ul><p><img src="img\019_R语言实战\第19章\第19章 017.png" referrerpolicy="no-referrer" alt="第19章 017"></p><ul><li><span>其中var、rowvar和colvar是因子。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 网格图，设置行数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">lattice</span><span class="cm-operator">::</span><span class="cm-variable">singer</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">height</span>)) <span class="cm-operator">+</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_histogram</span>() <span class="cm-operator">+</span> <span class="cm-variable">facet_wrap</span>(<span class="cm-operator">~</span><span class="cm-variable">voice.part</span>,<span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 018.png" alt="第19章 018" style="zoom:67%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 根据性别排成一行</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">carData</span><span class="cm-operator">::</span><span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">yrs.since.phd</span>,<span class="cm-variable">salary</span>,<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>,<span class="cm-variable">shape</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>() <span class="cm-operator">+</span> <span class="cm-variable">facet_grid</span>(<span class="cm-variable">.</span><span class="cm-operator">~</span><span class="cm-variable">sex</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 根据voice.part排成一列</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">lattice</span><span class="cm-operator">::</span><span class="cm-variable">singer</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">height</span>,<span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-variable">voice.part</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_density</span>() <span class="cm-operator">+</span> <span class="cm-variable">facet_grid</span>(<span class="cm-variable">voice.part</span><span class="cm-operator">~</span><span class="cm-variable">.</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第19章\第19章 019.png" referrerpolicy="no-referrer" alt="第19章 019"></th><th><img src="img\019_R语言实战\第19章\第19章 020.png" referrerpolicy="no-referrer" alt="第19章 020"></th></tr></thead><tbody></tbody></table></figure><h4 id='添加光滑曲线'><span>添加光滑曲线</span></h4><ul><li><span>使用</span><strong><span>geom_smooth()</span></strong><span>来添加一系列的平滑曲线和和置信区域。</span></li></ul><p><img src="img\019_R语言实战\第19章\第19章 021.png" referrerpolicy="no-referrer" alt="第19章 021"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 95%置信区间和非参数光滑曲线（loess）（默认）</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span>(<span class="cm-variable">Salaries</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"carData"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">yrs.since.phd</span>,<span class="cm-variable">salary</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_smooth</span>() <span class="cm-operator">+</span> <span class="cm-variable">geom_point</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 022.png" alt="第19章 022" style="zoom: 67%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 按性别拟合二项式回归(x^2)</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">yrs.since.phd</span>,<span class="cm-variable">salary</span>,<span class="cm-variable">linetype</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>,<span class="cm-variable">shape</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_smooth</span>(<span class="cm-variable">method</span> <span class="cm-operator">=</span> <span class="cm-variable">lm</span>,<span class="cm-variable">formula</span> <span class="cm-operator">=</span> <span class="cm-variable">y</span><span class="cm-operator">~</span><span class="cm-variable">poly</span>(<span class="cm-variable">x</span>,<span class="cm-number">2</span>),<span class="cm-variable">se</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>,<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>) <span class="cm-operator">+</span> <span class="cm-variable">geom_point</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 023.png" alt="第19章 023" style="zoom:67%;" /></p><h4 id='修改ggplot2图形的外观'><span>修改ggplot2图形的外观</span></h4><ul><li><span>类似于基本图形里修改</span><strong><span>par()</span></strong><span>的参数，当par()的修改并不影响ggplot2的图形外观。</span></li></ul><h5 id='坐标轴-2'><span>坐标轴</span></h5><p><img src="img\019_R语言实战\第19章\第19章 024.png" referrerpolicy="no-referrer" alt="第19章 024"></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 修改坐标轴的默认设置</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">rank</span>,<span class="cm-variable">salary</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_boxplot</span>() <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 因子（离散值）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_x_discrete</span>(<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"AsstProf"</span>, <span class="cm-string">"AssocProf"</span>, <span class="cm-string">"Prof"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"助理教授"</span>,<span class="cm-string">"副教授"</span>,<span class="cm-string">"教授"</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 连续值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_y_continuous</span>(<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">50000</span>,<span class="cm-number">100000</span>,<span class="cm-number">50000</span>,<span class="cm-number">200000</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"按职位和性别分工资"</span>,<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 025.png" alt="第19章 025" style="zoom: 67%;" /></p><h5 id='图例-2'><span>图例</span></h5><ul><li><span>图例是指出如何用颜色、形状、尺寸等视觉特性表示数据特征的指南。</span></li><li><span>图例的标题通过</span><strong><span>labs()</span></strong><span>函数的</span><strong><span>fill</span></strong><span>参数指定。</span></li><li><span>图例的位置使用</span><strong><span>theme()</span></strong><span>函数的</span><strong><span>legend.position</span></strong><span>指定，可以指定为&quot;left&quot;、&quot;top&quot;、&quot;right&quot;(默认)、bottom或直接指定坐标位置的百分比。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 图例</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"carData"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">rank</span>,<span class="cm-variable">salary</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-variable">sex</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_boxplot</span>() <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_x_discrete</span>(<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"AsstProf"</span>, <span class="cm-string">"AssocProf"</span>, <span class="cm-string">"Prof"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"助理教授"</span>,<span class="cm-string">"副教授"</span>,<span class="cm-string">"教授"</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_y_continuous</span>(<span class="cm-variable">breaks</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">50000</span>, <span class="cm-number">100000</span>, <span class="cm-number">150000</span>, <span class="cm-number">200000</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"50k"</span>,<span class="cm-string">"100k"</span>,<span class="cm-string">"150k"</span>,<span class="cm-string">"200k"</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"按职位和性别分工资"</span>,<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"gender图例标题"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 图例位置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">theme</span>(<span class="cm-variable">legend.position</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">0.2</span>,<span class="cm-number">0.8</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 026.png" alt="第19章 026" style="zoom: 67%;" /></p><ul><li><span>图例的左上角是分别距离左侧边缘20%和底部边缘80%的部分。如果想删除图例，可以使用</span><strong><span>legend.position=&quot;none&quot;</span></strong><span>。</span></li></ul><h5 id='标尺'><span>标尺</span></h5><ul><li><span>ggplot2包使用</span><strong><span>标尺</span></strong><span>把数据空间的观察值映射到可视化的空间中。标尺既可以应用到连续的变量，也可以应用到离散的变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 标尺</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">mtcars</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">wt</span>,<span class="cm-variable">mpg</span>,<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-variable">disp</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">shape</span> <span class="cm-operator">=</span> <span class="cm-number">21</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"black"</span>,<span class="cm-variable">fill</span> <span class="cm-operator">=</span> <span class="cm-string">"skyblue"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-string">"Weight"</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-string">"Miles Per Gallon"</span>,<span class="cm-variable">title</span> <span class="cm-operator">=</span> <span class="cm-string">"气泡图"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-string">"标尺的标题文字"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 027.png" alt="第19章 027" style="zoom:67%;" /></p><ul><li><span>可以使用标尺将带有因子水平的视觉线索(如颜色、形状、线条类型尺寸和透明度) 关联起来。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 设置三个学术等级的颜色</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>,<span class="cm-variable">aes</span>(<span class="cm-variable">yrs.since.phd</span>,<span class="cm-variable">salary</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-variable">rank</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_color_manual</span>(<span class="cm-variable">values</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"red"</span>,<span class="cm-string">"blue"</span>,<span class="cm-string">"green"</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 028.png" alt="第19章 028" style="zoom:67%;" /></p><ul><li><strong><span>scale_color_brewer()</span></strong><span>和</span><strong><span>scale_fill_brewer()</span></strong><span> 函数来预先指定颜色集。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 设置颜色集</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">yrs.since.phd</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-variable">salary</span>, <span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">scale_color_brewer</span>(<span class="cm-variable">palette</span><span class="cm-operator">=</span><span class="cm-string">"Accent"</span>) <span class="cm-operator">+</span> <span class="cm-variable">geom_point</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">2</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 029.png" alt="第19章 029" style="zoom:67%;" /></p><ul><li><strong><span>palette=&quot;Accent&quot;</span></strong><span>修改为其他的值，可以改为其他颜色集（第一部分-第3章-颜色）</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获得可用的颜色集</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">RColorBrewer</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">display.brewer.all</span>() </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><h5 id='主题'><span>主题</span></h5><ul><li><strong><span>theme()</span></strong><span>函数中的选项可以让我们调整字体、背景、颜色和网格线等。可以将主题保存起来，应用于多个图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 主题</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">data</span>(<span class="cm-variable">Salaries</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"carData"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mytheme</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">theme</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 图片标题：斜粗字体，14号，棕色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">plot.title</span><span class="cm-arg-is">=</span><span class="cm-variable">element_text</span>(<span class="cm-variable">face</span><span class="cm-operator">=</span><span class="cm-string">"bold.italic"</span>,<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-string">"14"</span>, <span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"brown"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># x、y轴标签</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">axis.title</span><span class="cm-arg-is">=</span><span class="cm-variable">element_text</span>(<span class="cm-variable">face</span><span class="cm-operator">=</span><span class="cm-string">"bold.italic"</span>,<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">10</span>, <span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"brown"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 坐标轴刻度文字</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">axis.text</span><span class="cm-arg-is">=</span><span class="cm-variable">element_text</span>(<span class="cm-variable">face</span><span class="cm-operator">=</span><span class="cm-string">"bold"</span>, <span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">9</span>,<span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 图形显示区域的背景（不是整个图的背景）,fill为背景填充色，color为外框颜色</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.background</span><span class="cm-arg-is">=</span><span class="cm-variable">element_rect</span>(<span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-string">"skyblue"</span>,<span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"green"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 主横（y轴）网格线，指定为实线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.grid.major.y</span><span class="cm-arg-is">=</span><span class="cm-variable">element_line</span>(<span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"black"</span>,<span class="cm-variable">linetype</span><span class="cm-operator">=</span><span class="cm-number">1</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 副网格线，指定为虚线</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.grid.minor.y</span><span class="cm-arg-is">=</span><span class="cm-variable">element_line</span>(<span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"white"</span>,<span class="cm-variable">linetype</span><span class="cm-operator">=</span><span class="cm-number">2</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 竖网格线（x轴）不显示</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.grid.minor.x</span><span class="cm-arg-is">=</span><span class="cm-variable">element_blank</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">legend.position</span><span class="cm-arg-is">=</span><span class="cm-string">"top"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-variable">salary</span>, <span class="cm-variable">fill</span><span class="cm-operator">=</span><span class="cm-variable">sex</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_boxplot</span>() <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Salary by Rank and Sex"</span>, <span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-string">"Rank"</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-string">"Salary"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mytheme</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 624px;"></div><div class="CodeMirror-gutters" style="display: none; height: 624px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 030.png" alt="第19章 030" style="zoom:67%;" /></p><h5 id='多重图'><span>多重图</span></h5><ul><li><span>类似于基本绘图中的</span><strong><span>mfrow</span></strong><span>和</span><strong><span>layout()</span></strong></li><li><span>使用</span><strong><span>gridExtra</span></strong><span>包里的</span><strong><span>grid.arrange()</span></strong><span>函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 多重图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"gridExtra"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">gridExtra</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">rank</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_bar</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">sex</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_bar</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p3</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">Salaries</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">yrs.since.phd</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-variable">salary</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_point</span>() </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 默认每个图形为一行</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">grid.arrange</span>(<span class="cm-variable">p1</span>,<span class="cm-variable">p2</span>,<span class="cm-variable">p3</span>,<span class="cm-variable">ncol</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><p><img src="img\019_R语言实战\第19章\第19章 031.png" alt="第19章 031" style="zoom:67%;" /></p><h4 id='保存图片'><span>保存图片</span></h4><ul><li><span>使用</span><strong><span>ggsave()</span></strong><span>保存图片，可以使用</span><strong><span>plot</span></strong><span>指定要保持的图片对象，不指定则会保存最近的一个绘图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 保存图形</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myplot</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">mpg</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_histogram</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggsave</span>(<span class="cm-variable">file</span> <span class="cm-operator">=</span> <span class="cm-string">"d:/test.png"</span>,<span class="cm-variable">plot</span> <span class="cm-operator">=</span> <span class="cm-variable">myplot</span>,<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">5</span>,<span class="cm-variable">height</span> <span class="cm-operator">=</span> <span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">mpg</span>)) <span class="cm-operator">+</span> <span class="cm-variable">geom_histogram</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggsave</span>(<span class="cm-variable">file</span><span class="cm-operator">=</span><span class="cm-string">"d:/mygraph.pdf"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>可以保存ps、tex、jpeg、pdf、 tiff、 png、bmp、svg或wmf。</span></li><li><span>图形大小的单位为英寸。</span></li></ul><h3 id='第20章-高级编程'><span>第20章 高级编程</span></h3><h4 id='r语言回顾'><span>R语言回顾</span></h4><ul><li><span>对象的属性通过</span><strong><span>attributes()</span></strong><span>列出，通过</span><strong><span>attr()</span></strong><span>进行设置。使用</span><strong><span>class()</span></strong><span>读取并设置对象的类。</span></li></ul><h5 id='数据类型'><span>数据类型</span></h5><ul><li><span>两种最基本的数据类型：</span><strong><span>原子向量</span></strong><span> ( atomic vector) 和</span><strong><span>泛型向量</span></strong><span> ( generic vector)。</span></li><li><span>原子向量是包含</span><strong><span>单个数据类型</span></strong><span>的数组。 </span></li><li><span>泛型向量也称为列表，是</span><strong><span>原子向量的集合</span></strong><span>。</span></li><li><span>在R中不必声明对象的数据类型或是分配的空间。数据的类型由对象的内容隐式地决定，并且空间的增大或缩小自动取决于对象包含的类型和元素的数目。</span></li></ul><h6 id='原子向量'><span>原子向量</span></h6><ul><li><span>包含单个数据类型( 逻辑类型、实数、复数、字符串或原始类型 )的</span><strong><span>数组</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">passed</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-variable">TRUE</span>, <span class="cm-variable">TRUE</span>, <span class="cm-variable">FALSE</span>, <span class="cm-variable">TRUE</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ages</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">15</span>, <span class="cm-number">18</span>, <span class="cm-number">25</span>, <span class="cm-number">14</span>, <span class="cm-number">19</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cmplxNums</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span><span class="cm-operator">+</span><span class="cm-number">2</span><span class="cm-variable">i</span>, <span class="cm-number">0</span><span class="cm-operator">+</span><span class="cm-number">1</span><span class="cm-variable">i</span>, <span class="cm-number">39</span><span class="cm-operator">+</span><span class="cm-number">3</span><span class="cm-variable">i</span>, <span class="cm-number">12</span><span class="cm-operator">+</span><span class="cm-number">2</span><span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">names</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"Bob"</span>, <span class="cm-string">"Ted"</span>, <span class="cm-string">"Carol"</span>, <span class="cm-string">"Alice"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><strong><span>&quot;raw&quot;</span></strong><span>类型的向量包含原始字节。</span></li><li><span>R没有标量型数据。标量是具有单一元素的原子向量，所以</span><strong><span>k&lt;- 2</span></strong><span>是</span><strong><span>k &lt;- c(2)</span></strong><span> 的简写。</span></li><li><strong><span>矩阵</span></strong><span>是一个具有维度属性( dim) 的原子向量， 含两个元素(行数和列数 )</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 一维矩阵</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">class</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"integer"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 添加 dim 属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">attr</span>(<span class="cm-variable">x</span>,<span class="cm-string">"dim"</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">2</span>,<span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; [,<span class="cm-number">1</span>] [,<span class="cm-number">2</span>] [,<span class="cm-number">3</span>] [,<span class="cm-number">4</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>,] &nbsp; &nbsp;<span class="cm-number">1</span> &nbsp; &nbsp;<span class="cm-number">3</span> &nbsp; &nbsp;<span class="cm-number">5</span> &nbsp; &nbsp;<span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">2</span>,] &nbsp; &nbsp;<span class="cm-number">2</span> &nbsp; &nbsp;<span class="cm-number">4</span> &nbsp; &nbsp;<span class="cm-number">6</span> &nbsp; &nbsp;<span class="cm-number">8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">class</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"matrix"</span> <span class="cm-string">"array"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">attributes</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">dim</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2</span> <span class="cm-number">4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 添加行名和列名 dimnames</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">attr</span>(<span class="cm-variable">x</span>,<span class="cm-string">"dimnames"</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-builtin">list</span>(<span class="cm-variable">c</span>(<span class="cm-string">"r1"</span>,<span class="cm-string">"r2"</span>),<span class="cm-variable">c</span>(<span class="cm-string">"c1"</span>,<span class="cm-string">"c2"</span>,<span class="cm-string">"c3"</span>,<span class="cm-string">"c4"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">c1</span> <span class="cm-variable">c2</span> <span class="cm-variable">c3</span> <span class="cm-variable">c4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">r1</span> &nbsp;<span class="cm-number">1</span> &nbsp;<span class="cm-number">3</span> &nbsp;<span class="cm-number">5</span> &nbsp;<span class="cm-number">7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">r2</span> &nbsp;<span class="cm-number">2</span> &nbsp;<span class="cm-number">4</span> &nbsp;<span class="cm-number">6</span> &nbsp;<span class="cm-number">8</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 删除 dim 属性，重新变为一维数组</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">attr</span>(<span class="cm-variable">x</span>,<span class="cm-string">"dim"</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">class</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"integer"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 702px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><ul><li><strong><span>attr()</span></strong><span> 函数允许你创建任意属性并将其与对象相关联。</span></li><li><span>有很多特定的函数可以用来设置属性,包括</span><strong><span>dim()</span></strong><span>、</span><strong><span>dimnames()</span></strong><span>、</span><strong><span>names()</span></strong><span>、</span><strong><span>row.names()</span></strong><span>、</span><strong><span>class()</span></strong><span>和</span><strong><span>tsp()</span></strong><span>。最后一个函数用来创建时间序列对象。</span></li></ul><h6 id='泛型变量或列表'><span>泛型变量或列表</span></h6><ul><li><p><strong><span>列表</span></strong><span>是原子向量和/或其他列表的集合。</span></p></li><li><p><strong><span>数据框</span></strong><span>是一种特殊的列表，集合中每个原子向量都有相同的长度。</span></p></li><li><p><strong><span>iris</span></strong><span>数据集：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">head</span>(<span class="cm-variable">iris</span>,<span class="cm-number">4</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Sepal.Length</span> <span class="cm-variable">Sepal.Width</span> <span class="cm-variable">Petal.Length</span> <span class="cm-variable">Petal.Width</span> <span class="cm-variable">Species</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">5.1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3.5</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.4</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.2</span> &nbsp;<span class="cm-variable">setosa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4.9</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3.0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.4</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.2</span> &nbsp;<span class="cm-variable">setosa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">3</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4.7</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3.2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.3</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.2</span> &nbsp;<span class="cm-variable">setosa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">4.6</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">3.1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-number">1.5</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-number">0.2</span> &nbsp;<span class="cm-variable">setosa</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><span>有一个变量名字符串向量的</span><strong><span>names</span></strong><span>属性，一个</span><strong><span>row.names</span></strong><span>属性，和一个data.frame值的</span><strong><span>class</span></strong><span>属性。</span></p></li><li><p><span>使用</span><strong><span>unclass()</span></strong><span>可以获得各变量、各属性值的值所组成的</span><strong><span>list</span></strong></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取各属性值的值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">lapply</span>(<span class="cm-variable">unclass</span>(<span class="cm-variable">iris</span>), <span class="cm-variable">head</span>,<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Sepal.Length</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">5.1</span> <span class="cm-number">4.9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Sepal.Width</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">3.5</span> <span class="cm-number">3.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Petal.Length</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">1.4</span> <span class="cm-number">1.4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Petal.Width</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.2</span> <span class="cm-number">0.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Species</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-variable">setosa</span> <span class="cm-variable">setosa</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Levels</span><span class="cm-operator">:</span> <span class="cm-variable">setosa</span> <span class="cm-variable">versicolor</span> <span class="cm-variable">virginica</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取属性值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">attributes</span>(<span class="cm-variable">iris</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">names</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Sepal.Length"</span> <span class="cm-string">"Sepal.Width"</span> &nbsp;<span class="cm-string">"Petal.Length"</span> <span class="cm-string">"Petal.Width"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">5</span>] <span class="cm-string">"Species"</span> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">class</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"data.frame"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator cm-dollar">$</span><span class="cm-variable">row.names</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  [<span class="cm-number">1</span>] &nbsp; <span class="cm-number">1</span> &nbsp; <span class="cm-number">2</span> &nbsp; <span class="cm-number">3</span> &nbsp; <span class="cm-number">4</span> &nbsp; <span class="cm-number">5</span> &nbsp; <span class="cm-number">6</span> &nbsp; <span class="cm-number">7</span> &nbsp; <span class="cm-number">8</span> &nbsp; <span class="cm-number">9</span> &nbsp;<span class="cm-number">10</span> &nbsp;<span class="cm-number">11</span> &nbsp;<span class="cm-number">12</span> &nbsp;<span class="cm-number">13</span> &nbsp;<span class="cm-number">14</span> &nbsp;<span class="cm-number">15</span> &nbsp;<span class="cm-number">16</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">........</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">145</span>] <span class="cm-number">145</span> <span class="cm-number">146</span> <span class="cm-number">147</span> <span class="cm-number">148</span> <span class="cm-number">149</span> <span class="cm-number">150</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 624px;"></div><div class="CodeMirror-gutters" style="display: none; height: 624px;"></div></div></div></pre><h6 id='索引'><span>索引</span></h6><ul><li><span>[]、[[]]、$</span></li></ul><h5 id='控制结构'><span>控制结构</span></h5><ul><li><span>for()</span></li><li><span>if()</span></li><li><span>ifelse()</span></li><li><span>while()</span></li><li><span>repeat()</span></li><li><span>switch()</span></li><li><span>创建一个指定长度的空数组：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 创建一个指定长度的空数组</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">vector</span>(<span class="cm-variable">mode</span> <span class="cm-operator">=</span> <span class="cm-string">"character"</span>,<span class="cm-variable">length</span> <span class="cm-operator">=</span> <span class="cm-variable">length</span>(<span class="cm-variable">x</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span> <span class="cm-string">""</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><h5 id='创建函数'><span>创建函数</span></h5><ul><li><p><span>在R中处处是函数。算数运算符+、-、/和*实际上也是函数。例如，</span><strong><span>2 + 2</span></strong><span>等价于</span><strong><span>&quot;+&quot;(2，2)</span></strong><span>。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-string">"+"</span>(<span class="cm-number">2</span>,<span class="cm-number">2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">4</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">functionname</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">parameters</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">statements</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-builtin">return</span>(<span class="cm-variable">value</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><p><span>return()返回值是可选的，如果省略，默认返回最后一条语句的结果。</span></p></li><li><p><strong><span>args()</span></strong><span>函数来观测参数的名字和默认值：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">args</span>(<span class="cm-string">"+"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> (<span class="cm-variable">e1</span>, <span class="cm-variable">e2</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">NULL</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">f</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-number">1</span>,<span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-number">2</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; <span class="cm-builtin">return</span>(<span class="cm-variable">x</span><span class="cm-operator">+</span><span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">args</span>(<span class="cm-variable">f</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> (<span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>, <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">NULL</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre></li><li><p><strong><span>formals()</span></strong><span>获取参数名称和默认值</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取参数和默认值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">f1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>,<span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>) <span class="cm-variable">x</span><span class="cm-operator">+</span><span class="cm-variable">y</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">formals</span>(<span class="cm-variable">f1</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>参数是按值传递的，而不是按地址传递。需要形成一个副本然后传递给函数。如果数据集很大的话内存(RAM)可能被迅速用完。</span></p></li><li><p><span>局部对象执行结束后就失效了，只有通过</span><strong><span>return()</span></strong><span>或</span><strong><span>&lt;&lt;-</span></strong><span>的变量才可以保存。</span></p></li><li><p><span>全局对象可以在局部之内访问（如函数内）但无法修改值，除非使用</span><strong><span>&lt;&lt;-</span></strong><span>。</span></p></li></ul><h4 id='环境'><span>环境</span></h4><ul><li><span>环境包括</span><strong><span>框架</span></strong><span>和</span><strong><span>外壳</span></strong><span>。</span><strong><span>框架</span></strong><span>是符号 - 值(对象名称及其内容 )的集合，</span><strong><span>外壳</span></strong><span>是指向封闭环境的一个指针。封闭环境也称为父环境。</span></li><li><span>可以使用</span><strong><span>new.env()</span></strong><span>创建一个新的环境，通过</span><strong><span>assign()</span></strong><span>在环境中创建任务，对象的值通过</span><strong><span>get()</span></strong><span>从环境中获得。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 环境</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">myenv</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">new.env</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">a</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"a"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">assign</span>(<span class="cm-string">"x"</span>,<span class="cm-string">"新环境中x的值"</span>,<span class="cm-variable">env</span><span class="cm-operator">=</span><span class="cm-variable">myenv</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取当前环境中的变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ls</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"a"</span> &nbsp; &nbsp; <span class="cm-string">"myenv"</span> <span class="cm-string">"x"</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取myenv中的变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ls</span>(<span class="cm-variable">myenv</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"x"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取指定环境中的对象值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">get</span>(<span class="cm-string">"x"</span>,<span class="cm-variable">env</span> <span class="cm-operator">=</span> <span class="cm-variable">myenv</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"新环境中x的值"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 416px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><ul><li><span>可以使用</span><strong><span>$</span></strong><span>为环境中的变量赋值：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># $ 赋值</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">myenv</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">get</span>(<span class="cm-string">"y"</span>,<span class="cm-variable">env</span> <span class="cm-operator">=</span> <span class="cm-variable">myenv</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">1000</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>使用</span><strong><span>parent.env()</span></strong><span>查看父环境：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 父环境</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">parent.env</span>(<span class="cm-variable">myenv</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">environment</span><span class="cm-operator">:</span> <span class="cm-variable">R_GlobalEnv</span><span class="cm-operator">&gt;</span> <span class="cm-comment"># R语言的全局环境</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>因为函数是对象，所以它们也有环境。</span></li><li><span>闭包：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 闭包</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 在函数内创建函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 删除前后p%的数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trim</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">p</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">trimit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">length</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">lo</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">floor</span>(<span class="cm-variable">n</span><span class="cm-operator">*</span><span class="cm-variable">p</span>) <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">hi</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">n</span> <span class="cm-operator">+</span> <span class="cm-number">1</span> <span class="cm-operator">-</span> <span class="cm-variable">lo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sort.int</span>(<span class="cm-variable">x</span>, <span class="cm-variable">partial</span> <span class="cm-operator">=</span> <span class="cm-variable">unique</span>(<span class="cm-variable">c</span>(<span class="cm-variable">lo</span>, <span class="cm-variable">hi</span>)))[<span class="cm-variable">lo</span><span class="cm-operator">:</span><span class="cm-variable">hi</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">return</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">trimit</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 前后10%</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">trim0.1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">trim</span>(<span class="cm-number">0.1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">trim0.1</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">2</span> <span class="cm-number">3</span> <span class="cm-number">4</span> <span class="cm-number">5</span> <span class="cm-number">6</span> <span class="cm-number">7</span> <span class="cm-number">8</span> <span class="cm-number">9</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 前后20%</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">trim</span>(<span class="cm-number">0.2</span>)(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">3</span> <span class="cm-number">4</span> <span class="cm-number">5</span> <span class="cm-number">6</span> <span class="cm-number">7</span> <span class="cm-number">8</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">ls</span>(<span class="cm-variable">environment</span>(<span class="cm-variable">trim0.1</span>))</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"p"</span> &nbsp; &nbsp; &nbsp;<span class="cm-string">"trimit"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">get</span>(<span class="cm-string">"p"</span>,<span class="cm-variable">env</span> <span class="cm-operator">=</span> <span class="cm-variable">environment</span>(<span class="cm-variable">trim0.1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-number">0.1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>一般情况下，对象的值是从本地环境中获得的。如果未在局部环境中找到对象，R会在父环境中搜索，然后是父环境的父环境，直到对象被发现。如果R搜索到空环境仍未搜索到对象，它会抛出一个错误。我们把它称为词法域 ( lexical scoping )。</span></li></ul><h4 id='面向对象的编程'><span>面向对象的编程</span></h4><ul><li><span>R是一个基于使用</span><strong><span>泛型函数</span></strong><span>的面向对象的编程语言。每个对象有一个类属性，这个类属性决定当对象的副本传递到类似于print ()、plot ()和summary()这些泛型函数时运行什么代码。</span></li><li><span>R有两个分离的面向对象编程的模型。</span><strong><span>S3</span></strong><span>模型相对更老、更简单、结构更少。</span><strong><span>S4</span></strong><span>模型更新目更复杂。S3方法容易使用并且在R中有最多的应用。我们将主要集中讨论S3模型。</span></li></ul><h5 id='泛型函数'><span>泛型函数</span></h5><ul><li><span>R使用对象的类来确定当一个泛型函数被调用时采取什么样的行动。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summary</span>(<span class="cm-variable">women</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fit</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">lm</span>(<span class="cm-variable">weight</span> <span class="cm-operator">~</span> <span class="cm-variable">height</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">women</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summary</span>(<span class="cm-variable">fit</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> (<span class="cm-variable">object</span>, <span class="cm-keyword">...</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">UseMethod</span>(<span class="cm-string">"summary"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">bytecode</span><span class="cm-operator">:</span> <span class="cm-number">0x000001380388cd00</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">environment</span><span class="cm-operator">:</span> <span class="cm-variable">namespace</span><span class="cm-operator">:</span><span class="cm-variable">base</span><span class="cm-operator">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">class</span>(<span class="cm-variable">women</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"data.frame"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">class</span>(<span class="cm-variable">fit</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"lm"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><ul><li><span>如果函数</span><strong><span>summary.data.frame(women)</span></strong><span>存在，</span><strong><span>summary(women)</span></strong><span>函数执行</span><strong><span>summary.dataframe(women)</span></strong><span>，否则执行</span><strong><span>summary.default(women)</span></strong><span>。同样，如果</span><strong><span>summary.m(fit)</span></strong><span>存在</span><strong><span>summary(fit)</span></strong><span>函数执行</span><strong><span>summary.Im(fit)</span></strong><span>，否则执行</span><strong><span>summary.default(fit)</span></strong><span>。</span><strong><span>UseMethod()</span></strong><span>函数将对象分派给一个泛型函数，前提是该泛型函数有扩展与对象的类匹配。</span></li><li><strong><span>methods</span></strong><span>，获取泛型函数：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 获取泛型函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">methods</span>(<span class="cm-variable">summary</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-variable">summary.aov</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">summary.aovlist</span><span class="cm-operator">*</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">..........</span> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">35</span>] <span class="cm-variable">summary.table</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">summary.tukeysmooth</span><span class="cm-operator">*</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">37</span>] <span class="cm-variable">summary.warnings</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">see</span> <span class="cm-string">'?methods'</span> <span class="cm-keyword">for</span> <span class="cm-variable">accessing</span> <span class="cm-variable">help</span> <span class="cm-variable">and</span> <span class="cm-variable">source</span> <span class="cm-variable">code</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><ul><li><span>通过直接去掉函数的括号查看函数的代码，不可见函数后面有星号（*），此时可以通过</span><strong><span>getAnywhere()</span></strong><span>来查看。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary.aov</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> (<span class="cm-variable">object</span>, <span class="cm-variable">intercept</span> <span class="cm-operator">=</span> <span class="cm-variable">FALSE</span>, <span class="cm-variable">split</span>, <span class="cm-variable">expand.split</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">keep.zero.df</span> <span class="cm-operator">=</span> <span class="cm-variable">TRUE</span>, <span class="cm-keyword">...</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">..........</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">bytecode</span><span class="cm-operator">:</span> <span class="cm-number">0x000001387e1c2190</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">environment</span><span class="cm-operator">:</span> <span class="cm-variable">namespace</span><span class="cm-operator">:</span><span class="cm-variable">stats</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary.aovlist</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span><span class="cm-operator">:</span> <span class="cm-variable">object</span> <span class="cm-string">'summary.aovlist'</span> <span class="cm-variable">not</span> <span class="cm-variable">found</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">getAnywhere</span>(<span class="cm-variable">summary.aovlist</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">..........</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> (<span class="cm-variable">object</span>, <span class="cm-keyword">...</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">.......</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">bytecode</span><span class="cm-operator">:</span> <span class="cm-number">0x000001380b67cf40</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">environment</span><span class="cm-operator">:</span> <span class="cm-variable">namespace</span><span class="cm-operator">:</span><span class="cm-variable">stats</span><span class="cm-operator">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><ul><li><span>自定义泛型函数：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 自定义泛型函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>,<span class="cm-keyword">...</span>) <span class="cm-variable">UseMethod</span>(<span class="cm-string">"mymed"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed.ca</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>) <span class="cm-variable">print</span>(<span class="cm-string">"A类的泛型函数"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed.cb</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>) <span class="cm-variable">print</span>(<span class="cm-string">"B类的泛型函数"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed.default</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>) <span class="cm-variable">print</span>(<span class="cm-string">"默认的泛型函数"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">11</span><span class="cm-operator">:</span><span class="cm-number">20</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">z</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">21</span><span class="cm-operator">:</span><span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span>(<span class="cm-variable">x</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"ca"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span>(<span class="cm-variable">y</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"cb"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed</span>(<span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed</span>(<span class="cm-variable">z</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 从左到右找打第一个可以使用的泛型函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class</span>(<span class="cm-variable">z</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"cc"</span>,<span class="cm-string">"ca"</span>,<span class="cm-string">"cb"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mymed</span>(<span class="cm-variable">z</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><h5 id='s3模型的限制'><span>S3模型的限制</span></h5><ul><li><span>S3对象模型的主要限制是，任意的类能被分配到任意的对象上。没有完整性检验。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">class</span>(<span class="cm-variable">women</span>) <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"lm"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">summary</span>(<span class="cm-variable">women</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Error</span> <span class="cm-keyword">in</span> <span class="cm-keyword">if</span> (<span class="cm-variable">p</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>) { <span class="cm-operator">:</span> <span class="cm-variable">argument</span> <span class="cm-variable">is</span> <span class="cm-variable">of</span> <span class="cm-variable">length</span> <span class="cm-variable">zero</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>S4面向对象编程的模型更加正式、严格，旨在克服由S3方法的结构化程度较低引起的困难。在S4方法中，类被定义为具有包含特定类型信息(也就是输人的变量)的槽的抽象对象。对象和方法构造在强制执行的规则内被正式定义。</span></li></ul><h4 id='编写有效的代码'><span>编写有效的代码</span></h4><ul><li><p><span>提高运行效率：</span></p><ol start='' ><li><span>程序只读取需要的数据</span></li><li><span>尽可能使用矢量化替代循环</span></li><li><span>创建大小正确的对象，而不是反复调整</span></li><li><span>使用并行来处理重复、独立的任务</span></li></ol></li></ul><h5 id='有效的数据输入'><span>有效的数据输入</span></h5><ul><li><span>使用</span><strong><span>read.table()</span></strong><span>函数从含有分隔符的文本文件中读取数据的时候，你可以通过指定所需的变量和它们的类型实现显著的速度提升。这可以通过包含</span><strong><span>colClasses</span></strong><span>参数的函数来实现。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 快</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">my.data.frame</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(<span class="cm-variable">mytextfile</span>, <span class="cm-variable">header</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">','</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">colClasses</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"numeric"</span>, <span class="cm-string">"numeric"</span>, <span class="cm-string">"character"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-atom">NULL</span>, <span class="cm-string">"numeric"</span>, <span class="cm-atom">NULL</span>, <span class="cm-string">"character"</span>, <span class="cm-atom">NULL</span>, <span class="cm-atom">NULL</span>, <span class="cm-atom">NULL</span>)) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 慢</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">my.data.frame</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">read.table</span>(<span class="cm-variable">mytextfile</span>, <span class="cm-variable">header</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">','</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><h5 id='矢量化'><span>矢量化</span></h5><ul><li><span>这里的矢量化意味着使用R中的函数，这些函数旨在以高度优化的方法处理向量。</span></li><li><strong><span>ifelse()</span></strong><span>、</span><strong><span>colsums()</span></strong><span>、</span><strong><span>rowSums()</span></strong><span>、</span><strong><span>rowMeans()</span></strong></li><li><strong><span>matrixStats</span></strong><span>包提供了很多进行其他计算的优化函数，句括计数求和、乘积、集中趋势和分散性、分位数、等级和分级的措施。</span></li><li><strong><span>plyr</span></strong><span>、</span><strong><span>dplyr</span></strong><span>、</span><strong><span>reshape2</span></strong><span>和</span><strong><span>data.table</span></strong><span>等包也提供了高度优化的函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 10,000,000 x 10的矩阵</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mat</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">rnorm</span>(<span class="cm-number">10000000</span>),<span class="cm-variable">nc</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mysum</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment"># 创建一个默认值填充的数组（全0数组）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">sums</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">numeric</span>(<span class="cm-variable">ncol</span>(<span class="cm-variable">x</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">ncol</span>(<span class="cm-variable">x</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span>(<span class="cm-variable">j</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">nrow</span>(<span class="cm-variable">x</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">sums</span>[<span class="cm-variable">i</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">sums</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">x</span>[<span class="cm-variable">j</span>,<span class="cm-variable">i</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">return</span>(<span class="cm-variable">sums</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 自定义函数的运行时间</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-variable">mysum</span>(<span class="cm-variable">mat</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.54</span> <span class="cm-number">0.00</span> <span class="cm-number">0.79</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 矢量化的运行时间</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-variable">colSums</span>(<span class="cm-variable">mat</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.02</span> <span class="cm-number">0.00</span> <span class="cm-number">0.02</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><strong><span>system.time()</span></strong><span> 函数可以用于确定CPU的数量和运行该函数所需的真实时间。</span></li></ul><h5 id='大小正确的对象'><span>大小正确的对象</span></h5><ul><li><span>与从一个较小的对象开始，然后通过附加值使其增大相比，初始化对象到所需的最终大小再填写值更加高效。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 大小正确的对象</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 逐步扩大变量</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">k</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1000000</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">rnorm</span>(<span class="cm-variable">k</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">k</span>) <span class="cm-variable">y</span>[<span class="cm-variable">i</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x</span>[<span class="cm-variable">i</span>]<span class="cm-operator">^</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.11</span> <span class="cm-number">0.04</span> <span class="cm-number">0.23</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 初始化到所需的大小</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">numeric</span>(<span class="cm-variable">length</span> <span class="cm-operator">=</span> <span class="cm-variable">k</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">k</span>) <span class="cm-variable">y</span>[<span class="cm-variable">i</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x</span>[<span class="cm-variable">i</span>]<span class="cm-operator">^</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.04</span> <span class="cm-number">0.00</span> <span class="cm-number">0.06</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 不适用循环，直接矢量化</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">numeric</span>(<span class="cm-variable">length</span> <span class="cm-operator">=</span> <span class="cm-variable">k</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-variable">y</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">x</span><span class="cm-operator">^</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span> &nbsp; &nbsp;<span class="cm-number">0</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><h5 id='并行化'><span>并行化</span></h5><ul><li><span>并行化包括分配一个任务，在两个或多个核同时运行组块，并把结果合在一起。</span></li><li><span>可以使用</span><strong><span>foreach</span></strong><span>和</span><strong><span>doParallel</span></strong><span>包的并行化。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># install.packages(c("foreach","doParallel"))</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">foreach</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">doParallel</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 设置8核</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">registerDoParallel</span>(<span class="cm-variable">cores</span><span class="cm-operator">=</span><span class="cm-number">8</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">eig</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">n</span>, <span class="cm-variable">p</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">matrix</span>(<span class="cm-variable">rnorm</span>(<span class="cm-number">100000</span>), <span class="cm-variable">ncol</span><span class="cm-operator">=</span><span class="cm-number">100</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">r</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">cor</span>(<span class="cm-variable">x</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">eigen</span>(<span class="cm-variable">r</span>)<span class="cm-operator cm-dollar">$</span><span class="cm-variable">values</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">n</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">1000000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">100</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">k</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-number">500</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 顺序运算</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">foreach</span>(<span class="cm-variable">i</span><span class="cm-operator">=</span><span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">k</span>, <span class="cm-variable">.combine</span><span class="cm-operator">=</span><span class="cm-variable">rbind</span>) <span class="cm-operator cm-variable-2">%do%</span> <span class="cm-variable">eig</span>(<span class="cm-variable">n</span>, <span class="cm-variable">p</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">4.76</span> <span class="cm-number">0.22</span> <span class="cm-number">7.25</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-comment"># 并行运算</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">system.time</span>(<span class="cm-variable">x</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">foreach</span>(<span class="cm-variable">i</span><span class="cm-operator">=</span><span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">k</span>, <span class="cm-variable">.combine</span><span class="cm-operator">=</span><span class="cm-variable">rbind</span>) <span class="cm-operator cm-variable-2">%dopar%</span> <span class="cm-variable">eig</span>(<span class="cm-variable">n</span>, <span class="cm-variable">p</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">用户 系统 流逝 </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-number">0.09</span> <span class="cm-number">0.03</span> <span class="cm-number">1.22</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><h4 id='调试'><span>调试</span></h4><ul><li><p><span>调试是寻找和减少一个程序中错误或缺陷数目的过程。</span></p></li><li><p><span>错误的常见原因：</span></p><ol start='' ><li><span>对象名称拼写错误，或是对象不存在。</span></li><li><span>函数调用参数时设定错误。</span></li><li><span>对象的内容不是用户期望的结果。尤其是当把NULL或者含有Nan或NA值的对象传递给不0能处理它们的函数时，错误经常发生。</span></li></ol></li></ul><h5 id='调试工具'><span>调试工具</span></h5><p><img src="img\019_R语言实战\第20章\第20章 001.png" referrerpolicy="no-referrer" alt="第20章 001"></p><ul><li><strong><span>debug()</span></strong><span>函数标记一个函数进行调试。当执行函数时，</span><strong><span>browser()</span></strong><span> 函数被调用并允许你单步每次调试一行函数。</span><strong><span>undebug()</span></strong><span> 函数会关闭调试功能，让函数正常执行。你可以使用</span><strong><span>trace()</span></strong><span>函数临时在函数中插人调试代码。</span></li><li><span>如果一个函数调用其他函数，它很难确定错误发生在哪儿。在这种情况下，出现错误后立即执行</span><strong><span>traceback()</span></strong><span>函数将会列出导致错误的调用函数序列。</span></li><li><span>实例：</span><strong><span>mad()</span></strong><span> 函数计算一个数值向量的中位数绝对偏差。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># mad()</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 获取形参列表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">args</span>(<span class="cm-variable">mad</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 调试函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">debug</span>(<span class="cm-variable">mad</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mad</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 取消调试，否则以后只有一执行mad()就会进入调试整体</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">undebug</span>(<span class="cm-variable">mad</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><ul><li><span>在执行完debug(mad)后下一次执行mad()便会进入调试。</span></li><li><span>如果存在变量名恰好是类似于n、c、Q等的时候，必须使用print()函数查看值。</span></li><li><span>具体过程参考原书P447</span></li></ul><h5 id='支持调试的会话选项'><span>支持调试的会话选项</span></h5><ul><li><span>通常情况下，当R遇到错误信息时，它会打印错误信息并退出函数。设置</span><strong><span>options(error=traceback)</span></strong><span>之后，一旦错误发生就会打印调用的栈(函数调用导致出错的序列 )。这能帮助你看出哪个函数产生了错误。</span></li><li><span>设置</span><strong><span>options(error=recover)</span></strong><span>也会在出现错误时打印调用的栈。除此之外，它还会提示你选择列表中的一个函数，然后在相应的环境中调用browser()函数。输人c会返回列表，输人0则退出到R提示。</span></li><li><span>使用</span><strong><span>recover()</span></strong><span>模式让你探索从函数调用的序列中选择的任何函数的任意对象的内容。通过有选择地观测对象的内容，你可以频繁地确定问题的来源。要返回至R的默认状态，可以设置</span><strong><span>options(error=NULL)</span></strong><span>。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 设置为recover模式</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">error</span><span class="cm-operator">=</span><span class="cm-variable">recover</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">f</span>(<span class="cm-number">2</span>,<span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">f</span>(<span class="cm-number">2</span>,<span class="cm-operator">-</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">error</span><span class="cm-operator">=</span><span class="cm-atom">NULL</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><ul><li><span>具体过程参考原书P449</span></li></ul><h3 id='第21章-创建包'><span>第21章 创建包</span></h3><ul><li><span>要开发的包名为npar，它提供了非参组间比较的函数。如果结果变量是非正态或者异方差的，这一套分析技术可以用来比较两组或多个组。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pkg</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"npar_1.0.tar.gz"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">loc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"http://www.statmethods.net/RiA"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">url</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">paste</span>(<span class="cm-variable">loc</span>, <span class="cm-variable">pkg</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">"/"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">download.file</span>(<span class="cm-variable">url</span>, <span class="cm-variable">pkg</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-variable">pkg</span>, <span class="cm-variable">repos</span><span class="cm-operator">=</span><span class="cm-atom">NULL</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"source"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><h4 id='非参数分析和npar包'><span>非参数分析和npar包</span></h4><ul><li><span>非参分析是一种数据分析方法，它在传统参数分析的假设( 比如说正态性和同方差 )不成立的情况下特别有用。</span></li><li><span>我们对npar包里的life数据集进行探究。它提供了对2007~2009年美国每个州65岁者的健康预期寿命( HealthyLife Expectancy，HLE 。估计值分别针对男性 (hlem) 和女性(hlef )。HLE数据来自美国疾病控制与预防中心 ( Centers for Disease Control and Prevention ) 的论文(</span><a href='http://mng.bz/HTGD' target='_blank' class='url'>http://mng.bz/HTGD</a><span>)</span></li><li><span>数据集也提供了一个名为region ( 地区) 的变量，此变量分为东北部、中北部、南部和西部。我从R标准安装中的state.region数据框中提取此变量，并添加到所关注的数据集中</span></li><li><span>假设你想知道女性的HLE估值是否在不同地区有显著的不同。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">npar</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 女性的HLE分布</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hist</span>(<span class="cm-variable">life</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">hlef</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"65岁时的健康预期寿命（年）"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"对于女性的健康预期的分布"</span>,<span class="cm-variable">col</span> <span class="cm-operator">=</span> <span class="cm-string">"purple"</span>,<span class="cm-variable">breaks</span> <span class="cm-operator">=</span> <span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 不同地区的HLE分数的方差（并排点图）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">ggplot2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ggplot</span>(<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">life</span>, <span class="cm-variable">aes</span>(<span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-variable">region</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-variable">hlef</span>)) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">geom_point</span>(<span class="cm-variable">size</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">color</span><span class="cm-operator">=</span><span class="cm-string">"darkgrey"</span>) <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">labs</span>(<span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"按地区划分的HLE估计分布"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">x</span><span class="cm-operator">=</span><span class="cm-string">"美国地区"</span>, <span class="cm-variable">y</span><span class="cm-operator">=</span><span class="cm-string">"在65的健康预期寿命"</span>) <span class="cm-operator">+</span> <span class="cm-variable">theme_bw</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第21章\第21章 001.png" referrerpolicy="no-referrer" alt="第21章 001"></th><th><img src="img\019_R语言实战\第21章\第21章 002.png" referrerpolicy="no-referrer" alt="第21章 002"></th></tr></thead><tbody></tbody></table></figure><ul><li><span>因为此数据不符合方差分析的两个重要假设(正态性和同方差性)，因此不使用参数检验。</span></li></ul><h5 id='使用npar包比较分组'><span>使用npar包比较分组</span></h5><ul><li><span>你可以使用npar包比较独立组别的数值型因变量，至少要求它是有序的。</span></li><li><span>综合Kruskal-Wallis检验，检验组间是否有差异。</span></li><li><span>每一组的描述性统计量。</span></li><li><span>事后比较( Wilcoxon秩和检验 ，即每次进行两组之间的比较。检验得到的p值可以调整以进行多重比较。</span></li><li><span>带有注释的并排箱线图，用于可视化不同组别之间的差异。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 用npar包对HLE估值进行比较</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">npar</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">results</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">oneway</span>(<span class="cm-variable">hlef</span> <span class="cm-operator">~</span> <span class="cm-variable">region</span>, <span class="cm-variable">life</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">summary</span>(<span class="cm-variable">results</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">results</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"lightblue"</span>, <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Multiple Comparisons"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"US Region"</span>,<span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Healthy Life Expectancy (years) at Age 65"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第21章\第21章 003.png" alt="第21章 003" style="zoom:67%;" /></p><ul><li><span>oneyway() 函数使用R标准安装的p.adjust() 函数来完成这个功能。p.adjust () 函数用很多种方法的其中一种来对多重比较的p值进行调整。尽管Bonferonni校正可能最广为人知，但是Holm校正更加强大，因此后者被设置为默认选项。</span></li></ul><h4 id='开发包'><span>开发包</span></h4><ul><li><strong><span>npar</span></strong><span>包有四个函数：</span><strong><span>summary.oneway()</span></strong><span>、</span><strong><span>plot.oneway()</span></strong><span>、</span><strong><span>print.oneway()</span></strong><span>和</span><strong><span>oneway()</span></strong><span>。</span><strong><span>oneway()</span></strong><span>是主函数，计算相关的统计量，另外三个是用于输出和画图的S3面向对象泛型函数。</span></li><li><span>一个不错的办法是把每个函数分别放在扩展名为.R的不同文本文件中。尽管这不是严格要求，但是能使你更好地组织工作。此外，尽管并不要求函数名和文件名相同，不过这是一个好的代码习惯。</span></li></ul><h4 id='创建包的文档'><span>创建包的文档</span></h4><ul><li><strong><span>roxygen2</span></strong><span>包能够极大地简化文档的创建过程。你在每一个.R文件的头部放置一段注释作为对应的文档。然后，使用一种简单的标记语言来创建文档。当Roxygen2处理文件的时候，以</span><strong><span># &#39;</span></strong><span>开始的行会被用来自动地生成</span><strong><span>LaTeX</span></strong><span>文档 (.Rd文件 )。</span></li><li><span>标签：</span></li></ul><p><img src="img\019_R语言实战\第21章\第21章 005.png" referrerpolicy="no-referrer" alt="第21章 005"></p><ul><li><span>在创建文档的时候，另外一些标记元素也很有用。标签</span><strong><span>\code{text}</span></strong><span>用代码字体把text打印出来，</span><strong><span>\linkt{function}</span></strong><span>创建一个指向本包或者别处的R函数超级链接。最后，</span><strong><span>\item{text}</span></strong><span>创建一个分项列表。这对于描述函数返回的结果特别有用。</span></li></ul><h4 id='建立包'><span>建立包</span></h4><ul><li><p><strong><span>所需软件包</span></strong><span>：roxygen2</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"roxygen2"</span>, <span class="cm-variable">depend</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>所需软件</span></strong><span>：Rtools、MiLTeX</span></p></li><li><p><strong><span>配置文件夹</span></strong><span>：在R语言的工作目录创建一个名为</span><strong><span>npar</span></strong><span>的文件夹，再创建两个子文件夹</span><strong><span>R</span></strong><span>和</span><strong><span>data</span></strong><span>。把DESCRIPTION文件放在npar文件夹里，并把源代码文件 ( oneway.R、print.R、summary.R、plot.R、life.R和npar.R)放在子文件夹R里。把life.rda文件放在子文件夹data里。</span></p></li></ul><p><img src="img\019_R语言实战\第21章\第21章 006.png" alt="第21章 006" style="zoom:50%;" /></p><ul><li><p><strong><span>生成文档</span></strong><span>：加载</span><strong><span>roxygen2</span></strong><span>包，然后使用</span><strong><span>roxygenize()</span></strong><span>函数处理每一个代码文件头部的文档。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">roxygen2</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">roxygenize</span>(<span class="cm-string">"npar"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>roxygenize()函数创建了一个新的子文件夹</span><strong><span>man</span></strong><span>，这个文件夹内部有与每一个函数对应的</span><strong><span>.Rd</span></strong><span>文档文件。每一个代码文件头部的注释标记都被用于创建这些文档文件。此外，roxygenize()对DESCRIPTION文件添加了信息，也创建了一个</span><strong><span>NAMESPACE</span></strong><span>文件。</span></p></li><li><p><span>为npar创建的NAMESPACE文件：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">S3method</span>(<span class="cm-variable">plot</span>,<span class="cm-variable">oneway</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">S3method</span>(<span class="cm-variable">print</span>,<span class="cm-variable">oneway</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">S3method</span>(<span class="cm-variable">summary</span>,<span class="cm-variable">oneway</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">export</span>(<span class="cm-variable">oneway</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li><li><p><span>NAMESPACE文件控制函数的可视性。( 是所有函数都直接暴露给用户，还是有些函数在内部被其他函数使用?)</span></p></li></ul><p><img src="img\019_R语言实战\第21章\第21章 007.png" alt="第21章 007" style="zoom:50%;" /></p><ul><li><p><strong><span>创建包</span></strong><span>：npar_1.0.tar.gz</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">system</span>(<span class="cm-string">"R CMD build npar"</span>) </span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><span>Windows创建.zip文件：npar_1.0.zip</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">system</span>(<span class="cm-string">"Rcmd INSTALL --build npar"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>检查包</span></strong><span>：（可选）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">system</span>(<span class="cm-string">"R CMD check npar"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>该语句在当前工作目录中创建了一个名为</span><strong><span>npar.Rcheck</span></strong><span>的文件夹。这个文件夹里有个名为</span><strong><span>00.check.log</span></strong><span>的文件，描述了检查的结果。</span></p><p><span>这个文件夹也包含一个名为</span><strong><span>npar-EX.R</span></strong><span>的文件，其内容是所有文档列出的示例代码。</span><strong><span>npar-EX.out</span></strong><span>的内容是运行示例代码所得到的文字输出。如果示例代码创建了图像(这个案例是创建了图像的)，则它们被放置在</span><strong><span>npar-Ex.pdf</span></strong><span>中。</span></p></li><li><p><strong><span>创建pdf文件</span></strong><span>：（可选）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">system</span>(<span class="cm-string">"R CMD Rd2pdf npar"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>本地安装包</span></strong><span>：（可选）</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9948px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">system</span>(<span class="cm-string">"R CMD INSTALL npar"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 或</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-variable">paste</span>(<span class="cm-variable">getwd</span>(),<span class="cm-string">"/npar_1.0.tar.gz"</span>,<span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-string">""</span>),<span class="cm-variable">repos</span><span class="cm-operator">=</span><span class="cm-atom">NULL</span>, <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"source"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>删除软件包：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">detach</span>(<span class="cm-variable">package</span><span class="cm-operator">:</span><span class="cm-variable">npar</span>, <span class="cm-variable">unload</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">remove.packages</span>(<span class="cm-string">"npar"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>上传到CRAN（可选）</span></p></li></ul><h3 id='第22章-创建动态报告'><span>第22章 创建动态报告</span></h3><h4 id='用模板生成报告'><span>用模板生成报告</span></h4><ul><li><span>四种类型的模版：</span><strong><span>R Markdown模版</span></strong><span>、</span><strong><span>ODT模版</span></strong><span>、</span><strong><span>DOCX模版</span></strong><span>和</span><strong><span>LaTex模版</span></strong><span>。R Markdown模版能够用来生成HTML、PDF和Microsoft Word文档。ODT和DOCX模版分别用于生成Open Document和Microsoft Word文档。LaTeX模版则能生成出版水平的PDF文档，包括报告文章和图书。</span></li></ul><h4 id='markdown创建动态报告'><span>markdown创建动态报告</span></h4><ul><li><p><span>软件包：</span></p><ul><li><strong><span>rmarkdown</span></strong></li><li><strong><span>xtable</span></strong><span>：这个包中的</span><strong><span>xtable()</span></strong><span> 函数用美观的方式格式化报告中的数据框和矩阵。xtable()也可以对lm()、glm()、aov()、table()、ts ()和coxph()返回的对象进行格式化。载入这个包后，可以用</span><strong><span>methods(xtable)</span></strong><span>来查看它能格式化的所有对象列表。</span></li><li><strong><span>Pandoc</span></strong><span>：它可以把一种标记格式的文件转换成另外一种标记格式。</span></li><li><span>生成PDF：安装latex编译器，Windows用户安装 MiKTeX、Mac用户安装 MacTeX 、Linux用户安装TeXLive。</span></li></ul></li><li><p><span>生成html文档：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">rmarkdown</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">render</span>(<span class="cm-string">"women.Rmd"</span>, <span class="cm-string">"html_document"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第22章\第22章 001.png" referrerpolicy="no-referrer" alt="第22章 001"></p><ul><li><span>代码块选项：</span><span>`</span><span>`</span><span>`</span><span>{r options}```：</span></li></ul><p><img src="img\019_R语言实战\第22章\第22章 002.png" referrerpolicy="no-referrer" alt="第22章 002"></p><ul><li><p><span>将xtable对象输出为一个HTML表格：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">xtable.comment</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>) <span class="cm-comment"># 省略多余的信息</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">print</span>(<span class="cm-variable">xtable</span>(<span class="cm-variable">sfit</span>), <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"html"</span>, <span class="cm-variable">html.table.attributes</span><span class="cm-operator">=</span><span class="cm-string">"border=0"</span>) <span class="cm-comment"># 移除表格线</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 输出为PDF</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">print</span>(<span class="cm-variable">xtable</span>(<span class="cm-variable">sfit</span>), <span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"latex"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>生成PDF：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">rmarkdown</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">render</span>(<span class="cm-string">"women.Rmd"</span>, <span class="cm-string">"pdf_document"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>输出word：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">rmarkdown</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">render</span>(<span class="cm-string">"women.Rmd"</span>, <span class="cm-string">"word_document"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><h4 id='latex创建动态报告'><span>LaTeX创建动态报告</span></h4><ul><li><p><span>使用</span><strong><span>kniter</span></strong><span>包。</span></p></li><li><p><span>需要首先新建一个文本文档(文件扩展名一般为.Rnw)。这个文本文档包含报告文字、LaTeX标记代码和R代码块。每个R代码块以分隔符</span><strong><span>&lt;</span><span>&lt;</span><span>options&gt;&gt;=</span></strong><span>开始，以分隔符</span><strong><span>@</span></strong><span>结束。表22-3列出了代码块的选项。行内R代码可用</span><strong><span>\Sexpr{R code)</span></strong><span> 来包含。</span></p></li><li><p><span>生成LaTeX文档：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">knitr</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">knit</span>(<span class="cm-string">"drugs.Rnw"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 输出文件drugs.tex</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>接着使用LaTeX编译器，生成所需格式的文件。</span></p></li><li><p><span>直接使用R语言生成pdf文件：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">knitr</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">knit2pdf</span>(<span class="cm-string">"drugs.Rnw"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul><h4 id='使用open-document创建动态报告'><span>使用Open Document创建动态报告</span></h4><ul><li><p><span>Open Document Format for Ofice Applications (ODF)是一种开源的、基于XML的文件格式它和很多软件套件相兼容。</span></p></li><li><p><strong><span>odfWeave</span></strong><span>包提供了将R语言的代码输出结果输出到Open Document。</span></p></li><li><p><span>创建</span><strong><span>.odt</span></strong><span>文件</span></p></li><li><p><span>R语言代码位置：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&lt;&lt;</span><span class="cm-variable">options</span><span class="cm-operator">&gt;&gt;=</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">R</span> <span class="cm-variable">statements</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">@</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>行内代码：</span><strong><span>\Sexpr{R code}</span></strong></p></li></ul><p><img src="img\019_R语言实战\第22章\第22章 003.png" referrerpolicy="no-referrer" alt="第22章 003"></p><ul><li><p><span>输出文档：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">odfWeave</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">infile</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"salaryTemplate.odt"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">outfile</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"salaryReport.odf"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">odfWeave</span>(<span class="cm-variable">infile</span>, <span class="cm-variable">outfile</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><h4 id='word创建动态报告'><span>Word创建动态报告</span></h4><ul><li><p><span>使用</span><strong><span>R2wd</span></strong><span>直接将R语言的输出转为word。</span></p></li><li><p><span>结果分为两步：</span></p><ul><li><span>创建一个包含书签的Word文档，书签标记着你想在哪里放置R代码；</span></li><li><span>创建一个R脚本，这个脚本把结果插人Word文档书签所指的位置，然后保存完成的文档。</span></li></ul></li></ul><p><img src="img\019_R语言实战\第22章\第22章 004.png" referrerpolicy="no-referrer" alt="第22章 004"></p><h3 id='第23章-使用lattice进行高级绘图'><span>第23章 使用lattice进行高级绘图</span></h3><h4 id='lattice包'><span>lattice包</span></h4><ul><li><p><strong><span>lattice</span></strong><span>包提供了用于可视化单变量和多变量数据的一整套图形系统。许多用户转向使用</span><strong><span>lattice</span></strong><span>包是因为它能很容易地生成网格图形。</span></p></li><li><p><span>网格图形能够展示变量的分布或变量之间的关系，每幅图代表一个或多个变量的各个水平。</span></p></li><li><p><strong><span>lattice</span></strong><span>包在</span><strong><span>singer</span></strong><span>数据集中提供了身高和声部的数据：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 依据歌手voice.part，绘制身高的直方图</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">histogram</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span> <span class="cm-operator">|</span> <span class="cm-variable">voice.part</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"身高的直方图，通过voice.part分组"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"身高（英尺）"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第23章\第23章 001.png" alt="第23章 001" style="zoom:67%;" /></p><ul><li><p><span>lattice包提供了大量的函数来产生</span><strong><span>单因素图</span></strong><span>(点图、核密度图、直方图、条形图、箱线图 ),二元图(散点图、条形图、平行箱线图 ) 和</span><strong><span>多元图</span></strong><span>(3D图、散点图矩阵 )。 </span></p></li><li><p><span>每个高水平的函数图满足下面的格式：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">graph_function</span>(<span class="cm-variable">formula</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span>, <span class="cm-variable">options</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><strong><span>graph_function</span></strong><span>下面表中的一个函数；</span></p><p><strong><span>formula</span></strong><span>指定要展示的变量和任意的调节变量；</span></p><p><strong><span>data=</span></strong><span>指定数据框；</span>
<strong><span>options</span></strong><span>是用逗号分隔的参数，用来调整图形的内容、安排和注释。</span></p></li><li><p><span>高水平的图画函数通常的格式：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">y</span> <span class="cm-operator">~</span> <span class="cm-variable">x</span> <span class="cm-operator">|</span> <span class="cm-variable">A</span> <span class="cm-operator">*</span> <span class="cm-variable">B</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>其中竖线左侧的变量称为</span><strong><span>主要变量</span></strong><span> ( primary variable )，右边的变量称为</span><strong><span>调节变量</span></strong><span>(conditioningvariable )。主要变量将变量映射到每个面板的轴上。这里的</span><strong><span>y~x</span></strong><span>分别描述了在纵轴和横轴上的变量。对于单变量图，用</span><strong><span>~x</span></strong><span>代替y~x; 对于3D图，用</span><strong><span>z~x*y</span></strong><span>代替y~x; 对于多变量图(</span><strong><span>散点图矩阵或平行坐标曲线图</span></strong><span>） ，用数据框来代替y~x。</span></p><p><strong><span>~xlA</span></strong><span>表示因子A每个水平的数值变量x。</span><strong><span>y~xlA*B</span></strong><span>表示在给定因子A和B的水平后，数值变量y和x的关系。</span><strong><span>A~x</span></strong><span>表示在纵轴上的分类变量A和横轴上的数值变量x。~x表示数值型变量x。</span></p></li></ul><p><img src="img\019_R语言实战\第23章\第23章 002.png" referrerpolicy="no-referrer" alt="第23章 002"></p><ul><li><span>实例：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 实例</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mc</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">mtcars</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 挡位</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">gear</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">gear</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">4</span>,<span class="cm-number">5</span>),<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"3g"</span>,<span class="cm-string">"4g"</span>,<span class="cm-string">"5g"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 气缸数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mc</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">cyl</span>,<span class="cm-variable">levels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">4</span>,<span class="cm-number">6</span>,<span class="cm-number">8</span>),<span class="cm-variable">labels</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-string">"4c"</span>,<span class="cm-string">"6c"</span>,<span class="cm-string">"8c"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 核密度图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">densityplot</span>(<span class="cm-operator">~</span><span class="cm-variable">mpg</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"核密度图"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 根据气缸数分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">densityplot</span>(<span class="cm-operator">~</span><span class="cm-variable">mpg</span><span class="cm-operator">|</span><span class="cm-variable">cyl</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"根据气缸数划分的核密度图"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 箱线图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bwplot</span>(<span class="cm-variable">cyl</span><span class="cm-operator">~</span><span class="cm-variable">mpg</span><span class="cm-operator">|</span><span class="cm-variable">gear</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"通过气缸数和挡位的箱线图"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 散点图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">|</span><span class="cm-variable">cyl</span><span class="cm-operator">*</span><span class="cm-variable">gear</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"通过气缸数和挡位的散点图"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"汽车重量"</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 三维散点图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cloud</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">*</span><span class="cm-variable">qsec</span><span class="cm-operator">|</span><span class="cm-variable">cyl</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"通过气缸数的三维散点图"</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 点图</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dotplot</span>(<span class="cm-variable">cyl</span><span class="cm-operator">~</span><span class="cm-variable">mpg</span><span class="cm-operator">|</span><span class="cm-variable">gear</span>,<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"通过气缸数和挡位的点图"</span>,<span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>,<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">mc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 散点图矩阵</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">splom</span>(<span class="cm-variable">mc</span>[<span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">3</span>,<span class="cm-number">4</span>,<span class="cm-number">5</span>,<span class="cm-number">6</span>)],<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"对于mtcars数据的散点图矩阵"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 546px;"></div><div class="CodeMirror-gutters" style="display: none; height: 546px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第23章\第23章 003.png" referrerpolicy="no-referrer" alt="第23章 003"></th><th><img src="img\019_R语言实战\第23章\第23章 004.png" referrerpolicy="no-referrer" alt="第23章 004"></th></tr></thead><tbody><tr><td><img src="img\019_R语言实战\第23章\第23章 005.png" referrerpolicy="no-referrer" alt="第23章 005"></td><td><img src="img\019_R语言实战\第23章\第23章 006.png" referrerpolicy="no-referrer" alt="第23章 006"></td></tr><tr><td><img src="img\019_R语言实战\第23章\第23章 007.png" referrerpolicy="no-referrer" alt="第23章 007"></td><td><img src="img\019_R语言实战\第23章\第23章 008.png" referrerpolicy="no-referrer" alt="第23章 008"></td></tr><tr><td><img src="img\019_R语言实战\第23章\第23章 009.png" referrerpolicy="no-referrer" alt="第23章 009"></td><td>&nbsp;</td></tr></tbody></table></figure><ul><li><span>常见选项：</span></li></ul><p><img src="img\019_R语言实战\第23章\第23章 010.png" referrerpolicy="no-referrer" alt="第23章 010"><img src="img\019_R语言实战\第23章\第23章 011.png" referrerpolicy="no-referrer" alt="第23章 011"></p><ul><li><span>使用</span><strong><span>update()</span></strong><span>来修改图像：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mygraph</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">densityplot</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span><span class="cm-operator">|</span><span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">singer</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mygraph</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">newgraph</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">update</span>(<span class="cm-variable">mygraph</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">16</span>,<span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">.8</span>, <span class="cm-variable">jitter</span><span class="cm-operator">=</span><span class="cm-number">.05</span>, <span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">newgraph</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第23章\第23章 012.png" referrerpolicy="no-referrer" alt="第23章 012"></th><th><img src="img\019_R语言实战\第23章\第23章 013.png" referrerpolicy="no-referrer" alt="第23章 013"></th></tr></thead><tbody></tbody></table></figure><h4 id='调节变量'><span>调节变量</span></h4><ul><li><span>lattice绘图的一个强大特征是可以增加调节变量。</span></li><li><span>通常情况下，调节变量是因子。但是对于连续的变量应该如何操作呢?一种方法是使用R的</span><strong><span>cut()</span></strong><span>函数将连续的变量转化为离散的变量。另一种方法是，lattice包提供的函数可以将连续的变量转化为名为</span><strong><span>shingle</span></strong><span>的数据结构。具体来说，连续变量被分成一系列 (可能) 重叠的范围。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">myshingle</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">equal.count</span>(<span class="cm-variable">x</span>, <span class="cm-variable">number</span><span class="cm-operator">=</span><span class="cm-variable">n</span>, <span class="cm-variable">overlap</span><span class="cm-operator">=</span><span class="cm-variable">proportion</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><ul><li><p><span>将连续的变量x分成n个间隔，重叠比例是proportion，每个间隔里的观测值个数相同，并将其返回为变量myshingle (属于shingle类 )。</span></p></li><li><p><span>探索汽车每加仑汽油的行驶英里数与以发动机排量为条件的汽车重量之间的关系。因为发动机排量是一个连续的变量，首先把它转化为三水平的shingle变量：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 将排量转为三水平的shingle变量</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">disps</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">equal.count</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">disp</span>,<span class="cm-variable">number</span> <span class="cm-operator">=</span> <span class="cm-number">3</span>,<span class="cm-variable">overlap</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">|</span><span class="cm-variable">disps</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"通过排列划分的每加仑英里数和车重"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"车重"</span>, <span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"每加仑英里数"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-comment"># 1行3列，高：宽 = 1.5</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">layout</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">3</span>,<span class="cm-number">1</span>), <span class="cm-variable">aspect</span><span class="cm-operator">=</span><span class="cm-number">1.5</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li></ul><p><img src="img\019_R语言实战\第23章\第23章 014.png" alt="第23章 014" style="zoom:67%;" /></p><h4 id='面板函数'><span>面板函数</span></h4><ul><li><span>每一个高水平的画图函数都采用了默认的函数来绘制面板图。默认函数遵循命名规则panel.graph_function，其中graph_function指的是高水平的函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">|</span><span class="cm-variable">disps</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 等价于</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">|</span><span class="cm-variable">disps</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>, <span class="cm-variable">panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.xyplot</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><ul><li><span>自定义面板函数：添加回归线、地毯图和网格线</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 自定义面板函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">disps</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">equal.count</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">disp</span>, <span class="cm-variable">number</span><span class="cm-operator">=</span><span class="cm-number">3</span>, <span class="cm-variable">overlap</span><span class="cm-operator">=</span><span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mypanel</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.xyplot</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-number">19</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.rug</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.grid</span>(<span class="cm-variable">h</span><span class="cm-operator">=-</span><span class="cm-number">1</span>, <span class="cm-variable">v</span><span class="cm-operator">=-</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.lmline</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>, <span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">1</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">wt</span><span class="cm-operator">|</span><span class="cm-variable">disps</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">layout</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">3</span>, <span class="cm-number">1</span>),<span class="cm-variable">aspect</span><span class="cm-operator">=</span><span class="cm-number">1.5</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Miles per Gallon vs. Weight by Engine Displacement"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span> <span class="cm-operator">=</span> <span class="cm-string">"Weight"</span>,<span class="cm-variable">ylab</span> <span class="cm-operator">=</span> <span class="cm-string">"Miles per Gallon"</span>,<span class="cm-variable">panel</span> <span class="cm-operator">=</span> <span class="cm-variable">mypanel</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 015.png" alt="第23章 015" style="zoom:67%;" /></p><ul><li><span>添加拟合曲线、网格线、水平均值线：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">transmission</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Automatic"</span>, <span class="cm-string">"Manual"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">panel.smoother</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.grid</span>(<span class="cm-variable">h</span><span class="cm-operator">=-</span><span class="cm-number">1</span>, <span class="cm-variable">v</span><span class="cm-operator">=-</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.xyplot</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.loess</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">panel.abline</span>(<span class="cm-variable">h</span><span class="cm-operator">=</span><span class="cm-variable">mean</span>(<span class="cm-variable">y</span>), <span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"darkgreen"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># scales=list(cex=.8, col="red")：0.8倍大的红色刻度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">mpg</span><span class="cm-operator">~</span><span class="cm-variable">disp</span><span class="cm-operator">|</span><span class="cm-variable">transmission</span>,<span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">scales</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">.8</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"red"</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">panel</span><span class="cm-operator">=</span><span class="cm-variable">panel.smoother</span>,<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Displacement"</span>, <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-string">"Miles per Gallon"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"MPG vs Displacement by Transmission Type"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">sub</span> <span class="cm-operator">=</span> <span class="cm-string">"Dotted lines are Group Means"</span>, <span class="cm-variable">aspect</span><span class="cm-operator">=</span><span class="cm-number">1</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 016.png" alt="第23章 016" style="zoom:67%;" /></p><ul><li><span>可以使用</span><strong><span>scales=list(x=list(), y=list())</span></strong><span>单独指定横轴和纵轴的选项。</span></li></ul><h4 id='分组变量'><span>分组变量</span></h4><ul><li><strong><span>group=</span></strong><span>选项添加分组变量每个水平的图。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">transmission</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>, <span class="cm-number">1</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Automatic"</span>, <span class="cm-string">"Manual"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">densityplot</span>(<span class="cm-operator">~</span><span class="cm-variable">mpg</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">group</span><span class="cm-operator">=</span><span class="cm-variable">transmission</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"MPG Distribution by Transmission Type"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># atuo.key 添加图例</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Miles per Gallon"</span>,<span class="cm-variable">auto.key</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 017.png" alt="第23章 017" style="zoom:67%;" /></p><ul><li><p><span>自定义图例的位置：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># columns指定图例的列数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">auto.key</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">space</span><span class="cm-operator">=</span><span class="cm-string">"right"</span>, <span class="cm-variable">columns</span><span class="cm-operator">=</span><span class="cm-number">1</span>, <span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Transmission"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>带有分组变量和自定义图例的核密度估计：</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">transmission</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">factor</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">am</span>, <span class="cm-variable">levels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>,<span class="cm-number">1</span>),<span class="cm-variable">labels</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-string">"Automatic"</span>, <span class="cm-string">"Manual"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">colors</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"red"</span>, <span class="cm-string">"blue"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">lines</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">points</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">16</span>,<span class="cm-number">17</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">key.trans</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-builtin">list</span>(<span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Transmission"</span>,<span class="cm-variable">space</span><span class="cm-operator">=</span><span class="cm-string">"bottom"</span>, <span class="cm-variable">columns</span><span class="cm-operator">=</span><span class="cm-number">2</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">text</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">levels</span>(<span class="cm-variable">mtcars</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">transmission</span>)),<span class="cm-variable">points</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">points</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">colors</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">lines</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">colors</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-variable">lines</span>),<span class="cm-variable">cex.title</span><span class="cm-operator">=</span><span class="cm-number">1</span>, <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">.9</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">densityplot</span>(<span class="cm-operator">~</span><span class="cm-variable">mpg</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">mtcars</span>,<span class="cm-variable">group</span><span class="cm-operator">=</span><span class="cm-variable">transmission</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"MPG Distribution by Transmission Type"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Miles per Gallon"</span>,<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">points</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-variable">lines</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">colors</span>,<span class="cm-variable">lwd</span><span class="cm-operator">=</span><span class="cm-number">2</span>, <span class="cm-variable">jitter</span><span class="cm-operator">=</span><span class="cm-number">.005</span>,<span class="cm-variable">key</span><span class="cm-operator">=</span><span class="cm-variable">key.trans</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 018.png" alt="第23章 018" style="zoom:67%;" /></p><ul><li><span>这个数据描述了12种植物( Plant ) 在7种二氧化碳度 ( conc ) 下的二氧化碳吸收率( uptake )。6种植物来自魁北克 ( Quebec )，6种来自密西西比(Mississippi)。每个产地有3种植物在冷藏条件下研究，3种在非冷藏条件下研究。在这个例子中，Plant是分组变量，Type(魁北克/密西西比)和Treatment (冷藏/非冷藏)) 是调节变量。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 带有分组和调节变量以及自定义图例的xyplot函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">colors</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"darkgreen"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">symbols</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">12</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">linetype</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">key.species</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-builtin">list</span>(<span class="cm-variable">title</span><span class="cm-operator">=</span><span class="cm-string">"Plant"</span>, <span class="cm-variable">space</span><span class="cm-operator">=</span><span class="cm-string">"right"</span>,<span class="cm-variable">text</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">levels</span>(<span class="cm-variable">CO2</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">Plant</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">points</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">symbols</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">colors</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">xyplot</span>(<span class="cm-variable">uptake</span><span class="cm-operator">~</span><span class="cm-variable">conc</span><span class="cm-operator">|</span><span class="cm-variable">Type</span><span class="cm-operator">*</span><span class="cm-variable">Treatment</span>, <span class="cm-variable">data</span><span class="cm-operator">=</span><span class="cm-variable">CO2</span>,<span class="cm-variable">group</span><span class="cm-operator">=</span><span class="cm-variable">Plant</span>,<span class="cm-variable">type</span><span class="cm-operator">=</span><span class="cm-string">"o"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">pch</span><span class="cm-operator">=</span><span class="cm-variable">symbols</span>, <span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-variable">colors</span>, <span class="cm-variable">lty</span><span class="cm-operator">=</span><span class="cm-variable">linetype</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Carbon Dioxide Uptake</span><span class="cm-string-2">\n</span><span class="cm-string">in Grass Plants"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">ylab</span><span class="cm-operator">=</span><span class="cm-variable">expression</span>(<span class="cm-variable">paste</span>(<span class="cm-string">"Uptake "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">bgroup</span>(<span class="cm-string">"("</span>, <span class="cm-variable">italic</span>(<span class="cm-variable">frac</span>(<span class="cm-string">"umol"</span>,<span class="cm-string">"m"</span><span class="cm-operator">^</span><span class="cm-number">2</span>)), <span class="cm-string">")"</span>))),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-variable">expression</span>(<span class="cm-variable">paste</span>(<span class="cm-string">"Concentration "</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">bgroup</span>(<span class="cm-string">"("</span>, <span class="cm-variable">italic</span>(<span class="cm-variable">frac</span>(<span class="cm-variable">mL</span>,<span class="cm-variable">L</span>)), <span class="cm-string">")"</span>))),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-variable">sub</span> <span class="cm-operator">=</span> <span class="cm-string">"Grass Species: Echinochloa crus-galli"</span>,<span class="cm-variable">key</span><span class="cm-operator">=</span><span class="cm-variable">key.species</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 019.png" alt="第23章 019" style="zoom:67%;" /></p><h4 id='图像参数'><span>图像参数</span></h4><ul><li><span>lattice的图像设置不受</span><strong><span>par()</span></strong><span>的影响。</span></li><li><span>lattice的图像设置可以通过</span><strong><span>trellis.par.get()</span></strong><span>获取，并通过</span><strong><span>trellis.par.set()</span></strong><span>修改，使用</span><strong><span>show.settings()</span></strong><span>直观的展示图像的设置。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">show.settings</span>()</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 020.png" alt="第23章 020" style="zoom: 80%;" /></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">mysettings</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">trellis.par.get</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">names</span>(<span class="cm-variable">mysettings</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">1</span>] <span class="cm-string">"grid.pars"</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"fontsize"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"background"</span> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">4</span>] <span class="cm-string">"panel.background"</span> &nbsp;<span class="cm-string">"clip"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"add.line"</span> &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> [<span class="cm-number">7</span>] <span class="cm-string">"add.text"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"plot.polygon"</span> &nbsp; &nbsp; &nbsp;<span class="cm-string">"box.dot"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">10</span>] <span class="cm-string">"box.rectangle"</span> &nbsp; &nbsp; <span class="cm-string">"box.umbrella"</span> &nbsp; &nbsp; &nbsp;<span class="cm-string">"dot.line"</span> &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">13</span>] <span class="cm-string">"dot.symbol"</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"plot.line"</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"plot.symbol"</span> &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">16</span>] <span class="cm-string">"reference.line"</span> &nbsp; &nbsp;<span class="cm-string">"strip.background"</span> &nbsp;<span class="cm-string">"strip.shingle"</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">19</span>] <span class="cm-string">"strip.border"</span> &nbsp; &nbsp; &nbsp;<span class="cm-string">"superpose.line"</span> &nbsp; &nbsp;<span class="cm-string">"superpose.symbol"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">22</span>] <span class="cm-string">"superpose.polygon"</span> <span class="cm-string">"regions"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"shade.colors"</span> &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">25</span>] <span class="cm-string">"axis.line"</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"axis.text"</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-string">"axis.components"</span> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">28</span>] <span class="cm-string">"layout.heights"</span> &nbsp; &nbsp;<span class="cm-string">"layout.widths"</span> &nbsp; &nbsp; <span class="cm-string">"box.3d"</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">31</span>] <span class="cm-string">"par.title.text"</span> &nbsp; &nbsp;<span class="cm-string">"par.xlab.text"</span> &nbsp; &nbsp; <span class="cm-string">"par.ylab.text"</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">34</span>] <span class="cm-string">"par.zlab.text"</span> &nbsp; &nbsp; <span class="cm-string">"par.main.text"</span> &nbsp; &nbsp; <span class="cm-string">"par.sub.text"</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 364px;"></div><div class="CodeMirror-gutters" style="display: none; height: 364px;"></div></div></div></pre><ul><li><span>使用叠加点来改变默认符号 ( 即包含一个组变量的图中的点)，分组变量的每个水平使用的符号是开环 (pch=1)。七个水平得到定义之后，符号会再循环。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 使用叠加点来改变默认符号</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mysettings</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">superpose.symbol</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改变默认值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mysettings</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">superpose.symbol</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">pch</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trellis.par.set</span>(<span class="cm-variable">mysettings</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">show.settings</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 021.png" alt="第23章 021" style="zoom:80%;" /></p><h4 id='自定义图形条带'><span>自定义图形条带</span></h4><ul><li><span>面板条带默认的背景是：第一个调节变量是桃红色，第二个调节变量是浅绿色，第三个调节变量是浅蓝色。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">histogram</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span> <span class="cm-operator">|</span> <span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Distribution of Heights by Voice Pitch"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Height (inches)"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">histogram</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span> <span class="cm-operator">|</span> <span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">strip</span> <span class="cm-operator">=</span> <span class="cm-variable">strip.custom</span>(<span class="cm-variable">bg</span><span class="cm-operator">=</span><span class="cm-string">"lightgrey"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">par.strip.text</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">col</span><span class="cm-operator">=</span><span class="cm-string">"black"</span>, <span class="cm-variable">cex</span><span class="cm-operator">=</span><span class="cm-number">.8</span>, <span class="cm-variable">font</span><span class="cm-operator">=</span><span class="cm-number">3</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span><span class="cm-operator">=</span><span class="cm-string">"Distribution of Heights by Voice Pitch"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">xlab</span><span class="cm-operator">=</span><span class="cm-string">"Height (inches)"</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><figure><table><thead><tr><th><img src="img\019_R语言实战\第23章\第23章 022.png" referrerpolicy="no-referrer" alt="第23章 022"></th><th><img src="img\019_R语言实战\第23章\第23章 023.png" referrerpolicy="no-referrer" alt="第23章 023"></th></tr></thead><tbody></tbody></table></figure><ul><li><p><strong><span>option=</span></strong><span>选项用来指定设定条带外观的函数。尽管我们可以从头写一个函数(参见?strip.default )，但是改变一些设置并使用其他项的默认值更加简单。</span><strong><span>strip.custom()</span></strong><span>函数可以让我们实现这个功能。</span><strong><span>bg</span></strong><span>选项控制了背景颜色，</span><strong><span>par.strip.text</span></strong><span>允许我们控制条带文本的外观。col和cex控制文本的颜色和大小。font选项可以分别取数值1、2、3和4，代表正常字体、粗体、斜体和粗斜体。</span></p></li><li><p><span>可以使用上一小节的方法：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mysettings</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">trellis.par.get</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mysettings</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">strip.background</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">col</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">c</span>(<span class="cm-string">"lightgrey"</span>, <span class="cm-string">"lightgreen"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">trellis.par.set</span>(<span class="cm-variable">mysettings</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre><p><span>设定了条带的背景，其中第一个条件变量是浅灰色，第二个是浅绿色。</span></p></li></ul><h4 id='页面布局'><span>页面布局</span></h4><ul><li><p><span>最简单的方法是把lattice图形保存成对象并使用带有</span><strong><span>split=</span></strong><span>或</span><strong><span>position=</span></strong><span>选项的</span><strong><span>plot()</span></strong><span>函数来保存成单个图片。</span></p></li><li><p><strong><span>split</span></strong><span>选项将一个页面分成指定数量的行和列,并把图放到结果矩阵的特定单元格中。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">split</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">nx</span>, <span class="cm-variable">ny</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>包括nx乘ny个图形的正规数组中，把当前图形放在x，y的位置。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">graph1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">histogram</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span> <span class="cm-operator">|</span> <span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Heights of Choral Singers by Voice Part"</span> )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">graph2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">bwplot</span>(<span class="cm-variable">height</span><span class="cm-operator">~</span><span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 1列2行的布局</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># （1，1）位置的图形</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">graph1</span>,<span class="cm-variable">split</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># （1，2）位置的图形，newpage = F：不产生新的图形</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">graph2</span>,<span class="cm-variable">split</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span>(<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>),<span class="cm-variable">newpage</span> <span class="cm-operator">=</span> <span class="cm-variable">F</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 024.png" alt="第23章 024" style="zoom:67%;" /></p><ul><li><p><span>使用</span><strong><span>position=</span></strong><span>选项更好地控制尺寸和位置。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">position</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-variable">xmin</span>, <span class="cm-variable">ymin</span>, <span class="cm-variable">xmax</span>, <span class="cm-variable">ymax</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p><span>页面的坐标系是x轴和y轴都从0到1这里的矩形，原点在左下角的(0,0)。</span></p></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">graph1</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">histogram</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span> <span class="cm-operator">|</span> <span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">main</span> <span class="cm-operator">=</span> <span class="cm-string">"Heights of Choral Singers by Voice Part"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">graph2</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">bwplot</span>(<span class="cm-variable">height</span><span class="cm-operator">~</span><span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">graph1</span>, <span class="cm-variable">position</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>, <span class="cm-number">.3</span>, <span class="cm-number">1</span>, <span class="cm-number">1</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plot</span>(<span class="cm-variable">graph2</span>, <span class="cm-variable">position</span><span class="cm-operator">=</span><span class="cm-variable">c</span>(<span class="cm-number">0</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">.3</span>), <span class="cm-variable">newpage</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p><img src="img\019_R语言实战\第23章\第23章 025.png" alt="第23章 025" style="zoom:67%;" /></p><ul><li><p><span>调整面板的顺序：使用</span><strong><span>index.cond</span></strong><span>参数。有两个调节变量的时候，列表中包含两个向量。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">levels</span>(<span class="cm-variable">singer</span><span class="cm-operator cm-dollar">$</span><span class="cm-variable">voice.part</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"Bass 2"</span> &nbsp; &nbsp;<span class="cm-string">"Bass 1"</span> &nbsp; &nbsp;<span class="cm-string">"Tenor 2"</span> &nbsp; <span class="cm-string">"Tenor 1"</span> &nbsp; <span class="cm-string">"Alto 2"</span> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">6</span>] <span class="cm-string">"Alto 1"</span> &nbsp; &nbsp;<span class="cm-string">"Soprano 2"</span> <span class="cm-string">"Soprano 1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">histogram</span>(<span class="cm-operator">~</span><span class="cm-variable">height</span> <span class="cm-operator">|</span> <span class="cm-variable">voice.part</span>, <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">singer</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">index.cond</span><span class="cm-operator">=</span><span class="cm-builtin">list</span>(<span class="cm-variable">c</span>(<span class="cm-number">2</span>, <span class="cm-number">4</span>, <span class="cm-number">6</span>, <span class="cm-number">8</span>, <span class="cm-number">1</span>, <span class="cm-number">3</span>, <span class="cm-number">5</span>, <span class="cm-number">7</span>))) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre></li></ul><h2 id='附录'><span>附录</span></h2><h3 id='附录a图形用户界面'><span>附录A：图形用户界面</span></h3><ul><li><span>代码编译器：</span></li></ul><p><img src="img\019_R语言实战\附录\附录A 001.png" referrerpolicy="no-referrer" alt="附录A 001"></p><ul><li><span>GUI：</span></li></ul><p><img src="img\019_R语言实战\附录\附录A 002.png" referrerpolicy="no-referrer" alt="附录A 002"></p><h3 id='附录b自定义启动环境'><span>附录B：自定义启动环境</span></h3><ul><li><span>可以通过站点初始化文件 ( Rprofile.site)或目录初始化文件 (.Rprofile) 自定义R的环境。R在启动时会执行这几个文本文件中的代码。</span></li><li><span>在启动时，R会加载</span><strong><span>R_HOME/etc</span></strong><span>目录中的</span><strong><span>Rprofile.site</span></strong><span>文件，其中</span><strong><span>R_HOME</span></strong><span>是一个环境变量。然后R会在当前目录中寻找</span><strong><span>.Rprofile</span></strong><span>文件。如果R没有在当前目录中找到这个文件，它就会到用户的主目录中去寻找。可以通过</span><strong><span>Sys.getenv(&quot;R_HOME&quot;)</span></strong><span>、</span><strong><span>Sys.getenv(&quot;HOME&quot;)</span></strong><span>和</span><strong><span>getwd()</span></strong><span>来分别确认R_HOME、HOME和当前工作目录。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">Sys.getenv</span>(<span class="cm-string">"R_HOME"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"D:/Program Files/R/R-4.2.2"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">Sys.getenv</span>(<span class="cm-string">"HOME"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"C:/Users/SYWS/Documents"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">&gt;</span> <span class="cm-variable">getwd</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[<span class="cm-number">1</span>] <span class="cm-string">"D:/Program Files/R/RWorkspace4.2.2"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><ul><li><span>可以在这些文件中放入两个特殊函数。每个R会话开始时都会执行</span><strong><span>.First()</span></strong><span>函数，会话结束时都会执行</span><strong><span>.Last()</span></strong><span>函数。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">papersize</span><span class="cm-operator">=</span><span class="cm-string">"a4"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">editor</span><span class="cm-operator">=</span><span class="cm-string">"notepad"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">tab.width</span> <span class="cm-operator">=</span> <span class="cm-number">2</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">width</span> <span class="cm-operator">=</span> <span class="cm-number">130</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">digits</span><span class="cm-operator">=</span><span class="cm-number">4</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">stringsAsFactors</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">show.signif.stars</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">grDevices</span><span class="cm-operator">::</span><span class="cm-variable">windows.options</span>(<span class="cm-variable">record</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">prompt</span><span class="cm-operator">=</span><span class="cm-string">"&gt; "</span>) <span class="cm-comment"># 交互提示符</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">options</span>(<span class="cm-variable">continue</span><span class="cm-operator">=</span><span class="cm-string">"+ "</span>) <span class="cm-comment"># 交互提示符</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">.libPaths</span>(<span class="cm-string">"C:/my_R_library"</span>) <span class="cm-comment"># 包的存放路径</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">local</span>({<span class="cm-variable">r</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">getOption</span>(<span class="cm-string">"repos"</span>) <span class="cm-comment"># CRAN镜像</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">r</span>[<span class="cm-string">"CRAN"</span>] <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-string">"http://cran.case.edu/"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">options</span>(<span class="cm-variable">repos</span><span class="cm-operator">=</span><span class="cm-variable">r</span>)})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">.First</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(){ <span class="cm-comment"># 启动函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">library</span>(<span class="cm-variable">lattice</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">library</span>(<span class="cm-variable">Hmisc</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">source</span>(<span class="cm-string">"C:/mydir/myfunctions.R"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">cat</span>(<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">Welcome at"</span>, <span class="cm-variable">date</span>(), <span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">.Last</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-keyword">function</span>(){ <span class="cm-comment"># 结束函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">cat</span>(<span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">Goodbye at "</span>, <span class="cm-variable">date</span>(), <span class="cm-string">"</span><span class="cm-string-2">\n</span><span class="cm-string">"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><ul><li><span>设置</span><strong><span>.libPaths</span></strong><span>值可以为R目录树之外的扩展包创建一个本地库。这可以用于在升级时保持某个扩展包不变。</span></li><li><strong><span>.First()</span></strong><span> 函数中可以加载你常用的库，也可以加载保存自己编写的常用函数的源代码文件。</span></li><li><strong><span>.Last()</span></strong><span> 函数中可以执行某些清理操作，包括保存命令历史记录、保存程序输出和保存数据文件等。</span></li><li><span>实例：设置启动时的工作目录，默认加载ggolot2包</span></li></ul><h3 id='附录c从r中导出数据'><span>附录C：从R中导出数据</span></h3><ul><li><p><strong><span>write.table()</span></strong><span>可以将R对象输出到符号分隔文件中。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write.table</span>(<span class="cm-variable">x</span>, <span class="cm-variable">outfile</span>, <span class="cm-variable">sep</span><span class="cm-operator">=</span><span class="cm-variable">delimiter</span>, <span class="cm-builtin">quote</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">na</span><span class="cm-operator">=</span><span class="cm-string">"NA"</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre></li><li><p><strong><span>xlsx</span></strong><span>包中的</span><strong><span>write.xlsx()</span></strong><span>可以将R输出到Excel文件中。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">xlsx</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write.xlsx</span>(<span class="cm-variable">x</span>, <span class="cm-variable">outfile</span>, <span class="cm-variable">col.Names</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">row.names</span><span class="cm-operator">=</span><span class="cm-variable">TRUE</span>, <span class="cm-variable">sheetName</span><span class="cm-operator">=</span><span class="cm-string">"Sheet 1"</span>, <span class="cm-variable">append</span><span class="cm-operator">=</span><span class="cm-variable">FALSE</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><strong><span>foreign</span></strong><span>包中的</span><strong><span>write.foreign()</span></strong><span>可以将数据框导出到外部统计软件。这会创建两个文件个是保存数据的文本文件，另一个是指导外部统计软件导人数据的编码文件。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write.foreign</span>(<span class="cm-variable">dataframe</span>, <span class="cm-variable">datafile</span>, <span class="cm-variable">codefile</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-variable">package</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">foreign</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">write.foreign</span>(<span class="cm-variable">mydata</span>, <span class="cm-string">"mydata.txt"</span>, <span class="cm-string">"mycode.sps"</span>, <span class="cm-variable">package</span><span class="cm-operator">=</span><span class="cm-string">"SPSS"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><span>将mydata数据框导出到当前目录的纯文本文件mydata.txt中，同时还会生成一个用于读取该文本文件的SPSS程序mycode.sps。</span></p></li></ul><h3 id='附录dr中的矩阵运算'><span>附录D：R中的矩阵运算</span></h3><ul><li><span>A和B是矩阵，x和b是向量，k是标量。</span></li></ul><p><img src="img\019_R语言实战\附录\附录D 003.png" referrerpolicy="no-referrer" alt="附录D 003"><img src="img\019_R语言实战\附录\附录D 004.png" referrerpolicy="no-referrer" alt="附录D 004"><img src="img\019_R语言实战\附录\附录D 005.png" referrerpolicy="no-referrer" alt="附录D 005"></p><h3 id='附录e本书使用的扩展包'><span>附录E：本书使用的扩展包</span></h3><h3 id='附录f处理大数据集'><span>附录F：处理大数据集</span></h3><h4 id='高效程序设计'><span>高效程序设计</span></h4><ul><li><span>尽可能地做</span><strong><span>向量化计算</span></strong><span>。用R内建的函数来处理向量、矩阵和列表(例如ifelsecolMeans和rowSums )，而且要尽量避免使用循环 ( for和while )。</span></li><li><span>用矩阵，而不是数据框( 矩阵更轻量级 )。</span></li><li><span>在使用</span><strong><span>read.table()</span></strong><span>系列函数将外部数据读取到数据框中时，显式地指定colclasses和nrows，设置comment.char = &quot;&quot;，并且用&quot;NULL&quot;标明不需要的列。这可降低内存使用量，显著地提高处理速度。在将外部数据读入矩阵时，可以用scan() 函数。</span></li><li><span>正确地初始化对象的大小，而不是通过附加值增大较小的对象。</span></li><li><span>并行化处理重复、独立和数值密集的任务。</span></li><li><span>在完整的数据集上运行程序之前，先用数据的子集测试程序，以便优化代码并消除bug。</span></li><li><span>删除临时对象和不再需要的对象。调用</span><strong><span>rm(list=ls())</span></strong><span>会从内存中删除所有的对象，得到一个干净的环境。要删除特定的对象，可以用rm(obiect)。删除较大对象之后，调用</span><strong><span>gc()</span></strong><span>会初始化垃圾回收，保证从内存中清除这些对象。</span></li><li><span>测试程序中每个函数所消耗的时间。用</span><strong><span>Rprof()</span></strong><span>和</span><strong><span>summaryRprof()</span></strong><span> 函数就可以完成这个测试。</span><strong><span>system.time()</span></strong><span>函数也能用得上。</span><strong><span>profr</span></strong><span>和</span><strong><span>prooftools</span></strong><span>包提供用于分析测试结果的函数。</span></li></ul><h4 id='在内存之外存储数据'><span>在内存之外存储数据</span></h4><ul><li><span>主要的方法是将数据存储在外部数据库中，或是硬盘上的二进制文件中，然后再按需要访问其中的某个部分。</span></li></ul><p><img src="img\019_R语言实战\附录\附录F 006.png" referrerpolicy="no-referrer" alt="附录F 006"></p><h4 id='用于大数据的分析包'><span>用于大数据的分析包</span></h4><ul><li><strong><span>biglm</span></strong><span>和</span><strong><span>speedglm</span></strong><span>包能以内存高效的方式实现大型数据集的线性模型拟合和广义线性模型拟合。</span></li><li><span>有好几个包是用来分析</span><strong><span>bigmemory</span></strong><span>包生成的大型矩阵的。</span><strong><span>biganalytics</span></strong><span>包提供了K均值聚类、列统计和一个biglm的封装。</span><strong><span>bigtabulate</span></strong><span>包提供了</span><strong><span>table()</span></strong><span> 、</span><strong><span>split()</span></strong><span> 和</span><strong><span>tapply()</span></strong><span> 功能；</span><strong><span>bigalgebra</span></strong><span>包提供了高级的线性代数函数。</span></li><li><strong><span>biglars</span></strong><span>包跟</span><strong><span>ff</span></strong><span>配合使用，为在内存中无法放置的大数据提供了最小角回归、lasso和逐步回归分析。</span></li><li><strong><span>data.table</span></strong><span>包提供了</span><strong><span>data.frame</span></strong><span>的增强版，包括更快的聚集，更快的有序、重叠范围联接，以及更快根据参考组(无副本 ) 进行列相加、修改和删除。我们可以使用带有大型数据集的data.table结构(例如，内存100GB )，它与任意期望得到数据框的R函数都兼容。</span></li></ul><h4 id='超大数据集的全面解决方案'><span>超大数据集的全面解决方案</span></h4><ul><li><span>至少有五个项目旨在方便地使用R来处理</span><strong><span>TB级</span></strong><span>数据集，其中有三个是免费开源的 (</span><strong><span>RHIPE</span></strong><span>、</span><strong><span>RHadoop</span></strong><span>和</span><strong><span>pbdr</span></strong><span> )，另外两个是商业产品 ( </span><strong><span>Revolution R Enterprise</span></strong><span>、</span><strong><span>RevoScaleR</span></strong><span>和</span><strong><span>Oracle REnterprise</span></strong><span> )。</span></li><li><strong><span>RHIPE</span></strong><span>包( </span><a href='http://www.datadr.org' target='_blank' class='url'>http://www.datadr.org</a><span> ) 提供了将R和Hadoop (一个基于Java的免费软件架构，用于在分布式环境下处理大数据)深度融合的编程环境。该包的作者还开发了其他的软件，提供了对于非常大的数据集进行“分裂与重组”和数据可视化方法。</span></li><li><strong><span>RHadoop</span></strong><span>项目提供了R包封装的集合，用于管理和分析Hadoop上的数据。rmr包在R内部提供了Hadoop的MapReduce功能，rhdfs和rhbase包支持HDFS文件系统和HBASE数据存储上的访问。维基 (</span><a href='https://github.com/RevolutionAnalvtics/RHadoop/wiki' target='_blank' class='url'>https://github.com/RevolutionAnalvtics/RHadoop/wiki</a><span>)上个绍了该项目并提供了相关教程。需要注意的是RHadoop包必须从GitHub上而不是CRAN上安装。</span></li><li><strong><span>pbdR</span></strong><span>(programming with big data in R)项目通过一个简单的界面到达可扩展、高性能的库(如MPI、ScaLAPACK和netCDF4 )使其能够在R中进行高级别的数据并行运算。pbdR软件在大规模计算集群上还支持单线程多数据(SPMD)模型。可以通过访问</span><a href='http://r-pbd.org/' target='_blank' class='url'>http://r-pbd.org/</a><span>了解详细信息。</span></li><li><strong><span>Revolution R Enterprise</span></strong><span> ( </span><a href='http://www.revolutionanalytics.com' target='_blank' class='url'>http://www.revolutionanalytics.com</a><span> )是R的一个商业版本，包括一个支持可扩展数据分析和高性能计算的包RevoscaleR。RevoscaleR使用二进制XDF格式的数据文件从磁盘到内存优化流数据，并提供了一系列常见的大数据统计分析算法。你可以执行数据管理任务，并在TB级数据集上获得汇总统计、交叉表格、相关性和协方差、非参数统计、线性和广义线性回归、逐步回归、K-means聚类以及分类和回归树。此外，Revolution R Enterprise可以和Hadoop( 通过RHadoop包)及IBM的Netezza (通过IBM PureData分析系统的插件)集成。</span></li><li><strong><span>Oracle R Enterprise</span></strong><span> ( </span><a href='http://www.oracle.com' target='_blank' class='url'>http://www.oracle.com</a><span>)是一种商业产品，可用于使用R环境操作存储在甲骨文数据库和Hadoop上的大规模数据集。Oracle R Enterprise是甲骨文高级分析的一部分，需要安装在甲骨文的企业版数据库上。几乎R的所有功能，包括数以千计的贡献包，都可以使用Oracle R Enterprise界面应用于TB级的数据问题。这是一个相对昂贵但全面的解决方案，主要吸引财力雄厚的大企业。</span></li></ul><h3 id='附录g-更新r'><span>附录G 更新R</span></h3><h4 id='自动安装win'><span>自动安装(Win)</span></h4><ul><li><span>可以使用installr包来更新R安装过程。</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">install.packages</span>(<span class="cm-string">"installr"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">library</span>(<span class="cm-variable">installr</span>) </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><h4 id='手动安装win和mac'><span>手动安装(Win和MAC)</span></h4><ul><li><p><span>在下载新版的R的时候，原来安装的包会全部不能使用。</span></p></li><li><p><span>用</span><strong><span>installed.packages()</span></strong><span> 函数保存R目录树之外的扩展包清单，然后根据这个清单用instal.packages() 函数将最新版的扩展包下载和安装到新版R中。</span></p></li><li><p><span>步骤：</span></p><ul><li><span>如果有自定义的Rprofile.site文件，将其保存到R目录树之外。</span></li><li><span>启动当前版本的R，然后执行下面的命令：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">oldip</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">installed.packages</span>()[,<span class="cm-number">1</span>]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">save</span>(<span class="cm-variable">oldip</span>, <span class="cm-variable">file</span><span class="cm-operator">=</span><span class="cm-string">"path/installedPackages.Rdata"</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><ul><li><span>下载安装新版的R。</span></li><li><span>如果在步骤(1)保存了自定义的Rprofile.site文件，现在把它复制到新的R中。</span></li><li><span>启动新版本的R，然后执行下面的命令：</span></li></ul><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="r"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="r"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.0035px; left: 3.99304px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">load</span>(<span class="cm-string">"path/installedPackages.Rdata"</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">newip</span> <span class="cm-operator cm-arrow">&lt;-</span> <span class="cm-variable">installed.packages</span>()[,<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-variable">setdiff</span>(<span class="cm-variable">oldip</span>, <span class="cm-variable">newip</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">install.packages</span>(<span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><ul><li><span>删除旧版本( 可选 )。</span></li></ul></li></ul><h4 id='更新rlinux'><span>更新R(Linux)</span></h4></div></div>
</body>
</html>